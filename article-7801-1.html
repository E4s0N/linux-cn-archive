<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>你必须了解的基础的 Linux 网络命令 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="你必须了解的基础的 Linux 网络命令"><meta property="og:description" content="有抱负的 Linux 系统管理员和 Linux 狂热者必须知道的、最重要的、而且基础的 Linux 网络命令合集。"><meta property="og:type" content="article"><meta property="og:url" content="/article-7801-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-09-23T09:40:00+00:00"><meta property="article:modified_time" content="2016-09-23T09:40:00+00:00"><meta itemprop=name content="你必须了解的基础的 Linux 网络命令"><meta itemprop=description content="有抱负的 Linux 系统管理员和 Linux 狂热者必须知道的、最重要的、而且基础的 Linux 网络命令合集。"><meta itemprop=datePublished content="2016-09-23T09:40:00+00:00"><meta itemprop=dateModified content="2016-09-23T09:40:00+00:00"><meta itemprop=wordCount content="451"><meta itemprop=keywords content="路由,网络,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>你必须了解的基础的 Linux 网络命令</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-09-23T09:40:00Z>September 23, 2016</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201609/23/104804jo338oaf2jf23a2a.jpg alt></p><blockquote><p>摘要：有抱负的 Linux 系统管理员和 Linux 狂热者必须知道的、最重要的、而且基础的 Linux 网络命令合集。</p></blockquote><p>在 It’s FOSS 我们并非每天都谈论 Linux 的“命令行方面”。基本上，我更专注于 Linux 的桌面端。但你们读者中的一些人在内部调查（仅面向 It&rsquo;s FOSS newsletter 订阅者）中指出，你们也想学些命令行技巧。速查表也受大部分读者所喜欢和支持。</p><p>为此，我编辑了一个 Linux 中基础网络命令的列表。它并不是一个教你如何使用这些命令的教程，而是一个命令合集和他们的简短解释。所以，如果你已经使用过这些命令，你可以用它来快速记住命令。</p><p>你可以把这个网页添加为书签以便快速查阅，或输出一个 PDF 版本以便离线使用。</p><p>当我还是通信系统工程专业的学生的时候我就有这个 Linux 网络命令的列表了。它帮助我在计算机网络课程获得了高分。希望它也能以同样的方式帮助你。</p><h3 id=linux-基础网络命令列表>Linux 基础网络命令列表</h3><p>我在计算机网络课程上使用 FreeBSD，不过这些 UNIX 命令应该也能在 Linux 上同样工作。</p><h4 id=连通性>连通性</h4><ul><li><code>ping &lt;host></code>：发送 ICMP echo 消息（一个包）到主机。这可能会不停地发送直到你按下 <code>Control-C</code>。Ping 的通意味着一个包从你的机器通过 ICMP 发送出去，并在 IP 层回显。Ping 告诉你另一个主机是否在运行。</li><li><code>telnet &lt;host> [port]</code>：与主机在指定的端口通信。默认的 telnet 端口是 23。按 Control-] 以退出 telnet。其它一些常用的端口是：<ul><li>7 —— echo 端口</li><li>25 —— SMTP，用于发送邮件</li><li>79 —— Finger (LCTT 译注：<a href=https://en.wikipedia.org/wiki/Finger_protocol>维基百科 - Finger protocal</a>，不过举例 Finger 恐怕不合时宜，倒不如试试 80？），提供该网络下其它用户的信息。</li></ul></li></ul><h4 id=arp>ARP</h4><p>ARP 用于将 IP 地址转换为以太网地址。root 用户可以添加和删除 ARP 记录。当 ARP 记录被污染或者错误时，删除它们会有用。root 显式添加的 ARP 记录是永久的 —— 代理设置的也是。ARP 表保存在内核中，动态地被操作。ARP 记录会被缓存，通常在 20 分钟后失效并被删除。</p><ul><li><code>arp -a</code>：打印 ARP 表。</li><li><code>arp -s &lt;ip_address> &lt;mac_address> [pub]</code>：添加一条记录到表中。</li><li><code>arp -a -d</code>：删除 ARP 表中的所有记录。</li></ul><h4 id=路由>路由</h4><ul><li><code>netstat -r</code>：打印路由表。路由表保存在内核中，用于 IP 层把包路由到非本地网络。</li><li><code>route add</code>：route 命令用于向路由表添加静态（手动指定而非动态）路由路径。所有从该 PC 到那个 IP/子网的流量都会经由指定的网关 IP。它也可以用来设置一个默认路由。例如，在 IP/子网处使用 0.0.0.0，就可以发送所有包到特定的网关。</li><li><code>routed</code>：控制动态路由的 BSD 守护程序。开机时启动。它运行 RIP 路由协议。只有 root 用户可用。没有 root 权限你不能运行它。</li><li><code>gated</code>：gated 是另一个使用 RIP 协议的路由守护进程。它同时支持 OSPF、EGP 和 RIP 协议。只有 root 用户可用。</li><li><code>traceroute</code>：用于跟踪 IP 包的路由。它每次发送包时都把跳数加 1，从而使得从源地址到目的地之间的所有网关都会返回消息。</li><li><code>netstat -rnf inet</code>：显示 IPv4 的路由表。</li><li><code>sysctl net.inet.ip.forwarding=1</code>：启用包转发（把主机变为路由器）。</li><li><code>route add|delete [-net|-host] &lt;destination> &lt;gateway></code>：（如 <code>route add 192.168.20.0/24 192.168.30.4</code>）添加一条路由。</li><li><code>route flush</code>：删除所有路由。</li><li><code>route add -net 0.0.0.0 192.168.10.2</code>：添加一条默认路由。</li><li><code>routed -Pripv2 -Pno_rdisc -d [-s|-q]</code>：运行 routed 守护进程，使用 RIPv2 协议，不启用 ICMP 自动发现，在前台运行，供给模式或安静模式。</li><li><code>route add 224.0.0.0/4 127.0.0.1</code>：为本地地址定义多播路由。（LCTT 译注：原文存疑）</li><li><code>rtquery -n &lt;host></code>（LCTT 译注：增加了 host 参数）：查询指定主机上的 RIP 守护进程（手动更新路由表）。</li></ul><h4 id=其它>其它</h4><ul><li><code>nslookup</code>：向 DNS 服务器查询，将 IP 转为名称，或反之。例如，<code>nslookup facebook.com</code> 会给出 facebook.com 的 IP。</li><li><code>ftp &lt;host> [port]</code>（LCTT 译注：原文中 water 应是笔误）：传输文件到指定主机。通常可以使用 登录名 &ldquo;anonymous&rdquo; , 密码 &ldquo;guest&rdquo; 来登录。</li><li><code>rlogin -l &lt;host></code>（LCTT 译注：添加了 host 参数）：使用类似 telnet 的虚拟终端登录到主机。</li></ul><h4 id=重要文件>重要文件</h4><ul><li><code>/etc/hosts</code>：域名到 IP 地址的映射。</li><li><code>/etc/networks</code>：网络名称到 IP 地址的映射。</li><li><code>/etc/protocols</code>：协议名称到协议编号的映射。</li><li><code>/etc/services</code>：TCP/UDP 服务名称到端口号的映射。</li></ul><h4 id=工具和网络性能分析>工具和网络性能分析</h4><ul><li><code>ifconfig &lt;interface> &lt;address> [up]</code>：启动接口。</li><li><code>ifconfig &lt;interface> [down|delete]</code>：停止接口。</li><li><code>ethereal &</code>：在后台打开 <code>ethereal</code> 而非前台。</li><li><code>tcpdump -i -vvv</code>：抓取和分析包的工具。</li><li><code>netstat -w [seconds] -I [interface]</code>：显示网络设置和统计信息。</li><li><code>udpmt -p [port] -s [bytes] target_host</code>：发送 UDP 流量。</li><li><code>udptarget -p [port]</code>：接收 UDP 流量。</li><li><code>tcpmt -p [port] -s [bytes] target_host</code>：发送 TCP 流量。</li><li><code>tcptarget -p [port]</code>：接收 TCP 流量。</li></ul><h4 id=交换机>交换机</h4><ul><li><code>ifconfig sl0 srcIP dstIP</code>：配置一个串行接口（在此前先执行 <code>slattach -l /dev/ttyd0</code>，此后执行 <code>sysctl net.inet.ip.forwarding=1</code>）</li><li><code>telnet 192.168.0.254</code>：从子网中的一台主机访问交换机。</li><li><code>sh ru</code> 或 <code>show running-configuration</code>：查看当前配置。</li><li><code>configure terminal</code>：进入配置模式。</li><li><code>exit</code>：退出当前模式。（LCTT 译注：原文存疑）</li></ul><h4 id=vlan>VLAN</h4><ul><li><code>vlan n</code>：创建一个 ID 为 n 的 VLAN。</li><li><code>no vlan N</code>：删除 ID 为 n 的 VLAN。</li><li><code>untagged Y</code>：添加端口 Y 到 VLAN n。</li><li><code>ifconfig vlan0 create</code>：创建 vlan0 接口。</li><li><code>ifconfig vlan0 vlan_ID vlandev em0</code>：把 em0 加入到 vlan0 接口（LCTT 译注：原文存疑），并设置标记为 ID。</li><li><code>ifconfig vlan0 [up]</code>：启用虚拟接口。</li><li><code>tagged Y</code>：为当前 VLAN 的端口 Y 添加标记帧支持。</li></ul><h4 id=udptcp>UDP/TCP</h4><ul><li><code>socklab udp</code>：使用 UDP 协议运行 <code>socklab</code>。</li><li><code>sock</code>：创建一个 UDP 套接字，等效于输入 <code>sock udp</code> 和 <code>bind</code>。</li><li><code>sendto &lt;Socket ID> &lt;hostname> &lt;port #></code>：发送数据包。</li><li><code>recvfrom &lt;Socket ID> &lt;byte #></code>：从套接字接收数据。</li><li><code>socklab tcp</code>：使用 TCP 协议运行 <code>socklab</code>。</li><li><code>passive</code>：创建一个被动模式的套接字，等效于 <code>socklab</code>，<code>sock tcp</code>，<code>bind</code>，<code>listen</code>。</li><li><code>accept</code>：接受进来的连接（可以在发起进来的连接之前或之后执行）。</li><li><code>connect &lt;hostname> &lt;port #></code>：等效于 <code>socklab</code>，<code>sock tcp</code>，<code>bind</code>，<code>connect</code>。</li><li><code>close</code>：关闭连接。</li><li><code>read &lt;byte #></code>：从套接字中读取 n 字节。</li><li><code>write</code>：（例如，<code>write ciao</code>、<code>write #10</code>）向套接字写入 &ldquo;ciao&rdquo; 或 10 个字节。</li></ul><h4 id=nat防火墙>NAT/防火墙</h4><ul><li><code>rm /etc/resolv.conf</code>：禁止地址解析，保证你的过滤和防火墙规则正确工作。</li><li><code>ipnat -f file_name</code>：将过滤规则写入文件。</li><li><code>ipnat -l</code>：显示活动的规则列表。</li><li><code>ipnat -C -F</code>：重新初始化规则表。</li><li><code>map em0 192.168.1.0/24 -> 195.221.227.57/32 em0</code>：将 IP 地址映射到接口。</li><li><code>map em0 192.168.1.0/24 -> 195.221.227.57/32 portmap tcp/udp 20000:50000</code>：带端口号的映射。</li><li><code>ipf -f file_name</code>：将过滤规则写入文件。</li><li><code>ipf -F -a</code>：重置规则表。</li><li><code>ipfstat -I</code>：当与 -s 选项合用时列出活动的状态条目（LCTT 译注：原文存疑）。</li></ul><p>希望这份基础的 Linux 网络命令合集对你有用。欢迎各种问题和建议。</p><hr><p>via: <a href=https://itsfoss.com/basic-linux-networking-commands>https://itsfoss.com/basic-linux-networking-commands</a></p><p>作者：<a href=https://itsfoss.com/author/abhishek/>Abhishek Prakash</a> 译者：<a href=https://github.com/bianjp>bianjp</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E8%B7%AF%E7%94%B1/ rel=tag>路由</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E7%BD%91%E7%BB%9C/ rel=tag>网络</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>