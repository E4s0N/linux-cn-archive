<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Rust 基础系列 #5: Rust 中的函数 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Rust 基础系列 #5: Rust 中的函数"><meta property="og:description" content="在这一章中，在实例的帮助下，学习如何使用函数并从中返回值。"><meta property="og:type" content="article"><meta property="og:url" content="/article-15855-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-29T15:06:30+00:00"><meta property="article:modified_time" content="2023-05-29T15:06:30+00:00"><meta itemprop=name content="Rust 基础系列 #5: Rust 中的函数"><meta itemprop=description content="在这一章中，在实例的帮助下，学习如何使用函数并从中返回值。"><meta itemprop=datePublished content="2023-05-29T15:06:30+00:00"><meta itemprop=dateModified content="2023-05-29T15:06:30+00:00"><meta itemprop=wordCount content="383"><meta itemprop=keywords content="Rust,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Rust 基础系列 #5: Rust 中的函数</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-05-29T15:06:30Z>May 29, 2023</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/202305/29/150550h23qbhahwzb66hb1.jpg alt></p><blockquote><p>在这一章中，在实例的帮助下，学习如何使用函数并从中返回值。</p></blockquote><p>就跟任何现代编程语言一样，Rust 也有函数。</p><p>你已经熟悉的函数是 <code>main</code> 函数。这个函数在程序启动时被调用。</p><p>但是其他函数呢？在本文中，你将学习如何在 Rust 程序中使用函数。</p><h3 id=函数的基本语法>函数的基本语法</h3><p>你可能已经在我们声明 <code>main</code> 函数时知道了这一点，不管怎么样，还是让我们看一下声明函数的语法。</p><pre tabindex=0><code>// 声明函数
fn function_name() {
    &lt;statement(s)&gt;;
}

// 调用函数
function_name();
</code></pre><p>来让我们看一个简单的函数，它将字符串 <code>"Hi there!"</code> 打印到标准输出。</p><pre tabindex=0><code>fn main() {
    greet();
}

fn greet() {
    println!(&#34;Hi there!&#34;);
}
</code></pre><blockquote><p>? 与 C 不一样的是，不管你是否要在声明或定义之前调用函数都没有关系。只要这个函数在 <em>某个地方</em> 被声明了，Rust 就会处理它。</p></blockquote><p>正如预期，它的输出如下：</p><pre tabindex=0><code>Hi there!
</code></pre><p>这挺简单的。让我们把它提升到下一个级别。让我们创建一个接受参数并返回值的函数。有没有参数和有没有返回值这两者之间无关。</p><h3 id=使用函数接受参数>使用函数接受参数</h3><p>声明一个接受参数的函数的语法如下：</p><pre tabindex=0><code>// 声明函数
fn function_name(variable_name: type) {
    &lt;statement(s)&gt;;
}

// 调用函数
function_name(value);
</code></pre><p>你可以把函数参数想象成一个传递给函数的 <a href=/article-15837-1.html>元组</a>。它可以接受多种数据类型的参数，而且你可以接受任意多个参数。所以，你不必局限于接受相同类型的参数。</p><p>与某些语言不同的是，Rust 没有 <em>默认参数</em>。<strong>在调用函数时填充所有参数是强制性的</strong>。</p><h4 id=示例饥饿函数>示例：饥饿函数</h4><p>来让我们看一个程序来更好地理解这个。</p><pre tabindex=0><code>fn main() {
    food(2, 4);
}

fn food(theplas: i32, rotis: i32) {
    println!(
        &#34;我饿了... 我需要 {} 个葫芦巴叶饼和 {} 个罗提！&#34;,
        theplas, rotis
    );
}
</code></pre><p>在第 5 行，我声明了一个名为 <code>food</code> 的函数。这个函数接受 2 个参数：<code>theplas</code> 和 <code>rotis</code>（印度食物的名字）。然后我打印了这些变量的内容。</p><p>对于 <code>main</code> 函数，我使用参数 <code>2</code> 和 <code>4</code> 调用 <code>food</code> 函数。这意味着 <code>theplas</code> 被赋值为 <code>2</code>，<code>rotis</code> 被赋值为 <code>4</code>。</p><p>来让我们看一下程序的输出：</p><pre tabindex=0><code>我饿了... 我需要 2 个葫芦巴叶饼和 4 个罗提！
</code></pre><p>我现在真的饿了&mldr; ?</p><h3 id=从函数返回值>从函数返回值</h3><p>就像函数可以接受参数一样，函数也可以返回一个或多个值。这样的函数的语法如下：</p><pre tabindex=0><code>// 声明函数
fn function_name() -&gt; data_type {
    &lt;statement(s)&gt;;
}

// 调用函数
let x = function_name();
</code></pre><p>函数可以使用 <code>return</code> 关键字或者使用表达式而不是语句来返回一个值。</p><p>等等！什么是表达式？</p><h4 id=在进一步之前语句与表达式>在进一步之前：语句与表达式</h4><p>在讲解 Rust 函数的例子中提起这个可能不太合适，但是你应该理解 Rust 和其他编程语言中语句和表达式的区别。</p><p>语句是以分号结尾且 <em>不会计算出某个值</em> 的代码行。另一方面，表达式是一行不以分号结尾且计算出某个值的代码行。</p><p>来让我们用一个例子来理解：</p><pre tabindex=0><code>fn main() {
    let a = 873;
    let b = {
        // 语句
        println!(&#34;Assigning some value to b...&#34;);

        // 表达式
        a * 10
    };

    println!(&#34;b: {b}&#34;);
}
</code></pre><p>在第 3 行，我开始了一个代码块，在这个代码块中我有一个语句和一个表达式。注释标明了哪个是哪个。</p><p>在第 5 行的代码不会计算出某个值，因此需要以分号结尾。这是一个语句。</p><p>第 8 行的代码计算出了一个值。它是 <code>a * 10</code>（<code>873 * 10</code>），并计算出了 <code>8730</code>。因为这一行没有以分号结尾，所以这是一个表达式。</p><blockquote><p>? 使用表达式是从代码块中返回某些东西的一种方便的方法。因此，当返回一个值时，它是 <code>return</code> 关键字的替代方案。表达式不仅仅用于从函数中 “返回” 一个值。正如你刚刚看到的，<code>a * 10</code> 的值是从内部作用域 “返回” 到外部作用域，并赋值给变量 <code>b</code>。一个简单的作用域不是一个函数，但表达式的值仍然被 “返回” 了。</p></blockquote><h4 id=示例购买腐烂的水果>示例：购买腐烂的水果</h4><p>来让我们看一个演示以理解函数如何返回一个值：</p><pre tabindex=0><code>fn main() {
    println!(
        &#34;如果我从水果摊买了 2 公斤苹果，我必须付给他们 {} 印度卢比。&#34;,
        retail_price(2.0)
    );
    println!(
        &#34;但是，如果我从水果摊买了 30 公斤苹果，我就要付给他们 {} 印度卢比。&#34;,
        wholesale_price(30.0)
    );
}

fn retail_price(weight: f64) -&gt; f64 {
    return weight * 500.0;
}

fn wholesale_price(weight: f64) -&gt; f64 {
    weight * 400.0
}
</code></pre><p>我在上述代码中有两个函数：<code>retail_price</code> 和 <code>wholesale_price</code>。两个函数都接受一个参数并将值存储在 <code>weight</code> 变量中。这个变量的类型是 <code>f64</code>，函数签名表示最终函数返回一个 <code>f64</code> 值。</p><p>这两个函数都将购买的苹果的重量乘以一个数字。这个数字表示苹果的当前每公斤价格。由于批发商有大量订单，物流在某种程度上更容易，价格可以降低一点。</p><p>除了每公斤价格之外，这两个函数还有一个区别。那就是，<code>retail_price</code> 函数使用 <code>return</code> 关键字返回乘积。而 <code>wholesale_price</code> 函数使用表达式返回乘积。</p><pre tabindex=0><code>如果我从水果摊买了 2 公斤苹果，我必须付给他们 1000 印度卢比。
但是，如果我从水果摊买了 30 公斤苹果，我就要付给他们 12000 印度卢比。
</code></pre><p>输出显示，从函数返回值的两种方法都按预期工作。</p><h4 id=返回多个值>返回多个值</h4><p>你可以有一个返回不同类型的多个值的函数。你有很多选择，但返回一个元组是最简单的。</p><p>接下来是一个示例：</p><pre tabindex=0><code>fn main() {
    let (maths, english, science, sanskrit) = tuple_func();

    println!(&#34;数学考试得分: {maths}&#34;);
    println!(&#34;英语考试得分: {english}&#34;);
    println!(&#34;科学考试得分: {science}&#34;);
    println!(&#34;梵语考试得分: {sanskrit}&#34;);
}

fn tuple_func() -&gt; (f64, f64, f64, f64) {
    // return marks for a student
    let maths = 84.50;
    let english = 85.00;
    let science = 75.00;
    let sanskrit = 67.25;

    (maths, english, science, sanskrit)
}
</code></pre><p>函数 <code>tuple_func</code> 返回 4 个封装在一个元组中的 <code>f64</code> 值。这些值是一个学生在四门科目（满分 100 分）中获得的分数。</p><p>当函数被调用时，这个元组被返回。我可以使用 <code>tuple_name.0</code> 方案打印这些值，但我认为最好先解构元组，这样可以帮助我们搞清楚值对应的是什么。然后我使用了包含被解构的元组的值的变量来打印分数。</p><p>这是我得到的输出：</p><pre tabindex=0><code>数学考试得分: 84.5
英语考试得分: 85
科学考试得分: 75
梵语考试得分: 67.25
</code></pre><h3 id=总结>总结</h3><p>本文介绍了 Rust 编程语言中的函数。这些是函数的 “类型”：</p><ul><li>不接受任何参数也不返回任何值的函数</li><li>接收一个或多个参数的函数</li><li>给调用者返回一个或多个值的函数</li></ul><p>你知道接下来是什么吗？Rust 中的条件语句，也就是 if-else。请继续关注并享受学习 Rust 的过程。</p><p><em>（题图：MJ/5a07503b-c691-4276-83b2-bb42f5fda347）</em></p><hr><p>via: <a href=https://itsfoss.com/rust-functions/>https://itsfoss.com/rust-functions/</a></p><p>作者：<a href=https://itsfoss.com/author/pratham/>Pratham Patel</a> 选题：<a href=https://github.com/lkxed/>lkxed</a> 译者：<a href=https://github.com/Cubik65536>Cubik65536</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/rust/ rel=tag>Rust</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>