<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>关于Linux防火墙'iptables'的面试问答 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="关于Linux防火墙'iptables'的面试问答"><meta property="og:description" content="Nishita Agarwal是Tecmint的用户，她将分享关于她刚刚经历的一家公司（印度的一家私人公司Pune）的面试经验。在面试中她被问及许多不同的问题，但她是iptables方面的专家，因此她想分享这些关于iptables的问题和相应的答案给那些以后可能会进行相关面试的人。  所有的问题和相应的答案都基于Nishita Agarwal的记忆并经过了重写。  嗨，朋友！我叫Nishita Agarwal。我已经取得了理学学士学位，我的专业集中在UNIX和它的变种（BSD，Linux）。它们一直深深的吸引着我。我在存储方面有1年多的经验。我正在寻求职业上的变化，并将供职于印度的P"><meta property="og:type" content="article"><meta property="og:url" content="/article-5948-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-08-04T09:28:00+00:00"><meta property="article:modified_time" content="2015-08-04T09:28:00+00:00"><meta itemprop=name content="关于Linux防火墙'iptables'的面试问答"><meta itemprop=description content="Nishita Agarwal是Tecmint的用户，她将分享关于她刚刚经历的一家公司（印度的一家私人公司Pune）的面试经验。在面试中她被问及许多不同的问题，但她是iptables方面的专家，因此她想分享这些关于iptables的问题和相应的答案给那些以后可能会进行相关面试的人。  所有的问题和相应的答案都基于Nishita Agarwal的记忆并经过了重写。  嗨，朋友！我叫Nishita Agarwal。我已经取得了理学学士学位，我的专业集中在UNIX和它的变种（BSD，Linux）。它们一直深深的吸引着我。我在存储方面有1年多的经验。我正在寻求职业上的变化，并将供职于印度的P"><meta itemprop=datePublished content="2015-08-04T09:28:00+00:00"><meta itemprop=dateModified content="2015-08-04T09:28:00+00:00"><meta itemprop=wordCount content="443"><meta itemprop=keywords content="面试,防火墙,iptabls,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>关于Linux防火墙'iptables'的面试问答</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-08-04T09:28:00Z>August 04, 2015</time></div></div></header><div class="content post__content clearfix"><p>Nishita Agarwal是Tecmint的用户，她将分享关于她刚刚经历的一家公司（印度的一家私人公司Pune）的面试经验。在面试中她被问及许多不同的问题，但她是iptables方面的专家，因此她想分享这些关于iptables的问题和相应的答案给那些以后可能会进行相关面试的人。</p><p><img src=/data/attachment/album/201508/03/234510d1xoykzrr5j8yy61.jpg alt=Linux防火墙Iptables面试问题></p><p>所有的问题和相应的答案都基于Nishita Agarwal的记忆并经过了重写。</p><blockquote><p>“嗨，朋友！我叫<strong>Nishita Agarwal</strong>。我已经取得了理学学士学位，我的专业集中在UNIX和它的变种（BSD，Linux）。它们一直深深的吸引着我。我在存储方面有1年多的经验。我正在寻求职业上的变化，并将供职于印度的Pune公司。”</p></blockquote><p>下面是我在面试中被问到的问题的集合。我已经把我记忆中有关iptables的问题和它们的答案记录了下来。希望这会对您未来的面试有所帮助。</p><h3 id=1-你听说过linux下面的iptables和firewalld么知不知道它们是什么是用来干什么的>1. 你听说过Linux下面的iptables和Firewalld么？知不知道它们是什么，是用来干什么的？</h3><p><strong>答案</strong> : iptables和Firewalld我都知道，并且我已经使用iptables好一段时间了。iptables主要由C语言写成，并且以GNU GPL许可证发布。它是从系统管理员的角度写的，最新的稳定版是iptables 1.4.21。iptables通常被用作类UNIX系统中的防火墙，更准确的说，可以称为iptables/netfilter。管理员通过终端/GUI工具与iptables打交道，来添加和定义防火墙规则到预定义的表中。Netfilter是内核中的一个模块，它执行包过滤的任务。</p><p>Firewalld是RHEL/CentOS 7（也许还有其他发行版，但我不太清楚）中最新的过滤规则的实现。它已经取代了iptables接口，并与netfilter相连接。</p><h3 id=2-你用过一些iptables的gui或命令行工具么>2. 你用过一些iptables的GUI或命令行工具么？</h3><p><strong>答案</strong> : 虽然我既用过GUI工具，比如与<a href=http://www.tecmint.com/install-webmin-web-based-system-administration-tool-for-rhel-centos-fedora/>Webmin</a>结合的Shorewall；以及直接通过终端访问iptables，但我必须承认通过Linux终端直接访问iptables能给予用户更高级的灵活性、以及对其背后工作更好的理解的能力。GUI适合初级管理员，而终端适合有经验的管理员。</p><h3 id=3-那么iptables和firewalld的基本区别是什么呢>3. 那么iptables和firewalld的基本区别是什么呢？</h3><p><strong>答案</strong> : iptables和firewalld都有着同样的目的（包过滤），但它们使用不同的方式。iptables与firewalld不同，在每次发生更改时都刷新整个规则集。通常iptables配置文件位于‘/etc/sysconfig/iptables‘，而firewalld的配置文件位于‘/etc/firewalld/‘。firewalld的配置文件是一组XML文件。以XML为基础进行配置的firewalld比iptables的配置更加容易，但是两者都可以完成同样的任务。例如，firewalld可以在自己的命令行界面以及基于XML的配置文件下使用iptables。</p><h3 id=4-如果有机会的话你会在你所有的服务器上用firewalld替换iptables么>4. 如果有机会的话，你会在你所有的服务器上用firewalld替换iptables么？</h3><p><strong>答案</strong> : 我对iptables很熟悉，它也工作的很好。如果没有任何需求需要firewalld的动态特性，那么没有理由把所有的配置都从iptables移动到firewalld。通常情况下，目前为止，我还没有看到iptables造成什么麻烦。IT技术的通用准则也说道“为什么要修一件没有坏的东西呢？”。上面是我自己的想法，但如果组织愿意用firewalld替换iptables的话，我不介意。</p><h3 id=5-你看上去对iptables很有信心巧的是我们的服务器也在使用iptables>5. 你看上去对iptables很有信心，巧的是，我们的服务器也在使用iptables。</h3><p>iptables使用的表有哪些？请简要的描述iptables使用的表以及它们所支持的链。</p><p><strong>答案</strong> : 谢谢您的赞赏。至于您问的问题，iptables使用的表有四个，它们是：</p><ul><li>Nat 表</li><li>Mangle 表</li><li>Filter 表</li><li>Raw 表</li></ul><p>Nat表 : Nat表主要用于网络地址转换。根据表中的每一条规则修改网络包的IP地址。流中的包仅遍历一遍Nat表。例如，如果一个通过某个接口的包被修饰（修改了IP地址），该流中其余的包将不再遍历这个表。通常不建议在这个表中进行过滤，由NAT表支持的链称为PREROUTING 链，POSTROUTING 链和OUTPUT 链。</p><p>Mangle表 : 正如它的名字一样，这个表用于校正网络包。它用来对特殊的包进行修改。它能够修改不同包的头部和内容。Mangle表不能用于地址伪装。支持的链包括PREROUTING 链，OUTPUT 链，Forward 链，Input 链和POSTROUTING 链。</p><p>Filter表 : Filter表是iptables中使用的默认表，它用来过滤网络包。如果没有定义任何规则，Filter表则被当作默认的表，并且基于它来过滤。支持的链有INPUT 链，OUTPUT 链，FORWARD 链。</p><p>Raw表 : Raw表在我们想要配置之前被豁免的包时被使用。它支持PREROUTING 链和OUTPUT 链。</p><h3 id=6-简要谈谈什么是iptables中的目标值能被指定为目标他们有什么用>6. 简要谈谈什么是iptables中的目标值（能被指定为目标），他们有什么用</h3><p><strong>答案</strong> : 下面是在iptables中可以指定为目标的值：</p><ul><li>ACCEPT : 接受包</li><li>QUEUE : 将包传递到用户空间 (应用程序和驱动所在的地方)</li><li>DROP : 丢弃包</li><li>RETURN : 将控制权交回调用的链并且为当前链中的包停止执行下一调用规则</li></ul><h3 id=7-让我们来谈谈iptables技术方面的东西我的意思是说实际使用方面>7. 让我们来谈谈iptables技术方面的东西，我的意思是说实际使用方面</h3><p>你怎么检测在CentOS中安装iptables时需要的iptables的rpm？</p><p><strong>答案</strong> : iptables已经被默认安装在CentOS中，我们不需要单独安装它。但可以这样检测rpm：</p><pre tabindex=0><code># rpm -qa iptables

iptables-1.4.21-13.el7.x86_64
</code></pre><p>如果您需要安装它，您可以用yum来安装。</p><pre tabindex=0><code># yum install iptables-services
</code></pre><h3 id=8-怎样检测并且确保iptables服务正在运行>8. 怎样检测并且确保iptables服务正在运行？</h3><p><strong>答案</strong> : 您可以在终端中运行下面的命令来检测iptables的状态。</p><pre tabindex=0><code># service status iptables           [On CentOS 6/5]
# systemctl status iptables         [On CentOS 7]
</code></pre><p>如果iptables没有在运行，可以使用下面的语句</p><pre tabindex=0><code>---------------- 在CentOS 6/5下 ---------------- 
# chkconfig --level 35 iptables on
# service iptables start

---------------- 在CentOS 7下 ---------------- 
# systemctl enable iptables 
# systemctl start iptables 
</code></pre><p>我们还可以检测iptables的模块是否被加载：</p><pre tabindex=0><code># lsmod | grep ip_tables
</code></pre><h3 id=9-你怎么检查iptables中当前定义的规则呢>9. 你怎么检查iptables中当前定义的规则呢？</h3><p><strong>答案</strong> : 当前的规则可以简单的用下面的命令查看：</p><pre tabindex=0><code># iptables -L
</code></pre><p>示例输出</p><pre tabindex=0><code>Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere             state RELATED,ESTABLISHED
ACCEPT     icmp --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:ssh
REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         
REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
</code></pre><h3 id=10-你怎样刷新所有的iptables规则或者特定的链呢>10. 你怎样刷新所有的iptables规则或者特定的链呢？</h3><p><strong>答案</strong> : 您可以使用下面的命令来刷新一个特定的链。</p><pre tabindex=0><code># iptables --flush OUTPUT
</code></pre><p>要刷新所有的规则，可以用：</p><pre tabindex=0><code># iptables --flush
</code></pre><h3 id=11-请在iptables中添加一条规则接受所有从一个信任的ip地址例如19216807过来的包>11. 请在iptables中添加一条规则，接受所有从一个信任的IP地址（例如，192.168.0.7）过来的包。</h3><p><strong>答案</strong> : 上面的场景可以通过运行下面的命令来完成。</p><pre tabindex=0><code># iptables -A INPUT -s 192.168.0.7 -j ACCEPT 
</code></pre><p>我们还可以在源IP中使用标准的斜线和子网掩码：</p><pre tabindex=0><code># iptables -A INPUT -s 192.168.0.7/24 -j ACCEPT 
# iptables -A INPUT -s 192.168.0.7/255.255.255.0 -j ACCEPT
</code></pre><h3 id=12-怎样在iptables中添加规则以acceptrejectdeny和drop-ssh的服务>12. 怎样在iptables中添加规则以ACCEPT，REJECT，DENY和DROP ssh的服务？</h3><p><strong>答案</strong> : 但愿ssh运行在22端口，那也是ssh的默认端口，我们可以在iptables中添加规则来ACCEPT ssh的tcp包（在22号端口上）。</p><pre tabindex=0><code># iptables -A INPUT -p tcp --dport 22 -j ACCEPT 
</code></pre><p>REJECT ssh服务（22号端口）的tcp包。</p><pre tabindex=0><code># iptables -A INPUT -p tcp --dport 22 -j REJECT
</code></pre><p>DENY ssh服务（22号端口）的tcp包。</p><pre tabindex=0><code># iptables -A INPUT -p tcp --dport 22 -j DENY
</code></pre><p>DROP ssh服务（22号端口）的tcp包。</p><pre tabindex=0><code># iptables -A INPUT -p tcp --dport 22 -j DROP
</code></pre><h3 id=13-让我给你另一个场景假如有一台电脑的本地ip地址是19216806你需要封锁在212223和80号端口上的连接你会怎么做>13. 让我给你另一个场景，假如有一台电脑的本地IP地址是192.168.0.6。你需要封锁在21、22、23和80号端口上的连接，你会怎么做？</h3><p><strong>答案</strong> : 这时，我所需要的就是在iptables中使用‘multiport‘选项，并将要封锁的端口号跟在它后面。上面的场景可以用下面的一条语句搞定：</p><pre tabindex=0><code># iptables -A INPUT -s 192.168.0.6 -p tcp -m multiport --dport 22,23,80,8080 -j DROP
</code></pre><p>可以用下面的语句查看写入的规则。</p><pre tabindex=0><code># iptables -L

Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere             state RELATED,ESTABLISHED
ACCEPT     icmp --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:ssh
REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited
DROP       tcp  --  192.168.0.6          anywhere             multiport dports ssh,telnet,http,webcache

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         
REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
</code></pre><p><strong>面试官</strong> : 好了，我问的就是这些。你是一个很有价值的雇员，我们不会错过你的。我将会向HR推荐你的名字。如果你有什么问题，请问我。</p><p>作为一个候选人我不愿不断的问将来要做的项目的事以及公司里其他的事，这样会打断愉快的对话。更不用说HR轮会不会比较难，总之，我获得了机会。</p><p>同时我要感谢Avishek和Ravi（我的朋友）花时间帮我整理我的面试。</p><p>朋友！如果您有过类似的面试，并且愿意与数百万Tecmint读者一起分享您的面试经历，请将您的问题和答案发送到<a href=mailto:admin@tecmint.com>admin@tecmint.com</a>。</p><p>谢谢！保持联系。如果我能更好的回答我上面的问题的话，请记得告诉我。</p><hr><p>via: <a href=http://www.tecmint.com/linux-firewall-iptables-interview-questions-and-answers/>http://www.tecmint.com/linux-firewall-iptables-interview-questions-and-answers/</a></p><p>作者：<a href=http://www.tecmint.com/author/avishek/>Avishek Kumar</a> 译者：<a href=https://github.com/wwy-hust>wwy-hust</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E9%9D%A2%E8%AF%95/ rel=tag>面试</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E9%98%B2%E7%81%AB%E5%A2%99/ rel=tag>防火墙</a></li><li class=tags__item><a class="tags__link btn" href=/tags/iptabls/ rel=tag>iptabls</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>