<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>apt 的 update 和 upgrade 命令的区别是什么？ - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="apt 的 update 和 upgrade 命令的区别是什么？"><meta property="og:description" content="我们首先讨论一下 update 和 upgrade 的区别。这两个难道不是一样的吗？"><meta property="og:type" content="article"><meta property="og:url" content="/article-14994-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-02T22:44:31+00:00"><meta property="article:modified_time" content="2022-09-02T22:44:31+00:00"><meta itemprop=name content="apt 的 update 和 upgrade 命令的区别是什么？"><meta itemprop=description content="我们首先讨论一下 update 和 upgrade 的区别。这两个难道不是一样的吗？"><meta itemprop=datePublished content="2022-09-02T22:44:31+00:00"><meta itemprop=dateModified content="2022-09-02T22:44:31+00:00"><meta itemprop=wordCount content="311"><meta itemprop=keywords content="apt,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>apt 的 update 和 upgrade 命令的区别是什么？</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-09-02T22:44:31Z>September 02, 2022</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/202209/02/224416uecz5x75yalc0axc.jpg alt></p><p>如果想让你的 Ubuntu 或者 Debian 系统保持更新，要用 <code>sudo apt update</code> 和 <code>sudo apt upgrade</code> 命令组合。</p><p>一些以前的教程也会提到 <code>sudo apt-get update</code> 和 <code>sudo apt-get upgrade</code>。</p><p><code>apt</code> 和 <code>apt-get</code> 命令运行起来几乎一样，除了一些细微的差别，后面我会讨论。</p><p>我们首先讨论一下 <code>update</code> 和 <code>upgrade</code> 的区别。这两个难道不是一样的吗？</p><h3 id=apt-的-update-和-upgrade-的区别>apt 的 update 和 upgrade 的区别</h3><p>尽管听上去运行 <code>apt update</code> 可以给你一个包的最新版本，然而这并不正确。<code>update</code> 命令只会获得系统上所有包的最新信息，并不会下载或者安装任何一个包。而是 <code>apt upgrade</code> 命令来把这些包下载和升级到最新版本。</p><p>还是有点困惑？让我来接着解释。我建议阅读 <a href=https://itsfoss.com/package-manager/>包管理器的概念</a>。这个会帮你更好的理解这些东西。</p><p><img src=/data/attachment/album/202209/02/224431u1mrghgrhmnxgrnz.png alt="Linux Package Manager Explanation"></p><p>基本上，你的系统围绕着一个所有可用包的数据库（缓存）工作。注意，这个缓存（或者数据库）并不包含这些包本身，仅仅是关于包的元数据（版本、仓库、依赖等）。</p><p>如果你不更新这个数据库，系统就不会知道是否有更新的版本。</p><p>当你运行 <code>apt update</code> 或者 <code>apt-get update</code> 命令，它会获取这些包的最新元数据（包的版本等）。</p><p><img src=/data/attachment/album/202209/02/224431rvuvxugm6vwkmwcg.png alt="apt update"></p><p>这时候本地缓存就被更新了，有一些包可以升级。用 <code>sudo apt upgrade</code> 可以升级所有（可升级的）包。</p><p>它会显示要升级的包，并且通过回车（默认选择是 <code>Y</code>）或者按下 <code>Y</code> 键进行确认。要在这个阶段取消升级，可以按下 <code>N</code>。</p><p><img src=/data/attachment/album/202209/02/224431ttohko0r9thbtujq.png alt="apt upgrade"></p><p>下面这些可能会帮助你记忆：</p><ul><li><code>apt update</code>：更新包缓存（可以知道包的哪些版本可以被安装或升级）</li><li><code>apt upgrade</code>：升级包到最新版本</li></ul><p>因为有一些管理员命令，需要作为 root 运行。因此需要使用 <code>sudo</code> 配合其他命令。<code>sudo</code> 使你能够作为 root 在 Ubuntu 和 Debian 上运行命令。</p><p>既然理解了 <code>update</code> 和 <code>upgrade</code> 是如何一起运行的，我们接下来来讨论一下 <code>apt</code> 和 <code>apt-get</code> 的用法。</p><h3 id=apt-还是-apt-get应该用哪个>apt 还是 apt-get？应该用哪个？</h3><p>Debian 和 Ubuntu 使用的是 APT 包管理系统。不要和 <code>apt</code> 命令弄混了。</p><p>有许多和 APT 包管理交互的命令；<code>apt-get</code>、<code>apt</code>、<code>dpkg</code>、<code>aptitude</code> 等。</p><p>这里面最受欢迎的就是 <code>apt-get</code> 命令。它是一个 低层级 low-level 且功能丰富的命令。<code>apt</code> 是 <code>apt-get</code> 命令的一个更新而更简单的版本。</p><p>可以读一下这篇文章来 <a href=https://itsfoss.com/apt-get-upgrade-vs-dist-upgrade/>了解 atp 和 apt-get 命令的不同</a>。下面重点讨论这些命令中 <code>update</code> 和 <code>upgrade</code> 选项的区别。</p><h4 id=apt-update-vs-apt-get-update>apt update vs apt-get update</h4><p><code>apt-get update</code> 和 <code>apt update</code> 做的是同样的事，都是更新本地包缓存，这样的话你的系统就知道有哪些包的版本是可用的。</p><p>从技术上讲，其实并没有区别。然而，<code>apt update</code> 在一个方面比 <code>apt-get update</code> 做的好，<strong>它会告诉你可升级的包的数量</strong>。</p><pre tabindex=0><code>Hit:15 https://ppa.launchpadcontent.net/slimbook/slimbook/ubuntu jammy InRelease
Fetched 213 kB in 4s (55.8 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
6 packages can be upgraded. Run &#39;apt list --upgradable&#39; to see them.
</code></pre><p><code>apt-get update</code> 甚至不会告诉你包是否可以升级。</p><p><img src=/data/attachment/album/202209/02/224431rxk3zl0ccaxixt4e.png alt="apt get update"></p><p><img src=/data/attachment/album/202209/02/224431c3ojf1iu3wq3awjj.png alt="apt update output"></p><p>从 <code>apt</code> 中可以看到 <a href=https://itsfoss.com/apt-list-upgradable/>列出可升级的包</a>，而 <code>apt-get</code> 甚至没有这个选项。</p><pre tabindex=0><code># apt list --upgradable
Listing... Done
fprintd/jammy-updates 1.94.2-1ubuntu0.22.04.1 amd64 [upgradable from: 1.94.2-1]
gnome-control-center-data/jammy-updates,jammy-updates 1:41.7-0ubuntu0.22.04.4 all [upgradable from: 1:41.7-0ubuntu0.22.04.1]
gnome-control-center-faces/jammy-updates,jammy-updates 1:41.7-0ubuntu0.22.04.4 all [upgradable from: 1:41.7-0ubuntu0.22.04.1]
gnome-control-center/jammy-updates 1:41.7-0ubuntu0.22.04.4 amd64 [upgradable from: 1:41.7-0ubuntu0.22.04.1]
libpam-fprintd/jammy-updates 1.94.2-1ubuntu0.22.04.1 amd64 [upgradable from: 1.94.2-1]
vivaldi-stable/stable 5.4.2753.40-1 amd64 [upgradable from: 5.4.2753.37-1]
</code></pre><p>现在来比较一下两个命令中 <code>upgrade</code> 的选项。</p><h4 id=apt-upgrade-vs-apt-get-upgrade>apt upgrade vs apt-get upgrade</h4><p><code>apt-get upgrade</code> 和 <code>apt upgrade</code> 命令根据本地包缓存（通过 <code>update</code> 命令更新）的数据，安装可升级包的最新版本。</p><p>然而，<code>apt upgrade</code> 命令会做两件与 <code>apt-get upgrade</code> 不同的事情。</p><p><code>apt upgrade</code> 命令可以升级 Linux 内核版本，<code>apt-get upgrade</code> 不能。<code>apt-get</code> 命令需要使用 <a href=https://itsfoss.com/apt-get-upgrade-vs-dist-upgrade/>apt-get dist-upgrade</a> 来升级内核版本。</p><p><img src=/data/attachment/album/202209/02/224432yfee97tzeffn97ff.png alt="apt-get upgrade command cannot upgrade Linux kernel version"></p><p>这是因为升级内核版本意味着安装一个全新的包。<code>apt-get upgrade</code> 命令不能安装一个新的包。它只能升级现有的包。</p><p><code>apt upgrade</code> 比 <code>apt-get</code> 做的好的另一件小事是，它会在底部<strong>显示一个进度条</strong>。</p><p><img src=/data/attachment/album/202209/02/224432nu8ad8hjbafdaccc.png alt="apt upgrade progress bar"></p><h3 id=总结>总结</h3><p><code>update</code> 和 <code>upgrade</code> 两个词很相似，这就是为什么很多新用户会感到困惑。有时候，我觉得 <code>apt update</code> 命令应该和 <code>apt upgrade</code> 命令合并。</p><p>我意思是 <code>upgrade</code>（所有已安装的包）和 <code>update</code>（本地包元数据缓存）一起完成工作。为什么要有两个分开的命令呢？把这两个领命合成一个 <code>upgrade</code> 命令吧。Fedora 就是这样对 DNF 命令进行了改进。不过这只是我的观点。</p><p>我希望这篇文章可以解释一些关于 <code>apt-get update</code>、<code>apt-get upgrade</code> 和 <code>apt update</code> 以及 <code>apt upgrade</code> 命令的问题。</p><p>如果有任何问题，请与我联系。</p><hr><p>via: <a href=https://itsfoss.com/apt-update-vs-upgrade/>https://itsfoss.com/apt-update-vs-upgrade/</a></p><p>作者：<a href=https://itsfoss.com/>Abhishek Prakash</a> 选题：<a href=https://github.com/lkxed>lkxed</a> 译者：<a href=https://github.com/Yufei-Yan>Yufei-Yan</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/apt/ rel=tag>apt</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>