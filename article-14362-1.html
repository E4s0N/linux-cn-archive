<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>怎么开始你的第一次打包？ - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="怎么开始你的第一次打包？"><meta property="og:description" content="太复杂的包咱们打不来，咱们先从最简单的壁纸包开始打起。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14362-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-16T14:44:15+00:00"><meta property="article:modified_time" content="2022-03-16T14:44:15+00:00"><meta itemprop=name content="怎么开始你的第一次打包？"><meta itemprop=description content="太复杂的包咱们打不来，咱们先从最简单的壁纸包开始打起。"><meta itemprop=datePublished content="2022-03-16T14:44:15+00:00"><meta itemprop=dateModified content="2022-03-16T14:44:15+00:00"><meta itemprop=wordCount content="358"><meta itemprop=keywords content="打包,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>怎么开始你的第一次打包？</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-03-16T14:44:15Z>March 16, 2022</time></div></div></header><div class="content post__content clearfix"><blockquote><p>太复杂的包咱们打不来，咱们先从最简单的壁纸包开始打起。</p></blockquote><p><img src=/data/attachment/album/202203/16/144330v800a3qax40px5vp.jpg alt></p><p>“ 打包 packing ” 是什么？在 Linux 语境中，“打包”是指制作可以在 Linux 上用软件包管理器来安装、更新和卸载的软件包。</p><p>你肯定要问了，什么要打包？举例来说，你肯定有过拍一些照片并且将它们设置为壁纸的经历，对吧。一个个传到计算机上去挺累的。把这些收集起来，打成一个壁纸包，与其他人分享是个不错的选择。顺便，通过打包，也可以对 Debian 的软件包有个大致的了解。</p><h3 id=背景介绍>背景介绍</h3><p>《崩坏 3》，是一个我很喜欢玩的游戏，但它不支持 Linux 平台，所以，望梅止渴的我只好把这些壁纸进行打包，以此纪念和女武神们并肩战斗过的时光。</p><p>本文中介绍的打包是给 Debian/Ubuntu 系所用的 deb 包，其他系或独立发行版请按所属发行版的官方手册进行打包工作。</p><h3 id=准备工作>准备工作</h3><p>先准备如下工具 <code>wget</code>、<code>tar</code>、<code>dh-make</code>、<code>debmake</code>、<code>lintian</code>（有一些应该在你 Linux 上已经安装过了）：</p><pre tabindex=0><code>~ $ sudo apt install wget tar dh-make debmake lintian
</code></pre><p>先建立打包文件夹：</p><pre tabindex=0><code>make $ mkdir -p honkai-impact3-0.1/usr/share/background/honkai-impact3
</code></pre><p>更换壁纸的时候你应该注意到了，通常壁纸的存放位置都是在 <code>/usr/share/background</code> 目录里的，所以这里建立了相应的多级目录。</p><p>你也可以用你自己拍摄的照片来打包，本文所用的演示图片均来自于《崩坏 3》官网，你可以自行下载。</p><p><img src=/data/attachment/album/202203/16/144415kzvnnkuafobfaab4.png alt></p><h3 id=开始打包>开始打包</h3><p>然后，退回到上级目录里，将存放壁纸的目录压缩成一个 tar 包：</p><pre tabindex=0><code>honkai-impact3-0.1 $ cd ..
make $ tar -cvzf honkai-impact3-0.1.tar.gz honkai-impact3-0.1/usr/share/background/honkai-impact3
</code></pre><p>压缩包创建好之后，我们还得设置两个变量，这样软件包维护工具就可以正确识别维护者信息了：</p><pre tabindex=0><code>make $ cat &gt;&gt; ~/.bashrc &lt;&lt;EOF
DEBEMAIL=&#34;bronya_zaychik@st_freya_academy.edu&#34;
DEBFULLNAME=&#34;Bronya Zaychik&#34;
export DEBEMAIL DEBFULLNAME
EOF
make $ . ~/.bashrc
</code></pre><p>此处：</p><ul><li><code>DEBEMAIL</code> 写你的邮箱地址</li><li><code>DEBFULLNAME</code> 写维护者的名字</li></ul><h3 id=初始化>初始化</h3><pre tabindex=0><code>make $ cd honkai-impact3-0.1 
honkai-impact3-0.1 $ dh_make -f ../honkai-impact3-0.1.tar.gz
Type of package: (single, indep, library, python)
[s/i/l/p]?
Maintainer Name     : Bronya Zaychik
Email-Address       : bronya_zaychik@st_freya_academy.edu
Date                : Wed, 02 Feb 2022 07:00:28 +0000
Package Name        : honkai-impact3
Version             : 0.1
License             : blank
Package Type        : library
Are the details correct? [Y/n/q]
</code></pre><p><code>dh_make</code> 是个不错的工具，这工具用于初始化压缩包并生成模板文件。下面的 <code>debian</code> 文件夹就是用这个工具生成的。</p><p>在初始化完成之后，你会看到如下文件：</p><pre tabindex=0><code>honkai-impact3-0.1 $ cd ..
make $ ls -F
honkai-impact3-0.1/
honkai-impact3-0.1.tar.gz
honkai-impact3_0.1.orig.tar.gz
</code></pre><p>而 <code>debian</code> 文件夹里却有了很多模板文件，在一阵怒砍之后，只留下如下文件：</p><pre tabindex=0><code>make $ ls -F honkai-impact3-0.1/debian/
source/
changelog
control
copyright
rules
</code></pre><p>其中，<code>changlog</code> 文件是用来记录版本更新内容的变更日志。</p><p>例如：</p><pre tabindex=0><code>honkai-impact3-0.1 $ cat debian/changelog
</code></pre><pre tabindex=0><code>honkai-impact3-background (0.1-1) unstable; urgency=medium

  * 2020.8.17 首次打包完成
  * 2022.2.2  重新打包

 -- Bronya Zaychik &lt;bronya_zaychik@st_freya_academy.edu&gt; Wed, 02 Feb 2022 07:20:00 +0000

honkai-impact3-background (0.1-1) unstable; urgency=medium

  * Initial release 

 -- Bronya Zaychik &lt;bronya_zaychik@st_freya_academy.edu&gt; Wed, 02 Feb 2022 07:00:28 +0000
</code></pre><p><code>control</code> 文件用来记录壁纸包的版本信息：</p><pre tabindex=0><code>honkai-impact3-0.1 $ cat debian/control
</code></pre><pre tabindex=0><code>Package: honkai-impact3-background
Version: 0.1-1
Architecture: all
Maintainer: Bronya Zaychik &lt;bronya_zaychik@st_freya_academy.edu&gt;
Section: x11
Priority: optional
Homepage: https://gitee.com/PokerFace128/K423_Lab_Soft
Description: This is the game wallpaper of the HokaiImpact3.
 TECH OTAKUS SAVE THE WORLD
</code></pre><p>说明如下：</p><ul><li>第 1-2 行是包名和版本号</li><li>第 3 行是可以编译该二进制包的体系结构，通常文本、图像、或解释型语言脚本所生成的二进制包都用 <code>Architecture: all</code></li><li>第 4 行是维护者信息</li><li>第 5 行是分类，这里我们选择为 <code>x11</code>，这是不属于其他分类的为 X11 程序</li><li>第 6 行是优先级，这个为常规优先级。</li><li>第 7 行是维护者的个人主页，GitHub、Gitee，甚至是你的 BiliBili 主页都可以。</li><li>第 8 行是对这个软件包的描述</li><li>第 9 行建议写点什么上去，这样在用 <code>lintian</code> 检查的时候就不会空了。</li></ul><p>最后是 <code>copyright</code> 文件，用来存放版权信息。就是该软件包内文件的版权说明。至于这个示例壁纸包，由于版权属于该游戏出品方，作为演示用途，我这里就没填。</p><h4 id=开始打包-1>开始打包</h4><p>只需一个命令，就可轻松打包：</p><pre tabindex=0><code>make $ cd honkai-impact3-0.1/
honkai-impact3-0.1 $ dpkg-buildpackage -us -uc
</code></pre><p>你应该用过 <code>dpkg -i</code> 这条命令，<code>dpkg</code> 工具不只能安装，还能打包和拆包。</p><p>啪的一下，一个壁纸包就这样打好了：</p><pre tabindex=0><code>honkai-impact3-0.1 $ cd ../
make $ ls -F 
honkai-impact3-0.1/                   
honkai-impact3_0.1-1_amd64.changes  
honkai-impact3_0.1-1.debian.tar.xz  
honkai-impact3_0.1.orig.tar.gz
honkai-impact3_0.1-1_amd64.buildinfo  
honkai-impact3_0.1-1_amd64.deb      
honkai-impact3_0.1-1.dsc            
honkai-impact3-0.1.tar.gz
</code></pre><p>接下来用 lintian 检查</p><pre tabindex=0><code>make $ lintian honkai-impact3_0.1-1_amd64.deb   

E: honkai-impact3-background: copyright-contains-dh_make-todo-boilerplate
E: honkai-impact3-background: helper-templates-in-copyright
W: honkai-impact3-background: copyright-has-url-from-dh_make-boilerplate
</code></pre><p>这里显示我没填 <code>copyright</code> 文件，这里需要你填入版权信息，像壁纸类的话，通常都是 CC 协议。</p><p>打包好之后就像这样：</p><p><img src=/data/attachment/album/202203/16/144415gq604btbh6ouheba.png alt></p><p>如果你想了解关于 deb 打包的更多内容，请看如下链接：<a href=https://www.debian.org/doc/manuals/maint-guide/index.zh-cn.html>https://www.debian.org/doc/manuals/maint-guide/index.zh-cn.html</a></p><p><em>作者注：因读者多次吐槽，文章经过了反复修改。详情请看 GitHub 上的 PR。</em></p><hr><p>作者简介：</p><p>PokerFace，一个会空中劈叉的老舰长（睿智清洁工）。</p><hr><p>作者：<a href=https://github.com/pokerface128>PokerFace</a> 编辑：<a href=https://github.com/wxy>wxy</a></p><p>本文由贡献者投稿至 <a href=https://github.com/LCTT/Articles/>Linux 中国公开投稿计划</a>，采用 <a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh>CC-BY-SA 协议</a> 发布，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%89%93%E5%8C%85/ rel=tag>打包</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>