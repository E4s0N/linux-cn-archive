<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何从 Windows 上用 SSH 连接到 Linux - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何从 Windows 上用 SSH 连接到 Linux"><meta property="og:description" content="使用开源的 PuTTY 工具，从 Windows 建立到 Linux 的 SSH 连接。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14855-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-23T11:00:47+00:00"><meta property="article:modified_time" content="2022-07-23T11:00:47+00:00"><meta itemprop=name content="如何从 Windows 上用 SSH 连接到 Linux"><meta itemprop=description content="使用开源的 PuTTY 工具，从 Windows 建立到 Linux 的 SSH 连接。"><meta itemprop=datePublished content="2022-07-23T11:00:47+00:00"><meta itemprop=dateModified content="2022-07-23T11:00:47+00:00"><meta itemprop=wordCount content="490"><meta itemprop=keywords content="PuTTY,SSH,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何从 Windows 上用 SSH 连接到 Linux</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-07-23T11:00:47Z>July 23, 2022</time></div></div></header><div class="content post__content clearfix"><blockquote><p>使用开源的 PuTTY 工具，从 Windows 建立到 Linux 的 SSH 连接。</p></blockquote><p><img src=/data/attachment/album/202207/23/110039pjbd9jbbc84gbz2f.jpg alt title="clouds in windows"></p><p>在 Linux 世界中， 安全外壳 secure shell （SSH）协议是最为常用的、通过命令行控制远程计算机的方式。SSH 是真正的 Linux 原创，但是它在 Windows 世界中也越来越流行。甚至有了一份官方的 <a href=https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_overview>Windows 的 SSH 文档</a>，那篇文档阐述了使用 <a href=https://www.openssh.com/>OpenSSH</a> 控制 Windows 的方法。</p><p>这篇文章展示了如何使用了流行的开源工具 <a href=https://www.putty.org/>PuTTY</a>，建立一个从 Windows 到 Fedora 33 Linux 系统的 SSH 连接。</p><h3 id=使用-ssh-的方法>使用 SSH 的方法</h3><p>SSH 使用客户端-服务器模式，即 SSH 客户端会创建到 SSH 服务端的连接。SSH 服务器通常会作为 守护进程 Daemon 运行，所以它常被称为 SSHD。你很难找到一个不自带 SSH 守护进程的 Linux 发行版。在 Fedora 33 中，已安装了 SSH 守护进程，但是并未激活。</p><p>你可以使用 SSH 控制几乎所有的 Linux 机器，无论它是作为虚拟机还是作为网络上的物理设备运行。一个常见的用例是 无头 headless 配置的嵌入式设备，如树莓派。SSH 也可以用做一个其它网络服务的隧道。因为 SSH 连接是加密的，所以你可以使用 SSH 作为一个任何默认不提供加密的协议的传输层。</p><p>在这篇文章中，我将解释使用 SSH 的四个方式：1、如何在 Linux 端配置 SSH 守护进程；2、如何设置远程控制台连接；3、如何通过网络复制文件，4. 如何将 SSH 作为某些协议的隧道。</p><h3 id=1配置-sshd>1、配置 SSHD</h3><p>将 Linux 系统（文中是 Fedora 33）作为 SSH 服务器，允许 PuTTY SSH 客户端进行连接。首先，检查守护进程的 SSH 配置。配置文件放在 <code>/etc/ssh/sshd_config</code>，它包含了许多选项，通过取消掉相关行的注释就可以激活：</p><pre tabindex=0><code>#       $OpenBSD: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $

# This is the sshd server system-wide configuration file.  See
# sshd_config(5) for more information.

# This sshd was compiled with PATH=/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin

# The strategy used for options in the default sshd_config shipped with
# OpenSSH is to specify options with their default value where
# possible, but leave them commented.  Uncommented options override the
# default value.

Include /etc/ssh/sshd_config.d/*.conf

#Port 22
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::
</code></pre><p>没有取消任何注释的默认配置在这个示例中应该是可以工作的。要检查 SSH 守护进程是否已经运行，输入 <code>systemctl status sshd</code>：</p><pre tabindex=0><code>$ systemctl status sshd
● sshd.service - OpenSSH server daemon
   Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2018-06-22 11:12:05 UTC; 2 years 11 months ago
     Docs: man:sshd(8)
           man:sshd_config(5)
 Main PID: 577 (sshd)
    Tasks: 1 (limit: 26213)
   CGroup: /system.slice/sshd.service
           └─577 /usr/sbin/sshd -D -oCiphers=[aes256-gcm@openssh.com][5],chacha20-[...]
</code></pre><p>如果它处于 未激活 inactive 状态，使用 <code>systemctl start sshd</code> 命令启动它。</p><h3 id=2设置远程控制台>2、设置远程控制台</h3><p>在 Windows 下 <a href=https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html>下载 PuTTY 安装程序</a>，然后安装并打开它。你应看到一个像这样的窗口：</p><p><img src=/data/attachment/album/202207/23/110048szd6dh4pfhdd7zmm.png alt="PuTTY configuration screen" title="PuTTY configuration screen"></p><p>在“ 主机名（或 IP 地址） Host Name (or IP address) ”输入框，键入你的 Linux 系统的连接信息。本文设置了一个 Fedora 33 虚拟机，它使用桥接网络适配器，使我可以由 IP 地址 <code>192.168.1.60</code> 连接这个系统。点击“ 打开 Open ”，应会如图示的打开一个窗口：</p><p><img src=/data/attachment/album/202207/23/110048gnyjeahjzynsspe5.png alt="PutTTY security alert" title="PutTTY security alert"></p><p>这是 SSH 的安全措施之一，是为了防止 中间人攻击 man-in-the-middle attack 。消息中的指纹应该匹配 Linux 系统中放在 <code>/etc/ssh/ssh_host_ed25519_key.pub</code> 的密钥。PuTTY 将这个密钥以 <a href=https://en.wikipedia.org/wiki/MD5>MD5 哈希值</a> 的方式打印出来。要检查它的真实性，切换到 Linux 系统并打开一个控制台，然后输入：</p><pre tabindex=0><code>ssh-keygen -l -E md5 -f /etc/ssh/ssh_host_ed25519_key.pub
</code></pre><p>输出应该和 PuTTY 展示的指纹一致：</p><pre tabindex=0><code>$ ssh-keygen -l -E md5 -f /etc/ssh/ssh_host_ed25519_key.pub
256 MD5:E4:5F:01:05:D0:F7:DC:A6:32 no comment (ED25519)
</code></pre><p>点击“ 是 Yes ”以确认 PuTTY 的安全提示。主机系统的指纹现在存储在 PuTTY 的信任列表中，其位于 Windows 的注册表中的：</p><pre tabindex=0><code>HKEY_CURRENT_USER\SOFTWARE\SimonTatham\PuTTY\SshHostKeys
</code></pre><p>输入正确的登录凭证，然后你应该进入控制台了，位置在你的用户主目录。</p><p><img src=/data/attachment/album/202207/23/110049q1v4tgcov47dvoob.png alt="Logged in to SSH" title="Logged in to SSH"></p><h3 id=3通过网络复制文件>3、通过网络复制文件</h3><p>除了远程控制台，你同样可以使用 PuTTY 通过 SSH 来传输文件。PuTTY 的安装目录在 <code>C:\Program Files (x86)\PuTTY</code>，在该目录下寻找 <code>ppscp.exe</code>。你既可以使用它从 Linux 系统复制文件，也可以复制文件到 Linux 系统。</p><p>使用 <code>Windows + R</code> 然后输入 <code>cmd</code> 来打开命令提示符，从你的 Linux 用户主目录复制 <code>MYFile.txt</code> 到你的 Windows 主目录，输入：</p><pre tabindex=0><code>C:\&#34;Program Files (x86)&#34;\PuTTY\pscp.exe stephan@192.168.1.60:/home/stephan/MyFile.txt .
</code></pre><p>要从 Windows 主目录复制文件到 Linux 用户主目录，输入：</p><pre tabindex=0><code>C:\&#34;Program Files (x86)&#34;\PuTTY\pscp.exe MyFile.txt stephan@192.168.1.60:/home/stephan/
</code></pre><p>就像你也许已经发现的那样，复制的命令通常构造为：</p><pre tabindex=0><code>pscp.exe &lt;source&gt; &lt;target&gt;
</code></pre><h3 id=4隧道化一个协议>4、隧道化一个协议</h3><p>假设你拥有一个 Linux 机器，为某些特别的应用运行一个基于 HTTP 的服务。你想从你的 Windows 机器通过互联网访问这个 HTTP 服务。而且，你不能将相关的 TCP 端口暴露在公网，因为：</p><ol><li>这个服务通过 HTTP 而非 HTTPS 运行</li><li>根本没有用户管理和登录系统</li></ol><p>乍一看，建立这种架构不产生可怕的漏洞似乎是不可能的。但是 SSH 可简单的为这种情况建立一个安全的解决方案。</p><p>我将用我的软件项目 <a href=https://github.com/hANSIc99/Pythonic>Pythonic</a> 来演示这个过程。在容器中运行。Pythonic 作为容器运行，开放两个 TCP 端口：TCP 端口 7000（主要编辑器）和 TCP 端口 8000（<a href=https://github.com/cdr/code-server>code-server</a> 代码编辑器）。</p><p>要在一个 Linux 机器上安装 Pythonic ，运行：</p><pre tabindex=0><code>podman pull pythonicautomation/pythonic
podman run -d -p 7000:7000 -p 8000:8000 pythonic
</code></pre><p>转向你的 Windows 机器，打开 PuTTy，转到 “ 连接 Connection -> SSH -> 隧道 Tunnels ”。加入你要转发的两个 TCP 端口：</p><ul><li>源：<code>7000</code> / 目标：<code>localhost:7000</code></li><li>源：<code>8000</code> / 目标：<code>localhost:8000</code></li></ul><p><img src=/data/attachment/album/202207/23/110049jm4rapms266sc7z6.png alt="Port forwarding in PuTTY" title="Port forwarding in PuTTY"></p><p>然后返回 “ 会话 Session ” 部分，并像之前那样建立一个 SSH 链接。打开网页浏览器，然后转到 <code>http://localhost:7000</code>；你应该看见像这样的窗口：</p><p><img src=/data/attachment/album/202207/23/110049jhw6cd6mbk67dgwk.png alt=Pythonic title=Pythonic></p><p>你成功的设置了端口转发！</p><p><strong>警告</strong>: 如果你选择在公网上暴露 TCP 端口 22 ，不要使用易于猜测的登录凭证。你将接受来自全世界的登录请求，它们使用常见的、标准的登录凭证以尝试登录你的 Linux 机器。相反，只允许已知的用户登录。这种登录限制可以通过 <a href=https://opensource.com/article/21/4/encryption-decryption-openssl>公钥加密</a> 来实现，它使用一个密钥对，其中公钥存储在 SSH 主机上，而私钥保留在客户端。</p><h3 id=调试>调试</h3><p>如果你难以连接你的 Linux 机器，你可以跟踪你的 SSH 守护进程的处理过程：</p><pre tabindex=0><code>journalctl -f -u sshd
</code></pre><p>这是一个普通的登录进程，但是其日志级别为 DEBUG，它看起来是这样的 :</p><p><img src=/data/attachment/album/202207/23/110050lizdhug1zr2ghaz1.png alt="LogLevel DEBUG output" title="LogLevel DEBUG output"></p><h3 id=了解更多>了解更多</h3><p>这篇文章几乎没有涉及到使用 SSH 的方法。如果你正在寻找一个特定用例的信息，你也许可以在互联网中找到无数的教程。我在工作中使用 PuTTY ，因为它易于设置，在两个操作系统间又具有良好的可操作性，使得它成为连接解决方案里的瑞士军刀。</p><p>（文内图片来自：Stephan Avenwedde，<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a>）</p><hr><p>via: <a href=https://opensource.com/article/21/6/ssh-windows>https://opensource.com/article/21/6/ssh-windows</a></p><p>作者：<a href=https://opensource.com/users/hansic99>Stephan Avenwedde</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/yjacks>yjacks</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/putty/ rel=tag>PuTTY</a></li><li class=tags__item><a class="tags__link btn" href=/tags/ssh/ rel=tag>SSH</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>