<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Ansible 教程：简单 Ansible 命令介绍 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Ansible 教程：简单 Ansible 命令介绍"><meta property="og:description" content="在这个 Ansible 教程中，我们将学习一些基本的 Ansible 命令的例子，我们将用它来管理基础设施。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9527-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-08T15:18:43+00:00"><meta property="article:modified_time" content="2018-04-08T15:18:43+00:00"><meta itemprop=name content="Ansible 教程：简单 Ansible 命令介绍"><meta itemprop=description content="在这个 Ansible 教程中，我们将学习一些基本的 Ansible 命令的例子，我们将用它来管理基础设施。"><meta itemprop=datePublished content="2018-04-08T15:18:43+00:00"><meta itemprop=dateModified content="2018-04-08T15:18:43+00:00"><meta itemprop=wordCount content="204"><meta itemprop=keywords content="Ansible,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Ansible 教程：简单 Ansible 命令介绍</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-04-08T15:18:43Z>April 08, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201804/08/151839pp13hpc7o1i36joc.jpg alt></p><p>在我们之前的 Ansible 教程中，我们讨论了 <a href=http://linuxtechlab.com/create-first-ansible-server-automation-setup/>Ansible 的安装和配置</a>。在这个 Ansible 教程中，我们将学习一些基本的 Ansible 命令的例子，我们将用它来管理基础设施。所以让我们先看看一个完整的 Ansible 命令的语法：</p><pre tabindex=0><code>$ ansible &lt;group&gt; -m &lt;module&gt; -a &lt;arguments&gt;
</code></pre><p>在这里，我们可以用单个主机或用 <code>&lt;group></code> 代替一组主机，<code>&lt;arguments></code> 是可选的参数。现在我们来看看一些 Ansible 的基本命令。</p><h3 id=检查主机的连通性>检查主机的连通性</h3><p>我们在之前的教程中也使用了这个命令。检查主机连接的命令是：</p><pre tabindex=0><code>$ ansible &lt;group&gt; -m ping
</code></pre><h3 id=重启主机>重启主机</h3><pre tabindex=0><code>$ ansible &lt;group&gt; -a &#34;/sbin/reboot&#34;
</code></pre><h3 id=检查主机的系统信息>检查主机的系统信息</h3><p>Ansible 收集所有连接到它主机的信息。要显示主机的信息，请运行：</p><pre tabindex=0><code>$ ansible &lt;group&gt; -m setup | less
</code></pre><p>其次，通过传递参数来从收集的信息中检查特定的信息：</p><pre tabindex=0><code>$ ansible &lt;group&gt; -m setup -a &#34;filter=ansible_distribution&#34;
</code></pre><h3 id=传输文件>传输文件</h3><p>对于传输文件，我们使用模块 <code>copy</code> ，完整的命令是这样的：</p><pre tabindex=0><code>$ ansible &lt;group&gt; -m copy -a &#34;src=/home/dan dest=/tmp/home&#34;
</code></pre><h3 id=管理用户>管理用户</h3><p>要管理已连接主机上的用户，我们使用一个名为 <code>user</code> 的模块，并如下使用它。</p><h4 id=创建新用户>创建新用户</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m user -a &#34;name=testuser password=&lt;encrypted password&gt;&#34;
</code></pre><h4 id=删除用户>删除用户</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m user -a &#34;name=testuser state=absent&#34;
</code></pre><p><strong>注意：</strong> 要创建加密密码，请使用 <code>"mkpasswd -method=sha-512"</code>。</p><h3 id=更改权限和所有者>更改权限和所有者</h3><p>要改变已连接主机文件的所有者，我们使用名为 <code>file</code> 的模块，使用如下。</p><h4 id=更改文件权限>更改文件权限</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m file -a &#34;dest=/home/dan/file1.txt mode=777&#34;
</code></pre><h4 id=更改文件的所有者>更改文件的所有者</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m file -a &#34;dest=/home/dan/file1.txt mode=777 owner=dan group=dan&#34;
</code></pre><h3 id=管理软件包>管理软件包</h3><p>我们可以通过使用 <code>yum</code> 和 <code>apt</code> 模块来管理所有已连接主机的软件包，完整的命令如下：</p><h4 id=检查包是否已安装并更新>检查包是否已安装并更新</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m yum -a &#34;name=ntp state=latest&#34;
</code></pre><h4 id=检查包是否已安装但不更新>检查包是否已安装，但不更新</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m yum -a &#34;name=ntp state=present&#34;
</code></pre><h4 id=检查包是否是特定的版本>检查包是否是特定的版本</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m yum -a &#34;name= ntp-1.8 state=present&#34;
</code></pre><h4 id=检查包是否没有安装>检查包是否没有安装</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m yum -a &#34;name=ntp state=absent&#34;
</code></pre><h3 id=管理服务>管理服务</h3><p>要管理服务，我们使用模块 <code>service</code> ，完整命令如下：</p><h4 id=启动服务>启动服务</h4><pre tabindex=0><code>$ansible &lt;group&gt; -m service -a &#34;name=httpd state=started&#34;
</code></pre><h4 id=停止服务>停止服务</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m service -a &#34;name=httpd state=stopped&#34;
</code></pre><h4 id=重启服务>重启服务</h4><pre tabindex=0><code>$ ansible &lt;group&gt; -m service -a &#34;name=httpd state=restarted&#34;
</code></pre><p>这样我们简单的、单行 Ansible 命令的教程就完成了。此外，在未来的教程中，我们将学习创建 playbook，来帮助我们更轻松高效地管理主机。</p><hr><p>via: <a href=http://linuxtechlab.com/ansible-tutorial-simple-commands/>http://linuxtechlab.com/ansible-tutorial-simple-commands/</a></p><p>作者：<a href=http://linuxtechlab.com/author/shsuain/>SHUSAIN</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/ansible/ rel=tag>Ansible</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>