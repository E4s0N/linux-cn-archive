<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 OBS 中将摄像头锁定到特定的 USB 端口 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 OBS 中将摄像头锁定到特定的 USB 端口"><meta property="og:description" content="为了使复杂的摄像头设置标准化，你可以对 Linux 文件系统中摄像头的位置分配施加一些特殊规则。"><meta property="og:type" content="article"><meta property="og:url" content="/article-15790-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-06T23:31:05+00:00"><meta property="article:modified_time" content="2023-05-06T23:31:05+00:00"><meta itemprop=name content="在 OBS 中将摄像头锁定到特定的 USB 端口"><meta itemprop=description content="为了使复杂的摄像头设置标准化，你可以对 Linux 文件系统中摄像头的位置分配施加一些特殊规则。"><meta itemprop=datePublished content="2023-05-06T23:31:05+00:00"><meta itemprop=dateModified content="2023-05-06T23:31:05+00:00"><meta itemprop=wordCount content="332"><meta itemprop=keywords content="摄像头,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 OBS 中将摄像头锁定到特定的 USB 端口</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-05-06T23:31:05Z>May 06, 2023</time></div></div></header><div class="content post__content clearfix"><blockquote><p>为了使复杂的摄像头设置标准化，你可以对 Linux 文件系统中摄像头的位置分配施加一些特殊规则。</p></blockquote><p><img src=https://img.linux.net.cn/data/attachment/album/202305/06/233102xqfzerq9mek1e9mt.png alt title="Person using a laptop"></p><p>如果在 Linux 上用多个摄像头 <a href=https://opensource.com/life/15/12/real-time-linux-video-editing-with-obs-studio>使用 OBS 进行直播</a>，你可能会注意到摄像头会在开机时按照它们被检测到的顺序加载。通常情况下你不需要特别在意，但如果你有一个固定的直播设置和复杂的 OBS 模板，你需要知道现实世界中哪个摄像头将会显示在虚拟世界的哪个屏幕上。换句话说，你不希望今天将一个设备分配为“摄像头 A”，而明天它却成为“摄像头 B”。</p><p>为了使复杂的摄像头设置标准化，你可以对 Linux 文件系统中摄像头的位置分配施加一些特殊规则。</p><h3 id=udev-子系统>udev 子系统</h3><p>在 Linux 上处理硬件外设的系统称为 udev。它检测和管理你接入计算机的所有设备。你可能没有意识到它的存在，因为它不会吸引太多注意力。尽管当你插入 USB 闪存驱动器以在桌面上打开它或连接打印机时，你肯定与它交互过。</p><h3 id=硬件检测>硬件检测</h3><p>假设你有两个 USB 摄像头：一个在电脑左侧，另一个在右侧。左侧摄像头拍摄近景，右侧摄像头拍摄远景，并且在直播过程中你需要切换两个摄像头。在 OBS 中，你将每个摄像头添加到 源 Sources 面板中，并直观地将它们命名为 “camLEFT” 和 “camRIGHT”。</p><p>设想一种最坏的场景，你有两个 <em>相同的</em> 摄像头：它们是同一品牌、同一型号。这是最坏的情况，因为当两个硬件设备完全相同时，它们几乎不可能有任何独特的 ID，以便你的电脑能够将它们区分开来。</p><p>不过，这个难题有解决办法，只需要一些简单的终端命令进行一些调查。</p><h4 id=1获取厂商和产品-id>1、获取厂商和产品 ID</h4><p>首先，将一个摄像头插入你想要它分配到的 USB 端口。然后输入以下命令：</p><pre tabindex=0><code>$ lsusb
Bus 006 Device 002: ID 0951:1666 Kingston Technology DataTraveler G4
Bus 005 Device 003: ID 03f0:3817 Hewlett-Packard LaserJet P2015 series
Bus 003 Device 006: ID 045e:0779 Microsoft Corp. LifeCam HD-3000
Bus 003 Device 002: ID 8087:0025 Intel Corp. 
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 003: ID 046d:c216 Logitech, Inc. Dual Action Gamepad
Bus 001 Device 002: ID 048d:5702 Integrated Technology Express, Inc. 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
[...]
</code></pre><p>你通常可以专门搜索字符串 <code>cam</code> 以缩小结果范围，因为大多数（但不是所有）摄像头都会报告为 “camera”。</p><pre tabindex=0><code>$ lsusb | grep -i cam
Bus 003 Device 006: ID 045e:0779 Microsoft Corp. LifeCam HD-3000
</code></pre><p>这里有很多信息。ID 被列为 <code>045e:0779</code>。第一个数字是供应商 ID，第二个数字是产品 ID。把它们写下来，因为稍后你会需要它们。</p><h4 id=2获取-usb-标识符>2、获取 USB 标识符</h4><p>你还获取了摄像头的设备路径：总线 3，设备 6。在 Linux 中有一句话：“一切皆文件”，实际上，USB 设备被描述为以 <code>/dev/bus/usb/</code> 开始，以总线（本例中为 003）和设备（本例中为 006）结尾的文件路径。查看 <code>lsusb</code> 输出中的总线和设备号。它们告诉你该摄像头位于 <code>/dev/bus/usb/003/006</code>。</p><p>你可以使用 <code>udevadm</code> 命令获取此 USB 设备的内核代号：</p><pre tabindex=0><code>$ sudo udevadm info --attribute-walk /dev/bus/usb/003/006 | grep &#34;KERNEL=&#34;

   KERNEL==&#34;3-6.2.1&#34;
</code></pre><p>这个例子中的内核 USB 标识符是 <code>3-6.2.1</code>。把你系统中的标识符记下来，因为之后也会用到它。</p><h4 id=3为每个摄像头重复该过程>3、为每个摄像头重复该过程</h4><p>将另一个摄像头（如果你有多个摄像头，则为每个摄像头）连接到要分配给它的 USB 端口。这与你用于另一个摄像头的 USB 端口是不同的！</p><p>重复该过程，获取供应商和产品 ID（如果摄像头是相同的品牌和型号，则应与第一个摄像头相同）以及内核 USB 标识符。</p><pre tabindex=0><code>$ lsusb | grep -i cam
Bus 001 Device 004: ID 045e:0779 Microsoft Corp. LifeCam HD-3000
$ sudo udevadm info --attribute-walk dev/bus/usb/001/004 | grep &#34;KERNEL=&#34;

   KERNEL==&#34;1-6&#34;
</code></pre><p>在这个例子中，我已经确定我的摄像头连接到了 1-6 和 3-6.2.1（第一个是我的机器上的 USB 端口，另一个是插在我的机器上的显示器插口的集线器，这就是为什么一个比另一个更复杂的原因）。</p><h3 id=编写一个-udev-规则>编写一个 udev 规则</h3><p>你已经有了所需的一切，因此现在可以编写一个规则，告诉 udev 在特定的 USB 端口找到一个摄像头时给它一个一致的标识符。</p><p>创建并打开一个名为 <code>/etc/udev/rules.d/50-camera.conf</code> 的文件，并输入这两个规则，使用适合你自己系统的厂商和产品 ID 和内核标识符：</p><pre tabindex=0><code>SUBSYSTEM==&#34;usb&#34;, KERNEL==&#34;1-6&#34;, ATTR{idVendor}==&#34;045e&#34;, ATTR{idProduct}==&#34;0779&#34;, SYMLINK+=&#34;video100&#34;

SUBSYSTEM==&#34;usb&#34;, KERNEL==&#34;3-6.2.1&#34;, ATTR{idVendor}==&#34;045e&#34;, ATTR{idProduct}==&#34;0779&#34;, SYMLINK+=&#34;video101&#34;
</code></pre><p>这些规则告诉 udev，当在特定的 USB 位置找到与特定供应商和产品 ID 匹配的设备时，创建一个名为 <code>video100</code> 和 <code>video101</code> 的符号链接（有时也称为“别名”）。符号链接大多是任意的。我使用较大的数字，这样它们就容易被发现，并且数字不能与现有设备冲突。如果实际上有超过 101 个摄像头连接到计算机上，请使用 <code>video200</code> 和 <code>video201</code> 以确保安全（记得联系我！我很想了解 <em>该</em> 项目的情况）。</p><h3 id=重启>重启</h3><p>重新启动计算机。你现在可以让摄像头保持连接在计算机上，但实际上这并不重要。一旦 udev 加载了规则，它就会遵循这些规则，无论设备是否在启动期间附加或稍后插入。</p><p>许多人说 Linux 从不需要重启，但是 udev 在引导期间加载其规则，而且此外，你想保证你的 udev 规则在重新启动时也起作用。</p><p>计算机重新启动后，请查看摄像头注册的 <code>/dev/video</code> 目录：</p><pre tabindex=0><code>$ ls -1 /dev/video*
/dev/video0
/dev/video1
/dev/video100
/dev/video101
/dev/video2
/dev/video3
</code></pre><p>正如你所看到的，在 <code>video100</code> 和 <code>video101</code> 有条目。今天，这些是指向 <code>/dev/video2</code> 和 <code>/dev/video3</code> 的符号链接，但明天它们可能是指向 <code>/dev/video1</code> 和 <code>/dev/video2</code> 或任何其他基于 Linux 检测和分配文件的组合。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/06/233106tmjqyjqh4x48eu4p.jpg alt=两个摄像头角度 title="Two camera angles"></p><p>你可以在 OBS 中使用这些符号链接，这样 camLEFT 始终是 camLEFT，camRIGHT 始终是 camRIGHT。</p><p><em>（题图：MJ/9bb70b6d-9f49-493a-8daf-5546d207781f）</em></p><hr><p>via: <a href=https://opensource.com/article/22/1/cameras-usb-ports-obs>https://opensource.com/article/22/1/cameras-usb-ports-obs</a></p><p>作者：<a href=https://opensource.com/users/seth>Seth Kenlon</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/hanszhao80>hanszhao80</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%91%84%E5%83%8F%E5%A4%B4/ rel=tag>摄像头</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>