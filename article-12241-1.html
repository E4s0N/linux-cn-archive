<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Mac 上使用 pyenv 运行多个版本的 Python - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Mac 上使用 pyenv 运行多个版本的 Python"><meta property="og:description" content="如果你在 macOS 上运行的项目需要没有安装的 Python 版本，请试试 pyenv。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12241-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-23T11:20:54+00:00"><meta property="article:modified_time" content="2020-05-23T11:20:54+00:00"><meta itemprop=name content="如何在 Mac 上使用 pyenv 运行多个版本的 Python"><meta itemprop=description content="如果你在 macOS 上运行的项目需要没有安装的 Python 版本，请试试 pyenv。"><meta itemprop=datePublished content="2020-05-23T11:20:54+00:00"><meta itemprop=dateModified content="2020-05-23T11:20:54+00:00"><meta itemprop=wordCount content="314"><meta itemprop=keywords content="pyenv,Python,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Mac 上使用 pyenv 运行多个版本的 Python</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-05-23T11:20:54Z>May 23, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>如果你在 macOS 上运行的项目需要没有安装的 Python 版本，请试试 pyenv。</p></blockquote><p><img src=/data/attachment/album/202005/23/112041pawp65alw6tmea6l.jpg alt></p><p>即使对于有经验的开发人员，管理本地 Python 开发环境仍然是一个挑战。尽管有详细的<a href=https://opensource.com/article/19/4/managing-python-packages>软件包管理策略</a>，但仍需要采取另外的步骤来确保你在需要时运行所需的 Python 版本。</p><h3 id=为什么-python-版本重要>为什么 Python 版本重要？</h3><p>起初这是一个奇怪的概念，但是编程语言会像其他任何软件一样发生变化。它们有错误、修复和更新，就像你喜欢的 <a href=https://opensource.com/article/19/5/api-evolution-right-way>API</a> 和任何其他软件一样。同样，不同的发行版由称为<a href=https://semver.org/>语义化版本</a>的三位数标识。</p><blockquote><p>??? <a href=https://t.co/yt1Z2439W8>pic.twitter.com/yt1Z2439W8</a></p><p>— Denny Perez (@dennyperez18) <a href="https://twitter.com/dennyperez18/status/1133505310516232203?ref_src=twsrc%5Etfw">May 28, 2019</a></p></blockquote><p>多年来，Python 2 是该语言的常用主要版本。在 2020 年 1 月，Python 2 <a href=https://opensource.com/article/19/11/end-of-life-python-2>到达最后寿命</a>，此后，Python 的核心维护者将仅支持 Python 3。Python 3 稳步发展，并定期发布新更新。对我来说定期获取这些更新很重要。</p><p>最近，我试图在 macOS 上运行一个依赖于 Python 3.5.9 的项目，而我的系统上并没有安装这个版本。我认为 Python 包管理器 <code>pip</code> 可以安装它，但事实并非如此：</p><pre tabindex=0><code>$ pip install python3.5.9
Collecting python3.5.9
  ERROR: Could not find a version that satisfies the requirement python3.5.9 (from versions: none)
ERROR: No matching distribution found for python3.5.9
</code></pre><p>或者，我也可以从官方 Python 网站下载该版本，但我如何在我的 Mac 上与现有的 Python 版本一起运行？每次运行时指定 Python 解释器版本（例如 python3.7 或 python3.5）似乎很容易出错。一定会有更好的方法。</p><p>（说明：我知道这对经验丰富的 Python 开发人员没有意义，但对当时的我来说是有意义的。我很乐意谈一谈为什么我仍然认为它应该这样做。）</p><h3 id=安装和设置-pyenv>安装和设置 pyenv</h3><p>值得庆幸的是，<code>pyenv</code> 可以绕开这一系列复杂的问题。首先，我需要安装 <code>pyenv</code>。我可以<a href=https://github.com/pyenv/pyenv>从源码</a>克隆并编译它，但是我更喜欢通过 Homebrew 包管理器来管理软件包：</p><pre tabindex=0><code>$ brew install pyenv
</code></pre><p>为了通过 <code>pyenv</code> 使用 Python 版本，必须了解 shell 的 <code>PATH</code> 变量。<code>PATH</code> 决定了 shell 通过命令的名称来搜索文件的位置。你必须确保 shell 程序能够找到通过 <code>pyenv</code> 运行的 Python 版本，而不是默认安装的版本（通常称为<em>系统版本</em>）。如果不更改路径，那么结果如下：</p><pre tabindex=0><code>$ which python
/usr/bin/python
</code></pre><p>这是 Python 的系统版本。</p><p>要正确设置 <code>pyenv</code>，可以在 Bash 或 zsh 中运行以下命令：</p><pre tabindex=0><code>$ PATH=$(pyenv root)/shims:$PATH
</code></pre><p>现在，如果你检查 Python 的版本，你会看到它是 <code>pyenv</code> 管理的版本：</p><pre tabindex=0><code>$ which python
/Users/my_username/.pyenv/shims/python
</code></pre><p>该导出语句（<code>PATH=</code>）仅会对该 shell 实例进行更改，为了使更改永久生效，你需要将它添加到点文件当中。由于 zsh 是 macOS 的默认 shell，因此我将重点介绍它。将相同的语法添加到 <code>~/.zshrc</code> 文件中：</p><pre tabindex=0><code>$ echo &#39;PATH=$(pyenv root)/shims:$PATH&#39; &gt;&gt; ~/.zshrc
</code></pre><p>现在，每次我们在 zsh 中运行命令时，它将使用 <code>pyenv</code> 版本的 Python。请注意，我在 <code>echo</code> 中使用了单引号，因此它不会评估和扩展命令。</p><p><code>.zshrc</code> 文件仅管理 zsh 实例，因此请确保检查你的 shell 程序并编辑关联的点文件。如果需要再次检查默认 shell 程序，可以运行 <code>echo $SHELL</code>。如果是 zsh，请使用上面的命令。如果你使用 Bash，请将 <code>~/.zshrc</code> 更改为 <code>~/.bashrc</code>。如果你想了解更多信息，可以在 <code>pyenv</code> 的 <code>README</code> 中深入研究<a href=https://github.com/pyenv/pyenv#understanding-path>路径设置</a>。</p><h3 id=使用-pyenv-管理-python-版本>使用 pyenv 管理 Python 版本</h3><p>现在 <code>pyenv</code> 已经可用，我们可以看到它只有系统 Python 可用：</p><pre tabindex=0><code>$ pyenv versions
system
</code></pre><p>如上所述，你绝对不想使用此版本（<a href=https://opensource.com/article/19/5/python-3-default-mac>阅读更多有关信息</a>）。现在 <code>pyenv</code> 已正确设置，我希望它能有我经常使用的几个不同版本的 Python。</p><p>有一种方法可以通过运行 <code>pyenv install --list</code> 来查看 pyenv 可以访问的所有仓库中的所有 Python 版本。这是一个很长的列表，将来回顾的时候可能会有所帮助。目前，我决定在 <a href=https://www.python.org/downloads/>Python 下载页面</a>找到的每个最新的“点版本”（3.5.x 或 3.6.x，其中 x 是最新的）。因此，我将安装 3.5.9 和 3.8.0：</p><pre tabindex=0><code>$ pyenv install 3.5.9
$ pyenv install 3.8.0
</code></pre><p>这将需要一段时间，因此休息一会（或阅读上面的链接之一）。有趣的是，输出中显示了该版本的 Python 的下载和构建。例如，输出显示文件直接来自 <a href=http://python.org>Python.org</a>。</p><p>安装完成后，你可以设置默认值。我喜欢最新的，因此将全局默认 Python 版本设置为最新版本：</p><pre tabindex=0><code>$ pyenv global 3.8.0
</code></pre><p>该版本立即在我的 shell 中设置完成。确认一下：</p><pre tabindex=0><code>$ python -V
Python 3.8.0
</code></pre><p>我要运行的项目仅适于 Python 3.5，因此我将在本地设置该版本并确认：</p><pre tabindex=0><code>$ pyenv local 3.5.9
$ python -V
Python 3.5.9
</code></pre><p>因为我在 <code>pyenv</code> 中使用了 <code>local</code> 选项，所以它向当前目录添加了一个文件来跟踪该信息。</p><pre tabindex=0><code>$ cat .python-version
3.5.9
</code></pre><p>现在，我终于可以为想要的项目设置虚拟环境，并确保运行正确版本的 Python。</p><pre tabindex=0><code>$ python -m venv venv
$ source ./venv/bin/activate
(venv) $ which python
/Users/mbbroberg/Develop/my_project/venv/bin/python
</code></pre><p>要了解更多信息，请查看有关<a href=/article-11086-1.html>在 Mac 上管理虚拟环境</a>的教程。</p><h3 id=总结>总结</h3><p>默认情况下，运行多个 Python 版本可能是一个挑战。我发现 <code>pyenv</code> 可以确保在我需要时可以有我需要的 Python 版本。</p><p>你还有其他初学者或中级 Python 问题吗？ 请发表评论，我们将在以后的文章中考虑介绍它们。</p><hr><p>via: <a href=https://opensource.com/article/20/4/pyenv>https://opensource.com/article/20/4/pyenv</a></p><p>作者：<a href=https://opensource.com/users/mbbroberg>Matthew Broberg</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/pyenv/ rel=tag>pyenv</a></li><li class=tags__item><a class="tags__link btn" href=/tags/python/ rel=tag>Python</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>