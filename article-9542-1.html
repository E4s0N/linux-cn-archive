<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>为初学者提供的 uniq 命令教程及示例 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="为初学者提供的 uniq 命令教程及示例"><meta property="og:description" content="该命令会帮助你轻松地从文件中找到重复的行。它不仅用于查找重复项，而且我们还可以使用它来删除重复项，显示重复项的出现次数，只显示重复的行，只显示唯一的行等。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9542-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-13T20:46:47+00:00"><meta property="article:modified_time" content="2018-04-13T20:46:47+00:00"><meta itemprop=name content="为初学者提供的 uniq 命令教程及示例"><meta itemprop=description content="该命令会帮助你轻松地从文件中找到重复的行。它不仅用于查找重复项，而且我们还可以使用它来删除重复项，显示重复项的出现次数，只显示重复的行，只显示唯一的行等。"><meta itemprop=datePublished content="2018-04-13T20:46:47+00:00"><meta itemprop=dateModified content="2018-04-13T20:46:47+00:00"><meta itemprop=wordCount content="265"><meta itemprop=keywords content="uniq,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>为初学者提供的 uniq 命令教程及示例</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-04-13T20:46:47Z>April 13, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201804/13/204629q8eeab5ftiltxcmi.jpg alt></p><p>如果你主要是在命令行上工作，并且每天处理大量的文本文件，那么你应该了解下 <code>uniq</code> 命令。该命令会帮助你轻松地从文件中找到重复的行。它不仅用于查找重复项，而且我们还可以使用它来删除重复项，显示重复项的出现次数，只显示重复的行，只显示唯一的行等。由于 <code>uniq</code> 命令是 GNU coreutils 包的一部分，所以它预装在大多数 Linux 发行版中，让我们不需要费心安装。来看一些实际的例子。</p><p>请注意，除非重复行是相邻的，否则 <code>uniq</code> 不会删除它们。因此，你可能需要先对它们进行排序，或将排序命令与 <code>uniq</code> 组合以获得结果。让我给你看一些例子。</p><p>首先，让我们创建一个带有一些重复行的文件：</p><pre tabindex=0><code>vi ostechnix.txt
</code></pre><pre tabindex=0><code>welcome to ostechnix
welcome to ostechnix
Linus is the creator of Linux.
Linux is secure by default
Linus is the creator of Linux.
Top 500 super computers are powered by Linux
</code></pre><p>正如你在上面的文件中看到的，我们有一些重复的行（第一行和第二行，第三行和第五行是重复的）。</p><h3 id=1-使用-uniq-命令删除文件中的连续重复行>1、 使用 uniq 命令删除文件中的连续重复行</h3><p>如果你在不使用任何参数的情况下使用 <code>uniq</code> 命令，它将删除所有连续的重复行，只显示唯一的行。</p><pre tabindex=0><code>uniq ostechnix.txt
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/13/204653e5yjb4b6u6b1j9if.png alt></p><p>如你所见， <code>uniq</code> 命令删除了给定文件中的所有连续重复行。你可能还注意到，上面的输出仍然有第二行和第四行重复了。这是因为 <code>uniq</code> 命令只有在相邻的情况下才会删除重复的行，当然，我们也可以删除非连续的重复行。请看下面的第二个例子。</p><h3 id=2-删除所有重复的行>2、 删除所有重复的行</h3><pre tabindex=0><code>sort ostechnix.txt | uniq
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/13/204655vhmmjsp3zp11sfet.png alt></p><p>看到了吗？没有重复的行。换句话说，上面的命令将显示在 <code>ostechnix.txt</code> 中只出现一次的行。我们使用 <code>sort</code> 命令与 <code>uniq</code> 命令结合，因为，就像我提到的，除非重复行是相邻的，否则 <code>uniq</code> 不会删除它们。</p><h3 id=3-只显示文件中唯一的一行>3、 只显示文件中唯一的一行</h3><p>为了只显示文件中唯一的一行，可以这样做：</p><pre tabindex=0><code>sort ostechnix.txt | uniq -u
</code></pre><p>示例输出：</p><pre tabindex=0><code>Linux is secure by default
Top 500 super computers are powered by Linux
</code></pre><p>如你所见，在给定的文件中只有两行是唯一的。</p><h3 id=4-只显示重复的行>4、 只显示重复的行</h3><p>同样的，我们也可以显示文件中重复的行，就像下面这样：</p><pre tabindex=0><code>sort ostechnix.txt | uniq -d
</code></pre><p>示例输出：</p><pre tabindex=0><code>Linus is the creator of Linux.
welcome to ostechnix
</code></pre><p>这两行在 <code>ostechnix.txt</code> 文件中是重复的行。请注意 <code>-d</code>（小写 <code>d</code>） 将会只打印重复的行，每组显示一个。打印所有重复的行，使用 <code>-D</code>（大写 <code>D</code>），如下所示：</p><pre tabindex=0><code>sort ostechnix.txt | uniq -D
</code></pre><p>在下面的截图中看两个选项的区别：</p><p><img src=/data/attachment/album/201804/13/204657rpo115v6tp5bn1xq.png alt></p><h3 id=5-显示文件中每一行的出现次数>5、 显示文件中每一行的出现次数</h3><p>由于某种原因，你可能想要检查给定文件中每一行重复出现的次数。要做到这一点，使用 <code>-c</code> 选项，如下所示：</p><pre tabindex=0><code>sort ostechnix.txt | uniq -c
</code></pre><p>示例输出：</p><pre tabindex=0><code> 2 Linus is the creator of Linux.
 1 Linux is secure by default
 1 Top 500 super computers are powered by Linux
 2 welcome to ostechnix
</code></pre><p>我们还可以按照每一行的出现次数进行排序，然后显示，如下所示：</p><pre tabindex=0><code>sort ostechnix.txt | uniq -c | sort -nr
</code></pre><p>示例输出：</p><pre tabindex=0><code> 2 welcome to ostechnix
 2 Linus is the creator of Linux.
 1 Top 500 super computers are powered by Linux
 1 Linux is secure by default
</code></pre><h3 id=6-将比较限制为-n-个字符>6、 将比较限制为 N 个字符</h3><p>我们可以使用 <code>-w</code> 选项来限制对文件中特定数量字符的比较。例如，让我们比较文件中的前四个字符，并显示重复行，如下所示：</p><pre tabindex=0><code>uniq -d -w 4 ostechnix.txt
</code></pre><h3 id=7-忽略比较指定的-n-个字符>7、 忽略比较指定的 N 个字符</h3><p>像对文件中行的前 N 个字符进行限制比较一样，我们也可以使用 <code>-s</code> 选项来忽略比较前 N 个字符。</p><p>下面的命令将忽略在文件中每行的前四个字符进行比较：</p><pre tabindex=0><code>uniq -d -s 4 ostechnix.txt
</code></pre><p>为了忽略比较前 N 个字段（LCTT 译注：即前几列）而不是字符，在上面的命令中使用 <code>-f</code> 选项。</p><p>欲了解更多详情，请参考帮助部分：</p><pre tabindex=0><code>uniq --help
</code></pre><p>也可以使用 <code>man</code> 命令查看：</p><pre tabindex=0><code>man uniq
</code></pre><p>今天就到这里！我希望你现在对 <code>uniq</code> 命令及其目的有一个基本的了解。如果你发现我们的指南有用，请在你的社交网络上分享，并继续支持我们。更多好东西要来了，请继续关注！</p><p>干杯！</p><hr><p>via: <a href=https://www.ostechnix.com/uniq-command-tutorial-examples-beginners/>https://www.ostechnix.com/uniq-command-tutorial-examples-beginners/</a></p><p>作者：<a href=https://www.ostechnix.com>SK</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/uniq/ rel=tag>uniq</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>