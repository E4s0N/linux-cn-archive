<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux cp 命令的15个示例 - 创建文件和目录的副本 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Linux cp 命令的15个示例 - 创建文件和目录的副本"><meta property="og:description" content="拷贝文件和目录是每一个操作系统的基本指令。备份行为基本上是创建文件和目录的副本。在Linux系统下，我们可以用cp命令来实现。 copy 命令是什么  正如我们在上文提到的，cp是一个用来创建文件和目录副本的命令。在 &mldr;"><meta property="og:type" content="article"><meta property="og:url" content="/article-2687-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-03-14T13:44:00+00:00"><meta property="article:modified_time" content="2014-03-14T13:44:00+00:00"><meta itemprop=name content="Linux cp 命令的15个示例 - 创建文件和目录的副本"><meta itemprop=description content="拷贝文件和目录是每一个操作系统的基本指令。备份行为基本上是创建文件和目录的副本。在Linux系统下，我们可以用cp命令来实现。 copy 命令是什么  正如我们在上文提到的，cp是一个用来创建文件和目录副本的命令。在 &mldr;"><meta itemprop=datePublished content="2014-03-14T13:44:00+00:00"><meta itemprop=dateModified content="2014-03-14T13:44:00+00:00"><meta itemprop=wordCount content="292"><meta itemprop=keywords content="Linux,命令,cp,文件,拷贝,教程,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Linux cp 命令的15个示例 - 创建文件和目录的副本</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2014-03-14T13:44:00Z>March 14, 2014</time></div></div></header><div class="content post__content clearfix"><p>拷贝文件和目录是每一个操作系统的基本指令。备份行为基本上是创建文件和目录的副本。在Linux系统下，我们可以用<strong>cp</strong>命令来实现。</p><h3 id=copy-命令是什么>copy 命令是什么</h3><p><img src=/data/attachment/album/201403/14/134411r8in1vzsuppvz1wd.png alt></p><p>正如我们在上文提到的，<strong>cp</strong>是一个用来创建文件和目录副本的命令。在这里我们提供了一些在日常操作中可能用到的cp命令的实例。</p><h4 id=1-不带任何参数下运行cp>1. 不带任何参数下，运行cp</h4><p>这是 cp 命令最基础的使用。 拷贝名为 myfile.txt 从一个位置到另一个位置，我们可以像这样子输入：</p><pre tabindex=0><code>$ cp myfile.txt /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134414fiaifrwr4flalre4.png alt="Copy without options"></p><p>如果我们没有输入绝对路径，这意味着我们正在当前目录下拷贝一个文件。在上面的实例中，<strong>myfile.txt</strong>位于**/home/pungki/Documents<strong>目录下。如果我们当前目录正是</strong>/home/pungki/Documets**,那么没有必要输入**/home/pungki/Documents/myfile.txt<strong>来拷贝文件。当</strong>/home/pungki/office**是一个目录，则文件会拷贝到里面。</p><h4 id=2-同时拷贝多个文件>2. 同时拷贝多个文件</h4><p>要在同时拷贝多个文件，我们只需要将多个文件用空格隔开。如下示例：</p><pre tabindex=0><code>$ cp file_1.txt file_2.txt file_3.txt /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134415md7h9gpspp7s57j8.png alt="Copying multiple files"></p><h4 id=3-拷贝一个目录>3. 拷贝一个目录</h4><p>要拷贝一个目录的话会有点棘手。你需要添加 <strong>-r</strong> 或者 <strong>-R</strong> 选项来实现。<strong>-r</strong>或**-R** 选项表明递归操作。无论该目录是否为空目录，<strong>这个选项都是必要的</strong>。如下示例：</p><pre tabindex=0><code>$ cp -r directory_1 /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134416fouc0zol27d9t2cp.png alt="Copy directory"></p><p>需要注意的一件事，你需要<strong>移除在目录名尾部的斜杠</strong>。否则你会收到类似的错误信息<strong>cp: omitting directory‘directory_1/</strong>’</p><p><img src=/data/attachment/album/201403/14/134418w2jv15zcrlr8ylr5.png alt="Copy directory error"></p><p>如果你收到错误信息，则目录不会被拷贝到目标文件夹。</p><h4 id=4-创建文件的硬链接而不是拷贝它们>4. 创建文件的硬链接，而不是拷贝它们</h4><p>拷贝文件意味着你必须使用一些存储空间来储存拷贝的文件。有时候出于某种原因，你可能想要创建“快捷方式”或者链接到文件，而不是拷贝它们。要做到这一点，我们可以使用**-l**选项。</p><pre tabindex=0><code>$ cp -l file_4.txt /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134419j7czcuuzccudlqc4.png alt="Copy hardlinks"></p><p>从上图看出，我们看到<strong>file_4.txt</strong>的硬链接已经拷贝到**/home/pungki/office/file_4.txt**。标记有同样的 inode, <strong>835386</strong>。但是请注意，硬链接不能用来创建目录。下面让我们看一个例子。</p><p><em>原目录 directory_1 的 inode 值是 278230</em></p><p><img src=/data/attachment/album/201403/14/134420gcacjiohnoo6vlco.png alt="Inode number of original directory"></p><p><em>原文件 file_5.txt 的 inode 值是 279231</em></p><p><img src=/data/attachment/album/201403/14/134421s3uyd2avtdtnn5tu.png alt="Original inode number of file"></p><p><em>对 directory_1 执行 cp 命令</em></p><p><img src=/data/attachment/album/201403/14/134422i2whiwjo77m2jwm2.png alt="Copy using -rl options"></p><p><em>拷贝的 directory_1副本的 inode 值是 274800</em></p><p><img src=/data/attachment/album/201403/14/134423eciyssioumejxicu.png alt="Inode number of copied directory"></p><p><em>拷贝的 file_5.txt副本的 inode 值是 279231。跟它的原文件一样</em></p><p><img src=/data/attachment/album/201403/14/134424f2dojxncj090s0l2.png alt="Inode number of copied file"></p><h4 id=5-创建文件的符号链接>5. 创建文件的符号链接</h4><p>也有一种链接叫做 <strong>软链接</strong> 或 <strong>符号链接</strong>。我们用 <strong>-s</strong> 选项来实现。下面是命令的示例。</p><pre tabindex=0><code>$ cp -s /home/pungki/Documents/file_6.txt file_6.txt
</code></pre><p>创建符号链接只能在当前目录下进行。在上面的截图中，我们想要创建符号链接 <strong>/home/pungki/office/file<em>6.txt 指向原文件 /home/pungki/Documents/file</em>6.txt</strong>。但是为了创建符号链接，<strong>我必须</strong>在将/home/pungki/office作为目标目录。一旦我设法进入目录，我就可以向上面一样运行 cp <strong>-s</strong> 命令。</p><p>现在你列出文件详情，你会看到**/home/pungki/office/file_6.txt**指向了原文件。在其文件名后标记了箭头符号。</p><p><img src=/data/attachment/album/201403/14/134426jleo1t1qilcir9co.png alt="Symbolic links"></p><h4 id=6-不随符号链接拷贝原文件>6. 不随符号链接拷贝原文件</h4><p>[译注:意思是只拷贝符号链接文件]</p><p>我们可以用 <strong>-P</strong> 选项来实现。当对符号链接使用 cp 命令，它会照原样拷贝它自身。来看看下面的示例。</p><pre tabindex=0><code>$ cp -P file_6.txt ./movie
</code></pre><p><img src=/data/attachment/album/201403/14/134427vj45yokyzpomouml.png alt="Copy using -P option"></p><p>如你所见，cp 命令照原样拷贝<strong>file_6.txt</strong>自身。文件类型仍然是一个符号链接。</p><h4 id=7-随符号链接拷贝原文件>7. 随符号链接拷贝原文件</h4><p>现在我们可以试一下**-L**选项。基本上，这个刚好与上面的 -P 选项 <strong>相反</strong>。下面是个示例：</p><pre tabindex=0><code>$ cp -L file_6.txt ./movie
</code></pre><p><img src=/data/attachment/album/201403/14/134429if2uljlmfhiu22hv.png alt="Copy using -L option"></p><p>使用这个选项，拷贝的文件将会和<strong>file_6.txt</strong>原文件一样。我们可以从文件大小看出来。拷贝的文件有<strong>50 字节</strong>而当<strong>file_6.txt</strong>作为符号链接时文件大小只有<strong>33 字节</strong>。</p><h4 id=8-文件归档>8. 文件归档</h4><p>当我们去拷贝一个目录时，我们会用**-r<strong>或者</strong>-R<strong>选项。但是我们也可以用</strong>-a<strong>选项来归档文件。这样会创建文件和目录的</strong>准确套录**，如果有的话也可以包括符号链接。下面是示例：[译注：-a 会保留原文件或目录的属性]</p><pre tabindex=0><code>$ cp -a directory_1/ /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134431ci32ucq23jq7xuuk.png alt="Copy using -a option"></p><p>上列的命令会拷贝一个名为 directory<em>1 的目录到**/home/pungki/office**目录下。如你所见，**file</em>6.txt**依然作为符号链接被复制。</p><h4 id=9-显示正在做什么>9. 显示正在做什么</h4><p>默认情况下，当拷贝作业成功时，我们仅仅会再次看到命令提示符。如果你想了解在拷贝文件时都发生了什么，我们可以用 <strong>-v</strong> 选项。</p><pre tabindex=0><code>$ cp -v *.txt /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134432exttmzqqtuj3suuj.png alt="Verbose option"></p><p>当我们从当前目录下拷贝所有的 txt 文件到 <strong>/home/pungki/office</strong> 目录，<strong>-v</strong>选项会显示正在操作的过程。这些额外的信息会帮助我们了解更多拷贝过程。</p><h4 id=10-当原文件较目标文件新时拷贝>10. 当原文件较目标文件新时拷贝</h4><p>我们用 <strong>-u</strong>选项来实现。下面是具体示例:</p><pre tabindex=0><code>$ cp -vu *.txt /home/pungki/office
</code></pre><p><img src=/data/attachment/album/201403/14/134434kevx0xjxzxghvhvj.png alt="Copy only if newer"></p><p>起初我们看到<strong>file_1.txt 是0字节</strong>大小。然后我们用 vi 编辑，加入一些内容并保存。接下来，我们发现文件大小已经变为了 36 个字节。 与此同时在**/home/pungki/office<strong>目录中，我们</strong>已经包含了所有<strong>txt文件。当我们用 -u 选项，结合 -v 选项来查看具体操作，cp 命令会只拷贝比目标目录下新的文件。因此，我们看到</strong>只有 file_1.txt 拷贝到 /home/pungki/office 目录下**。</p><h4 id=11-使用交互模式>11. 使用交互模式</h4><p>交互模式下会询问是否覆盖目标目录下的文件。使用 <strong>-i</strong> 选项，启用交互模式。</p><pre tabindex=0><code>$ cp -ir directory_1/ /home/pungki/office/
</code></pre><p><img src=/data/attachment/album/201403/14/134435aehpen99bb2h9n2t.png alt="Interactive mode"></p><h4 id=12-创建备份文件>12. 创建备份文件</h4><p>当目标目录已经含有同名文件，默认情况下 cp 命令会覆盖目标目录下的同名文件。使用 <strong>&ndash;backup</strong> 选项，cp 命令会为每一个现有的目标文件做一个备份。../office 相对于 /home/pungki/office 。下面是示例：</p><pre tabindex=0><code>$ cp --backup=simple -v *.txt ../office
</code></pre><p><img src=/data/attachment/album/201403/14/134437v8in6agvggvj5g5a.png alt="Backup option"></p><p>正如我们看到的，<strong>&ndash;backup=simple</strong> 选项会创建一个在文件名末尾用波浪符标记(~)的备份文件。<strong>&ndash;backup</strong> 选项也有一些其他控制：</p><ul><li><strong>none, off</strong>:从不备份(即使给出 &ndash;backup)</li><li><strong>numbered, t</strong>:用编号备份</li><li><strong>existing, nil</strong> :如果编号备份存在则使用编号备份，否者用简易备份[译注：也就是用波浪号]</li><li><strong>simple, never</strong> :总是使用简易备份</li></ul><h4 id=13-只拷贝文件属性>13. 只拷贝文件属性</h4><p>cp 命令也提供给我们 <strong>&ndash;attributes-only</strong> 选项。顾名思义，这个选项只会拷贝文件名及其属性，不会拷贝任何数据。下面是示例：</p><pre tabindex=0><code>$ cp --attributes-only file_6.txt -v ../office
</code></pre><p><img src=/data/attachment/album/201403/14/134438ogs0axr0dmm3mmrs.png alt="Copy attributes only"></p><p>从上图看出， <strong>原文件 file_6.txt 有 50 字节</strong>大小。用了 <strong>&ndash;attributes-only</strong>选项，<strong>拷贝的文件只有0字节</strong>大小。这是因为文件内容并没有拷贝。</p><h4 id=14-强制拷贝>14. 强制拷贝</h4><p>用了 <strong>-f</strong> 选项会强制进行拷贝操作。如果目标文件不能打开，可以用 <strong>-f</strong> 尝试一下。</p><pre tabindex=0><code>$ cp -f *.txt -v ../office
</code></pre><p><img src=/data/attachment/album/201403/14/134439t0vfjz7f6d6rdz6n.png alt="Copy with force"></p><h4 id=15-在拷贝之前先删除目标>15. 在拷贝之前先删除目标</h4><p>我们可以用，<strong>&ndash;remove-destination 选项</strong> 实现。这个选项与上面的**-f选项形成对照**。如果 cp 命令在目标目录下发现同名文件， cp 命令会先删除目标文件，然后再拷贝一份新的。下面是示例：</p><pre tabindex=0><code>$ cp --remove-destination *.txt -v ../office
</code></pre><p><img src=/data/attachment/album/201403/14/134441l48hle33tf1f4z26.png alt="Remove destination option"></p><h3 id=总结>总结</h3><p>cp 命令是 Linux 下最基础的命令之一。对于那些想要学习 Linux 的人，必须得把这个命令掌握。当然你也可以在你的终端下键入 <strong>man cp</strong> 或者 <strong>cp &ndash;help</strong> 来显示更多帮助信息。</p><hr><p>via: <a href=http://linoxide.com/linux-command/linux-cp-command/>http://linoxide.com/linux-command/linux-cp-command/</a></p><p>译者：<a href=https://github.com/Luoxcat>Luoxcat</a> 校对：<a href=http://blog.csdn.net/tinyeyeser>Mr小眼儿</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/linux/ rel=tag>Linux</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%91%BD%E4%BB%A4/ rel=tag>命令</a></li><li class=tags__item><a class="tags__link btn" href=/tags/cp/ rel=tag>cp</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%96%87%E4%BB%B6/ rel=tag>文件</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%8B%B7%E8%B4%9D/ rel=tag>拷贝</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%95%99%E7%A8%8B/ rel=tag>教程</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>