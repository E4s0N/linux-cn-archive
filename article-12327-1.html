<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>用 Python 绘制数据的7种最流行的方法 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="用 Python 绘制数据的7种最流行的方法"><meta property="og:description" content="比较七个在 Python 中绘图的库和 API，看看哪个最能满足你的需求。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12327-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-06-18T00:11:51+00:00"><meta property="article:modified_time" content="2020-06-18T00:11:51+00:00"><meta itemprop=name content="用 Python 绘制数据的7种最流行的方法"><meta itemprop=description content="比较七个在 Python 中绘图的库和 API，看看哪个最能满足你的需求。"><meta itemprop=datePublished content="2020-06-18T00:11:51+00:00"><meta itemprop=dateModified content="2020-06-18T00:11:51+00:00"><meta itemprop=wordCount content="748"><meta itemprop=keywords content="绘图,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>用 Python 绘制数据的7种最流行的方法</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-06-18T00:11:51Z>June 18, 2020</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/202006/18/000953eg4zpk3kfifqv4px.jpg alt></p><blockquote><p>比较七个在 Python 中绘图的库和 API，看看哪个最能满足你的需求。</p></blockquote><p>“如何在 Python 中绘图？”曾经这个问题有一个简单的答案：Matplotlib 是唯一的办法。如今，Python 作为数据科学的语言，有着更多的选择。你应该用什么呢？</p><p>本指南将帮助你决定。</p><p>它将向你展示如何使用四个最流行的 Python 绘图库：Matplotlib、Seaborn、Plotly 和 Bokeh，再加上两个值得考虑的优秀的后起之秀：Altair，拥有丰富的 API；Pygal，拥有漂亮的 SVG 输出。我还会看看 Pandas 提供的非常方便的绘图 API。</p><p>对于每一个库，我都包含了源代码片段，以及一个使用 <a href=https://anvil.works/>Anvil</a> 的完整的基于 Web 的例子。Anvil 是我们的平台，除了 Python 之外，什么都不用做就可以构建网络应用。让我们一起来看看。</p><h3 id=示例绘图>示例绘图</h3><p>每个库都采取了稍微不同的方法来绘制数据。为了比较它们，我将用每个库绘制同样的图，并给你展示源代码。对于示例数据，我选择了这张 1966 年以来英国大选结果的分组柱状图。</p><p><img src=/data/attachment/album/202006/18/001157cnngxterp7tnmol7.png alt="Bar chart of British election data"></p><p>我从维基百科上整理了<a href=https://en.wikipedia.org/wiki/United_Kingdom_general_elections_overview>英国选举史的数据集</a>：从 1966 年到 2019 年，保守党、工党和自由党（广义）在每次选举中赢得的英国议会席位数，加上“其他”赢得的席位数。你可以<a href=https://anvil.works/blog/img/plotting-in-python/uk-election-results.csv>以 CSV 文件格式下载它</a>。</p><h3 id=matplotlib>Matplotlib</h3><p><a href=https://matplotlib.org/>Matplotlib</a> 是最古老的 Python 绘图库，现在仍然是最流行的。它创建于 2003 年，是 <a href=https://www.scipy.org/about.html>SciPy Stack</a> 的一部分，SciPy Stack 是一个类似于 <a href=https://www.mathworks.com/products/matlab.html>Matlab</a> 的开源科学计算库。</p><p>Matplotlib 为你提供了对绘制的精确控制。例如，你可以在你的条形图中定义每个条形图的单独的 X 位置。下面是绘制这个图表的代码（你可以在<a href=https://anvil.works/blog/plotting-in-matplotlib>这里</a>运行）：</p><pre tabindex=0><code>    import matplotlib.pyplot as plt
    import numpy as np
    from votes import wide as df

    # Initialise a figure. subplots() with no args gives one plot.
    fig, ax = plt.subplots()

    # A little data preparation
    years = df[&#39;year&#39;]
    x = np.arange(len(years))

    # Plot each bar plot. Note: manually calculating the &#39;dodges&#39; of the bars
    ax.bar(x - 3*width/2, df[&#39;conservative&#39;], width, label=&#39;Conservative&#39;, color=&#39;#0343df&#39;)
    ax.bar(x - width/2, df[&#39;labour&#39;], width, label=&#39;Labour&#39;, color=&#39;#e50000&#39;)
    ax.bar(x + width/2, df[&#39;liberal&#39;], width, label=&#39;Liberal&#39;, color=&#39;#ffff14&#39;)
    ax.bar(x + 3*width/2, df[&#39;others&#39;], width, label=&#39;Others&#39;, color=&#39;#929591&#39;)

    # Customise some display properties
    ax.set_ylabel(&#39;Seats&#39;)
    ax.set_title(&#39;UK election results&#39;)
    ax.set_xticks(x)    # This ensures we have one tick per year, otherwise we get fewer
    ax.set_xticklabels(years.astype(str).values, rotation=&#39;vertical&#39;)
    ax.legend()

    # Ask Matplotlib to show the plot
    plt.show()
</code></pre><p>这是用 Matplotlib 绘制的选举结果:</p><p><img src=/data/attachment/album/202006/18/001159hrlkb13hs2lxo1sq.png alt="Matplotlib plot of British election data"></p><h3 id=seaborn>Seaborn</h3><p><a href=https://seaborn.pydata.org/>Seaborn</a> 是 Matplotlib 之上的一个抽象层；它提供了一个非常整洁的界面，让你可以非常容易地制作出各种类型的有用绘图。</p><p>不过，它并没有在能力上有所妥协！Seaborn 提供了访问底层 Matplotlib 对象的<a href=https://anvil.works/blog/escape-hatches-and-ejector-seats>逃生舱口</a>，所以你仍然可以进行完全控制。</p><p>Seaborn 的代码比原始的 Matplotlib 更简单（可在<a href=https://anvil.works/blog/plotting-in-seaborn>此处</a>运行）：</p><pre tabindex=0><code>    import seaborn as sns
    from votes import long as df

    # Some boilerplate to initialise things
    sns.set()
    plt.figure()

    # This is where the actual plot gets made
    ax = sns.barplot(data=df, x=&#34;year&#34;, y=&#34;seats&#34;, hue=&#34;party&#34;, palette=[&#39;blue&#39;, &#39;red&#39;, &#39;yellow&#39;, &#39;grey&#39;], saturation=0.6)

    # Customise some display properties
    ax.set_title(&#39;UK election results&#39;)
    ax.grid(color=&#39;#cccccc&#39;)
    ax.set_ylabel(&#39;Seats&#39;)
    ax.set_xlabel(None)
    ax.set_xticklabels(df[&#34;year&#34;].unique().astype(str), rotation=&#39;vertical&#39;)

    # Ask Matplotlib to show it
    plt.show()
</code></pre><p>并生成这样的图表：</p><p><img src=/data/attachment/album/202006/18/001205lhb1exzhuwb7h18q.png alt="Seaborn plot of British election data"></p><h3 id=plotly>Plotly</h3><p><a href=https://plot.ly/>Plotly</a> 是一个绘图生态系统，它包括一个 Python 绘图库。它有三个不同的接口：</p><ol><li>一个面向对象的接口。</li><li>一个命令式接口，允许你使用类似 JSON 的数据结构来指定你的绘图。</li><li>类似于 Seaborn 的高级接口，称为 Plotly Express。</li></ol><p>Plotly 绘图被设计成嵌入到 Web 应用程序中。Plotly 的核心其实是一个 JavaScript 库！它使用 <a href=https://d3js.org/>D3</a> 和 <a href=http://stack.gl/>stack.gl</a> 来绘制图表。</p><p>你可以通过向该 JavaScript 库传递 JSON 来构建其他语言的 Plotly 库。官方的 Python 和 R 库就是这样做的。在 Anvil，我们将 Python Plotly API 移植到了 <a href=https://anvil.works/docs/client/components/plots>Web 浏览器中运行</a>。</p><p>这是使用 Plotly 的源代码（你可以在这里<a href=https://anvil.works/blog/plotting-in-plotly>运行</a>）：</p><pre tabindex=0><code>    import plotly.graph_objects as go
    from votes import wide as df

    #  Get a convenient list of x-values
    years = df[&#39;year&#39;]
    x = list(range(len(years)))

    # Specify the plots
    bar_plots = [
        go.Bar(x=x, y=df[&#39;conservative&#39;], name=&#39;Conservative&#39;, marker=go.bar.Marker(color=&#39;#0343df&#39;)),
        go.Bar(x=x, y=df[&#39;labour&#39;], name=&#39;Labour&#39;, marker=go.bar.Marker(color=&#39;#e50000&#39;)),
        go.Bar(x=x, y=df[&#39;liberal&#39;], name=&#39;Liberal&#39;, marker=go.bar.Marker(color=&#39;#ffff14&#39;)),
        go.Bar(x=x, y=df[&#39;others&#39;], name=&#39;Others&#39;, marker=go.bar.Marker(color=&#39;#929591&#39;)),
    ]

    # Customise some display properties
    layout = go.Layout(
        title=go.layout.Title(text=&#34;Election results&#34;, x=0.5),
        yaxis_title=&#34;Seats&#34;,
        xaxis_tickmode=&#34;array&#34;,
        xaxis_tickvals=list(range(27)),
        xaxis_ticktext=tuple(df[&#39;year&#39;].values),
    )

    # Make the multi-bar plot
    fig = go.Figure(data=bar_plots, layout=layout)

    # Tell Plotly to render it
    fig.show()
</code></pre><p>选举结果图表：</p><p><img src=/data/attachment/album/202006/18/001409t1f5ld315p98r1x1.gif alt="Plotly plot of British election data" title="Plotly plot of British election data"></p><h3 id=bokeh>Bokeh</h3><p><a href=https://docs.bokeh.org/en/latest/index.html>Bokeh</a>（发音为 “BOE-kay”）擅长构建交互式绘图，所以这个标准的例子并没有将其展现其最好的一面。和 Plotly 一样，Bokeh 的绘图也是为了嵌入到 Web 应用中，它以 HTML 文件的形式输出绘图。</p><p>下面是使用 Bokeh 的代码（你可以在<a href=https://anvil.works/blog/plotting-in-bokeh>这里</a>运行）：</p><pre tabindex=0><code>    from bokeh.io import show, output_file
    from bokeh.models import ColumnDataSource, FactorRange, HoverTool
    from bokeh.plotting import figure
    from bokeh.transform import factor_cmap
    from votes import long as df

    # Specify a file to write the plot to
    output_file(&#34;elections.html&#34;)

    # Tuples of groups (year, party)
    x = [(str(r[1][&#39;year&#39;]), r[1][&#39;party&#39;]) for r in df.iterrows()]
    y = df[&#39;seats&#39;]

    # Bokeh wraps your data in its own objects to support interactivity
    source = ColumnDataSource(data=dict(x=x, y=y))

    # Create a colourmap
    cmap = {
        &#39;Conservative&#39;: &#39;#0343df&#39;,
        &#39;Labour&#39;: &#39;#e50000&#39;,
        &#39;Liberal&#39;: &#39;#ffff14&#39;,
        &#39;Others&#39;: &#39;#929591&#39;,
    }
    fill_color = factor_cmap(&#39;x&#39;, palette=list(cmap.values()), factors=list(cmap.keys()), start=1, end=2)

    # Make the plot
    p = figure(x_range=FactorRange(*x), width=1200, title=&#34;Election results&#34;)
    p.vbar(x=&#39;x&#39;, top=&#39;y&#39;, width=0.9, source=source, fill_color=fill_color, line_color=fill_color)

    # Customise some display properties
    p.y_range.start = 0
    p.x_range.range_padding = 0.1
    p.yaxis.axis_label = &#39;Seats&#39;
    p.xaxis.major_label_orientation = 1
    p.xgrid.grid_line_color = None
</code></pre><p>图表如下：</p><p><img src=/data/attachment/album/202006/18/001417wgh442d4ox7ef3z5.png alt="Bokeh plot of British election data" title="Bokeh plot of British election data"></p><h3 id=altair>Altair</h3><p><a href=https://altair-viz.github.io/>Altair</a> 是基于一种名为 <a href=https://vega.github.io/vega/>Vega</a> 的声明式绘图语言（或“可视化语法”）。这意味着它具有经过深思熟虑的 API，可以很好地扩展复杂的绘图，使你不至于在嵌套循环的地狱中迷失方向。</p><p>与 Bokeh 一样，Altair 将其图形输出为 HTML 文件。这是代码（你可以在<a href=https://anvil.works/blog/plotting-in-altair>这里</a>运行）：</p><pre tabindex=0><code>    import altair as alt
    from votes import long as df

    # Set up the colourmap
    cmap = {
        &#39;Conservative&#39;: &#39;#0343df&#39;,
        &#39;Labour&#39;: &#39;#e50000&#39;,
        &#39;Liberal&#39;: &#39;#ffff14&#39;,
        &#39;Others&#39;: &#39;#929591&#39;,
    }

    # Cast years to strings
    df[&#39;year&#39;] = df[&#39;year&#39;].astype(str)

    # Here&#39;s where we make the plot
    chart = alt.Chart(df).mark_bar().encode(
        x=alt.X(&#39;party&#39;, title=None),
        y=&#39;seats&#39;,
        column=alt.Column(&#39;year&#39;, sort=list(df[&#39;year&#39;]), title=None),
        color=alt.Color(&#39;party&#39;, scale=alt.Scale(domain=list(cmap.keys()), range=list(cmap.values())))
    )

    # Save it as an HTML file.
    chart.save(&#39;altair-elections.html&#39;)
</code></pre><p>结果图表：</p><p><img src=/data/attachment/album/202006/18/001421cdtudgog0450gjd8.png alt="Altair plot of British election data" title="Altair plot of British election data"></p><h3 id=pygal>Pygal</h3><p><a href=http://www.pygal.org/en/stable/>Pygal</a> 专注于视觉外观。它默认生成 SVG 图，所以你可以无限放大它们或打印出来，而不会被像素化。Pygal 绘图还内置了一些很好的交互性功能，如果你想在 Web 应用中嵌入绘图，Pygal 是另一个被低估了的候选者。</p><p>代码是这样的（你可以在<a href=https://anvil.works/blog/plotting-in-pygal>这里</a>运行它）：</p><pre tabindex=0><code>    import pygal
    from pygal.style import Style
    from votes import wide as df

    # Define the style
    custom_style = Style(
        colors=(&#39;#0343df&#39;, &#39;#e50000&#39;, &#39;#ffff14&#39;, &#39;#929591&#39;)
        font_family=&#39;Roboto,Helvetica,Arial,sans-serif&#39;,
        background=&#39;transparent&#39;,
        label_font_size=14,
    )

    # Set up the bar plot, ready for data
    c = pygal.Bar(
        title=&#34;UK Election Results&#34;,
        style=custom_style,
        y_title=&#39;Seats&#39;,
        width=1200,
        x_label_rotation=270,
    )

    # Add four data sets to the bar plot
    c.add(&#39;Conservative&#39;, df[&#39;conservative&#39;])
    c.add(&#39;Labour&#39;, df[&#39;labour&#39;])
    c.add(&#39;Liberal&#39;, df[&#39;liberal&#39;])
    c.add(&#39;Others&#39;, df[&#39;others&#39;])

    # Define the X-labels
    c.x_labels = df[&#39;year&#39;]

    # Write this to an SVG file
    c.render_to_file(&#39;pygal.svg&#39;)
</code></pre><p>绘制结果：</p><p><img src=/data/attachment/album/202006/18/001431skaluz4embb4ozlf.png alt="Pygal plot of British election data" title="Pygal plot of British election data"></p><h3 id=pandas>Pandas</h3><p><a href=https://pandas.pydata.org/>Pandas</a> 是 Python 的一个极其流行的数据科学库。它允许你做各种可扩展的数据处理，但它也有一个方便的绘图 API。因为它直接在数据帧上操作，所以 Pandas 的例子是本文中最简洁的代码片段，甚至比 Seaborn 的代码还要短！</p><p>Pandas API 是 Matplotlib 的一个封装器，所以你也可以使用底层的 Matplotlib API 来对你的绘图进行精细的控制。</p><p>这是 Pandas 中的选举结果图表。代码精美简洁！</p><pre tabindex=0><code>    from matplotlib.colors import ListedColormap
    from votes import wide as df

    cmap = ListedColormap([&#39;#0343df&#39;, &#39;#e50000&#39;, &#39;#ffff14&#39;, &#39;#929591&#39;])

    ax = df.plot.bar(x=&#39;year&#39;, colormap=cmap)

    ax.set_xlabel(None)
    ax.set_ylabel(&#39;Seats&#39;)
    ax.set_title(&#39;UK election results&#39;)

    plt.show()
</code></pre><p>绘图结果：</p><p><img src=/data/attachment/album/202006/18/001434w92kbi5jp9x797z5.png alt="Pandas plot of British election data" title="Pandas plot of British election data"></p><p>要运行这个例子，请看<a href=https://anvil.works/blog/plotting-in-pandas>这里</a>。</p><h3 id=以你的方式绘制>以你的方式绘制</h3><p>Python 提供了许多绘制数据的方法，无需太多的代码。虽然你可以通过这些方法快速开始创建你的绘图，但它们确实需要一些本地配置。如果需要，<a href=https://anvil.works/>Anvil</a> 为 Python 开发提供了精美的 Web 体验。祝你绘制愉快！</p><hr><p>via: <a href=https://opensource.com/article/20/4/plot-data-python>https://opensource.com/article/20/4/plot-data-python</a></p><p>作者：<a href=https://opensource.com/users/shaun-taylor-morgan title="View user profile.">Shaun Taylor-Morgan</a> 译者：<a href=https://github.com/wxy>wxy</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=/article-12324-1.html>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E7%BB%98%E5%9B%BE/ rel=tag>绘图</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>