<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Ubuntu 中安装具体指定的软件包版本 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Ubuntu 中安装具体指定的软件包版本"><meta property="og:description" content="听起来像一个简单的任务，对吧？但是事情并非看起来那么简单。这里有一些不确定是否会出现，但是可能会涉及的东西。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14760-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-26T14:53:00+00:00"><meta property="article:modified_time" content="2022-06-26T14:53:00+00:00"><meta itemprop=name content="如何在 Ubuntu 中安装具体指定的软件包版本"><meta itemprop=description content="听起来像一个简单的任务，对吧？但是事情并非看起来那么简单。这里有一些不确定是否会出现，但是可能会涉及的东西。"><meta itemprop=datePublished content="2022-06-26T14:53:00+00:00"><meta itemprop=dateModified content="2022-06-26T14:53:00+00:00"><meta itemprop=wordCount content="238"><meta itemprop=keywords content="版本,软件包,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Ubuntu 中安装具体指定的软件包版本</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-06-26T14:53:00Z>June 26, 2022</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/202206/26/145335zcrpducpup4p2ugy.jpg alt></p><p>在 Ubuntu 中想安装一个软件包的一个特别指定的版本？你可以通过下面的方式来轻松地完成：</p><pre tabindex=0><code>sudo apt install package_name=package_version
</code></pre><p>你如何知道某个软件包有哪些可用的版本？可以使用这个命令：</p><pre tabindex=0><code>apt list --all-versions package_name
</code></pre><p>在下面的屏幕截屏中，你可以看到，我有两个可用的 VLC 版本，我使用命令来安装较旧的版本：</p><p><img src=/data/attachment/album/202206/26/145353l374sev63psz7lsa.png alt="install specific versions apt ubuntu"></p><p>听起来像一个简单的任务，对吧？但是事情并非看起来那么简单。这里有一些不确定是否会出现，但是可能会涉及的东西。</p><p>这篇教程将涵盖使用 <code>apt</code> 或 <code>apt-get</code> 命令来安装一个具体指定的程序的版本的所有的重要的方面。</p><h3 id=安装一个具体指定版本的程序需要知道的事>安装一个具体指定版本的程序需要知道的事</h3><p>在基于 Ubuntu 和 Debian 发行版中，你需要知道一些关于 APT 和存储库是如何工作的知识。</p><h4 id=同一个软件包源没有较旧的版本>同一个软件包源没有较旧的版本</h4><p>Ubuntu 在其存储库中不保留较旧版本的软件包。在特殊的情况下，你可以暂时性地看到多个版本。例如，你运行 APT 更新（但不升级）时，可能会有一个可用的新版本。在 APT 缓存中，你可以看到同一个软件包的两个版本。但是，一旦软件包被升级到了新的版本，较旧版本的软件包将从 <strong>APT 缓存</strong> 和存储库中移除。</p><h4 id=使用多个软件包源来使用不同的版本>使用多个软件包源来使用不同的版本</h4><p>为获取同一个的软件包的多个版本，你必须得添加多个软件包源。例如，VLC 是版本 3.x 系列。添加 <a href=https://launchpad.net/~videolan/+archive/ubuntu/master-daily>VLC 每日构建 PPA</a> 将会提供（不稳定的）版本 4.x 系列。</p><p>同样，<strong>你可以下载不同版本的 DEB 文件，并安装它</strong>。</p><h4 id=较高版本编号的版本通常有优先权>较高版本编号的版本通常有优先权</h4><p>如果你有来自多个软件包源的相同名称的软件，默认情况下，Ubuntu 将安装可用的最高版本编号的版本。</p><p>在前面的示例中，如果我安装 VLC ，那么它将会安装 4.x 系列的版本，而不是 3.x 系列的版本。</p><h4 id=较旧版本将升级到可用的较新版本>较旧版本将升级到可用的较新版本</h4><p>这是另外一个可能存在的问题。即使你安装较旧版本的软件包，它也会升级到较新的版本（如果存在可用的较新版本）。你必须 <a href=https://itsfoss.com/prevent-package-update-ubuntu/>保留该软件包来防止其升级</a> 。</p><h4 id=依赖关系也需要安装>依赖关系也需要安装</h4><p>如果软件包有依赖关系，你也需要安装必要的依赖关系软件包。</p><p>现在，你已经知道一些可能存在的问题，让我们看看如何解决它们。</p><h3 id=安装一个软件包的具体指定版本>安装一个软件包的具体指定版本</h3><p>在这篇教程中，我将以 VLC 为例。在 Ubuntu 的存储库中可获得 VLC 版本。我添加了每日构建 PPA ，它将向我提供 VLC 的 4.0 版本的候选版本。</p><p>如你所见，在现在的系统中，我有两个可用的 VLC 版本：</p><p><img src=/data/attachment/album/202206/26/145353l374sev63psz7lsa.png alt="install specific versions apt ubuntu"></p><pre tabindex=0><code>~$ apt list -a vlc
Listing... Done
vlc/jammy 4.0.0~rc1~~git20220516+r92284+296~ubuntu22.04.1 amd64
vlc/jammy 3.0.16-1build7 amd64
vlc/jammy 3.0.16-1build7 i386
</code></pre><p>因为较高版本编号版本有优先权，使用 <code>apt install vlc</code> 命令将会导致安装 VLC 的 4.0 版本。但是，因为这篇教程的缘由，我想安装较旧的版本 3.0.16 。</p><pre tabindex=0><code>sudo apt install vlc=3.0.16-1build7
</code></pre><p>但是，这里会有这样的事。VLC 软件包有一些依赖关系，并且这些依赖关系也需要具体指定的版本。因此，在 Ubuntu 为其尝试安装最新的版本时，你将会遇到经典的 你已保留残缺软件包 you have held broken packages 错误。</p><p><img src=/data/attachment/album/202206/26/145353bsyp5is9n5zttyf9.png alt="problem installing specific version apt ubuntu"></p><p>为修复这个错误，你需要为其提供它所投诉的所有依赖关系的软件包的具体指定版本。因此，该命令会变成这样：</p><pre tabindex=0><code>sudo apt install vlc=3.0.16-1build7 \
		 vlc-bin=3.0.16-1build7 \
		 vlc-plugin-base=3.0.16-1build7 \
		 vlc-plugin-qt=3.0.16-1build7 \
		 vlc-plugin-video-output=3.0.16-1build7 \
		 vlc-l10n=3.0.16-1build7 \
		 vlc-plugin-access-extra=3.0.16-1build7 \
		 vlc-plugin-notify=3.0.16-1build7 \
		 vlc-plugin-samba=3.0.16-1build7 \
		 vlc-plugin-skins2=3.0.16-1build7 \
		 vlc-plugin-video-splitter=3.0.16-1build7 \
		 vlc-plugin-visualization=3.0.16-1build7
</code></pre><p>说明一下，每行结尾处的 <code>\</code> 只是用来将多行命令来写入同一个命令的一种方式。</p><p><strong>它有作用吗？在很多情况下，它是有作用的。</strong> 但是，我选择了一个复杂的 VLC 示例，它有很多依赖关系。甚至这些所涉及的依赖关系也依赖于其它的软件包。所以，它就变得令人难以处理。</p><p>一种替代的方法是在安装时指定软件包源。</p><h4 id=替代方式指定存储库>替代方式，指定存储库</h4><p>你已经添加多个软件包源，因此，你应该对这些软件包的来源有一些了解。</p><p>使用下面的命令来搜索存储库：</p><pre tabindex=0><code>apt-cache policy | less
</code></pre><p>注意存储库名称后面的行：</p><pre tabindex=0><code>500 http://security.ubuntu.com/ubuntu jammy-security/multiverse i386 Packages
     release v=22.04,o=Ubuntu,a=jammy-security,n=jammy,l=Ubuntu,c=multiverse,b=i386
     origin security.ubuntu.com
</code></pre><p>你可以具体指定 <code>o</code>、<code>l</code>、<code>a</code> 等参数。</p><p>在我原来的示例中，我想安装来自 Ubuntu 存储库的 VLC（获取版本 3.16），而不是安装来 PPA 的版本（它将向我提供版本 4）。</p><p>因此，下面的命令将安装 VLC 版本 3.16 及其所有的依赖关系：</p><pre tabindex=0><code>sudo apt install -t &#34;o=ubuntu&#34; vlc
</code></pre><p><img src=/data/attachment/album/202206/26/145353d3oo8br978pehzeo.png alt="install from repository source"></p><p>看起来令人满意？但是，当你必须更新系统时，问题就来了。它接下来会控诉找不到指定的软件包版本。</p><p><strong>还能做什么？</strong></p><p>为安装较旧的软件包版本，从你的系统中移除较新版本的软件包源（如果可能的话）。它将有助于逃脱这些依赖关系地狱。</p><p>如果不能这么做，检查你是否可以从其它一些软件包的打包格式来获取，像 Snap、Flatpak、AppImage 等等。事实上，Snap 和 Flatpak 也允许你从可用的版本中选择和安装。因为这些应用程序是沙盒模式的，所以它很容易管理不同版本的依赖关系。</p><h4 id=保留软件包防止升级>保留软件包，防止升级</h4><p>如果你完成安装一个指定的程序版本，你可能想避免意外地升级到较新的版本。实现这一点并不太复杂。</p><pre tabindex=0><code>sudo apt-mark hold package_name
</code></pre><p>你可以免除保留软件包，以便它能稍后升级：</p><pre tabindex=0><code>sudo apt-mark unhold package_name
</code></pre><p>注意，软件包的依赖关系不会自动地保留。它们需要单独地指明。</p><h3 id=结论>结论</h3><p>如你所见，安装选定软件包版本有一定之规。只有当软件包有依赖关系时，那么事情就会变得复杂，然后，你就会进入依赖关系地狱。</p><p>我希望你在这篇教程中学到一些新的东西。如果你有问题或建议来改善它，请在评论区告诉我。</p><hr><p>via: <a href=https://itsfoss.com/apt-install-specific-version-2/>https://itsfoss.com/apt-install-specific-version-2/</a></p><p>作者：<a href=https://itsfoss.com/author/abhishek/>Abhishek Prakash</a> 选题：<a href=https://github.com/lkxed>lkxed</a> 译者：<a href=https://github.com/robsean>robsean</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E7%89%88%E6%9C%AC/ rel=tag>版本</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E8%BD%AF%E4%BB%B6%E5%8C%85/ rel=tag>软件包</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>