<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>改变我使用 Git 工作方式的七个技巧 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="改变我使用 Git 工作方式的七个技巧"><meta property="og:description" content="这些有用的技巧将改变你使用这个流行的版本控制系统的工作方式。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12894-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-12-07T09:29:06+00:00"><meta property="article:modified_time" content="2020-12-07T09:29:06+00:00"><meta itemprop=name content="改变我使用 Git 工作方式的七个技巧"><meta itemprop=description content="这些有用的技巧将改变你使用这个流行的版本控制系统的工作方式。"><meta itemprop=datePublished content="2020-12-07T09:29:06+00:00"><meta itemprop=dateModified content="2020-12-07T09:29:06+00:00"><meta itemprop=wordCount content="297"><meta itemprop=keywords content="Git,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>改变我使用 Git 工作方式的七个技巧</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-12-07T09:29:06Z>December 07, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>这些有用的技巧将改变你使用这个流行的版本控制系统的工作方式。</p></blockquote><p><img src=/data/attachment/album/202012/07/092803d67fa7bttuuj98fb.jpg alt></p><p>Git 是目前最常见的版本控制系统之一，无论是私有系统还是公开托管的网站，都在使用它进行各种开发工作。但无论我对 Git 的使用有多熟练，似乎总有一些功能还没有被发现，下面是改变我使用 Git 工作方式的七个技巧。</p><h3 id=1git-中的自动更正>1、Git 中的自动更正</h3><p>我们有时都会打错字，但如果启用了 Git 的自动更正功能，就可以让 Git 自动修正打错的子命令。</p><p>假设你想用 <code>git status</code> 检查状态，却不小心输入了 <code>git stats</code>。正常情况下，Git 会告诉你 <code>stats</code> 不是一条有效的命令：</p><pre tabindex=0><code>$ git stats
git: ‘stats’ is not a git command. See ‘git --help’.

The most similar command is
status
</code></pre><p>为了避免类似的情况发生，请在 Git 配置中启用 Git 自动更正功能：</p><pre tabindex=0><code>$ git config --global help.autocorrect 1
</code></pre><p>如果你希望这个命令只适用于你当前的版本库，请省略 <code>--global</code> 选项。</p><p>这条命令启用了自动更正功能。更深入的教程可以在 <a href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_code_help_autocorrect_code>Git Docs</a> 中找到，但尝试一下和上面一样的错误命令，就能很好地了解这个配置的作用：</p><pre tabindex=0><code>$ git stats
git: ‘stats’ is not a git command. See ‘git --help’.
On branch master
Your branch is up to date with ‘origin/master’.

nothing to commit, working tree clean
</code></pre><p>Git 现在不会建议使用其他子命令，而是直接运行最上面的建议，在本例中是 <code>git status</code>。</p><h3 id=2计算你的提交量>2、计算你的提交量</h3><p>你需要计算提交数量可能有很多原因。例如，许多开发者通过计算提交数量来判断何时该增加构建版本号，或者只是想了解项目的进展情况。</p><p>要计算提交数量其实很简单直接，下面是 Git 的命令：</p><pre tabindex=0><code>$ git rev-list --count branch-name
</code></pre><p>在上面的命令中，<code>branch-name</code> 应该是当前版本库中有效的分支名称：</p><pre tabindex=0><code>$ git rev-list –count master
32
$ git rev-list –count dev
34
</code></pre><h3 id=3优化你的仓库>3、优化你的仓库</h3><p>你的代码仓库不仅对你有价值，对你的组织也有价值。你可以通过一些简单的做法来保持你的版本库的清洁和更新。其中一个最好的做法是 <a href=/article-12524-1.html>使用 .gitignore 文件</a>。使用这个文件，就是告诉 Git 不要存储许多不需要的文件，比如二进制文件、临时文件等等。</p><p>为了进一步优化你的版本库，你可以使用 Git 的垃圾收集功能：</p><pre tabindex=0><code>$ git gc --prune=now --aggressive
</code></pre><p>当你或你的团队大量使用 <code>pull</code> 或 <code>push</code> 命令时，这条命令就会起到帮助作用。</p><p>这个命令是一个内部工具，可以清理仓库中无法访问或 “孤儿” Git 对象。</p><h3 id=4备份未被跟踪的文件>4、备份未被跟踪的文件</h3><p>大多数时候，删除所有未被跟踪的文件是安全的。不过很多时候，你不仅要删除，还要为你的未跟踪文件创建一个备份，以备以后需要。</p><p>通过 Git 和一些 Bash 命令管道，可以很容易地为你的未被跟踪的文件创建一个压缩包：</p><pre tabindex=0><code>$ git ls-files --others --exclude-standard -z |\
xargs -0 tar rvf ~/backup-untracked.zip
</code></pre><p>上面的命令制作了一个名为 <code>backup-untracked.zip</code> 的存档（并排除了 <code>.gitignore</code> 中列出的文件）。</p><h3 id=5了解你的-git-文件夹>5、了解你的 .git 文件夹</h3><p>每个版本库都有一个 <code>.git</code> 文件夹。它是一个特殊的隐藏文件夹。</p><pre tabindex=0><code>$ ls -a
. … .git
</code></pre><p>Git 的工作主要依赖于两个部分：</p><ol><li>工作树（你当前签出的文件状态）。</li><li>你的 Git 仓库的路径（即你的 <code>.git</code> 文件夹的位置，其中包含版本信息）。</li></ol><p>这个文件夹存储了所有的引用和其他重要的细节，比如配置、仓库数据、HEAD 状态、日志等等。</p><p>如果你删除这个文件夹，你的源代码的当前状态不会被删除，但你的远程信息，如你的项目历史记录，会被删除。删除这个文件夹意味着你的项目（至少是本地副本）不再处于版本控制之下。这意味着你不能跟踪你的变化；你不能从远程拉取或推送。</p><p>一般来说，不需要在 <code>.git</code> 文件夹里做什么，也没有什么应该做的。它是由 Git 管理的，基本上被认为是个禁区。然而，这个目录里有一些有趣的工件，包括 HEAD 的当前状态。</p><pre tabindex=0><code>$ cat .git/HEAD
ref: refs/heads/master
</code></pre><p>它还可能包含对你的存储库的描述：</p><pre tabindex=0><code>$ cat .git/description
</code></pre><p>这是一个未命名的仓库，编辑这个 <code>description</code> 文件可以命名这个仓库。</p><p>Git 钩子文件夹（<code>hooks</code>）也在这里，里面有一些钩子示例文件。你可以阅读这些示例来了解通过 Git 钩子可以实现什么，你也可以 <a href=https://opensource.com/life/16/8/how-construct-your-own-git-server-part-6>阅读 Seth Kenlon 的 Git 钩子介绍</a>。</p><h3 id=6查看另一个分支的文件>6、查看另一个分支的文件</h3><p>有时你想查看另一个分支的文件的内容。用一个简单的 Git 命令就可以实现，而且不需要切换分支。</p><p>假设你有一个名为 <a href=http://README.md>README.md</a> 的文件，它在 <code>main</code> 分支中，而你正在 <code>dev</code> 分支上工作。</p><p>使用下面的 Git 命令，你可以在终端上完成：</p><pre tabindex=0><code>$ git show main:README.md
</code></pre><p>一旦你执行了这个命令，你就可以在你的终端上查看文件的内容。</p><h3 id=7在-git-中搜索>7、在 Git 中搜索</h3><p>只需一个简单的命令，你就可以像专业人士一样在 Git 中搜索。更棒的是，即使你不确定是在哪个提交或分支上做的修改，也可以在 Git 中搜索。</p><pre tabindex=0><code>$ git rev-list --all | xargs git grep -F &#39;string&#39;
</code></pre><p>例如，假设你想在你的版本库中搜索 <code>font-size: 52 px;</code> 这个字符串：</p><pre tabindex=0><code>$ git rev-list –all | xargs git grep -F &#39;font-size: 52 px;&#39;
F3022…9e12:HtmlTemplate/style.css: font-size: 52 px;
E9211…8244:RR.Web/Content/style/style.css: font-size: 52 px;
</code></pre><h3 id=试试这些技巧>试试这些技巧</h3><p>希望这些高级技巧对你有用，提高你的工作效率，为你节省很多时间。</p><p>你有喜欢的 <a href=https://acompiler.com/git-tips/>Git 小技巧</a> 吗？在评论中分享吧。</p><hr><p>via: <a href=https://opensource.com/article/20/10/advanced-git-tips>https://opensource.com/article/20/10/advanced-git-tips</a></p><p>作者：<a href=https://opensource.com/users/acompiler>Rajeev Bera</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/wxy>wxy</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/git/ rel=tag>Git</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>