<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在shell脚本中使用变量 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在shell脚本中使用变量"><meta property="og:description" content="在每种编程语言中，变量都扮演了一个重要的角色。在Linux shell脚本编程中，我们使用两种类型的变量：系统定义的变量和用户定义的变量。 shell脚本中的变量是用来调用一个数值或者字符值的手段。与正规的编程语言不同的是，shell脚本不要求你去为变量声明一个类型。 在本文中，我们将讨论shell脚本编程中的变量及其类型，以及如何设置和使用这些变量。  系统定义的变量： 这些变量由操作系统（Linux）自身创建并维护，通常它们以大写字母定义，我们可以通过命令$ set来查看这些变量。下面列出了部分系统定义的变量：    系统定义的变量"><meta property="og:type" content="article"><meta property="og:url" content="/article-3834-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-09-16T14:38:00+00:00"><meta property="article:modified_time" content="2014-09-16T14:38:00+00:00"><meta itemprop=name content="如何在shell脚本中使用变量"><meta itemprop=description content="在每种编程语言中，变量都扮演了一个重要的角色。在Linux shell脚本编程中，我们使用两种类型的变量：系统定义的变量和用户定义的变量。 shell脚本中的变量是用来调用一个数值或者字符值的手段。与正规的编程语言不同的是，shell脚本不要求你去为变量声明一个类型。 在本文中，我们将讨论shell脚本编程中的变量及其类型，以及如何设置和使用这些变量。  系统定义的变量： 这些变量由操作系统（Linux）自身创建并维护，通常它们以大写字母定义，我们可以通过命令$ set来查看这些变量。下面列出了部分系统定义的变量：    系统定义的变量"><meta itemprop=datePublished content="2014-09-16T14:38:00+00:00"><meta itemprop=dateModified content="2014-09-16T14:38:00+00:00"><meta itemprop=wordCount content="286"><meta itemprop=keywords content="Shell,变量,编程,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在shell脚本中使用变量</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2014-09-16T14:38:00Z>September 16, 2014</time></div></div></header><div class="content post__content clearfix"><p>在每种<strong>编程</strong>语言中，<strong>变量</strong>都扮演了一个重要的角色。在Linux shell脚本编程中，我们使用两种类型的变量：<strong>系统定义的变量</strong>和<strong>用户定义的变量</strong>。</p><p>shell脚本中的变量是用来<strong>调用</strong>一个<strong>数值</strong>或者<strong>字符值</strong>的手段。与正规的编程语言不同的是，shell脚本不要求你去为变量<strong>声明一个类型</strong>。</p><p>在本文中，我们将讨论shell脚本编程中的变量及其类型，以及如何设置和使用这些变量。</p><p><img src=/data/attachment/album/201409/16/143729b0qmspapdfhqaqb3.png alt></p><h3 id=系统定义的变量>系统定义的变量：</h3><p>这些变量由<strong>操作系统（Linux）自身</strong>创建并维护，通常它们以<strong>大写字母</strong>定义，我们可以通过命令“<strong>$ set</strong>”来查看这些变量。下面列出了部分系统定义的变量：</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>系统定义的变量</strong></td><td><strong>意义</strong></td></tr><tr><td>BASH=/bin/bash</td><td>Bash Shell 名称</td></tr><tr><td>BASH_VERSION=4.1.2(1)</td><td>Bash 版本</td></tr><tr><td>COLUMNS=80</td><td>你的屏幕宽度（列数）</td></tr><tr><td>HOME=/home/linuxtechi</td><td>用户家目录</td></tr><tr><td>LINES=25</td><td>你的屏幕高度（行数）</td></tr><tr><td>LOGNAME=LinuxTechi</td><td>当前登录用户的名字</td></tr><tr><td>OSTYPE=Linux</td><td>操作系统类型</td></tr><tr><td>PATH=/usr/bin:/sbin:/bin:/usr/sbin</td><td>可执行文件搜索路径</td></tr><tr><td>PS1=[\u@\h \W]$</td><td>命令行提示符</td></tr><tr><td>PWD=/home/linuxtechi</td><td>当前工作目录</td></tr><tr><td>SHELL=/bin/bash</td><td>Shell 名称</td></tr><tr><td>USERNAME=linuxtechi</td><td>当前登录的用户名</td></tr></tbody></table><p>要打印以上变量的值，可以使用<strong>echo command</strong>命令，如下：</p><pre tabindex=0><code># echo $HOME
# echo $USERNAME
</code></pre><p>我们可以通过在环境变量名前前置一个美元符号来从你的脚本里输入环境变量。请看下面脚本演示：</p><pre tabindex=0><code>$ cat myscript

#!/bin/bash
# display user information from the system.
echo “User info for userid: $USER”
echo UID: $UID
echo HOME: $HOME 
</code></pre><p>注意：echo命令中的<strong>环境变量</strong>在脚本运行时会被它们的值替代。同时注意，我们可以再第一个字符串的双引号中放置**$USER<strong>系统变量，而shell脚本仍然可以明白我们的意思。然而，该方法有一个</strong>缺点**。看下面这个例子：</p><pre tabindex=0><code>$ echo “The cost of the item is $15”
The cost of the item is 5
</code></pre><p>很明显，那不是我们说希望的。无论何时，当脚本遇见引号中的美元符号时，它都会认为你是在调用一个变量。在本例中，该脚本试着显示<strong>变量$1</strong>（而这个变量并没有定义），然后显示数字5。要显示实际上的美元符号，你<strong>必须前置</strong>一个<strong>反斜线字符</strong>：</p><pre tabindex=0><code>$ echo “The cost of the item is \$15”
The cost of the item is $15
</code></pre><p>那样好多了。反斜线允许shell脚本将<strong>美元符号</strong>解释成为实际的美元符号，而不是变量。</p><h3 id=用户定义的变量>用户定义的变量：</h3><p>这些变量由<strong>用户</strong>定义。shell脚本允许我们在脚本中设置并使用我们<strong>自己的变量</strong>。设置变量允许你<strong>临时存储数据</strong>并在脚本中使用，让shell脚本看起来像一个真正的计算机程序。</p><p><strong>用户变量</strong>可以是任何不超过<strong>20个的字母、数字</strong>或者<strong>下划线字符</strong>的文本字符串（LCTT 译注：变量只能以字母或下划线开头）。用户变量是大小写敏感的，因此，变量Var1和变量var1是不同的变量。这个小规则常常让新手编写脚本时麻烦重重。</p><p>我们可以通过<strong>等于号</strong>为变量赋值。变量，等于号和值（对于新手又是个麻烦的地方）之间不能有空格。下面是几个给用户变量赋值的例子：</p><pre tabindex=0><code>var1=10
var2=-57
var3=testing
var4=“still more testing”
</code></pre><p>shell脚本为变量值<strong>自动确定数据类型</strong>。shell脚本内定义的变量会在脚本运行时保留它们的值，当脚本完成后则删除这些值。</p><p>就像系统变量一样，用户变量也可以使用美元符号来调用：</p><pre tabindex=0><code>$ cat test3
#!/bin/bash
# testing variables
days=10
guest=&#34;Katie&#34;
echo &#34;$guest checked in $days days ago&#34;
days=5
guest=&#34;Jessica&#34;
echo &#34;$guest checked in $days days ago&#34;
$
</code></pre><p>运行脚本会产生以下输出：</p><pre tabindex=0><code>$ chmod u+x test3
$ ./test3
Katie checked in 10 days ago
Jessica checked in 5 days ago
$
</code></pre><p>每次变量被<strong>调用</strong>，它都会变成了当前分配给它的值。有一点很重要，当调用一个变量值时，你使用<strong>美元符号</strong>，但是当为一个变量分配一个值时，你不能用美元符号。下面用例子来说明：</p><pre tabindex=0><code>$ cat test4
#!/bin/bash
# assigning a variable value to another variable
value1=10
value2=$value1
echo The resulting value is $value2
$
</code></pre><p>当你使用赋值语句中<strong>value1</strong>变量的<strong>值</strong>时，你仍然必须使用美元符号。这段代码产生了如下输出：</p><pre tabindex=0><code>$ chmod u+x test4
$ ./test4
The resulting value is 10
$
</code></pre><p>如果你忘了美元符号，而又让value2赋值行看起来像这样：</p><p>value2=value1</p><p>你会获得下面的输出：</p><pre tabindex=0><code>$ ./test4    
The resulting value is value1
$
</code></pre><p>没有美元符号，<strong>shell解释</strong>变量名为<strong>普通文本字符串</strong>，这极有可能不是你想要的。</p><h3 id=在shell变量中使用反引号>在shell变量中使用反引号（`）：</h3><p><strong>反引号允许</strong>你将shell命令的输出赋值给变量。虽然这似乎没什么大不了，但它是<strong>脚本编程</strong>中主要的构建基块。你必须使用反引号将整个命令行包含起来：</p><pre tabindex=0><code>**testing=`date`**
</code></pre><p>shell会在<strong>反引号</strong>中运行命令，然后将输出结果赋值给变量testing。下面的例子给出了如何使用一个常规shell命令的输出结果来创建一个变量：</p><pre tabindex=0><code>$ cat test5
#!/bin/bash
# using the backtick character
testing=`date`
echo &#34;The date and time are: &#34; $testing
$
</code></pre><p>变量testing接收来自date命令的输出结果，而它又在echo语句中被调用。运行脚本会产生如下输出：</p><pre tabindex=0><code>$ chmod u+x test5
$ ./test5
The date and time are: Mon Jan 31 20:23:25 EDT 2011
</code></pre><p><strong>注</strong>：在bash中，你也可以选用$(&mldr;)语法来替换反引号(`)，它有个优点就是可以重用（re-entrant）。</p><p>例：</p><pre tabindex=0><code>$ echo &#34; Today’s date &amp; time is :&#34; $(date)
Today’s date &amp; time is : Sun Jul 27 16:26:56 IST 2014 
</code></pre><hr><p>via: <a href=http://www.linuxtechi.com/variables-in-shell-scripting/>http://www.linuxtechi.com/variables-in-shell-scripting/</a></p><p>作者：<a href=http://www.linuxtechi.com/author/pradeep/>Pradeep Kumar</a> 译者：<a href=https://github.com/GOLinux>GOLinux</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/shell/ rel=tag>Shell</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%8F%98%E9%87%8F/ rel=tag>变量</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E7%BC%96%E7%A8%8B/ rel=tag>编程</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>