<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ZeroTier：你自己的虚拟骨干网 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="ZeroTier：你自己的虚拟骨干网"><meta property="og:description" content="ZeroTier 是一个加密的虚拟主干网，允许多台机器像在一个网络上一样通信。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14573-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-10T17:03:00+00:00"><meta property="article:modified_time" content="2022-05-10T17:03:00+00:00"><meta itemprop=name content="ZeroTier：你自己的虚拟骨干网"><meta itemprop=description content="ZeroTier 是一个加密的虚拟主干网，允许多台机器像在一个网络上一样通信。"><meta itemprop=datePublished content="2022-05-10T17:03:00+00:00"><meta itemprop=dateModified content="2022-05-10T17:03:00+00:00"><meta itemprop=wordCount content="172"><meta itemprop=keywords content="ZeroTier,主干网,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>ZeroTier：你自己的虚拟骨干网</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-05-10T17:03:00Z>May 10, 2022</time></div></div></header><div class="content post__content clearfix"><blockquote><p>ZeroTier 是一个加密的虚拟主干网，允许多台机器像在一个网络上一样通信。</p></blockquote><p><img src=/data/attachment/album/202205/10/170306m9263ud6wu23ul3e.jpg alt></p><p><em>自动化是现在的一个热门话题。在我作为网站可靠性工程师（SRE）的日常工作中，我的部分职责是将尽可能多的重复性任务自动化。但是我们当中有多少人在日常生活、非工作生活中这样做呢？ 今年，我专注于自动化工作，以便我们可以专注于重要的事情。</em></p><p>在实现一切自动化的同时，我在一些远程站点上遇到了困难。我不是一个网络专家，所以我开始研究我的选择。在研究了各种虚拟专用网络（VPN）、硬件端点、防火墙规则以及支持多个远程站点的所有东西后，我感到困惑、暴躁，并对这一切的复杂性感到沮丧。</p><p>然后我发现了 <a href=https://github.com/zerotier>ZeroTier</a>。ZeroTier 是一个加密的虚拟主干网，允许多台机器像在一个网络上一样通信。代码全部是开源的，你可以自行托管控制器，或者使用 <a href=https://www.zerotier.com/pricing>ZeroTierOne</a> 服务，有免费或付费计划。我现在使用的是它们的免费计划，它很强大、可靠，而且非常稳定。</p><p>因为我使用的是 Web 服务，所以我不打算详细介绍运行控制器和根服务。ZeroTier 在他们的 <a href=https://docs.zerotier.com>文档</a> 中对如何做到这一点有完整的参考，而且非常好。</p><p>在 Web 用户界面中创建了我自己的虚拟网络之后，客户端的安装几乎是微不足道的。ZeroTier 有 APT、RPM、FreeBSD 和许多其他平台的软件包，所以让第一个节点上线不需要什么努力。</p><p>安装完毕后，客户端就会连接到控制器服务，并为节点生成一个唯一的 ID。在 Linux 上，你使用 <code>zerotier-cli</code> 命令来加入一个网络，使用 <code>zerotier-cli join NETWORKID</code> 命令：</p><pre tabindex=0><code>$ sudo zerotier-cli info
200 info 469584783a 1.x.x ONLINE
</code></pre><p>你也可以使用 <code>zerotier-cli</code> 来获得连接和可用节点的列表，改变网络设置，以及离开网络。</p><p><img src=/data/attachment/album/202205/10/170309ypc8coz8zcov3cdf.png alt="Image of Setting up a New Node"></p><p>在加入一个网络后，你必须批准该节点的访问，可以通过网络控制台或调用应用程序编程接口（API）。这两种方法在 ZeroTier 网站上都有文档说明。连接两个节点后，无论你身在何处或位于防火墙的哪一侧，你都可以相互连接，就像你们在同一个建筑的同一个网络中。我的主要用例之一是 <a href=https://opensource.com/article/22/5/remote-home-assistant>远程访问我的家庭助理环境</a>，而不需要打开防火墙端口或将其暴露在互联网上（关于我的家庭助理设置和相关服务的更多信息，见后文）。</p><p>我自己做的一件事是为内部 DNS 设置了一个 <a href=https://github.com/zerotier/zeronsd>Beta ZeroNDS 服务</a>。这为我管理自己的名称服务或为我所有的私人主机和 IP 地址创建公共记录减少了很多复杂性。我发现操作说明非常简单直白，并且能够在大约 5 分钟内为我的私人网络建立一个 DNS 服务器。每个客户端必须允许 Zerotier 设置 DNS，这在 GUI 客户端中非常简单。要使它在 Linux 客户端上使用，请使用：</p><pre tabindex=0><code>$ sudo zerotier-cli setNETWORKID allowDNS=1
</code></pre><p>在你添加和删除主机时，不需要其他更新，它“就能工作”。</p><pre tabindex=0><code>$ sudo zerotier-cli info
200 info 469584845a 1.x.y ONLINE
$ sudo zerotier-cli join
93afae596398153a 200 join OK
$ sudo zerotier-cli peers
200 peers
&lt;ztaddr&gt; &lt;ver&gt; &lt;role&gt; &lt;lat&gt; &lt;link&gt; &lt;TX&gt; &lt;RX&gt; &lt;path&gt;
61d294b9cb - PLANET 112 DIRECT 7946 2812 50.7.73.34/9993
62f865ae71 - PLANET 264 DIRECT 7946 2681 50.7.76.38/9993
778cde7190 - PLANET 61 DIRECT 2944 2901 103.195.13.66/9993
93afae5963 1.x LEAF 77 DIRECT 2945 2886 35.188.31.177/41848
992fcf1db7 - PLANET RECT 79124 DI47 2813 195. 181.173.159/9993
</code></pre><p>我只提到了它所有功能的表面。ZeroTier 还允许在 ZeroTier 网络之间建立桥接、高级路由规则等。它们甚至有一个 <a href=https://github.com/zerotier/terraform-provider-zerotier>Terraform 提供者</a> 和一个 <a href=https://github.com/zerotier/awesome-zerotier>很棒的 Zerotier 资源</a> 清单。到今天为止，我正在使用 ZeroTier 连接四个物理站点的机器，其中三个在 NAT 防火墙后面。Zerotier 的设置很简单，而且管理起来几乎完全不费力。</p><hr><p>via: <a href=https://opensource.com/article/22/5/zerotier-network>https://opensource.com/article/22/5/zerotier-network</a></p><p>作者：<a href=https://opensource.com/users/ksonney>Kevin Sonney</a> 选题：<a href=https://github.com/lkxed>lkxed</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/zerotier/ rel=tag>ZeroTier</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E4%B8%BB%E5%B9%B2%E7%BD%91/ rel=tag>主干网</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>