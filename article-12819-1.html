<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用开源可视化工具来理解你的 Python 代码 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="使用开源可视化工具来理解你的 Python 代码"><meta property="og:description" content="VizTracer 工具可以可视化并跟踪 Python 代码，让你可以更深入地了解其工作原理。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12819-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-13T22:56:48+00:00"><meta property="article:modified_time" content="2020-11-13T22:56:48+00:00"><meta itemprop=name content="使用开源可视化工具来理解你的 Python 代码"><meta itemprop=description content="VizTracer 工具可以可视化并跟踪 Python 代码，让你可以更深入地了解其工作原理。"><meta itemprop=datePublished content="2020-11-13T22:56:48+00:00"><meta itemprop=dateModified content="2020-11-13T22:56:48+00:00"><meta itemprop=wordCount content="99"><meta itemprop=keywords content="Python,可视化,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>使用开源可视化工具来理解你的 Python 代码</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-11-13T22:56:48Z>November 13, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>VizTracer 工具可以可视化并跟踪 Python 代码，让你可以更深入地了解其工作原理。</p></blockquote><p><img src=/data/attachment/album/202011/13/225531g64gdav22n6d6va9.jpg alt></p><p>随着 Python 项目变得越来越大、越复杂，理解起它来就变得充满挑战性。即使是你自己独自编写了整个项目，也不可能完全知道项目是如何工作的。为了能更好的理解你的代码，调试和分析代码变得至关重要。</p><p><a href=https://github.com/gaogaotiantian/viztracer>VizTracer</a> 是一个这样的工具，它通过跟踪和可视化 Python 代码的执行过程，来帮助你对代码的理解。无需对源代码进行任何更改，VizTracer 即可记录函数的入口 / 出口，函数参数 / 返回值以及任意变量，然后通过 <a href=http://google.github.io/trace-viewer/>Trace-Viewer</a> 使用直观的谷歌前端界面来显示数据。</p><p>下面是一个运行<a href=https://en.wikipedia.org/wiki/Monte_Carlo_tree_search>蒙特卡洛树搜索</a>的例子：</p><p><img src=/data/attachment/album/202011/13/225708ar0qp1zh6qxiyh09.png alt="Monte Carlo tree search visualization" title="Monte Carlo tree search visualization"></p><p>每个函数都在时间线上以堆栈的形式记录和可视化，这样你就可以看到在运行程序时发生了什么。你可以放大查看任意特定点的详细信息：</p><p><img src=/data/attachment/album/202011/13/225755ccitzrirru8n7ect.png alt="Zooming in on VizTracer visualization" title="Zooming in on VizTracer visualization"></p><p>VizTracer 还可以自动记录函数参数和返回值。你可以单击函数条目并查看详细信息：</p><p><img src=/data/attachment/album/202011/13/225756i4nzednx7en17117.png alt="Viewing VizTracer details" title="Viewing VizTracer details"></p><p>或者你可以创建一个全新的信号，并用它来记录变量。例如，这显示了执行梯度下降时的成本值：</p><p><img src=/data/attachment/album/202011/13/225818bmmamppcsac0piv9.png alt="VizTracer gradient descent" title="VizTracer gradient descent"></p><p>与其他设置复杂的工具相比，VizTracer 使用起来非常简单，并且没有任何依赖关系。你可以从 pip 安装它：</p><pre tabindex=0><code>pip install viztracer
</code></pre><p>你也可以通过输入来跟踪你的程序（<code>&lt;your_script.py></code> 是你脚本的名称）:</p><pre tabindex=0><code>viztracer &lt;your_script.py&gt;
</code></pre><p>VizTracer 将在你的工作目录中生成一个 HTML 报告，你可以在 Chrome 浏览器中打开它。</p><p>VizTracer 还提供了其他高级功能，比如过滤器功能，你可以使用它过滤掉不想跟踪的函数，获得更清晰的报告。例如，要仅包含文件中的函数，你需要：</p><pre tabindex=0><code>viztracer include_files ./ --run &lt;your_script.py&gt;
</code></pre><p>记录函数参数和返回值:</p><pre tabindex=0><code>viztracer --log_function_args --log_return_value &lt;your_script.py&gt;
</code></pre><p>记录与某个正则表达式匹配的任意变量：</p><pre tabindex=0><code># log variables starts with a
viztracer --log_var a.* --run &amp;lt;your_script.py&amp;gt;
</code></pre><p>你可以通过对源代码进行较小的修改来获得其他功能，例如自定义事件来记录数值和对象。</p><p>VizTracer 还包括一个虚拟调试器（vdb），它可以调试 VizTracer 的日志文件。可以用 vdb 调试你运行中的代码（与 <a href=https://docs.python.org/3/library/pdb.html>pdb</a> 非常相似）以便你了解代码流。有用的是，它还支持时间回溯，因为它知道发生的一切。</p><p>与一些原型不同，VizTracer 使用纯 C 语言实现其核心，这将极大地减少开销，使其达到类似于 <a href=https://docs.python.org/2/library/profile.html#module-cProfile>cProfile</a> 的水平。</p><p>VizTracer 是开源的，在 Apache 2.0 许可下发布，支持所有常见的操作系统平台（Linux、macOS 和 Windows）。你可以在 <a href=https://github.com/gaogaotiantian/viztracer>GitHub</a> 上了解关于它的更多特性并访问源代码。</p><hr><p>via: <a href=https://opensource.com/article/20/11/python-code-viztracer>https://opensource.com/article/20/11/python-code-viztracer</a></p><p>作者：<a href=https://opensource.com/users/gaogaotiantian>Tian Gao</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/xiao-song-123>xiao-song-123</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/python/ rel=tag>Python</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/ rel=tag>可视化</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>