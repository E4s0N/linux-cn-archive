<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何安装并使用 Wireshark - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何安装并使用 Wireshark"><meta property="og:description" content="Wireshark 允许我们监控网络数据包直到其微观层面。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10091-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-10-07T22:46:14+00:00"><meta property="article:modified_time" content="2018-10-07T22:46:14+00:00"><meta itemprop=name content="如何安装并使用 Wireshark"><meta itemprop=description content="Wireshark 允许我们监控网络数据包直到其微观层面。"><meta itemprop=datePublished content="2018-10-07T22:46:14+00:00"><meta itemprop=dateModified content="2018-10-07T22:46:14+00:00"><meta itemprop=wordCount content="258"><meta itemprop=keywords content="Wireshark,数据包,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何安装并使用 Wireshark</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-10-07T22:46:14Z>October 07, 2018</time></div></div></header><div class="content post__content clearfix"><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/wireshark-Debian-9-Ubuntu-16.04-17.10.jpg><img src=/data/attachment/album/201810/07/224618kb7rwbxbx16lth4x.jpg alt="wireshark-Debian-9-Ubuntu 16.04 -17.10"></a></p><p>Wireshark 是自由开源的、跨平台的基于 GUI 的网络数据包分析器，可用于 Linux、Windows、MacOS、Solaris 等。它可以实时捕获网络数据包，并以人性化的格式呈现。Wireshark 允许我们监控网络数据包直到其微观层面。Wireshark 还有一个名为 <code>tshark</code> 的命令行实用程序，它与 Wireshark 执行相同的功能，但它是通过终端而不是 GUI。</p><p>Wireshark 可用于网络故障排除、分析、软件和通信协议开发以及用于教育目的。Wireshark 使用 <code>pcap</code> 库来捕获网络数据包。</p><p>Wireshark 具有许多功能：</p><ul><li>支持数百项协议检查</li><li>能够实时捕获数据包并保存，以便以后进行离线分析</li><li>许多用于分析数据的过滤器</li><li>捕获的数据可以即时压缩和解压缩</li><li>支持各种文件格式的数据分析，输出也可以保存为 XML、CSV 和纯文本格式</li><li>数据可以从以太网、wifi、蓝牙、USB、帧中继、令牌环等多个接口中捕获</li></ul><p>在本文中，我们将讨论如何在 Ubuntu/Debian 上安装 Wireshark，并将学习如何使用 Wireshark 捕获网络数据包。</p><h4 id=在-ubuntu-1604--1710-上安装-wireshark>在 Ubuntu 16.04 / 17.10 上安装 Wireshark</h4><p>Wireshark 在 Ubuntu 默认仓库中可用，只需使用以下命令即可安装。但有可能得不到最新版本的 wireshark。</p><pre tabindex=0><code>linuxtechi@nixworld:~$ sudo apt-get update
linuxtechi@nixworld:~$ sudo apt-get install wireshark -y
</code></pre><p>因此，要安装最新版本的 wireshark，我们必须启用或配置官方 wireshark 仓库。</p><p>使用下面的命令来配置仓库并安装最新版本的 wireshark 实用程序。</p><pre tabindex=0><code>linuxtechi@nixworld:~$ sudo add-apt-repository ppa:wireshark-dev/stable
linuxtechi@nixworld:~$ sudo apt-get update
linuxtechi@nixworld:~$ sudo apt-get install wireshark -y
</code></pre><p>一旦安装了 wireshark，执行以下命令，以便非 root 用户也可以捕获接口的实时数据包。</p><pre tabindex=0><code>linuxtechi@nixworld:~$ sudo setcap &#39;CAP_NET_RAW+eip CAP_NET_ADMIN+eip&#39; /usr/bin/dumpcap
</code></pre><h4 id=在-debian-9-上安装-wireshark>在 Debian 9 上安装 Wireshark</h4><p>Wireshark 包及其依赖项已存在于 debian 9 的默认仓库中，因此要在 Debian 9 上安装最新且稳定版本的 Wireshark，请使用以下命令：</p><pre tabindex=0><code>linuxtechi@nixhome:~$ sudo apt-get update
linuxtechi@nixhome:~$ sudo apt-get install wireshark -y
</code></pre><p>在安装过程中，它会提示我们为非超级用户配置 dumpcap，</p><p>选择 <code>yes</code> 并回车。</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Configure-Wireshark-Debian9.jpg><img src=/data/attachment/album/201810/07/224619hqu3ji1hb1cjijyy.jpg alt=Configure-Wireshark-Debian9></a></p><p>安装完成后，执行以下命令，以便非 root 用户也可以捕获接口的实时数据包。</p><pre tabindex=0><code>linuxtechi@nixhome:~$ sudo chmod +x /usr/bin/dumpcap
</code></pre><p>我们还可以使用最新的源代码包在 Ubuntu/Debian 和其它 Linux 发行版上安装 wireshark。</p><h4 id=在-debian--ubuntu-系统上使用源代码安装-wireshark>在 Debian / Ubuntu 系统上使用源代码安装 Wireshark</h4><p>首先下载最新的源代码包（写这篇文章时它的最新版本是 2.4.2），使用以下命令：</p><pre tabindex=0><code>linuxtechi@nixhome:~$ wget https://1.as.dl.wireshark.org/src/wireshark-2.4.2.tar.xz
</code></pre><p>然后解压缩包，进入解压缩的目录：</p><pre tabindex=0><code>linuxtechi@nixhome:~$ tar -xf wireshark-2.4.2.tar.xz -C /tmp
linuxtechi@nixhome:~$ cd /tmp/wireshark-2.4.2
</code></pre><p>现在我们使用以下命令编译代码：</p><pre tabindex=0><code>linuxtechi@nixhome:/tmp/wireshark-2.4.2$ ./configure --enable-setcap-install
linuxtechi@nixhome:/tmp/wireshark-2.4.2$ make
</code></pre><p>最后安装已编译的软件包以便在系统上安装 Wireshark：</p><pre tabindex=0><code>linuxtechi@nixhome:/tmp/wireshark-2.4.2$ sudo make install
linuxtechi@nixhome:/tmp/wireshark-2.4.2$ sudo ldconfig
</code></pre><p>在安装后，它将创建一个单独的 Wireshark 组，我们现在将我们的用户添加到组中，以便它可以与 Wireshark 一起使用，否则在启动 wireshark 时可能会出现 “permission denied（权限被拒绝）”错误。</p><p>要将用户添加到 wireshark 组，执行以下命令：</p><pre tabindex=0><code>linuxtechi@nixhome:~$ sudo usermod -a -G wireshark linuxtechi
</code></pre><p>现在我们可以使用以下命令从 GUI 菜单或终端启动 wireshark：</p><pre tabindex=0><code>linuxtechi@nixhome:~$ wireshark
</code></pre><h4 id=在-debian-9-系统上使用-wireshark>在 Debian 9 系统上使用 Wireshark</h4><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Access-wireshark-debian9.jpg><img src=/data/attachment/album/201810/07/224621gojs62szojxlto62.jpg alt=Access-wireshark-debian9></a></p><p>点击 Wireshark 图标。</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Wireshark-window-debian9.jpg><img src=/data/attachment/album/201810/07/224623qkucpeuuuorrrzrc.jpg alt=Wireshark-window-debian9></a></p><h4 id=在-ubuntu-1604--1710-上使用-wireshark>在 Ubuntu 16.04 / 17.10 上使用 Wireshark</h4><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Access-wireshark-Ubuntu.jpg><img src=/data/attachment/album/201810/07/224624f6w8uhlujq2i3ihq.jpg alt=Access-wireshark-Ubuntu></a></p><p>点击 Wireshark 图标。</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Wireshark-window-Ubuntu.jpg><img src=/data/attachment/album/201810/07/224626vqqqvoakqyqvq7em.jpg alt=Wireshark-window-Ubuntu></a></p><h4 id=捕获并分析数据包>捕获并分析数据包</h4><p>一旦 wireshark 启动，我们就会看到 wireshark 窗口，上面有 Ubuntu 和 Debian 系统的示例。</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/wireshark-Linux-system.jpg><img src=/data/attachment/album/201810/07/224626nas3zor3hr4bnoao.jpg alt=wireshark-Linux-system></a></p><p>所有这些都是我们可以捕获网络数据包的接口。根据你系统上的接口，此屏幕可能与你的不同。</p><p>我们选择 <code>enp0s3</code> 来捕获该接口的网络流量。选择接口后，在我们网络上所有设备的网络数据包开始填充（参考下面的屏幕截图）：</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Capturing-Packet-from-enp0s3-Ubuntu-Wireshark.jpg><img src=/data/attachment/album/201810/07/224627if90f7r1rwm1w1ir.jpg alt=Capturing-Packet-from-enp0s3-Ubuntu-Wireshark></a></p><p>第一次看到这个屏幕，我们可能会被这个屏幕上显示的数据所淹没，并且可能已经想过如何整理这些数据，但不用担心，Wireshark 的最佳功能之一就是它的过滤器。</p><p>我们可以根据 IP 地址、端口号，也可以使用来源和目标过滤器、数据包大小等对数据进行排序和过滤，也可以将两个或多个过滤器组合在一起以创建更全面的搜索。我们也可以在 “Apply a Display Filter（应用显示过滤器）”选项卡中编写过滤规则，也可以选择已创建的规则。要选择之前构建的过滤器，请单击 “Apply a Display Filter（应用显示过滤器）”选项卡旁边的旗帜图标。</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Filter-in-wireshark-Ubuntu.jpg><img src=/data/attachment/album/201810/07/224628zfio0ne62wej0ge1.jpg alt=Filter-in-wireshark-Ubuntu></a></p><p>我们还可以根据颜色编码过滤数据，默认情况下，浅紫色是 TCP 流量，浅蓝色是 UDP 流量，黑色标识有错误的数据包，看看这些编码是什么意思，点击 “View -> Coloring Rules”，我们也可以改变这些编码。</p><p><a href=https://www.linuxtechi.com/wp-content/uploads/2017/11/Packet-Colouring-Wireshark.jpg><img src=/data/attachment/album/201810/07/224628wtup26e96qco83qz.jpg alt=Packet-Colouring-Wireshark></a></p><p>在我们得到我们需要的结果之后，我们可以点击任何捕获的数据包以获得有关该数据包的更多详细信息，这将显示该网络数据包的所有数据。</p><p>Wireshark 是一个非常强大的工具，需要一些时间来习惯并对其进行命令操作，本教程将帮助你入门。请随时在下面的评论框中提出你的疑问或建议。</p><hr><p>via: <a href=https://www.linuxtechi.com/install-use-wireshark-debian-9-ubuntu/>https://www.linuxtechi.com/install-use-wireshark-debian-9-ubuntu/</a></p><p>作者：<a href=https://www.linuxtechi.com/author/pradeep/>Pradeep Kumar</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/wireshark/ rel=tag>Wireshark</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%95%B0%E6%8D%AE%E5%8C%85/ rel=tag>数据包</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>