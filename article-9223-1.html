<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何让 curl 命令通过代理访问 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何让 curl 命令通过代理访问"><meta property="og:description" content="我要如何让 curl 命令使用我在 Google Chrome 浏览器上的代理设置呢？"><meta property="og:type" content="article"><meta property="og:url" content="/article-9223-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-01-18T10:35:00+00:00"><meta property="article:modified_time" content="2018-01-18T10:35:00+00:00"><meta itemprop=name content="如何让 curl 命令通过代理访问"><meta itemprop=description content="我要如何让 curl 命令使用我在 Google Chrome 浏览器上的代理设置呢？"><meta itemprop=datePublished content="2018-01-18T10:35:00+00:00"><meta itemprop=dateModified content="2018-01-18T10:35:00+00:00"><meta itemprop=wordCount content="382"><meta itemprop=keywords content="curl,代理,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何让 curl 命令通过代理访问</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-01-18T10:35:00Z>January 18, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201801/09/213937t0bln02786qgl08n.jpg alt></p><p>我的系统管理员给我提供了如下代理信息：</p><pre tabindex=0><code>IP: 202.54.1.1
Port: 3128
Username: foo
Password: bar
</code></pre><p>该设置在 Google Chrome 和 Firefox 浏览器上很容易设置。但是我要怎么把它应用到 <code>curl</code> 命令上呢？我要如何让 curl 命令使用我在 Google Chrome 浏览器上的代理设置呢？</p><p>很多 Linux 和 Unix 命令行工具（比如 <code>curl</code> 命令，<code>wget</code> 命令，<code>lynx</code> 命令等)使用名为 <code>http_proxy</code>，<code>https_proxy</code>，<code>ftp_proxy</code> 的环境变量来获取代理信息。它允许你通过代理服务器（使用或不使用用户名/密码都行）来连接那些基于文本的会话和应用。</p><p>本文就会演示一下如何让 <code>curl</code> 通过代理服务器发送 HTTP/HTTPS 请求。</p><h3 id=让-curl-命令使用代理的语法>让 curl 命令使用代理的语法</h3><p>语法为：</p><pre tabindex=0><code>## Set the proxy address of your uni/company/vpn network ## 
export http_proxy=http://your-ip-address:port/

## http_proxy with username and password 
export http_proxy=http://user:password@your-proxy-ip-address:port/

## HTTPS version ##
export https_proxy=https://your-ip-address:port/
export https_proxy=https://user:password@your-proxy-ip-address:port/
</code></pre><p>另一种方法是使用 <code>curl</code> 命令的 <code>-x</code> 选项：</p><pre tabindex=0><code>curl -x &lt;[protocol://][user:password@]proxyhost[:port]&gt; url
--proxy &lt;[protocol://][user:password@]proxyhost[:port]&gt; url
--proxy http://user:password@Your-Ip-Here:Port url
-x http://user:password@Your-Ip-Here:Port url
</code></pre><h3 id=在-linux-上的一个例子>在 Linux 上的一个例子</h3><p>首先设置 <code>http_proxy</code>：</p><pre tabindex=0><code>## proxy server, 202.54.1.1, port: 3128, user: foo, password: bar ##
export http_proxy=http://foo:bar@202.54.1.1:3128/
export https_proxy=$http_proxy
## Use the curl command ##
curl -I https://www.cyberciti.biz
curl -v -I https://www.cyberciti.biz
</code></pre><p>输出为：</p><pre tabindex=0><code>* Rebuilt URL to: www.cyberciti.biz/
*   Trying 202.54.1.1...
* Connected to 1202.54.1.1 (202.54.1.1) port 3128 (#0)
* Proxy auth using Basic with user &#39;foo&#39;
&gt; HEAD HTTP://www.cyberciti.biz/ HTTP/1.1
&gt; Host: www.cyberciti.biz
&gt; Proxy-Authorization: Basic x9VuUml2xm0vdg93MtIz
&gt; User-Agent: curl/7.43.0
&gt; Accept: */*
&gt; Proxy-Connection: Keep-Alive
&gt; 
&lt; HTTP/1.1 200 OK
HTTP/1.1 200 OK
&lt; Server: nginx
Server: nginx
&lt; Date: Sun, 17 Jan 2016 11:49:21 GMT
Date: Sun, 17 Jan 2016 11:49:21 GMT
&lt; Content-Type: text/html; charset=UTF-8
Content-Type: text/html; charset=UTF-8
&lt; Vary: Accept-Encoding
Vary: Accept-Encoding
&lt; X-Whom: Dyno-l1-com-cyber
X-Whom: Dyno-l1-com-cyber
&lt; Vary: Cookie
Vary: Cookie
&lt; Link: &lt;http://www.cyberciti.biz/wp-json/&gt;; rel=&#34;https://api.w.org/&#34;
Link: &lt;http://www.cyberciti.biz/wp-json/&gt;; rel=&#34;https://api.w.org/&#34;
&lt; X-Frame-Options: SAMEORIGIN
X-Frame-Options: SAMEORIGIN
&lt; X-Content-Type-Options: nosniff
X-Content-Type-Options: nosniff
&lt; X-XSS-Protection: 1; mode=block
X-XSS-Protection: 1; mode=block
&lt; X-Cache: MISS from server1
X-Cache: MISS from server1
&lt; X-Cache-Lookup: MISS from server1:3128
X-Cache-Lookup: MISS from server1:3128
&lt; Connection: keep-alive
Connection: keep-alive

&lt; 
* Connection #0 to host 10.12.249.194 left intact
</code></pre><p>本例中，我来下载一个 pdf 文件：</p><pre tabindex=0><code>$ export http_proxy=&#34;vivek:myPasswordHere@10.12.249.194:3128/&#34;
$ curl -v -O http://dl.cyberciti.biz/pdfdownloads/b8bf71be9da19d3feeee27a0a6960cb3/569b7f08/cms/631.pdf
</code></pre><p>也可以使用 <code>-x</code> 选项：</p><pre tabindex=0><code>curl -x &#39;http://vivek:myPasswordHere@10.12.249.194:3128&#39; -v -O https://dl.cyberciti.biz/pdfdownloads/b8bf71be9da19d3feeee27a0a6960cb3/569b7f08/cms/631.pdf
</code></pre><p>输出为：</p><p><img src=/data/attachment/album/201801/09/214003zll4004yilgl50zu.jpg alt="Fig.01：curl in action \(click to enlarge\)"></p><h3 id=unix-上的一个例子>Unix 上的一个例子</h3><pre tabindex=0><code>$ curl -x http://prox_server_vpn:3128/ -I https://www.cyberciti.biz/faq/howto-nginx-customizing-404-403-error-page/
</code></pre><h3 id=socks-协议怎么办呢>socks 协议怎么办呢？</h3><p>语法也是一样的：</p><pre tabindex=0><code>curl -x socks5://[user:password@]proxyhost[:port]/ url
curl --socks5 192.168.1.254:3099 https://www.cyberciti.biz/
</code></pre><h3 id=如何让代理设置永久生效>如何让代理设置永久生效？</h3><p>编辑 <code>~/.curlrc</code> 文件：</p><pre tabindex=0><code>$ vi ~/.curlrc
</code></pre><p>添加下面内容：</p><pre tabindex=0><code>proxy = server1.cyberciti.biz:3128
proxy-user = &#34;foo:bar&#34;
</code></pre><p>保存并关闭该文件。另一种方法是在你的 <code>~/.bashrc</code> 文件中创建一个别名：</p><pre tabindex=0><code>## alias for curl command
## set proxy-server and port, the syntax is
## alias curl=&#34;curl -x {your_proxy_host}:{proxy_port}&#34;
alias curl = &#34;curl -x server1.cyberciti.biz:3128&#34;
</code></pre><p>记住，代理字符串中可以使用 <code>protocol://</code> 前缀来指定不同的代理协议。使用 <code>socks4://</code>，<code>socks4a://</code>，<code>socks5://</code>或者 <code>socks5h://</code> 来指定使用的 SOCKS 版本。若没有指定协议或者使用 <code>http://</code> 表示 HTTP 协议。若没有指定端口号则默认为 <code>1080</code>。<code>-x</code> 选项的值要优先于环境变量设置的值。若不想走代理，而环境变量总设置了代理，那么可以通过设置代理为空值（<code>""</code>）来覆盖环境变量的值。<a href=https://curl.haxx.se/docs/manpage.html>详细信息请参阅 <code>curl</code> 的 man 页</a> 。</p><hr><p>via: <a href=https://www.cyberciti.biz/faq/linux-unix-curl-command-with-proxy-username-password-http-options/>https://www.cyberciti.biz/faq/linux-unix-curl-command-with-proxy-username-password-http-options/</a></p><p>作者：<a href=https://www.cyberciti.biz>Vivek Gite</a> 译者：<a href=https://github.com/lujun9972>lujun9972</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/curl/ rel=tag>curl</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E4%BB%A3%E7%90%86/ rel=tag>代理</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>