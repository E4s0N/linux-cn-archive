<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Linux 上复制文件/文件夹到远程系统？ - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Linux 上复制文件/文件夹到远程系统？"><meta property="og:description" content="从一个服务器复制文件到另一个服务器，或者从本地到远程复制是 Linux 管理员的日常任务之一。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10569-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-02-25T12:30:00+00:00"><meta property="article:modified_time" content="2019-02-25T12:30:00+00:00"><meta itemprop=name content="如何在 Linux 上复制文件/文件夹到远程系统？"><meta itemprop=description content="从一个服务器复制文件到另一个服务器，或者从本地到远程复制是 Linux 管理员的日常任务之一。"><meta itemprop=datePublished content="2019-02-25T12:30:00+00:00"><meta itemprop=dateModified content="2019-02-25T12:30:00+00:00"><meta itemprop=wordCount content="749"><meta itemprop=keywords content="复制,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Linux 上复制文件/文件夹到远程系统？</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-02-25T12:30:00Z>February 25, 2019</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201902/25/123034xskkcgooxoo7iio4.jpg alt><br>从一个服务器复制文件到另一个服务器，或者从本地到远程复制是 Linux 管理员的日常任务之一。</p><p>我觉得不会有人不同意，因为无论在哪里这都是你的日常操作之一。有很多办法都能处理这个任务，我们试着加以概括。你可以挑一个喜欢的方法。当然，看看其他命令也能在别的地方帮到你。</p><p>我已经在自己的环境下测试过所有的命令和脚本了，因此你可以直接用到日常工作当中。</p><p>通常大家都倾向 <code>scp</code>，因为它是文件复制的 原生命令 native command 之一。但本文所列出的其它命令也很好用，建议你尝试一下。</p><p>文件复制可以轻易地用以下四种方法。</p><ul><li><code>scp</code>：在网络上的两个主机之间复制文件，它使用 <code>ssh</code> 做文件传输，并使用相同的认证方式，具有相同的安全性。</li><li><code>rsync</code>：是一个既快速又出众的多功能文件复制工具。它能本地复制、通过远程 shell 在其它主机之间复制，或者与远程的 <code>rsync</code> 守护进程 daemon 之间复制。</li><li><code>pscp</code>：是一个并行复制文件到多个主机上的程序。它提供了诸多特性，例如为 <code>scp</code> 配置免密传输，保存输出到文件，以及超时控制。</li><li><code>prsync</code>：也是一个并行复制文件到多个主机上的程序。它也提供了诸多特性，例如为 <code>ssh</code> 配置免密传输，保存输出到 文件，以及超时控制。</li></ul><h3 id=方式-1如何在-linux-上使用-scp-命令从本地系统向远程系统复制文件文件夹>方式 1：如何在 Linux 上使用 scp 命令从本地系统向远程系统复制文件/文件夹？</h3><p><code>scp</code> 命令可以让我们从本地系统复制文件/文件夹到远程系统上。</p><p>我会把 <code>output.txt</code> 文件从本地系统复制到 <code>2g.CentOS.com</code> 远程系统的 <code>/opt/backup</code> 文件夹下。</p><pre tabindex=0><code># scp output.txt root@2g.CentOS.com:/opt/backup

output.txt                                                                                              100% 2468     2.4KB/s   00:00
</code></pre><p>从本地系统复制两个文件 <code>output.txt</code> 和 <code>passwd-up.sh</code> 到远程系统 <code>2g.CentOs.com</code> 的 <code>/opt/backup</code> 文件夹下。</p><pre tabindex=0><code># scp output.txt passwd-up.sh root@2g.CentOS.com:/opt/backup

output.txt 100% 2468 2.4KB/s 00:00
passwd-up.sh 100% 877 0.9KB/s 00:00
</code></pre><p>从本地系统复制 <code>shell-script</code> 文件夹到远程系统 <code>2g.CentOs.com</code> 的 <code>/opt/back</code> 文件夹下。</p><p>这会连同<code>shell-script</code> 文件夹下所有的文件一同复制到<code>/opt/back</code> 下。</p><pre tabindex=0><code># scp -r /home/daygeek/2g/shell-script/ root@:/opt/backup/

output.txt 100% 2468 2.4KB/s 00:00
ovh.sh      100% 76 0.1KB/s 00:00
passwd-up.sh 100% 877 0.9KB/s 00:00
passwd-up1.sh 100% 7 0.0KB/s 00:00
server-list.txt 100% 23 0.0KB/s 00:00
</code></pre><h3 id=方式-2如何在-linux-上使用-scp-命令和-shell-脚本复制文件文件夹到多个远程系统上>方式 2：如何在 Linux 上使用 scp 命令和 Shell 脚本复制文件/文件夹到多个远程系统上？</h3><p>如果你想复制同一个文件到多个远程服务器上，那就需要创建一个如下面那样的小 shell 脚本。</p><p>并且，需要将服务器添加进 <code>server-list.txt</code> 文件。确保添加成功后，每个服务器应当单独一行。</p><p>最终，你想要的脚本就像下面这样：</p><pre tabindex=0><code># file-copy.sh

#!/bin/sh
for server in `more server-list.txt`
do
  scp /home/daygeek/2g/shell-script/output.txt root@$server:/opt/backup
done
</code></pre><p>完成之后，给 <code>file-copy.sh</code> 文件设置可执行权限。</p><pre tabindex=0><code># chmod +x file-copy.sh
</code></pre><p>最后运行脚本完成复制。</p><pre tabindex=0><code># ./file-copy.sh

output.txt 100% 2468 2.4KB/s 00:00
output.txt 100% 2468 2.4KB/s 00:00
</code></pre><p>使用下面的脚本可以复制多个文件到多个远程服务器上。</p><pre tabindex=0><code># file-copy.sh

#!/bin/sh
for server in `more server-list.txt`
do
  scp /home/daygeek/2g/shell-script/output.txt passwd-up.sh root@$server:/opt/backup
done
</code></pre><p>下面结果显示所有的两个文件都复制到两个服务器上。</p><pre tabindex=0><code># ./file-cp.sh

output.txt 100% 2468 2.4KB/s 00:00
passwd-up.sh 100% 877 0.9KB/s 00:00
output.txt 100% 2468 2.4KB/s 00:00
passwd-up.sh 100% 877 0.9KB/s 00:00
</code></pre><p>使用下面的脚本递归地复制文件夹到多个远程服务器上。</p><pre tabindex=0><code># file-copy.sh

#!/bin/sh
for server in `more server-list.txt`
do
  scp -r /home/daygeek/2g/shell-script/ root@$server:/opt/backup
done
</code></pre><p>上述脚本的输出。</p><pre tabindex=0><code># ./file-cp.sh

output.txt 100% 2468 2.4KB/s 00:00
ovh.sh      100% 76 0.1KB/s 00:00
passwd-up.sh 100% 877 0.9KB/s 00:00
passwd-up1.sh 100% 7 0.0KB/s 00:00
server-list.txt 100% 23 0.0KB/s 00:00

output.txt 100% 2468 2.4KB/s 00:00
ovh.sh      100% 76 0.1KB/s 00:00
passwd-up.sh 100% 877 0.9KB/s 00:00
passwd-up1.sh 100% 7 0.0KB/s 00:00
server-list.txt 100% 23 0.0KB/s 00:00
</code></pre><h3 id=方式-3如何在-linux-上使用-pscp-命令复制文件文件夹到多个远程系统上>方式 3：如何在 Linux 上使用 pscp 命令复制文件/文件夹到多个远程系统上？</h3><p><code>pscp</code> 命令可以直接让我们复制文件到多个远程服务器上。</p><p>使用下面的 <code>pscp</code> 命令复制单个文件到远程服务器。</p><pre tabindex=0><code># pscp.pssh -H 2g.CentOS.com /home/daygeek/2g/shell-script/output.txt /opt/backup

[1] 18:46:11 [SUCCESS] 2g.CentOS.com
</code></pre><p>使用下面的 <code>pscp</code> 命令复制多个文件到远程服务器。</p><pre tabindex=0><code># pscp.pssh -H 2g.CentOS.com /home/daygeek/2g/shell-script/output.txt ovh.sh /opt/backup

[1] 18:47:48 [SUCCESS] 2g.CentOS.com
</code></pre><p>使用下面的 <code>pscp</code> 命令递归地复制整个文件夹到远程服务器。</p><pre tabindex=0><code># pscp.pssh -H 2g.CentOS.com -r /home/daygeek/2g/shell-script/ /opt/backup

[1] 18:48:46 [SUCCESS] 2g.CentOS.com
</code></pre><p>使用下面的 <code>pscp</code> 命令使用下面的命令复制单个文件到多个远程服务器。</p><pre tabindex=0><code># pscp.pssh -h server-list.txt /home/daygeek/2g/shell-script/output.txt /opt/backup

[1] 18:49:48 [SUCCESS] 2g.CentOS.com
[2] 18:49:48 [SUCCESS] 2g.Debian.com
</code></pre><p>使用下面的 <code>pscp</code> 命令复制多个文件到多个远程服务器。</p><pre tabindex=0><code># pscp.pssh -h server-list.txt /home/daygeek/2g/shell-script/output.txt passwd-up.sh /opt/backup

[1] 18:50:30 [SUCCESS] 2g.Debian.com
[2] 18:50:30 [SUCCESS] 2g.CentOS.com
</code></pre><p>使用下面的命令递归地复制文件夹到多个远程服务器。</p><pre tabindex=0><code># pscp.pssh -h server-list.txt -r /home/daygeek/2g/shell-script/ /opt/backup

[1] 18:51:31 [SUCCESS] 2g.Debian.com
[2] 18:51:31 [SUCCESS] 2g.CentOS.com
</code></pre><h3 id=方式-4如何在-linux-上使用-rsync-命令复制文件文件夹到多个远程系统上>方式 4：如何在 Linux 上使用 rsync 命令复制文件/文件夹到多个远程系统上？</h3><p><code>rsync</code> 是一个即快速又出众的多功能文件复制工具。它能本地复制、通过远程 shell 在其它主机之间复制，或者在远程 <code>rsync</code> 守护进程 daemon 之间复制。</p><p>使用下面的 <code>rsync</code> 命令复制单个文件到远程服务器。</p><pre tabindex=0><code># rsync -avz /home/daygeek/2g/shell-script/output.txt root@2g.CentOS.com:/opt/backup

sending incremental file list
output.txt

sent 598 bytes received 31 bytes 1258.00 bytes/sec
total size is 2468 speedup is 3.92
</code></pre><p>使用下面的 <code>rsync</code> 命令复制多个文件到远程服务器。</p><pre tabindex=0><code># rsync -avz /home/daygeek/2g/shell-script/output.txt passwd-up.sh root@2g.CentOS.com:/opt/backup

sending incremental file list
output.txt
passwd-up.sh

sent 737 bytes received 50 bytes 1574.00 bytes/sec
total size is 2537 speedup is 3.22
</code></pre><p>使用下面的 <code>rsync</code> 命令通过 <code>ssh</code> 复制单个文件到远程服务器。</p><pre tabindex=0><code># rsync -avzhe ssh /home/daygeek/2g/shell-script/output.txt root@2g.CentOS.com:/opt/backup

sending incremental file list
output.txt

sent 598 bytes received 31 bytes 419.33 bytes/sec
total size is 2.47K speedup is 3.92
</code></pre><p>使用下面的 <code>rsync</code> 命令通过 <code>ssh</code> 递归地复制文件夹到远程服务器。这种方式只复制文件不包括文件夹。</p><pre tabindex=0><code># rsync -avzhe ssh /home/daygeek/2g/shell-script/ root@2g.CentOS.com:/opt/backup

sending incremental file list
./
output.txt
ovh.sh
passwd-up.sh
passwd-up1.sh
server-list.txt

sent 3.85K bytes received 281 bytes 8.26K bytes/sec
total size is 9.12K speedup is 2.21
</code></pre><h3 id=方式-5如何在-linux-上使用-rsync-命令和-shell-脚本复制文件文件夹到多个远程系统上>方式 5：如何在 Linux 上使用 rsync 命令和 Shell 脚本复制文件/文件夹到多个远程系统上？</h3><p>如果你想复制同一个文件到多个远程服务器上，那也需要创建一个如下面那样的小 shell 脚本。</p><pre tabindex=0><code># file-copy.sh

#!/bin/sh
for server in `more server-list.txt`
do
 rsync -avzhe ssh /home/daygeek/2g/shell-script/ root@2g.CentOS.com$server:/opt/backup
done
</code></pre><p>上面脚本的输出。</p><pre tabindex=0><code># ./file-copy.sh

sending incremental file list
./
output.txt
ovh.sh
passwd-up.sh
passwd-up1.sh
server-list.txt

sent 3.86K bytes received 281 bytes 8.28K bytes/sec
total size is 9.13K speedup is 2.21

sending incremental file list
./
output.txt
ovh.sh
passwd-up.sh
passwd-up1.sh
server-list.txt

sent 3.86K bytes received 281 bytes 2.76K bytes/sec
total size is 9.13K speedup is 2.21
</code></pre><h3 id=方式-6如何在-linux-上使用-scp-命令和-shell-脚本从本地系统向多个远程系统复制文件文件夹>方式 6：如何在 Linux 上使用 scp 命令和 Shell 脚本从本地系统向多个远程系统复制文件/文件夹？</h3><p>在上面两个 shell 脚本中，我们需要事先指定好文件和文件夹的路径，这儿我做了些小修改，让脚本可以接收文件或文件夹作为输入参数。当你每天需要多次执行复制时，这将会非常有用。</p><pre tabindex=0><code># file-copy.sh

#!/bin/sh
for server in `more server-list.txt`
do
scp -r $1 root@2g.CentOS.com$server:/opt/backup
done
</code></pre><p>输入文件名并运行脚本。</p><pre tabindex=0><code># ./file-copy.sh output1.txt

output1.txt 100% 3558 3.5KB/s 00:00
output1.txt 100% 3558 3.5KB/s 00:00
</code></pre><h3 id=方式-7如何在-linux-系统上用非标准端口复制文件文件夹到远程系统>方式 7：如何在 Linux 系统上用非标准端口复制文件/文件夹到远程系统？</h3><p>如果你想使用非标准端口，使用下面的 shell 脚本复制文件或文件夹。</p><p>如果你使用了 非标准 Non-Standard 端口，确保像下面 <code>scp</code> 命令那样指定好了端口号。</p><pre tabindex=0><code># file-copy-scp.sh

#!/bin/sh
for server in `more server-list.txt`
do
scp -P 2222 -r $1 root@2g.CentOS.com$server:/opt/backup
done
</code></pre><p>运行脚本，输入文件名。</p><pre tabindex=0><code># ./file-copy.sh ovh.sh

ovh.sh 100% 3558 3.5KB/s 00:00
ovh.sh 100% 3558 3.5KB/s 00:00
</code></pre><p>如果你使用了 非标准 Non-Standard 端口，确保像下面 <code>rsync</code> 命令那样指定好了端口号。</p><pre tabindex=0><code># file-copy-rsync.sh

#!/bin/sh
for server in `more server-list.txt`
do
rsync -avzhe &#39;ssh -p 2222&#39; $1 root@2g.CentOS.com$server:/opt/backup
done
</code></pre><p>运行脚本，输入文件名。</p><pre tabindex=0><code># ./file-copy-rsync.sh passwd-up.sh
sending incremental file list
passwd-up.sh

sent 238 bytes received 35 bytes 26.00 bytes/sec
total size is 159 speedup is 0.58

sending incremental file list
passwd-up.sh

sent 238 bytes received 35 bytes 26.00 bytes/sec
total size is 159 speedup is 0.58
</code></pre><hr><p>via: <a href=https://www.2daygeek.com/linux-scp-rsync-pscp-command-copy-files-folders-in-multiple-servers-using-shell-script/>https://www.2daygeek.com/linux-scp-rsync-pscp-command-copy-files-folders-in-multiple-servers-using-shell-script/</a></p><p>作者：<a href=https://www.2daygeek.com/author/prakash/>Prakash Subramanian</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/LuuMing>LuuMing</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%A4%8D%E5%88%B6/ rel=tag>复制</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>