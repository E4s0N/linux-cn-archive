<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>命令行乐趣：嘲讽输错 Bash 命令的用户 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="命令行乐趣：嘲讽输错 Bash 命令的用户"><meta property="og:description" content="你可以通过配置 sudo 命令去嘲讽输入错误密码的用户。但是现在，当用户在 shell 输错命令时，就能嘲讽他了（滥用？）。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9497-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-03-30T10:26:59+00:00"><meta property="article:modified_time" content="2018-03-30T10:26:59+00:00"><meta itemprop=name content="命令行乐趣：嘲讽输错 Bash 命令的用户"><meta itemprop=description content="你可以通过配置 sudo 命令去嘲讽输入错误密码的用户。但是现在，当用户在 shell 输错命令时，就能嘲讽他了（滥用？）。"><meta itemprop=datePublished content="2018-03-30T10:26:59+00:00"><meta itemprop=dateModified content="2018-03-30T10:26:59+00:00"><meta itemprop=wordCount content="458"><meta itemprop=keywords content="sudo,嘲讽,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>命令行乐趣：嘲讽输错 Bash 命令的用户</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-03-30T10:26:59Z>March 30, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201803/30/102653o0g177wl8dug2kw2.jpg alt></p><p>你可以通过配置 <code>sudo</code> 命令去嘲讽输入错误密码的用户。但是现在，当用户在 shell 输错命令时，就能嘲讽他了（滥用？）。</p><h3 id=你好-bash-insulter>你好 bash-insulter</h3><p>来自 Github 页面：</p><blockquote><p>当用户键入错误命令，随机嘲讽。它使用了一个 bash4.x. 版本的全新内置错误处理函数，叫 <code>command_not_found_handle</code>。</p></blockquote><h3 id=安装>安装</h3><p>键入下列 git 命令克隆一个仓库：</p><pre tabindex=0><code>git clone https://github.com/hkbakke/bash-insulter.git bash-insulter
</code></pre><p>示例输出：</p><pre tabindex=0><code>Cloning into &#39;bash-insulter&#39;...
remote: Counting objects: 52, done.
remote: Compressing objects: 100% (49/49), done.
remote: Total 52 (delta 12), reused 12 (delta 2), pack-reused 0
Unpacking objects: 100% (52/52), done.
</code></pre><p>用文本编辑器，比如说使用 <code>vi</code>，编辑你的 <code>~/.bashrc</code> 或者 <code>/etc/bash.bashrc</code> 文件：</p><pre tabindex=0><code>$ vi ~/.bashrc
</code></pre><p>在其后追加这一行（具体了解请查看 <a href=https://bash.cyberciti.biz/guide/If..else..fi>if..else..fi 声明</a> 和 <a href=https://bash.cyberciti.biz/guide/Source_command>source 命令</a>）：</p><pre tabindex=0><code>if [ -f $HOME/bash-insulter/src/bash.command-not-found ]; then
    source $HOME/bash-insulter/src/bash.command-not-found
fi
</code></pre><p>保存并关闭文件。重新登录，如果不想退出账号也可以手动运行它：</p><pre tabindex=0><code>$ . $HOME/bash-insulter/src/bash.command-not-found
</code></pre><h3 id=如何使用它>如何使用它？</h3><p>尝试键入一些无效命令：</p><pre tabindex=0><code>$ ifconfigs
$ dates
</code></pre><p>示例输出:</p><p><a href=https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg><img src=/data/attachment/album/201803/30/102702uazyc5tf7qmhcccy.jpg alt="一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。"></a></p><h3 id=自定义>自定义</h3><p>你需要编辑 <code>$HOME/bash-insulter/src/bash.command-not-found</code>：</p><pre tabindex=0><code>$ vi $HOME/bash-insulter/src/bash.command-not-found
</code></pre><p>示例代码：</p><pre tabindex=0><code>command_not_found_handle () {
    local INSULTS=(
        &#34;Boooo!&#34;
        &#34;Don&#39;t you know anything?&#34;
        &#34;RTFM!&#34;
        &#34;Hahaha, n00b!&#34;
        &#34;Wow! That was impressively wrong!&#34;
        &#34;What are you doing??&#34;
        &#34;Pathetic&#34;
        &#34;...and this is the best you can do??&#34;
        &#34;The worst one today!&#34;
        &#34;n00b alert!&#34;
        &#34;Your application for reduced salary has been sent!&#34;
        &#34;lol&#34;
        &#34;u suk&#34;
        &#34;lol... plz&#34;
        &#34;plz uninstall&#34;
        &#34;And the Darwin Award goes to.... ${USER}!&#34;
        &#34;ERROR_INCOMPETENT_USER&#34;
        &#34;Incompetence is also competence&#34;
        &#34;Bad.&#34;
        &#34;Fake it till you make it!&#34;
        &#34;What is this...? Amateur hour!?&#34;
        &#34;Come on! You can do it!&#34;
        &#34;Nice try.&#34;
        &#34;What if... you type an actual command the next time!&#34;
        &#34;What if I told you... it is possible to type valid commands.&#34;
        &#34;Y u no speak computer???&#34;
        &#34;This is not Windows&#34;
        &#34;Perhaps you should leave the command line alone...&#34;
        &#34;Please step away from the keyboard!&#34;
        &#34;error code: 1D10T&#34;
        &#34;ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.&#34;
        &#34;Pro tip: type a valid command!&#34;
    )

    # 设置“随机”种子发生器 
    RANDOM=$(date +%s%N)
    VALUE=$((${RANDOM}%2))

    if [[ ${VALUE} -lt 1 ]]; then
        printf &#34;\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e &#34;${INSULTS[@]}&#34;)$(tput sgr0)\n\n&#34;
    fi

    echo &#34;-bash: $1: command not found&#34;

    # 无效命令，常规返回已存在的代码
    return 127
}
</code></pre><h3 id=赠品sudo-嘲讽>赠品：sudo 嘲讽</h3><p>编辑 <code>sudoers</code> 文件：</p><pre tabindex=0><code>$ sudo visudo
</code></pre><p>追加下面这一行：</p><pre tabindex=0><code>Defaults insults
</code></pre><p>或者像下面尾行增加一句嘲讽语：</p><pre tabindex=0><code>Defaults !lecture,tty_tickets,!fqdn,insults
</code></pre><p>这是我的文件：</p><pre tabindex=0><code>Defaults    env_reset
Defaults    mail_badpass
Defaults    secure_path = &#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin&#34;
## If set, sudo will insult users when they enter an incorrect password. ##
Defaults    insults

# Host alias specification

# User alias specification

# Cmnd alias specification

# User privilege specification
root ALL = (ALL:ALL) ALL

# Members of the admin group may gain root privileges
% admin ALL = (ALL) ALL   

# Allow members of group sudo to execute any command
% sudo ALL = (ALL:ALL) ALL   

# See sudoers(5) for more information on &#34;#include&#34; directives:

#includedir /etc/sudoers.d
</code></pre><p>试一试：</p><pre tabindex=0><code>$ sudo -k # 清除缓存，从头开始
$ sudo ls /root/
$ sudo -i
</code></pre><p>样例对话：</p><p><a href=https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg><img src=/data/attachment/album/201803/30/102702kp19pqb2egl8hlw2.jpg alt="当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。"></a></p><h3 id=赠品你好-sl>赠品：你好 sl</h3><p><a href=https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html>sl 或是 UNIX 经典捣蛋软件</a> 游戏。当你错误的把 <code>ls</code> 输入成 <code>sl</code>，将会有一辆蒸汽机车穿过你的屏幕。</p><pre tabindex=0><code>$ sl
</code></pre><p><a href=https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html><img src=/data/attachment/album/201803/30/102703s739gw183ll5454a.png alt="Linux / UNIX 桌面乐趣: 蒸汽机车"></a></p><hr><p>via: <a href=https://www.cyberciti.biz/howto/insult-linux-unix-bash-user-when-typing-wrong-command/>https://www.cyberciti.biz/howto/insult-linux-unix-bash-user-when-typing-wrong-command/</a></p><p>作者：<a href=https://www.cyberciti.biz>Vivek Gite</a> 译者：<a href=https://github.com/CYLeft>CYLeft</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/sudo/ rel=tag>sudo</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%98%B2%E8%AE%BD/ rel=tag>嘲讽</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>