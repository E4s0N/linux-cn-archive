<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>FreeDOS 配置指南 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="FreeDOS 配置指南"><meta property="og:description" content="学习如何使用 FDCONFIG.SYS 来配置 FreeDOS 。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14061-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-08T12:46:00+00:00"><meta property="article:modified_time" content="2021-12-08T12:46:00+00:00"><meta itemprop=name content="FreeDOS 配置指南"><meta itemprop=description content="学习如何使用 FDCONFIG.SYS 来配置 FreeDOS 。"><meta itemprop=datePublished content="2021-12-08T12:46:00+00:00"><meta itemprop=dateModified content="2021-12-08T12:46:00+00:00"><meta itemprop=wordCount content="423"><meta itemprop=keywords content="FreeDOS,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>FreeDOS 配置指南</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-12-08T12:46:00Z>December 08, 2021</time></div></div></header><div class="content post__content clearfix"><blockquote><p>学习如何使用 FDCONFIG.SYS 来配置 FreeDOS 。</p></blockquote><p><img src=https://img.linux.net.cn/data/attachment/album/202112/08/124646wahca435y60acpha.jpg alt title="Person using a laptop"></p><p>FreeDOS 是主配置文件是在根目录中的名称为 <code>FDCONFIG.SYS</code> 的文件。这个文件包含一系列的行，每行都设置一个诸如 <code>LASTDRIVE=Z</code> 或 <code>FILES=40</code> 的值。例如，在 FreeDOS 1.3 RC4 中的默认 <code>FDCONFIG.SYS</code> ，看起来像这样：</p><pre tabindex=0><code>SET DOSDIR=C:\FDOS

!COUNTRY=001,858,C:\FDOS\BIN\COUNTRY.SYS
!LASTDRIVE=Z
!BUFFERS=20
!FILES=40
!MENUCOLOR=7,0

MENUDEFAULT=1,5
MENU 1 - Load FreeDOS with JEMMEX, no EMS (most UMBs), max RAM free
MENU 2 - Load FreeDOS with JEMM386 (Expanded Memory)
MENU 3 - Load FreeDOS low with some drivers (Safe Mode)
MENU 4 - Load FreeDOS without drivers (Emergency Mode)

12?DOS=HIGH
12?DOS=UMB
12?DOSDATA=UMB
1?DEVICE=C:\FDOS\BIN\JEMMEX.EXE NOEMS X=TEST I=TEST NOVME NOINVLPG
234?DEVICE=C:\FDOS\BIN\HIMEMX.EXE
2?DEVICE=C:\FDOS\BIN\JEMM386.EXE X=TEST I=TEST I=B000-B7FF NOVME NOINVLPG
34?SHELL=C:\FDOS\BIN\COMMAND.COM C:\FDOS\BIN /E:1024 /P=C:\FDAUTO.BAT
12?SHELLHIGH=C:\FDOS\BIN\COMMAND.COM C:\FDOS\BIN /E:1024 /P=C:\FDAUTO.BAT
</code></pre><p>但是，这些指令行都表示什么意思？为什么一些指令行有一个问号（<code>?</code>）或一个叹号（<code>!</code>），而其它的命令行却没有？</p><h3 id=一个简单的配置>一个简单的配置</h3><p>让我们从一个简单的配置开始，像这样，我们就可以看到我们的配置做了什么。做出这个非常简单的 <code>FDCONFIG.SYS</code> 文件：</p><pre tabindex=0><code>LASTDRIVE=Z
BUFFERS=20
FILES=40
DEVICE=C:\FDOS\BIN\HIMEMX.EXE
SHELL=C:\FDOS\BIN\COMMAND.COM C:\FDOS\BIN /E:1024 /P=C:\FDAUTO.BAT
</code></pre><p>这个配置文件仅包含几个指令：</p><ol><li><code>LASTDRIVE=Z</code></li><li><code>BUFFERS=20</code></li><li><code>FILES=40</code></li><li><code>DEVICE=C:\FDOS\BIN\HIMEMX.EXE</code></li><li><code>SHELL=C:\FDOS\BIN\COMMAND.COM C:\FDOS\BIN /E:1024 /P=C:\FDAUTO.BAT</code></li></ol><p>第一行指令告诉 FreeDOS 在存储器中保留多少驱动器字母。（DOS 使用字母来表示附属于系统的每个驱动器，<code>LASTDRIVE=Z</code> 表示预留从 <code>A</code> 到 <code>Z</code> 的所有驱动器字母）。 <code>LASTDRIVE</code> 会影响系统可以识别的 <em>逻辑驱动器</em> 的数量。你可能没有任何的逻辑驱动器；FreeDOS 安装器不会默认设置这些逻辑驱动器。在任何情况下，在任何 FreeDOS 系统上设置 <code>LASTDRIVE=Z</code> 都是没有害处的。</p><p><code>BUFFERS</code> 行设置文件缓冲区预留存储器。<em>缓冲区</em> 有助于加速某些需要存储空间的进程，例如复制文件。如果你为 <code>BUFFERS</code> 设置一个较大的值，那么 FreeDOS 将预留更多的存储器。同理反之。大多数的用户将会设置其为 <code>BUFFERS=20</code> 或 <code>BUFFERS=40</code> ，取决于他们在系统上读写文件的频率。</p><p><code>FILES</code> 设置决定 DOS 允许你一次打开多少文件。如果你运行的一个应用程序需要一次打开很多文件，例如打开一个谱系数据库，你可能需要为 <code>FILES</code> 设置一个较大的值。对于大多数的用户来说，<code>FILES=40</code> 是一个合理的值。</p><p><code>DEVICE</code> 是一个特殊的指令，用于加载 <em>设备驱动器</em> 。DOS 需要针对某些硬件或配置文件的设备驱动器。这行 <code>DEVICE=C:\FDOS\BIN\HIMEMX.EXE</code> 来加载 <em>HimemX</em> 设备驱动，这样，DOS 可以利用超出前 640 KB 的扩展存储器。</p><p>最后的指令行告诉 FreeDOS 的内核在哪里找到命令行 shell 。默认情况下，内核将从 <code>COMMAND.COM</code> 开始查找 shell ，但是你可以使用 <code>SHELL</code> 指令来更改它。在这个示例中， <code>SHELL=C:\FDOS\BIN\COMMAND.COM</code> 说明 shell 是 <code>COMMAND.COM</code> 程序，位于 <code>C</code> 驱动器上的 <code>\FDOS\BIN</code> 目录之中。</p><p>在 <code>SHELL</code> 结尾处的其它文件表示选项为 <code>COMMAND.COM</code> 的 shell 。FreeDOS 的 <code>COMMAND.COM</code> 支持一些启动选项来修改它的行为，包括：</p><ul><li><code>C:\FDOS\BIN</code>：<code>COMMAND.COM</code> 程序的完整的路径</li><li><code>/E:1024</code>：环境（<code>E</code>）大小，以字节为单位。<code>/E:1024</code> 告诉 <code>COMMAND.COM</code> 来预留 1024 字节，或者说是 1 KB ，来存储它的环境变量。</li><li><code>/P=C:\FDAUTO.BAT</code>：<code>/P</code> 选项表示 shell 是一个永久性的（<code>P</code>）shell ，因此用户不能通过输入 <code>EXIT</code> 来退出 shell（附加文本 <code>=C:\FDAUTO.BAT</code> 告诉 <code>COMMAND.COM</code> 在启动时执行 <code>C:\FDAUTO.BAT</code> 文件，而不再执行默认的 <code>AUTOEXEC.BAT</code> 文件）</li></ul><p>通过这个简单的配置文件，你应该能够理解 FreeDOS 1.3 RC4 安装的 <code>FDCONFIG.SYS</code> 文件中的一些东西。</p><h3 id=启动菜单>启动菜单</h3><p>FreeDOS 支持一种有序的功能：在一个系统上使用多个配置文件，使用一个“启动菜单”来选择你想要的配置。<code>FDCONFIG.SYS</code> 文件包含一些定义菜单的行:</p><pre tabindex=0><code>!MENUCOLOR=7,0

MENUDEFAULT=1,5
MENU 1 - Load FreeDOS with JEMMEX, no EMS (most UMBs), max RAM free
MENU 2 - Load FreeDOS with JEMM386 (Expanded Memory)
MENU 3 - Load FreeDOS low with some drivers (Safe Mode)
MENU 4 - Load FreeDOS without drivers (Emergency Mode)
</code></pre><p><code>MENUCOLOR</code> 指令定义启动菜单的文本颜色和背景颜色。这些值通常在 0 到 7 的范围之内, 并代表这些颜色：</p><ul><li>0 黑色</li><li>1 蓝色</li><li>2 绿色</li><li>3 品蓝</li><li>4 红色</li><li>5 品红</li><li>6 棕色</li><li>7 白色</li></ul><p>因此，<code>MENUCOLOR=7,0</code> 的定义意味着显示一个黑色背景（<code>0</code>）白色文本（<code>7</code>）的菜单。如果你想使用一个蓝色背景白色文本，你可以将其定义为 <code>MENUCOLOR=7,1</code> 。</p><p>在行头部的叹号（<code>!</code>）意味着：不管你选择哪个菜单，这个指令都将会执行。</p><p><code>MENUDEFAULT=1,5</code> 行告诉内核等待用户多长时间来选择启动菜单项，或者如果用户没有选择的话，使用那个默认菜单项。<code>MENUDEFAULT=1,5</code> 标示着系统将等待 <code>5</code> 秒钟；如果用户不在这段时间内尝试选择一个菜单的话，内核将选择启动菜单 “1” 。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/08/124701q7b8e9uzd7hbhe55.png alt="boot menu" title="The boot menu waits for 5 seconds before assuming menu item 1"></p><p>在其后的 <code>MENU</code> 行至不同启动菜单配置的标签。它们是按顺序排列的，因此，菜单项目 “1” 是第一个，接下来的 “2” 是第二个，以此类推。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/08/124701lygglgf0zgl0fy1l.png alt="menu select 4" title="Use the arrow keys to select a boot menu configuration"></p><p>在 <code>FDCONFIG.SYS</code> 中的接下来的一行中，你将在一个问号（<code>?</code>）前看到一些数字。这标示“针对这几个数字的启动菜单项，使用这行命令”。例如，如果用户选择启动菜单项 “2”、“3” 或 “4” 的话，那么带有 <code>234?</code> 的这行命令才将加载 HimemX 设备驱动器。</p><pre tabindex=0><code>234?DEVICE=C:\FDOS\BIN\HIMEMX.EXE
</code></pre><p>这里有很多方法来使用 <code>FDCONFIG.SYS</code> 以配置你的 FreeDOS 系统。我们在这里只介绍基本的东西，最重用的方法是定义你的 FreeDOS 内核设置。更多的信息，探索 FreeDOS 帮助系统（在命令行中输入 <code>HELP</code>）来学习如何使用 FreeDOS 的 <code>FDCONFIG.SYS</code> 选项：</p><ul><li><code>SWITCHES</code>：启动时处理过程行为</li><li><code>REM</code> 和 <code>;</code>：注释（在 <code>FDCONFIG.SYS</code> 中将被忽略）</li><li><code>MENUCOLOR</code>：启动菜单文本颜色和背景颜色</li><li><code>MENUDEFAULT</code>：启动菜单默认值</li><li><code>MENU</code>：启动菜单选项</li><li><code>ECHO</code> 和 <code>EECHO</code>：显示信息</li><li><code>BREAK</code>：设置打开或关闭扩展的 <code>Ctrl+C</code> 检查</li><li><code>BUFFERS</code> 或 <code>BUFFERSHIGH</code>：分配多少磁盘缓冲区</li><li><code>COUNTRY</code>：设置国际化行为</li><li><code>DOS</code>：告诉 FreeDOS 内核如何将其自身加载到存储器之中</li><li><code>DOSDATA</code>：告诉 FreeDOS 加载内核到上位存储器之中</li><li><code>FCBS</code>：设置文件控制块（FCB）的数量</li><li><code>KEYBUF</code>：在存储器中重新指定键盘缓冲区</li><li><code>FILES</code> 或 <code>FILESHIGH</code>：一次可以打开多少个文件</li><li><code>LASTDRIVE</code> 或 <code>LASTDRIVEHIGH</code>：设置可以使用的最后一个驱动器字母</li><li><code>NUMLOCK</code>：设置打开或关闭键盘数字锁</li><li><code>SHELL</code>、<code>SHELLHIGH</code> 或 <code>COMMAND</code>：设置命令行 shell</li><li><code>STACKS</code> 或 <code>STACKSHIGH</code>：添加堆栈以处理硬件中断</li><li><code>SWITCHAR</code>：重新定义命令行选项开关字符</li><li><code>SCREEN</code>：设置在屏幕上的行数</li><li><code>VERSION</code>：设置向程序报告的 DOS 版本</li><li><code>IDLEHALT</code>：激活节能功能，在某些系统上有用</li><li><code>DEVICE</code> 和 <code>DEVICEHIGH</code>：加载一个驱动程序到存储器之中</li><li><code>INSTALL</code> 和 <code>INSTALLHIGH</code>：加载一个 “存储器驻留”（TSR）程序</li><li><code>SET</code>：设置一个 DOS 环境变量</li></ul><h3 id=以纯文本方式配置-freedos>以纯文本方式配置 FreeDOS</h3><p>像 Linux 和 BSD 一样，FreeDOS 配置以纯文本的方式进行。不需要特殊指定的编辑工具，因此，深入研究，看看哪些选项最适合你。它很简单，但是功能很强大！</p><hr><p>via: <a href=https://opensource.com/article/21/6/freedos-fdconfigsys>https://opensource.com/article/21/6/freedos-fdconfigsys</a></p><p>作者：<a href=https://opensource.com/users/jim-hall>Jim Hall</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/robsean>robsean</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/freedos/ rel=tag>FreeDOS</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>