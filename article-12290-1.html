<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何使用 ethtool 命令管理以太网卡 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何使用 ethtool 命令管理以太网卡"><meta property="og:description" content="ethtool 用于查看和修改网络设备（尤其是有线以太网设备）的驱动参数和硬件设置。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12290-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-06-06T22:34:00+00:00"><meta property="article:modified_time" content="2020-06-06T22:34:00+00:00"><meta itemprop=name content="如何使用 ethtool 命令管理以太网卡"><meta itemprop=description content="ethtool 用于查看和修改网络设备（尤其是有线以太网设备）的驱动参数和硬件设置。"><meta itemprop=datePublished content="2020-06-06T22:34:00+00:00"><meta itemprop=dateModified content="2020-06-06T22:34:00+00:00"><meta itemprop=wordCount content="698"><meta itemprop=keywords content="网卡,ethtool,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何使用 ethtool 命令管理以太网卡</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-06-06T22:34:00Z>June 06, 2020</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/202006/06/223359syh8n37luz8hhllh.jpg alt></p><p><code>ethtool</code> 用于查看和修改网络设备（尤其是有线以太网设备）的驱动参数和硬件设置。你可以根据需要更改以太网卡的参数，包括自动协商、速度、双工和局域网唤醒等参数。通过对以太网卡的配置，你的计算机可以通过网络有效地进行通信。该工具提供了许多关于接驳到你的 Linux 系统的以太网设备的信息。</p><p>在这篇文章中，我们将告诉你如何更改以下的参数以及如何查看这些参数。这篇文章将帮助你在 Linux 系统中排除与以太网卡相关的问题。</p><p>下面的信息将帮助你了解以太网卡的工作原理。</p><ul><li><strong>半双工</strong>：半双工模式允许设备一次只能发送或接收数据包。</li><li><strong>全双工</strong>：全双工模式允许设备可以同时发送和接收数据包。</li><li><strong>自动协商</strong>：自动协商是一种机制，允许设备自动选择最佳网速和工作模式（全双工或半双工模式）。</li><li><strong>速度</strong>：默认情况下，它会使用最大速度，你可以根据自己的需要改变它。</li><li><strong>链接检测</strong>：链接检测可以显示网卡的状态。如果显示为 <code>no</code>，请尝试重启网卡。如果链路检测仍显示 <code>no</code>，则检查交换机与系统之间连接的线缆是否有问题。</li></ul><h3 id=如何在-linux-上安装-ethtool>如何在 Linux 上安装 ethtool</h3><p>默认情况下，大多数系统上应该已经安装了 <code>ethtool</code>。如果没有，你可以从发行版的官方版本库中安装。</p><p>对于 RHEL/CentOS 6/7 系统，请使用 <a href=https://www.2daygeek.com/linux-yum-command-examples-manage-packages-rhel-centos-systems/>yum 命令</a> 安装 <code>ethtool</code>：</p><pre tabindex=0><code>$ sudo yum install -y ethtool
</code></pre><p>对于 RHEL/CentOS 8 和 Fedora 系统，请使用 <a href=https://www.2daygeek.com/linux-dnf-command-examples-manage-packages-fedora-centos-rhel-systems/>dnf 命令</a> 安装 <code>ethtool</code>：</p><pre tabindex=0><code>$ sudo dnf install -y ethtool
</code></pre><p>对于基于 Debian 的系统，请使用 <a href=https://www.2daygeek.com/apt-command-examples-manage-packages-debian-ubuntu-systems/>apt 命令</a> 或 <a href=https://www.2daygeek.com/apt-get-apt-cache-command-examples-manage-packages-debian-ubuntu-systems/>apt-get 命令</a> 安装 <code>ethtool</code>：</p><pre tabindex=0><code>$ sudo apt-get install ethtool
</code></pre><p>对于 openSUSE 系统，使用 <a href=https://www.2daygeek.com/zypper-command-examples-manage-packages-opensuse-system/>zypper 命令</a> 安装 <code>ethtool</code>：</p><pre tabindex=0><code>$ sudo zypper install -y ethtool
</code></pre><p>对于 Arch Linux 系统，使用 <a href=https://www.2daygeek.com/pacman-command-examples-manage-packages-arch-linux-system/>pacman 命令</a> 安装 <code>ethtool</code>：</p><pre tabindex=0><code>$ sudo pacman -S ethtool
</code></pre><h3 id=如何检查-linux-上的可用网络接口>如何检查 Linux 上的可用网络接口</h3><p>你可以使用 <a href=https://www.2daygeek.com/ip-command-configure-network-interface-usage-linux/>ip 命令</a>或 <code>ifconfig</code> 命令（在现代发行版中已被淘汰）来验证可用的、活动的网卡的名称和其他细节：</p><pre tabindex=0><code># ip a
或
# ifconfig

1: lo: mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:10:22:35:23:sf brd ff:ff:ff:ff:ff:ff
    inet 192.164.23.100/24 brd 192.164.23.255 scope global eth0
       valid_lft forever preferred_lft forever
</code></pre><h3 id=如何检查-linux-上的网卡nic信息>如何检查 Linux 上的网卡（NIC）信息</h3><p>掌握了以太网卡名称后，就可以使用 <code>ethtool</code> 命令轻松查看其详细信息，如下所示。</p><p>在 Linux 系统中，每个网卡（NIC）都被分配了唯一的名称，如 ethX、enpXXX 等。</p><ul><li>旧的 Linux 发行版使用的是 <code>eth[X]</code> 格式。例如，RHEL 6 和它们的旧版本。</li><li>现代的 Linux 发行版使用 <code>enp[XXX]</code> 或 <code>ens[XXX]</code> 格式。例如，大多数现代 Linux 发行版都使用这种格式，包括 RHEL 7、Debian 10、Ubuntu 16.04 LTS。</li></ul><pre tabindex=0><code># ethtool eth0

Settings for eth0:
        Supported ports: [ TP ]
        Supported link modes: 1000baseT/Full
                              10000baseT/Full
        Supported pause frame use: No
        Supports auto-negotiation: No
        Supported FEC modes: Not reported
        Advertised link modes: Not reported
        Advertised pause frame use: No
        Advertised auto-negotiation: No
        Advertised FEC modes: Not reported
        Speed: 10000Mb/s
        Duplex: Full
        Port: Twisted Pair
        PHYAD: 0
        Transceiver: internal
        Auto-negotiation: off
        MDI-X: Unknown
        Supports Wake-on: uag
        Wake-on: d
        Link detected: yes
</code></pre><h3 id=如何检查以太网卡的驱动程序和固件版本>如何检查以太网卡的驱动程序和固件版本</h3><p>你可以使用 <code>ethtool</code> 命令的 <code>-i</code> 选项检查驱动程序版本、固件版本和总线的详细信息，如下所示：</p><pre tabindex=0><code># ethtool -i eth0

driver: vmxnet3
version: 1.4.16.0-k-NAPI
firmware-version:
expansion-rom-version:
bus-info: 0000:0b:00.0
supports-statistics: yes
supports-test: no
supports-eeprom-access: no
supports-register-dump: yes
supports-priv-flags: no
</code></pre><h3 id=如何检查网络使用情况统计>如何检查网络使用情况统计</h3><p>你可以使用 <code>ethtool</code> 命令中的 <code>-S</code> 选项来查看网络使用情况统计。它可以显示传输的字节数、接收的字节数、错误数等。</p><pre tabindex=0><code># ethtool -S eth0

NIC statistics:
     Tx Queue#: 0
       TSO pkts tx: 2053
       TSO bytes tx: 7167572
       ucast pkts tx: 4028081
       ucast bytes tx: 399093197
       mcast pkts tx: 0
       mcast bytes tx: 0
       bcast pkts tx: 0
       bcast bytes tx: 0
       pkts tx err: 0
       pkts tx discard: 0
       drv dropped tx total: 0
          too many frags: 0
          giant hdr: 0
          hdr err: 0
          tso: 0
       ring full: 0
       pkts linearized: 0
       hdr cloned: 0
       giant hdr: 0
     Tx Queue#: 1
       TSO pkts tx: 1955
       TSO bytes tx: 6536945
       ucast pkts tx: 3711838
       ucast bytes tx: 346309662
       mcast pkts tx: 0
       mcast bytes tx: 0
       bcast pkts tx: 1186
       bcast bytes tx: 49812
       pkts tx err: 0
       pkts tx discard: 0
       drv dropped tx total: 0
          too many frags: 0
          giant hdr: 0
          hdr err: 0
          tso: 0
       ring full: 0
       pkts linearized: 0
       hdr cloned: 0
       giant hdr: 0
     Rx Queue#: 0
       LRO pkts rx: 0
       LRO byte rx: 0
       ucast pkts rx: 5084776
       ucast bytes rx: 4673133395
       mcast pkts rx: 0
       mcast bytes rx: 0
       bcast pkts rx: 154143
       bcast bytes rx: 45415676
       pkts rx OOB: 0
       pkts rx err: 0
       drv dropped rx total: 0
          err: 0
          fcs: 0
       rx buf alloc fail: 0
     Rx Queue#: 1
       LRO pkts rx: 0
       LRO byte rx: 0
       ucast pkts rx: 6346769
       ucast bytes rx: 4835534292
       mcast pkts rx: 0
       mcast bytes rx: 0
       bcast pkts rx: 3464
       bcast bytes rx: 714646
       pkts rx OOB: 0
       pkts rx err: 0
       drv dropped rx total: 0
          err: 0
          fcs: 0
       rx buf alloc fail: 0
     tx timeout count: 0
</code></pre><h3 id=如何改变以太网设备的速度>如何改变以太网设备的速度</h3><p>你可以根据需要改变以太网的速度。当你进行此更改时，网卡将自动掉线，你需要使用 <a href=https://www.2daygeek.com/enable-disable-up-down-nic-network-interface-port-linux-using-ifconfig-ifdown-ifup-ip-nmcli-nmtui/>ifup 命令</a> 或 <code>ip</code> 命令或 <code>nmcli</code> 命令将其重新上。</p><pre tabindex=0><code># ethtool -s eth0 speed 100
# ip link set eth0 up
</code></pre><h3 id=如何在-linux-上启用禁用以太网卡的自动协商>如何在 Linux 上启用/禁用以太网卡的自动协商？</h3><p>你可以使用 <code>ethtool</code> 命令中的 <code>autoneg</code> 选项启用或禁用自动协商，如下图所示：</p><pre tabindex=0><code># ethtool -s eth0 autoneg off
# ethtool -s eth0 autoneg on
</code></pre><h3 id=如何同时更改多个参数>如何同时更改多个参数</h3><p>如果你想使用 <code>ethtool</code> 命令同时更改以太网卡的多个参数，请使用下面的格式：</p><pre tabindex=0><code>Syntax:
ethtool –s [device_name] speed [10/100/1000] duplex [half/full] autoneg [on/off]
</code></pre><pre tabindex=0><code># ethtool –s eth0 speed 1000 duplex full autoneg off
</code></pre><h3 id=如何检查特定网卡的自动协商rx-和-tx>如何检查特定网卡的自动协商、RX 和 TX</h3><p>要查看关于特定以太网设备的自动协商等详细信息，请使用以下格式：</p><pre tabindex=0><code># ethtool -a eth0
</code></pre><h3 id=如何从多个设备中识别出特定的网卡闪烁网卡上的-led>如何从多个设备中识别出特定的网卡（闪烁网卡上的 LED）</h3><p>如果你想识别一个特定的物理接口，这个选项非常有用。下面的 <code>ethtool</code> 命令会使 <code>eth0</code> 端口的 LED 灯闪烁：</p><pre tabindex=0><code># ethtool -p eth0
</code></pre><h3 id=如何在-linux-中永久设置这些参数>如何在 Linux 中永久设置这些参数</h3><p>在系统重启后，你使用 <code>ethtool</code> 所做的更改将被默认恢复。</p><p>要使自定义设置永久化，你需要更新网络配置文件中的值。根据你的 Linux 发行版，你可能需要将此值更新到正确的文件中。</p><p>对于基于 RHEL 的系统。你必须使用 <code>ETHTOOL_OPTS</code> 变量：</p><pre tabindex=0><code># vi /etc/sysconfig/network-scripts/ifcfg-eth0

ETHTOOL_OPTS=&#34;speed 1000 duplex full autoneg off&#34;
</code></pre><p>对于基于 Debian 的系统：</p><pre tabindex=0><code># vi /etc/network/interfaces

post-up ethtool -s eth0 speed 1000 duplex full autoneg off
</code></pre><hr><p>via: <a href=https://www.2daygeek.com/linux-ethtool-command-view-change-ethernet-adapter-settings-nic-card/>https://www.2daygeek.com/linux-ethtool-command-view-change-ethernet-adapter-settings-nic-card/</a></p><p>作者：<a href=https://www.2daygeek.com/author/magesh/>Magesh Maruthamuthu</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/wxy>wxy</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E7%BD%91%E5%8D%A1/ rel=tag>网卡</a></li><li class=tags__item><a class="tags__link btn" href=/tags/ethtool/ rel=tag>ethtool</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>