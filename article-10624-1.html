<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>浅析 Bash 中的 {花括号} - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="浅析 Bash 中的 {花括号}"><meta property="og:description" content="让我们继续我们的 Bash 基础之旅，来近距离观察一下花括号，了解一下如何和何时使用它们。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10624-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-17T09:26:42+00:00"><meta property="article:modified_time" content="2019-03-17T09:26:42+00:00"><meta itemprop=name content="浅析 Bash 中的 {花括号}"><meta itemprop=description content="让我们继续我们的 Bash 基础之旅，来近距离观察一下花括号，了解一下如何和何时使用它们。"><meta itemprop=datePublished content="2019-03-17T09:26:42+00:00"><meta itemprop=dateModified content="2019-03-17T09:26:42+00:00"><meta itemprop=wordCount content="308"><meta itemprop=keywords content="花括号,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>浅析 Bash 中的 {花括号}</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-03-17T09:26:42Z>March 17, 2019</time></div></div></header><div class="content post__content clearfix"><blockquote><p>让我们继续我们的 Bash 基础之旅，来近距离观察一下花括号，了解一下如何和何时使用它们。</p></blockquote><p><img src=/data/attachment/album/201903/17/092645rcem688e5m583tpc.jpg alt></p><p>在前面的 Bash 基础系列文章中，我们或多或少地使用了一些还没有讲到的符号。在之前文章的很多例子中，我们都使用到了括号，但并没有重点讲解关于括号的内容。</p><p>这个系列接下来的文章中，我们会研究括号们的用法：如何使用这些括号？将它们放在不同的位置会有什么不同的效果？除了圆括号、方括号、花括号以外，我们还会接触另外的将一些内容“包裹”起来的符号，例如单引号、双引号和反引号。</p><p>在这周，我们先来看看花括号 <code>{}</code>。</p><h3 id=构造序列>构造序列</h3><p>花括号在之前的《<a href=/article-10465-1.html>点的含义</a>》这篇文章中已经出现过了，当时我们只对点号 <code>.</code> 的用法作了介绍。但在构建一个序列的过程中，同样不可以缺少花括号。</p><p>我们使用</p><pre tabindex=0><code>echo {0..10}
</code></pre><p>来顺序输出 0 到 10 这 11 个数。使用</p><pre tabindex=0><code>echo {10..0}
</code></pre><p>可以将这 11 个数倒序输出。更进一步，可以使用</p><pre tabindex=0><code>echo {10..0..2}
</code></pre><p>来跳过其中的奇数。</p><p>而</p><pre tabindex=0><code>echo {z..a..2}
</code></pre><p>则从倒序输出字母表，并跳过其中的第奇数个字母。</p><p>以此类推。</p><p>还可以将两个序列进行组合：</p><pre tabindex=0><code>echo {a..z}{a..z}
</code></pre><p>这个命令会将从 aa 到 zz 的所有双字母组合依次输出。</p><p>这是很有用的。在 Bash 中，定义一个数组的方法是在圆括号 <code>()</code> 中放置各个元素并使用空格隔开，就像这样：</p><pre tabindex=0><code>month=(&#34;Jan&#34; &#34;Feb&#34; &#34;Mar&#34; &#34;Apr&#34; &#34;May&#34; &#34;Jun&#34; &#34;Jul&#34; &#34;Aug&#34; &#34;Sep&#34; &#34;Oct&#34; &#34;Nov&#34; &#34;Dec&#34;)
</code></pre><p>如果需要获取数组中的元素，就要使用方括号 <code>[]</code> 并在其中填入元素的索引：</p><pre tabindex=0><code>$ echo ${month[3]} # 数组索引从 0 开始，因此 [3] 对应第 4 个元素
Apr
</code></pre><p>先不要过分关注这里用到的三种括号，我们等下会讲到。</p><p>注意，像上面这样，我们可以定义这样一个数组：</p><pre tabindex=0><code>letter_combos=({a..z}{a..z})
</code></pre><p>其中 <code>letter_combos</code> 变量指向的数组依次包含了从 aa 到 zz 的所有双字母组合。</p><p>因此，还可以这样定义一个数组：</p><pre tabindex=0><code>dec2bin=({0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1})
</code></pre><p>在这里，<code>dec2bin</code> 变量指向的数组按照升序依次包含了所有 8 位的二进制数，也就是 00000000、00000001、00000010，……，11111111。这个数组可以作为一个十进制数到 8 位二进制数的转换器。例如将十进制数 25 转换为二进制数，可以这样执行：</p><pre tabindex=0><code>$ echo ${dec2bin[25]}
00011001
</code></pre><p>对于进制转换，确实还有更好的方法，但这不失为一个有趣的方法。</p><h3 id=参数展开>参数展开</h3><p>再看回前面的</p><pre tabindex=0><code>echo ${month[3]}
</code></pre><p>在这里，花括号的作用就不是构造序列了，而是用于 参数展开 parameter expansion 。顾名思义，参数展开就是将花括号中的变量展开为这个变量实际的内容。</p><p>我们继续使用上面的 <code>month</code> 数组来举例：</p><pre tabindex=0><code>month=(&#34;Jan&#34; &#34;Feb&#34; &#34;Mar&#34; &#34;Apr&#34; &#34;May&#34; &#34;Jun&#34; &#34;Jul&#34; &#34;Aug&#34; &#34;Sep&#34; &#34;Oct&#34; &#34;Nov&#34; &#34;Dec&#34;)
</code></pre><p>注意，Bash 中的数组索引从 0 开始，因此 3 代表第 4 个元素 <code>"Apr"</code>。因此 <code>echo ${month[3]}</code> 在经过参数展开之后，相当于 <code>echo "Apr"</code>。</p><p>像上面这样将一个数组展开成它所有的元素，只是参数展开的其中一种用法。另外，还可以通过参数展开的方式读取一个字符串变量，并对其进行处理。</p><p>例如对于以下这个变量：</p><pre tabindex=0><code>a=&#34;Too longgg&#34;
</code></pre><p>如果执行：</p><pre tabindex=0><code>echo ${a%gg}
</code></pre><p>可以输出 “too long”，也就是去掉了最后的两个 g。</p><p>在这里，</p><ul><li><code>${...}</code> 告诉 shell 展开花括号里的内容</li><li><code>a</code> 就是需要操作的变量</li><li><code>%</code> 告诉 shell 需要在展开字符串之后从字符串的末尾去掉某些内容</li><li><code>gg</code> 是被去掉的内容</li></ul><p>这个特性在转换文件格式的时候会比较有用，我来举个例子：</p><p><a href=http://www.imagemagick.org/>ImageMagick</a> 是一套可以用于操作图像文件的命令行工具，它有一个 <code>convert</code> 命令。这个 <code>convert</code> 命令的作用是可以为某个格式的图像文件制作一个另一格式的副本。</p><p>下面这个命令就是使用 <code>convert</code> 为 JPEG 格式图像 <code>image.jpg</code> 制作一个 PNG 格式的图像副本 <code>image.png</code>：</p><pre tabindex=0><code>convert image.jpg image.png
</code></pre><p>在很多 Linux 发行版中都预装了 ImageMagick，如果没有预装，一般可以在发行版对应的软件管理器中找到。</p><p>继续来看，在对变量进行展开之后，就可以批量执行相类似的操作了：</p><pre tabindex=0><code>i=image.jpg
convert $i ${i%jpg}png
</code></pre><p>这实际上是将变量 <code>i</code> 末尾的 <code>"jpg"</code> 去掉，然后加上 <code>"png"</code>，最终将整个命令拼接成 <code>convert image.jpg image.png</code>。</p><p>如果你觉得并不怎么样，可以想象一下有成百上千个图像文件需要进行这个操作，而仅仅运行：</p><pre tabindex=0><code>for i in *.jpg; do convert $i ${i%jpg}png; done
</code></pre><p>就瞬间完成任务了。</p><p>如果需要去掉字符串开头的部分，就要将上面的 <code>%</code> 改成 <code>#</code> 了：</p><pre tabindex=0><code>$ a=&#34;Hello World!&#34;
$ echo Goodbye${a#Hello}
Goodbye World!
</code></pre><p>参数展开还有很多用法，但一般在写脚本的时候才会需要用到。在这个系列以后的文章中就继续提到。</p><h3 id=合并输出>合并输出</h3><p>最后介绍一个花括号的用法，这个用法很简单，就是可以将多个命令的输出合并在一起。首先看下面这个命令：</p><pre tabindex=0><code>echo &#34;I found all these PNGs:&#34;; find . -iname &#34;*.png&#34;; echo &#34;Within this bunch of files:&#34;; ls &gt; PNGs.txt
</code></pre><p>以分号分隔开的几条命令都会执行，但只有最后的 <code>ls</code> 命令的结果输出会被重定向到 <code>PNGs.txt</code> 文件中。如果将这几条命令用花括号包裹起来，就像这样：</p><pre tabindex=0><code>{ echo &#34;I found all these PNGs:&#34;; find . -iname &#34;*.png&#34;; echo &#34;Within this bunch of files:&#34;; ls; } &gt; PNGs.txt
</code></pre><p>执行完毕后，可以看到 <code>PNGs.txt</code> 文件中会包含两次 <code>echo</code> 的内容、<code>find</code> 命令查找到的 PNG 文件以及最后的 <code>ls</code> 命令结果。</p><p>需要注意的是，花括号与命令之间需要有空格隔开。因为这里的花括号 <code>{</code> 和 <code>}</code> 是作为 shell 中的保留字，shell 会将这两个符号之间的输出内容组合到一起。</p><p>另外，各个命令之间要用分号 <code>;</code> 分隔，否则命令无法正常运行。</p><h3 id=下期预告>下期预告</h3><p>在后续的文章中，我会介绍其它“包裹”类符号的用法，敬请关注。</p><hr><p>via: <a href=https://www.linux.com/blog/learn/2019/2/all-about-curly-braces-bash>https://www.linux.com/blog/learn/2019/2/all-about-curly-braces-bash</a></p><p>作者：<a href=https://www.linux.com/users/bro66>Paul Brown</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/HankChow>HankChow</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E8%8A%B1%E6%8B%AC%E5%8F%B7/ rel=tag>花括号</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>