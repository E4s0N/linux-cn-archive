<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在Linux里使用xargs命令 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在Linux里使用xargs命令"><meta property="og:description" content="你是否遇到过这样的情况，需要一遍又一遍地对多个文件执行同样的操作？如果有过，那你肯定会深有感触这是多么的无聊和效率低下。还好有种简单的方式，可以在基于Unix的操作系统中使用xargs命令解决这个烦恼。通过这个命令你可以有效地处理多个文件，节省你的时间和精力。"><meta property="og:type" content="article"><meta property="og:url" content="/article-4212-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-11-13T10:43:44+00:00"><meta property="article:modified_time" content="2014-11-13T10:43:44+00:00"><meta itemprop=name content="如何在Linux里使用xargs命令"><meta itemprop=description content="你是否遇到过这样的情况，需要一遍又一遍地对多个文件执行同样的操作？如果有过，那你肯定会深有感触这是多么的无聊和效率低下。还好有种简单的方式，可以在基于Unix的操作系统中使用xargs命令解决这个烦恼。通过这个命令你可以有效地处理多个文件，节省你的时间和精力。"><meta itemprop=datePublished content="2014-11-13T10:43:44+00:00"><meta itemprop=dateModified content="2014-11-13T10:43:44+00:00"><meta itemprop=wordCount content="132"><meta itemprop=keywords content="Linux,xargs,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在Linux里使用xargs命令</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2014-11-13T10:43:44Z>November 13, 2014</time></div></div></header><div class="content post__content clearfix"><p>你是否遇到过这样的情况，需要一遍又一遍地对多个文件执行同样的操作？如果有过，那你肯定会深有感触这是多么的无聊和效率低下。还好有种简单的方式，可以在基于Unix的操作系统中使用xargs命令解决这个烦恼。通过这个命令你可以有效地处理多个文件，节省你的时间和精力。在这篇教程中，你可以学到如何一次性对多个文件执行命令或脚本操作，再也不用担心像单独处理无数个日志或数据文件那样吓人的任务了。</p><p><img src=/data/attachment/album/201411/13/104159mkcthh5ttcdmk4m1.jpg alt></p><p>xargs命令有两个要点。第一，你必须列出目标文件。第二，你必须指定对每个文件需要执行的命令或脚本。</p><p>这篇教程会涉及三个应用场景，xargs命令被用来处理分布在不同目录下的文件：</p><ol><li>计算所有文件的行数</li><li>打印指定文件的第一行</li><li>对每个文件执行一个自定义脚本</li></ol><p>请看下面这个叫xargstest的目录（用tree命令以及-i和-f选项显示了目录树结构，这样可以避免缩进显示而且每个文件都会带有完整路径）：</p><pre tabindex=0><code>$ tree -if xargstest/ 
</code></pre><p><a href=https://camo.githubusercontent.com/c4ef63ddcd2a7eefa33a66d4d73a2903398ecfb9/68747470733a2f2f6661726d332e737461746963666c69636b722e636f6d2f323934322f31353333343938353938315f636531613139326465662e6a7067><img src=https://camo.githubusercontent.com/c4ef63ddcd2a7eefa33a66d4d73a2903398ecfb9/68747470733a2f2f6661726d332e737461746963666c69636b722e636f6d2f323934322f31353333343938353938315f636531613139326465662e6a7067 alt></a></p><p>这六个文件的内容分别如下：</p><p><a href=https://camo.githubusercontent.com/e6eb1c67bfc8fd769859d17e8cea8808932bfbb1/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333838322f31353334363238373636325f613330383461386534665f6f2e706e67><img src=https://camo.githubusercontent.com/e6eb1c67bfc8fd769859d17e8cea8808932bfbb1/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333838322f31353334363238373636325f613330383461386534665f6f2e706e67 alt></a></p><p>这个<strong>xargstest</strong>目录，以及它包含的子目录和文件将用在下面的例子中。</p><h3 id=场景1计算所有文件的行数>场景1：计算所有文件的行数</h3><p>就像之前提到的，使用xargs命令的第一个要点是一个用来运行命令或脚本的文件列表。我们可以用find命令来确定和列出目标文件。选项**-name &lsquo;file??&rsquo;**指定了xargstest目录下那些名字以"file"开头并跟随两个任意字符的文件才是匹配的。这个搜索默认是递归的，意思是find命令会在xargstest和它的子目录下搜索匹配的文件。</p><pre tabindex=0><code>$ find xargstest/ -name &#39;file??&#39; 
</code></pre><hr><pre tabindex=0><code>xargstest/dir3/file3B
xargstest/dir3/file3A
xargstest/dir1/file1A
xargstest/dir1/file1B
xargstest/dir2/file2B
xargstest/dir2/file2A
</code></pre><p>我们可以通过管道把结果发给sort命令让文件名按顺序排列：</p><pre tabindex=0><code>$ find xargstest/ -name &#39;file??&#39; | sort 
</code></pre><hr><pre tabindex=0><code>xargstest/dir1/file1A
xargstest/dir1/file1B
xargstest/dir2/file2A
xargstest/dir2/file2B
xargstest/dir3/file3A
xargstest/dir3/file3B
</code></pre><p>然后我们需要第二个要素，就是需要执行的命令。我们使用带有-l选项的wc命令来计算每个文件包含的换行符数目（会在输出的每一行的前面打印出来）：</p><pre tabindex=0><code>$ find xargstest/ -name &#39;file??&#39; | sort | xargs wc -l 
</code></pre><hr><pre tabindex=0><code> 1 xargstest/dir1/file1A
 2 xargstest/dir1/file1B
 3 xargstest/dir2/file2A
 4 xargstest/dir2/file2B
 5 xargstest/dir3/file3A
 6 xargstest/dir3/file3B
21 total
</code></pre><p>可以看到，不用对每个文件手动执行一次wc -l命令，而xargs命令可以让你在一步里完成所有操作。那些之前看起来无法完成的任务，例如单独处理数百个文件，现在可以相当轻松地完成了。</p><h3 id=场景2打印指定文件的第一行>场景2：打印指定文件的第一行</h3><p>既然你已经有一些使用xargs命令的基础，你可以自由选择执行什么命令。有时，你也许希望只对一部分文件执行操作而忽略其他的。在这种情况下，你可以使用find命令的-name选项以及?通配符（匹配任意单个字符）来选中特定文件并通过管道输出给xargs命令。举个例子，如果你想打印以“B”字符结尾的文件而忽略以“A”结尾的文件的第一行，可以使用下面的find、xargs和head命令组合来完成（head -n1会打印一个文件的第一行）：</p><pre tabindex=0><code>$ find xargstest/ -name &#39;file?B&#39; | sort | xargs head -n1 
</code></pre><hr><pre tabindex=0><code>==&gt; xargstest/dir1/file1B &lt;==
one

==&gt; xargstest/dir2/file2B &lt;==
one

==&gt; xargstest/dir3/file3B &lt;==
one
</code></pre><p>你将看到只有以“B”结尾的文件会被处理，而所有以“A”结尾的文件都被忽略了。</p><h3 id=场景3对每个文件执行一个自定义脚本>场景3：对每个文件执行一个自定义脚本</h3><p>最后，你也许希望对一些文件执行一个自定义脚本（例如Bash、Python或是Perl）。要做到这一点，只要简单地用你的自定义脚本名字替换掉之前例子中的wc和head命令就好了：</p><pre tabindex=0><code>$ find xargstest/ -name &#39;file??&#39; | xargs myscript.sh 
</code></pre><p>自定义脚本<strong>myscript.sh</strong>需要写成接受一个文件名作为参数并处理这个文件。上面的命令将为find命令找到的每个文件分别调用脚本。</p><p>注意一下上面的例子中的文件名并没有包含空格。通常来说，在Linux环境下操作没有空格的文件名会舒服很多。如果你实在是需要处理名字中带有空格的文件，上边的命令就不能用了，需要稍微处理一下来让它可以被接受。这可以通过find命令的-print0选项（它会打印完整的文件名到标准输出，并以空字符结尾），以及xargs命令的-0选项（它会以空字符作为字符串结束标记）来实现，就像下面的例子：</p><pre tabindex=0><code>$ find xargstest/ -name &#39;file*&#39; -print0 | xargs -0 myscript.sh 
</code></pre><p>注意一下，-name选项所跟的参数已经改为&rsquo;file*&rsquo;，意思是所有以"file"开头而结尾可以是任意字符的文件都会被选中。</p><h3 id=总结>总结</h3><p>在看完这篇教程后你应该会理解xargs命令的作用，以及如何应用到自己的工作中。很快你就可以有时间享受这个命令所带来的高效率，而不用把你的时间耗费在一些重复的任务上了。想了解更详细的信息以及更多的选项，你可以在终端中输入&rsquo;man xargs&rsquo;命令来查看xargs的文档。</p><hr><p>via: <a href=http://xmodulo.com/xargs-command-linux.html>http://xmodulo.com/xargs-command-linux.html</a></p><p>作者：<a href=http://xmodulo.com/author/joshua>Joshua Reed</a> 译者：<a href=https://github.com/zpl1025>zpl1025</a> 校对：<a href=https://github.com/carolinewuyan>Caroline</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/linux/ rel=tag>Linux</a></li><li class=tags__item><a class="tags__link btn" href=/tags/xargs/ rel=tag>xargs</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>