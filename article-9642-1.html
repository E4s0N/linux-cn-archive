<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux 命令行下的数学运算 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Linux 命令行下的数学运算"><meta property="og:description" content="有几个有趣的命令可以在 Linux 系统下做数学运算： expr、factor、jot 和 bc 命令。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9642-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-05-14T19:04:00+00:00"><meta property="article:modified_time" content="2018-05-14T19:04:00+00:00"><meta itemprop=name content="Linux 命令行下的数学运算"><meta itemprop=description content="有几个有趣的命令可以在 Linux 系统下做数学运算： expr、factor、jot 和 bc 命令。"><meta itemprop=datePublished content="2018-05-14T19:04:00+00:00"><meta itemprop=dateModified content="2018-05-14T19:04:00+00:00"><meta itemprop=wordCount content="684"><meta itemprop=keywords content="数学,bc,计算,expr,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Linux 命令行下的数学运算</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-05-14T19:04:00Z>May 14, 2018</time></div></div></header><div class="content post__content clearfix"><blockquote><p>有几个有趣的命令可以在 Linux 系统下做数学运算： <code>expr</code>、<code>factor</code>、<code>jot</code> 和 <code>bc</code> 命令。</p></blockquote><p><img src=/data/attachment/album/201805/14/190605btc11bot16tiv2u8.jpg alt></p><p>可以在 Linux 命令行下做数学运算吗？当然可以！事实上，有不少命令可以轻松完成这些操作，其中一些甚至让你大吃一惊。让我们来学习这些有用的数学运算命令或命令语法吧。</p><h3 id=expr>expr</h3><p>首先，对于在命令行使用命令进行数学运算，可能最容易想到、最常用的命令就是 <code>expr</code> （ 表达式 expression 。它可以完成四则运算，也可以用于比较大小。下面是几个例子：</p><h4 id=变量递增>变量递增</h4><pre tabindex=0><code>$ count=0
$ count=`expr $count + 1`
$ echo $count
1
</code></pre><h4 id=完成简单运算>完成简单运算</h4><pre tabindex=0><code>$ expr 11 + 123
134
$ expr 134 / 11
12
$ expr 134 - 11
123
$ expr 11 * 123
expr: syntax error      &lt;== oops!
$ expr 11 \* 123
1353
$ expr 20 % 3
2
</code></pre><p>注意，你需要在 <code>*</code> 运算符之前增加 <code>\</code> 符号，避免语法错误（注：<code>*</code> 是 bash 的通配符，因此需要用 <code>\</code> 转义，下面的 <code>></code> 也是由于是 bash 的管道符而需要转义）。<code>%</code> 运算符用于取余运算。</p><p>下面是一个稍微复杂的例子：</p><pre tabindex=0><code>participants=11
total=156
share=`expr $total / $participants`
remaining=`expr $total - $participants \* $share`
echo $share
14
echo $remaining
2
</code></pre><p>假设某个活动中有 11 位参与者，需要颁发的奖项总数为 156，那么平均每个参与者获得 14 项奖项，额外剩余 2 个奖项。</p><h4 id=比较>比较</h4><p>下面让我们看一下比较的操作。从第一印象来看，语句看似有些怪异；这里并不是<strong>设置</strong>数值，而是进行数字比较。在本例中 <code>expr</code> 判断表达式是否为真：如果结果是 1，那么表达式为真；反之，表达式为假。</p><pre tabindex=0><code>$ expr 11 = 11
1
$ expr 11 = 12
0
</code></pre><p>请读作“11 是否等于 11？”及“11 是否等于 12？”，你很快就会习惯这种写法。当然，我们不会在命令行上执行上述比较，可能的比较是 <code>$age</code> 是否等于 <code>11</code>。</p><pre tabindex=0><code>$ age=11
$ expr $age = 11
1
</code></pre><p>在本例中，我们判断 10 是否大于 5，以及是否大于 99。</p><pre tabindex=0><code>$ expr 10 \&gt; 5
1
$ expr 10 \&gt; 99
0
</code></pre><p>的确，返回 1 和 0 分别代表比较的结果为真和假，我们一般预期在 Linux 上得到这个结果。在下面的例子中，按照上述逻辑使用 <code>expr</code> 并不正确，因为 <code>if</code> 的工作原理刚好相反，即 0 代表真。</p><pre tabindex=0><code>#!/bin/bash

echo -n &#34;Cost to us&gt; &#34;
read cost
echo -n &#34;Price we&#39;re asking&gt; &#34;
read price

if [ `expr $price \&gt; $cost` ]; then
 echo &#34;We make money&#34;
else
 echo &#34;Don&#39;t sell it&#34;
fi
</code></pre><p>下面，我们运行这个脚本：</p><pre tabindex=0><code>$ ./checkPrice
Cost to us&gt; 11.50
Price we&#39;re asking&gt; 6
We make money
</code></pre><p>这显然与我们预期不符！我们稍微修改一下，以便使其按我们预期工作：</p><pre tabindex=0><code>#!/bin/bash

echo -n &#34;Cost to us&gt; &#34;
read cost
echo -n &#34;Price we&#39;re asking&gt; &#34;
read price

if [ `expr $price \&gt; $cost` == 1 ]; then
 echo &#34;We make money&#34;
else
 echo &#34;Don&#39;t sell it&#34;
fi
</code></pre><h3 id=factor>factor</h3><p><code>factor</code> 命令的功能基本与你预期相符。你给出一个数字，该命令会给出对应数字的因子。</p><pre tabindex=0><code>$ factor 111
111: 3 37
$ factor 134
134: 2 67
$ factor 17894
17894: 2 23 389
$ factor 1987
1987: 1987
</code></pre><p>注：<code>factor</code> 命令对于最后一个数字没有返回更多因子，这是因为 1987 是一个<strong>质数</strong>。</p><h3 id=jot>jot</h3><p><code>jot</code> 命令可以创建一系列数字。给定数字总数及起始数字即可。</p><pre tabindex=0><code>$ jot 8 10
10
11
12
13
14
15
16
17
</code></pre><p>你也可以用如下方式使用 <code>jot</code>，这里我们要求递减至数字 2。</p><pre tabindex=0><code>$ jot 8 10 2
10
9
8
7
5
4
3
2
</code></pre><p><code>jot</code> 可以帮你构造一系列数字组成的列表，该列表可以用于其它任务。</p><pre tabindex=0><code>$ for i in `jot 7 17`; do echo April $i; done
April 17
April 18
April 19
April 20
April 21
April 22
April 23
</code></pre><h3 id=bc>bc</h3><p><code>bc</code> 基本上是命令行数学运算最佳工具之一。输入你想执行的运算，使用管道发送至该命令即可：</p><pre tabindex=0><code>$ echo &#34;123.4+5/6-(7.89*1.234)&#34; | bc
113.664
</code></pre><p>可见 <code>bc</code> 并没有忽略精度，而且输入的字符串也相当直截了当。它还可以进行大小比较、处理布尔值、计算平方根、正弦、余弦和正切等。</p><pre tabindex=0><code>$ echo &#34;sqrt(256)&#34; | bc
16
$ echo &#34;s(90)&#34; | bc -l
.89399666360055789051
</code></pre><p>事实上，<code>bc</code> 甚至可以计算 pi。你需要指定需要的精度。</p><pre tabindex=0><code>$ echo &#34;scale=5; 4*a(1)&#34; | bc -l
3.14156
$ echo &#34;scale=10; 4*a(1)&#34; | bc -l
3.1415926532
$ echo &#34;scale=20; 4*a(1)&#34; | bc -l
3.14159265358979323844
$ echo &#34;scale=40; 4*a(1)&#34; | bc -l
3.1415926535897932384626433832795028841968
</code></pre><p>除了通过管道接收数据并返回结果，<code>bc</code>还可以交互式运行，输入你想执行的运算即可。本例中提到的 <code>scale</code> 设置可以指定有效数字的个数。</p><pre tabindex=0><code>$ bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty&#39;.
scale=2
3/4
.75
2/3
.66
quit
</code></pre><p>你还可以使用 <code>bc</code> 完成数字进制转换。<code>obase</code> 用于设置输出的数字进制。</p><pre tabindex=0><code>$ bc
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty&#39;.
obase=16
16      &lt;=== entered
10      &lt;=== response
256     &lt;=== entered
100     &lt;=== response
quit
</code></pre><p>按如下方式使用 <code>bc</code> 也是完成十六进制与十进制转换的最简单方式之一：</p><pre tabindex=0><code>$ echo &#34;ibase=16; F2&#34; | bc
242
$ echo &#34;obase=16; 242&#34; | bc
F2
</code></pre><p>在上面第一个例子中，我们将输入进制（<code>ibase</code>）设置为十六进制（<code>hex</code>），完成十六进制到为十进制的转换。在第二个例子中，我们执行相反的操作，即将输出进制（<code>obase</code>）设置为十六进制。</p><h3 id=简单的-bash-数学运算>简单的 bash 数学运算</h3><p>通过使用双括号，我们可以在 bash 中完成简单的数学运算。在下面的例子中，我们创建一个变量，为变量赋值，然后依次执行加法、自减和平方。</p><pre tabindex=0><code>$ (( e = 11 ))
$ (( e = e + 7 ))
$ echo $e
18

$ (( e-- ))
$ echo $e
17

$ (( e = e ** 2 ))
$ echo $e
289
</code></pre><p>允许使用的运算符包括：</p><pre tabindex=0><code>+ -     加法及减法
++ --   自增与自减
* / %   乘法、除法及求余数
**      指数运算（bash 中）
^       指数运算（bc 中）
</code></pre><p>你还可以使用逻辑运算符和布尔运算符：</p><pre tabindex=0><code>$ ((x=11)); ((y=7))
$ if (( x &gt; y )); then
&gt; echo &#34;x &gt; y&#34;
&gt; fi
x &gt; y

$ ((x=11)); ((y=7)); ((z=3))
$ if (( x &gt; y )) &gt;&gt; (( y &gt; z )); then
&gt; echo &#34;letters roll downhill&#34;
&gt; fi
letters roll downhill
</code></pre><p>或者如下方式：</p><pre tabindex=0><code>$ if [ x &gt; y ] &lt;&lt; [ y &gt; z ]; then echo &#34;letters roll downhill&#34;; fi
letters roll downhill
</code></pre><p>下面计算 2 的 3 次幂：</p><pre tabindex=0><code>$ echo &#34;2 ^ 3&#34;
2 ^ 3
$ echo &#34;2 ^ 3&#34; | bc
8
</code></pre><h3 id=总结>总结</h3><p>在 Linux 系统中，有很多不同的命令行工具可以完成数字运算。希望你在读完本文之后，能掌握一两个新工具。</p><p>感谢 @<a href=https://github.com/no1xsyzy>no1xsyzy</a> <a href=https://github.com/LCTT/TranslateProject/issues/8841>提出的修改意见</a>。</p><hr><p>via: <a href=https://www.networkworld.com/article/3268964/linux/how-to-do-math-on-the-linux-command-line.html>https://www.networkworld.com/article/3268964/linux/how-to-do-math-on-the-linux-command-line.html</a></p><p>作者：<a href=https://www.networkworld.com/author/Sandra-Henry_Stocker/>Sandra Henry-Stocker</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/pinewall>pinewall</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%95%B0%E5%AD%A6/ rel=tag>数学</a></li><li class=tags__item><a class="tags__link btn" href=/tags/bc/ rel=tag>bc</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E8%AE%A1%E7%AE%97/ rel=tag>计算</a></li><li class=tags__item><a class="tags__link btn" href=/tags/expr/ rel=tag>expr</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>