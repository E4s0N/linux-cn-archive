<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Ubuntu 上设置时间同步 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Ubuntu 上设置时间同步"><meta property="og:description" content="如果你的时钟不同步，这些任务将无法按时执行。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11220-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-08-13T13:54:00+00:00"><meta property="article:modified_time" content="2019-08-13T13:54:00+00:00"><meta itemprop=name content="如何在 Ubuntu 上设置时间同步"><meta itemprop=description content="如果你的时钟不同步，这些任务将无法按时执行。"><meta itemprop=datePublished content="2019-08-13T13:54:00+00:00"><meta itemprop=dateModified content="2019-08-13T13:54:00+00:00"><meta itemprop=wordCount content="452"><meta itemprop=keywords content="时间,时区,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Ubuntu 上设置时间同步</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-08-13T13:54:00Z>August 13, 2019</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201908/13/135423xnk7zib00nn2aebv.jpg alt></p><p>你可能设置过 <a href=https://www.ostechnix.com/a-beginners-guide-to-cron-jobs/>cron 任务</a> 来在特定时间备份重要文件或执行系统相关任务。也许你配置了一个日志服务器在特定时间间隔<a href=https://www.ostechnix.com/manage-log-files-using-logrotate-linux/>轮转日志</a>。但如果你的时钟不同步，这些任务将无法按时执行。这就是要在 Linux 系统上设置正确的时区并保持时钟与互联网同步的原因。本指南介绍如何在 Ubuntu Linux 上设置时间同步。下面的步骤已经在 Ubuntu 18.04 上进行了测试，但是对于使用 systemd 的 <code>timesyncd</code> 服务的其他基于 Ubuntu 的系统它们是相同的。</p><h3 id=在-ubuntu-上设置时间同步>在 Ubuntu 上设置时间同步</h3><p>通常，我们在安装时设置时区。但是，你可以根据需要更改或设置不同的时区。</p><p>首先，让我们使用 <code>date</code> 命令查看 Ubuntu 系统中的当前时区：</p><pre tabindex=0><code>$ date
</code></pre><p>示例输出：</p><pre tabindex=0><code>Tue Jul 30 11:47:39 UTC 2019
</code></pre><p>如上所见，<code>date</code> 命令显示实际日期和当前时间。这里，我当前的时区是 <strong>UTC</strong>，代表<strong>协调世界时</strong>。</p><p>或者，你可以在 <code>/etc/timezone</code> 文件中查找当前时区。</p><pre tabindex=0><code>$ cat /etc/timezone
UTC
</code></pre><p>现在，让我们看看时钟是否与互联网同步。只需运行：</p><pre tabindex=0><code>$ timedatectl
</code></pre><p>示例输出：</p><pre tabindex=0><code>Local time: Tue 2019-07-30 11:53:58 UTC
Universal time: Tue 2019-07-30 11:53:58 UTC
RTC time: Tue 2019-07-30 11:53:59
Time zone: Etc/UTC (UTC, +0000)
System clock synchronized: yes
systemd-timesyncd.service active: yes
RTC in local TZ: no
</code></pre><p>如你所见，<code>timedatectl</code> 命令显示本地时间、世界时、时区以及系统时钟是否与互联网服务器同步，以及 <code>systemd-timesyncd.service</code> 是处于活动状态还是非活动状态。就我而言，系统时钟已与互联网时间服务器同步。</p><p>如果时钟不同步，你会看到下面截图中显示的 <code>System clock synchronized: no</code>。</p><p><img src=/data/attachment/album/201908/13/135551sirl53nn4n8ny7al.jpg alt></p><p><em>时间同步已禁用。</em></p><p>注意：上面的截图是旧截图。这就是你看到不同日期的原因。</p><p>如果你看到 <code>System clock synchronized:</code> 值设置为 <code>no</code>，那么 <code>timesyncd</code> 服务可能处于非活动状态。因此，只需重启服务并看下是否正常。</p><pre tabindex=0><code>$ sudo systemctl restart systemd-timesyncd.service
</code></pre><p>现在检查 <code>timesyncd</code> 服务状态：</p><pre tabindex=0><code>$ sudo systemctl status systemd-timesyncd.service
● systemd-timesyncd.service - Network Time Synchronization
Loaded: loaded (/lib/systemd/system/systemd-timesyncd.service; enabled; vendor preset: enabled)
Active: active (running) since Tue 2019-07-30 10:50:18 UTC; 1h 11min ago
Docs: man:systemd-timesyncd.service(8)
Main PID: 498 (systemd-timesyn)
Status: &#34;Synchronized to time server [2001:67c:1560:8003::c7]:123 (ntp.ubuntu.com).&#34;
Tasks: 2 (limit: 2319)
CGroup: /system.slice/systemd-timesyncd.service
└─498 /lib/systemd/systemd-timesyncd

Jul 30 10:50:30 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:31 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:31 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:32 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:32 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:35 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:35 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:35 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:50:35 ubuntuserver systemd-timesyncd[498]: Network configuration changed, trying to estab
Jul 30 10:51:06 ubuntuserver systemd-timesyncd[498]: Synchronized to time server [2001:67c:1560:800
</code></pre><p>如果此服务已启用并处于活动状态，那么系统时钟应与互联网时间服务器同步。</p><p>你可以使用命令验证是否启用了时间同步：</p><pre tabindex=0><code>$ timedatectl
</code></pre><p>如果仍然不起作用，请运行以下命令以启用时间同步：</p><pre tabindex=0><code>$ sudo timedatectl set-ntp true
</code></pre><p>现在，你的系统时钟将与互联网时间服务器同步。</p><h4 id=使用-timedatectl-命令更改时区>使用 timedatectl 命令更改时区</h4><p>如果我想使用 UTC 以外的其他时区怎么办？这很容易！</p><p>首先，使用命令列出可用时区：</p><pre tabindex=0><code>$ timedatectl list-timezones
</code></pre><p>你将看到类似于下图的输出。</p><p><img src=/data/attachment/album/201908/13/135459pgzgvvcxk2qnqnxx.png alt></p><p><em>使用 timedatectl 命令列出时区</em></p><p>你可以使用以下命令设置所需的时区（例如，Asia/Shanghai）：</p><p>（LCTT 译注：本文原文使用印度时区作为示例，这里为了便于使用，换为中国标准时区 CST。另外，在时区设置中，要注意 CST 这个缩写会代表四个不同的时区，因此建议使用城市和 UTC+8 来说设置。）</p><pre tabindex=0><code>$ sudo timedatectl set-timezone Asia/Shanghai
</code></pre><p>使用 <code>date</code> 命令再次检查时区是否已真正更改：</p><pre tabindex=0><code>$ date
Tue Jul 30 20:22:33 CST 2019
</code></pre><p>或者，如果需要详细输出，请使用 <code>timedatectl</code> 命令：</p><pre tabindex=0><code>$ timedatectl
Local time: Tue 2019-07-30 20:22:35 CST
Universal time: Tue 2019-07-30 12:22:35 UTC
RTC time: Tue 2019-07-30 12:22:36
Time zone: Asia/Shanghai (CST, +0800)
System clock synchronized: yes
systemd-timesyncd.service active: yes
RTC in local TZ: no
</code></pre><p>如你所见，我已将时区从 UTC 更改为 CST（中国标准时间）。（）</p><p>要切换回 UTC 时区，只需运行：</p><pre tabindex=0><code>$ sudo timedatectl set-timezone UTC
</code></pre><h4 id=使用-tzdata-更改时区>使用 tzdata 更改时区</h4><p>在较旧的 Ubuntu 版本中，没有 <code>timedatectl</code> 命令。这种情况下，你可以使用 <code>tzdata</code>（Time zone data）来设置时间同步。</p><pre tabindex=0><code>$ sudo dpkg-reconfigure tzdata
</code></pre><p>选择你居住的地理区域。对我而言，我选择 <strong>Asia</strong>。选择 OK，然后按回车键。</p><p><img src=/data/attachment/album/201908/13/135500bvgwzutnkw3k5nuz.png alt></p><p>接下来，选择与你的时区对应的城市或地区。这里，我选择了 <strong>Kolkata</strong>（LCTT 译注：中国用户请相应使用 Shanghai 等城市）。</p><p><img src=/data/attachment/album/201908/13/135502s4c6ppcgryp3y5cd.png alt></p><p>最后，你将在终端中看到类似下面的输出。</p><pre tabindex=0><code>Current default time zone: &#39;Asia/Shanghai&#39;
Local time is now: Tue Jul 30 21:59:25 CST 2019.
Universal Time is now: Tue Jul 30 13:59:25 UTC 2019.
</code></pre><h4 id=在图形模式下配置时区>在图形模式下配置时区</h4><p>有些用户可能对命令行方式不太满意。如果你是其中之一，那么你可以轻松地在图形模式的系统设置面板中进行设置。</p><p>点击 Super 键（Windows 键），在 Ubuntu dash 中输入 <strong>settings</strong>，然后点击设置图标。</p><p><img src=/data/attachment/album/201908/13/135504wskb8b71csuybb11.png alt></p><p><em>从 Ubuntu dash 启动系统的设置</em></p><p>或者，单击位于 Ubuntu 桌面右上角的向下箭头，然后单击左上角的“设置”图标。</p><p><img src=/data/attachment/album/201908/13/135504wynvbkyvbblbk7y0.png alt></p><p><em>从顶部面板启动系统的设置</em></p><p>在下一个窗口中，选择“细节”，然后单击“日期与时间”选项。打开“自动的日期与时间”和“自动的时区”。</p><p><img src=/data/attachment/album/201908/13/135506lvcgcdhfdg3o1325.png alt></p><p><em>在 Ubuntu 中设置自动时区</em></p><p>关闭设置窗口就行了！你的系统始终应该与互联网时间服务器同步了。</p><hr><p>via: <a href=https://www.ostechnix.com/how-to-set-up-time-synchronization-on-ubuntu/>https://www.ostechnix.com/how-to-set-up-time-synchronization-on-ubuntu/</a></p><p>作者：<a href=https://www.ostechnix.com/author/sk/>sk</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%97%B6%E9%97%B4/ rel=tag>时间</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%97%B6%E5%8C%BA/ rel=tag>时区</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>