<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>跟我学 “Linux” 小程序 Web 版开发（一）：初始化 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="跟我学 “Linux” 小程序 Web 版开发（一）：初始化"><meta property="og:description" content="从今天起，我们将在 Linux 中国官网和公众号上，连载 TL;DR Web 应用开发背后的故事。接下来，请看来自开发 gg 的文章。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11844-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-02T13:02:00+00:00"><meta property="article:modified_time" content="2020-02-02T13:02:00+00:00"><meta itemprop=name content="跟我学 “Linux” 小程序 Web 版开发（一）：初始化"><meta itemprop=description content="从今天起，我们将在 Linux 中国官网和公众号上，连载 TL;DR Web 应用开发背后的故事。接下来，请看来自开发 gg 的文章。"><meta itemprop=datePublished content="2020-02-02T13:02:00+00:00"><meta itemprop=dateModified content="2020-02-02T13:02:00+00:00"><meta itemprop=wordCount content="245"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>跟我学 “Linux” 小程序 Web 版开发（一）：初始化</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-02-02T13:02:00Z>February 02, 2020</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/202002/02/130233vgf7cfhh3fki7tlf.jpg alt></p><p>“Linux” 小程序是 Linux 中国在 2019 年 2 月（恰恰是去年春节）发布的小程序，该小程序采用众包模式，对著名的 TLDR 项目中的 Linux 命令示例进行了翻译，并通过微信小程序的形式展现。在 2020 年的春节，我们面向更多的 PC 端用户，开放了 Web 版的 Linux 命令查询。Web 版和小程序版数据同步，让你在使用桌面计算机时也可以进行命令查询。</p><p>从今天起，我们将在 Linux 中国官网和公众号上，连载 <a href=https://tldr.linux.cn/>TL;DR Web 应用</a>开发背后的故事。接下来，请看来自开发 gg 的文章。</p><h3 id=背景描述>背景描述</h3><p>Linux 中国曾在过去的一年开发和运行了一个中国版 TL;DR 客户端。不过当时做的版本是<a href=/article-10528-1.html>小程序的版本</a>，一直以来，受限于小程序·云开发没有 Web SDK ，因此无法将应用能力迁移到更多的平台上。刚好最近云开发提供了 Web SDK，并已经逐步成熟，于是我们便可以借此机会，将业务实现 PC 化，服务更多人群。</p><p>在开发出初步的版本之后，我们决定以这个项目作为范例，将我们开发经验分享给大家，大家可以参考开发自己的云应用。</p><h3 id=项目设计>项目设计</h3><p>在进行项目开发时，先对项目进行了基本的 UI 设计：</p><p><img src=/data/attachment/album/202002/02/130234xea0cpn70sneldma.png alt=主页></p><p><img src=/data/attachment/album/202002/02/130235tsjzejvwj6efswj7.png alt=详情页></p><p>这里用到的是 <a href=https://balsamiq.com/index.html>balsamiq</a> 的手绘线框图来完成产品设计，以避免我个人过度追求完美，而让产品延期迟迟不能上线的问题（这样的事情在历史上发生了非常多次）</p><h3 id=技术选项>技术选项</h3><p>由于需要的是一个前端页面，因此，在技术选型方面，几乎没有太多的异议。使用最为熟悉的技术栈来完成。</p><ul><li>前端框架：Vue</li><li>路由器：Vue Router</li><li>CSS 框架：Vuetify.js</li></ul><h3 id=镜像配置>镜像配置</h3><p>因为身处国内， npm 的速度必然不太好，因此需要进行相应的镜像设定，确保 npm 和 yarn 在安装依赖。这里使用的是腾讯云提供的镜像。</p><pre tabindex=0><code># Npm 设置
npm config set registry http://mirrors.cloud.tencent.com/npm/

# yarn 设置
yarn config set registry http://mirrors.cloud.tencent.com/npm/ -g
</code></pre><h3 id=初始化-vue-项目>初始化 Vue 项目</h3><p>首先，需要安装 Vue CLI，以进行项目的生成，这里我已经完成安装，就不再赘述。（Vue CLI 的安装教程<a href=https://cli.vuejs.org/zh/guide/>点击这里</a>）</p><p>执行如下命令初始化项目：</p><pre tabindex=0><code>vue create tldr
</code></pre><p>等待其完成安装以后，进入项目，并启动项目。</p><pre tabindex=0><code>cd tldr
yarn serve
</code></pre><p>随即，可以在浏览器中访问 localhost:8080 查看项目：</p><p><img src=/data/attachment/album/202002/02/130235qg3ehgrlrgjeggrz.png alt=预览></p><blockquote><p>记得引入 git 做版本控制，文章里就不介绍了。没意思。</p></blockquote><h3 id=安装-vue-router>安装 Vue Router</h3><p>在完成 Vue 项目的初始化以后，接下来需要进行 Vue Router 的配置了。</p><p>Vue Router 的配置在引入了 Vue 3 以后，显得非常的简单，直接执行如下命令即可：</p><pre tabindex=0><code>vue add router
</code></pre><p>执行过程中，会问你是否需要启用 History Mode，根据需要选取，我使用的是 History Mode。</p><p><img src=/data/attachment/album/202002/02/130236n4x5lrc5x624xxwo.png alt></p><p>设置完成以后，保存并重启 Vue 的开发服务器，你会在预览中看到 Router 添加的 “Home” 和 “About”。</p><p><img src=/data/attachment/album/202002/02/130237teds9efzyx4ncely.png alt></p><h3 id=安装-vuetifyjs>安装 Vuetify.js</h3><p>接下来安装的是 <a href=https://vuetifyjs.com/zh-Hans/>Vuetify.js</a> ，由于框架提供了相应的支持，因此在开发时也非常简单，只需要执行如下命令就可以完成初始化。</p><pre tabindex=0><code>vue add vuetify
</code></pre><p>会问你选择那种预设，直接使用 Default 即可。</p><p><img src=/data/attachment/album/202002/02/130238jgxj68jbjd605dw6.png alt></p><p>保存并重启开发服务器，你会看到这样的界面，则说明配置完成。</p><p><img src=/data/attachment/album/202002/02/130238np9lqnoon3p9cci9.png alt></p><h3 id=部署测试应用>部署测试应用</h3><p>在进行下一步开发的时候，需要先进行一下项目的部署，从而获得一个测试的域名，方便后续的开发。</p><p>这里项目的开发我并没有使用云开发自己的 Web 托管 （因为我们不是按量付费套餐，所以没有办法开启），而是使用了 Now.sh 的，这里就不再过多赘述。</p><p><img src=/data/attachment/album/202002/02/130239eknkl0f9nx0ak8k0.png alt></p><h3 id=引入云开发-sdk>引入云开发 SDK</h3><p>云开发提供了 Web SDK ，可以通过 npm 安装，并引用。</p><p>执行如下命令来安装：</p><pre tabindex=0><code>yarn add tcb-js-sdk
</code></pre><p>安装完成后，在 <code>main.js</code> 中引入 tcb，并通过修改 Vue 的原型来实现挂载 Vue。</p><pre tabindex=0><code>import Vue from &#39;vue&#39;
import App from &#39;./App.vue&#39;
import router from &#39;./router&#39;
import vuetify from &#39;./plugins/vuetify&#39;;
const tcb = require(&#39;tcb-js-sdk&#39;)  // 新增的引入 TCB

Vue.config.productionTip = false

Vue.prototype[&#39;$tcb&#39;] = tcb.init({ // 新增的修改原型
    env: &#39;prod-2c59c7&#39;             // 新增的修改原型
})                                 // 新增的修改原型

new Vue({
  router,
  vuetify,
  render: h =&gt; h(App)
}).$mount(&#39;#app&#39;)
</code></pre><p>这样就可以在应用运行的整个周期中使用 <code>this.$tcb</code> 来调用云开发的相关逻辑。</p><h3 id=总结>总结</h3><p>在完成了项目的初始化以后，回过头来看一看这在初始化项目过程中，都做了哪些事情。</p><ol><li>配置 npm 镜像，以确保 Node 包的安装速度</li><li>使用 Vue CLI 来初始化项目</li><li>安装 Vue Router & Vuetify.js</li><li>部署应用</li><li>安装 tcb-js-sdk 以调用云开发数据</li></ol><p>请期待本系列的下一篇关于界面开发的文章。</p></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>