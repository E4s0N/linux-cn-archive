<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>安全强化你的 Linux 服务器的七个步骤 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="安全强化你的 Linux 服务器的七个步骤"><meta property="og:description" content="通过七个简单的步骤来加固你的 Linux 服务器。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11444-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-11T09:41:21+00:00"><meta property="article:modified_time" content="2019-10-11T09:41:21+00:00"><meta itemprop=name content="安全强化你的 Linux 服务器的七个步骤"><meta itemprop=description content="通过七个简单的步骤来加固你的 Linux 服务器。"><meta itemprop=datePublished content="2019-10-11T09:41:21+00:00"><meta itemprop=dateModified content="2019-10-11T09:41:21+00:00"><meta itemprop=wordCount content="293"><meta itemprop=keywords content="安全,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>安全强化你的 Linux 服务器的七个步骤</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-10-11T09:41:21Z>October 11, 2019</time></div></div></header><div class="content post__content clearfix"><blockquote><p>通过七个简单的步骤来加固你的 Linux 服务器。</p></blockquote><p><img src=/data/attachment/album/201910/11/094107k8skl8wwxq62pzld.jpg alt></p><p>这篇入门文章将向你介绍基本的 Linux 服务器安全知识。虽然主要针对 Debian/Ubuntu，但是你可以将此处介绍的所有内容应用于其他 Linux 发行版。我也鼓励你研究这份材料，并在适用的情况下进行扩展。</p><h3 id=1更新你的服务器>1、更新你的服务器</h3><p>保护服务器安全的第一件事是更新本地存储库，并通过应用最新的修补程序来升级操作系统和已安装的应用程序。</p><p>在 Ubuntu 和 Debian 上：</p><pre tabindex=0><code>$ sudo apt update &amp;&amp; sudo apt upgrade -y
</code></pre><p>在 Fedora、CentOS 或 RHEL：</p><pre tabindex=0><code>$ sudo dnf upgrade
</code></pre><h3 id=2创建一个新的特权用户>2、创建一个新的特权用户</h3><p>接下来，创建一个新的用户帐户。永远不要以 root 身份登录服务器，而是创建你自己的帐户（用户），赋予它 <code>sudo</code> 权限，然后使用它登录你的服务器。</p><p>首先创建一个新用户：</p><pre tabindex=0><code>$ adduser &lt;username&gt;
</code></pre><p>通过将 <code>sudo</code> 组（<code>-G</code>）附加（<code>-a</code>）到用户的组成员身份里，从而授予新用户帐户 <code>sudo</code> 权限：</p><pre tabindex=0><code>$ usermod -a -G sudo &lt;username&gt;
</code></pre><h3 id=3上传你的-ssh-密钥>3、上传你的 SSH 密钥</h3><p>你应该使用 SSH 密钥登录到新服务器。你可以使用 <code>ssh-copy-id</code> 命令将<a href=https://opensource.com/article/19/4/ssh-keys-seahorse>预生成的 SSH 密钥</a>上传到你的新服务器：</p><pre tabindex=0><code>$ ssh-copy-id &lt;username&gt;@ip_address
</code></pre><p>现在，你无需输入密码即可登录到新服务器。</p><h3 id=4安全强化-ssh>4、安全强化 SSH</h3><p>接下来，进行以下三个更改：</p><ul><li>禁用 SSH 密码认证</li><li>限制 root 远程登录</li><li>限制对 IPv4 或 IPv6 的访问</li></ul><p>使用你选择的文本编辑器打开 <code>/etc/ssh/sshd_config</code> 并确保以下行：</p><pre tabindex=0><code>PasswordAuthentication yes
PermitRootLogin yes
</code></pre><p>改成这样：</p><pre tabindex=0><code>PasswordAuthentication no
PermitRootLogin no
</code></pre><p>接下来，通过修改 <code>AddressFamily</code> 选项将 SSH 服务限制为 IPv4 或 IPv6。要将其更改为仅使用 IPv4（对大多数人来说应该没问题），请进行以下更改：</p><pre tabindex=0><code>AddressFamily inet
</code></pre><p>重新启动 SSH 服务以启用你的更改。请注意，在重新启动 SSH 服务之前，与服务器建立两个活动连接是一个好主意。有了这些额外的连接，你可以在重新启动 SSH 服务出错的情况下修复所有问题。</p><p>在 Ubuntu 上：</p><pre tabindex=0><code>$ sudo service sshd restart
</code></pre><p>在 Fedora 或 CentOS 或任何使用 Systemd 的系统上：</p><pre tabindex=0><code>$ sudo systemctl restart sshd
</code></pre><h3 id=5启用防火墙>5、启用防火墙</h3><p>现在，你需要安装防火墙、启用防火墙并对其进行配置，以仅允许你指定的网络流量通过。（Ubuntu 上的）<a href=https://launchpad.net/ufw>简单的防火墙</a>（UFW）是一个易用的 iptables 界面，可大大简化防火墙的配置过程。</p><p>你可以通过以下方式安装 UFW：</p><pre tabindex=0><code>$ sudo apt install ufw
</code></pre><p>默认情况下，UFW 拒绝所有传入连接，并允许所有传出连接。这意味着服务器上的任何应用程序都可以访问互联网，但是任何尝试访问服务器的内容都无法连接。</p><p>首先，确保你可以通过启用对 SSH、HTTP 和 HTTPS 的访问来登录：</p><pre tabindex=0><code>$ sudo ufw allow ssh
$ sudo ufw allow http
$ sudo ufw allow https
</code></pre><p>然后启用 UFW：</p><pre tabindex=0><code>$ sudo ufw enable
</code></pre><p>你可以通过以下方式查看允许和拒绝了哪些服务：</p><pre tabindex=0><code>$ sudo ufw status
</code></pre><p>如果你想禁用 UFW，可以通过键入以下命令来禁用：</p><pre tabindex=0><code>$ sudo ufw disable
</code></pre><p>你还可以（在 RHEL/CentOS 上）使用 <a href=https://www.redhat.com/sysadmin/secure-linux-network-firewall-cmd>firewall-cmd</a>，它已经安装并集成到某些发行版中。</p><h3 id=6安装-fail2ban>6、安装 Fail2ban</h3><p><a href=https://www.fail2ban.org/wiki/index.php/Main_Page>Fail2ban</a> 是一种用于检查服务器日志以查找重复或自动攻击的应用程序。如果找到任何攻击，它会更改防火墙以永久地或在指定的时间内阻止攻击者的 IP 地址。</p><p>你可以通过键入以下命令来安装 Fail2ban：</p><pre tabindex=0><code>$ sudo apt install fail2ban -y
</code></pre><p>然后复制随附的配置文件：</p><pre tabindex=0><code>$ sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
</code></pre><p>重启 Fail2ban：</p><pre tabindex=0><code>$ sudo service fail2ban restart
</code></pre><p>这样就行了。该软件将不断检查日志文件以查找攻击。一段时间后，该应用程序将建立相当多的封禁的 IP 地址列表。你可以通过以下方法查询 SSH 服务的当前状态来查看此列表：</p><pre tabindex=0><code>$ sudo fail2ban-client status ssh
</code></pre><h3 id=7移除无用的网络服务>7、移除无用的网络服务</h3><p>几乎所有 Linux 服务器操作系统都启用了一些面向网络的服务。你可能希望保留其中大多数，然而，有一些你或许希望删除。你可以使用 <code>ss</code> 命令查看所有正在运行的网络服务：（LCTT 译注：应该是只保留少部分，而所有确认无关的、无用的服务都应该停用或删除。）</p><pre tabindex=0><code>$ sudo ss -atpu
</code></pre><p><code>ss</code> 的输出取决于你的操作系统。下面是一个示例，它显示 SSH（<code>sshd</code>）和 Ngnix（<code>nginx</code>）服务正在侦听网络并准备连接：</p><pre tabindex=0><code>tcp LISTEN 0 128 *:http *:* users:((&#34;nginx&#34;,pid=22563,fd=7))
tcp LISTEN 0 128 *:ssh *:* users:((&#34;sshd&#34;,pid=685,fd=3))
</code></pre><p>删除未使用的服务的方式因你的操作系统及其使用的程序包管理器而异。</p><p>要在 Debian / Ubuntu 上删除未使用的服务：</p><pre tabindex=0><code>$ sudo apt purge &lt;service_name&gt;
</code></pre><p>要在 Red Hat/CentOS 上删除未使用的服务：</p><pre tabindex=0><code>$ sudo yum remove &lt;service_name&gt;
</code></pre><p>再次运行 <code>ss -atup</code> 以确认这些未使用的服务没有安装和运行。</p><h3 id=总结>总结</h3><p>本教程介绍了加固 Linux 服务器所需的最起码的措施。你应该根据服务器的使用方式启用其他安全层。这些安全层可以包括诸如各个应用程序配置、入侵检测软件（IDS）以及启用访问控制（例如，双因素身份验证）之类的东西。</p><hr><p>via: <a href=https://opensource.com/article/19/10/linux-server-security>https://opensource.com/article/19/10/linux-server-security</a></p><p>作者：<a href=https://opensource.com/users/pmullins>Patrick H. Mullins</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/wxy>wxy</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%AE%89%E5%85%A8/ rel=tag>安全</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>