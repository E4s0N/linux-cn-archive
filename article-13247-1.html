<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>练习使用 Linux 的 grep 命令 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="练习使用 Linux 的 grep 命令"><meta property="og:description" content="来学习下搜索文件中内容的基本操作，然后下载我们的备忘录作为 grep 和正则表达式的快速参考指南。"><meta property="og:type" content="article"><meta property="og:url" content="/article-13247-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-29T09:33:30+00:00"><meta property="article:modified_time" content="2021-03-29T09:33:30+00:00"><meta itemprop=name content="练习使用 Linux 的 grep 命令"><meta itemprop=description content="来学习下搜索文件中内容的基本操作，然后下载我们的备忘录作为 grep 和正则表达式的快速参考指南。"><meta itemprop=datePublished content="2021-03-29T09:33:30+00:00"><meta itemprop=dateModified content="2021-03-29T09:33:30+00:00"><meta itemprop=wordCount content="329"><meta itemprop=keywords content="grep,搜索,正则表达式,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>练习使用 Linux 的 grep 命令</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-03-29T09:33:30Z>March 29, 2021</time></div></div></header><div class="content post__content clearfix"><blockquote><p>来学习下搜索文件中内容的基本操作，然后下载我们的备忘录作为 grep 和正则表达式的快速参考指南。</p></blockquote><p><img src=/data/attachment/album/202103/29/093323yn6ilqvg6z6iizcf.jpg alt title="Hand putting a Linux file folder into a drawer"></p><p><code>grep</code>（ 全局正则表达式打印 Global Regular Expression Print ）是由 Ken Thompson 早在 1974 年开发的基本 Unix 命令之一。在计算领域，它无处不在，通常被用作为动词（“搜索一个文件中的内容”）。如果你的谈话对象有极客精神，那么它也能在真实生活场景中使用。（例如，“我会 <code>grep</code> 我的内存条来回想起那些信息。”）简而言之，<code>grep</code> 是一种用特定的字符模式来搜索文件中内容的方式。如果你感觉这听起来像是文字处理器或文本编辑器的现代 Find 功能，那么你就已经在计算行业感受到了 <code>grep</code> 的影响。</p><p><code>grep</code> 绝不是被现代技术抛弃的远古命令，它的强大体现在两个方面：</p><ul><li><code>grep</code> 可以在终端操作数据流，因此你可以把它嵌入到复杂的处理中。你不仅可以在一个文本文件中<em>查找</em>文字，还可以提取文字后把它发给另一个命令。</li><li><code>grep</code> 使用正则表达式来提供灵活的搜索能力。</li></ul><p>虽然需要一些练习，但学习 <code>grep</code> 命令还是很容易的。本文会介绍一些我认为 <code>grep</code> 最有用的功能。</p><ul><li>下载我们免费的 <a href=https://opensource.com/downloads/grep-cheat-sheet>grep 备忘录</a></li></ul><h3 id=安装-grep>安装 grep</h3><p>Linux 默认安装了 <code>grep</code>。</p><p>MacOS 默认安装了 BSD 版的 <code>grep</code>。BSD 版的 <code>grep</code> 跟 GNU 版有一点不一样，因此如果你想完全参照本文，那么请使用 <a href=https://opensource.com/article/20/6/homebrew-mac>Homebrew</a> 或 <a href=https://opensource.com/article/20/11/macports>MacPorts</a> 安装 GNU 版的 <code>grep</code>。</p><h3 id=基础的-grep>基础的 grep</h3><p>所有版本的 <code>grep</code> 基础语法都一样。入参是匹配模式和你需要搜索的文件。它会把匹配到的每一行输出到你的终端。</p><pre tabindex=0><code>$ grep gnu gpl-3.0.txt
    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
&lt;http://www.gnu.org/licenses/&gt;.
&lt;http://www.gnu.org/philosophy/why-not-lgpl.html&gt;.
</code></pre><p><code>grep</code> 命令默认大小写敏感，因此 “gnu”、“GNU”、“Gnu” 是三个不同的值。你可以使用 <code>--ignore-case</code> 选项来忽略大小写。</p><pre tabindex=0><code>$ grep --ignore-case gnu gpl-3.0.txt
                    GNU GENERAL PUBLIC LICENSE
  The GNU General Public License is a free, copyleft license for
the GNU General Public License is intended to guarantee your freedom to
GNU General Public License for most of our software; it applies also to
[...16 more results...]
&lt;http://www.gnu.org/licenses/&gt;.
&lt;http://www.gnu.org/philosophy/why-not-lgpl.html&gt;.
</code></pre><p>你也可以通过 <code>--invert-match</code> 选项来输出所有没有匹配到的行：</p><pre tabindex=0><code>$ grep --invert-match \
--ignore-case gnu gpl-3.0.txt
                      Version 3, 29 June 2007

 Copyright (C) 2007 Free Software Foundation, Inc. &lt;http://fsf.org/&gt;
[...648 lines...]
Public License instead of this License.  But first, please read
</code></pre><h3 id=管道>管道</h3><p>能搜索文件中的文本内容是很有用的，但是 <a href=https://opensource.com/article/19/7/what-posix-richard-stallman-explains>POSIX</a> 的真正强大之处是可以通过“管道”来连接多条命令。我发现我使用 <code>grep</code> 最好的方式是把它与其他工具如 <code>cut</code>、<code>tr</code> 或 <a href=https://opensource.com/downloads/curl-command-cheat-sheet>curl</a> 联合使用。</p><p>假如现在有一个文件，文件中每一行是我想要下载的技术论文。我可以打开文件手动点击每一个链接，然后点击火狐浏览器的选项把每一个文件保存到我的硬盘，但是需要点击多次且耗费很长时间。而我还可以搜索文件中的链接，用 <code>--only-matching</code> 选项<em>只</em>打印出匹配到的字符串。</p><pre tabindex=0><code>$ grep --only-matching http\:\/\/.*pdf example.html
http://example.com/linux_whitepaper.pdf
http://example.com/bsd_whitepaper.pdf
http://example.com/important_security_topic.pdf
</code></pre><p>输出是一系列的 URL，每行一个。而这与 Bash 处理数据的方式完美契合，因此我不再把 URL 打印到终端，而是把它们通过管道传给 <code>curl</code>：</p><pre tabindex=0><code>$ grep --only-matching http\:\/\/.*pdf \
example.html | curl --remote-name
</code></pre><p>这条命令可以下载每一个文件，然后以各自的远程文件名命名保存在我的硬盘上。</p><p>这个例子中我的搜索模式可能很晦涩。那是因为它用的是正则表达式，一种在大量文本中进行模糊搜索时非常有用的”通配符“语言。</p><h3 id=正则表达式>正则表达式</h3><p>没有人会觉得 正则表达式 regular expression （简称 “regex”）很简单。然而，我发现它的名声往往比它应得的要差。诚然，很多人在使用正则表达式时“过于炫耀聪明”，直到它变得难以阅读，大而全，以至于复杂得换行才好理解，但是你不必过度使用正则。这里简单介绍一下我使用正则表达式的方式。</p><p>首先，创建一个名为 <code>example.txt</code> 的文件，输入以下内容：</p><pre tabindex=0><code>Albania
Algeria
Canada
0
1
3
11
</code></pre><p>最基础的元素是不起眼的 <code>.</code> 字符。它表示一个字符。</p><pre tabindex=0><code>$ grep Can.da example.txt
Canada
</code></pre><p>模式 <code>Can.da</code> 能成功匹配到 <code>Canada</code> 是因为 <code>.</code> 字符表示任意<em>一个</em>字符。</p><p>可以使用下面这些符号来使 <code>.</code> 通配符表示多个字符：</p><ul><li><code>?</code> 匹配前面的模式零次或一次</li><li><code>*</code> 匹配前面的模式零次或多次</li><li><code>+</code> 匹配前面的模式一次或多次</li><li><code>{4}</code> 匹配前面的模式 4 次（或是你在括号中写的其他次数）</li></ul><p>了解了这些知识后，你可以用你认为有意思的所有模式来在 <code>example.txt</code> 中做练习。可能有些会成功，有些不会成功。重要的是你要去分析结果，这样你才会知道原因。</p><p>例如，下面的命令匹配不到任何国家：</p><pre tabindex=0><code>$ grep A.a example.txt
</code></pre><p>因为 <code>.</code> 字符只能匹配一个字符，除非你增加匹配次数。使用 <code>*</code> 字符，告诉 <code>grep</code> 匹配一个字符零次或者必要的任意多次直到单词末尾。因为你知道你要处理的内容，因此在本例中<em>零次</em>是没有必要的。在这个列表中一定没有单个字母的国家。因此，你可以用 <code>+</code> 来匹配一个字符至少一次且任意多次直到单词末尾：</p><pre tabindex=0><code>$ grep A.+a example.txt
Albania
Algeria
</code></pre><p>你可以使用方括号来提供一系列的字母：</p><pre tabindex=0><code>$ grep [A,C].+a example.txt
Albania
Algeria
Canada
</code></pre><p>也可以用来匹配数字。结果可能会震惊你：</p><pre tabindex=0><code>$ grep [1-9] example.txt
1
3
11
</code></pre><p>看到 11 出现在搜索数字 1 到 9 的结果中，你惊讶吗？</p><p>如果把 13 加到搜索列表中，会出现什么结果呢？</p><p>这些数字之所以会被匹配到，是因为它们包含 1，而 1 在要匹配的数字中。</p><p>你可以发现，正则表达式有时会令人费解，但是通过体验和练习，你可以熟练掌握它，用它来提高你搜索数据的能力。</p><h3 id=下载备忘录>下载备忘录</h3><p><code>grep</code> 命令还有很多文章中没有列出的选项。有用来更好地展示匹配结果、列出文件、列出匹配到的行号、通过打印匹配到的行周围的内容来显示上下文的选项，等等。如果你在学习 <code>grep</code>，或者你经常使用它并且通过查阅它的<code>帮助</code>页面来查看选项，那么你可以下载我们的备忘录。这个备忘录使用短选项（例如，使用 <code>-v</code>，而不是 <code>--invert-matching</code>）来帮助你更好地熟悉 <code>grep</code>。它还有一部分正则表达式可以帮你记住用途最广的正则表达式代码。 <a href=https://opensource.com/downloads/grep-cheat-sheet>现在就下载 grep 备忘录！</a></p><hr><p>via: <a href=https://opensource.com/article/21/3/grep-cheat-sheet>https://opensource.com/article/21/3/grep-cheat-sheet</a></p><p>作者：<a href=https://opensource.com/users/seth>Seth Kenlon</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/lxbwolf>lxbwolf</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/grep/ rel=tag>grep</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%90%9C%E7%B4%A2/ rel=tag>搜索</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ rel=tag>正则表达式</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>