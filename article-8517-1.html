<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何安装 pandom ： 一个针对 Linux 的真随机数生成器 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何安装 pandom ： 一个针对 Linux 的真随机数生成器"><meta property="og:description" content="本文将解释如何安装 pandom，这是一个由 ncomputers.org 维护的定时抖动真随机数生成器。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8517-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-05-17T20:44:28+00:00"><meta property="article:modified_time" content="2017-05-17T20:44:28+00:00"><meta itemprop=name content="如何安装 pandom ： 一个针对 Linux 的真随机数生成器"><meta itemprop=description content="本文将解释如何安装 pandom，这是一个由 ncomputers.org 维护的定时抖动真随机数生成器。"><meta itemprop=datePublished content="2017-05-17T20:44:28+00:00"><meta itemprop=dateModified content="2017-05-17T20:44:28+00:00"><meta itemprop=wordCount content="688"><meta itemprop=keywords content="随机数,pandom,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何安装 pandom ： 一个针对 Linux 的真随机数生成器</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-05-17T20:44:28Z>May 17, 2017</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/201705/17/204255id9jk0uijgo0g6jk.jpg alt></p><p>本教程只针对 amd64/x86_64 架构 Linux 内核版本大于等于 2.6.9 的系统。本文将解释如何安装 <a href=http://ncomputers.org/pandom>pandom</a>，这是一个由 ncomputers.org 维护的定时抖动真随机数生成器。</p><h3 id=简介>简介</h3><p>在现在的计算机状况下，比如说配置了固态硬盘（SSD）的个人电脑和虚拟专用服务器（VPS）的环境中，Linux 内核内置的真随机数发生器提供的吞吐量很低。</p><p>而出于各种不同的加密目的使得对真随机数的需求持续增长，从而使得这个低吞吐量问题在 Linux 实现中变得越来越严重。</p><p>在与上述相同的物理或者虚拟环境下，并假设没有其它进程以 root 身份向 <code>/dev/random</code> 进行写操作的话，64 <a href=http://ncomputers.org/ubit>ubits</a>/64 bits 的 pandom 可以以 8 KiB/s 的速率生成随机数。</p><h3 id=1-pandom-的安装>1 pandom 的安装</h3><h4 id=11-获得-root-权限>1.1 获得 root 权限</h4><p>Pandom 必须以 root 身份来安装，所以在必要的时候请运行如下命令：</p><pre tabindex=0><code>su -
</code></pre><h4 id=12-安装编译所需的依赖>1.2 安装编译所需的依赖</h4><p>为了下载并安装 pandom，你需要 GNU <code>as</code> 汇编器、GNU <code>make</code>、GNU <code>tar</code> 和 GNU <code>wget</code> (最后两个工具通常已被安装)。随后你可以按照你的意愿卸载它们。</p><p><strong>基于 Arch 的系统：</strong></p><pre tabindex=0><code>pacman -S binutils make
</code></pre><p><strong>基于 Debian 的系统：</strong></p><pre tabindex=0><code>apt-get install binutils make
</code></pre><p>基于 Red Hat 的系统：</p><pre tabindex=0><code>dnf install binutils make
yum install binutils make
</code></pre><p><strong>基于 SUSE 的系统：</strong></p><pre tabindex=0><code>zypper install binutils make
</code></pre><h4 id=13-下载并析出源码>1.3 下载并析出源码</h4><p>下面的命令将使用 <code>wget</code> 和 <code>tar</code> 从 ncomputers.org 下载 pandom 的源代码并将它们解压出来：</p><pre tabindex=0><code>wget http://ncomputers.org/pandom.tar.gz
tar xf pandom.tar.gz
cd pandom/amd64-linux
</code></pre><h4 id=14-在安装前进行测试-推荐>1.4 在安装前进行测试 (推荐)</h4><p>这个被推荐的测试将花费大约 8 分钟的时间，它将检查内核支持情况并生成一个名为 <code>checkme</code> 的文件（在下一节中将被分析）。</p><pre tabindex=0><code>make check
</code></pre><h4 id=15-确定系统的初始化程序>1.5 确定系统的初始化程序</h4><p>在安装 pandom 之前，你需要知道你的系统使用的是哪个初始化程序。假如下面命令的输出中包含 <code>running</code>，则意味着你的系统使用了 <code>systemd</code>，否则你的系统则可能使用了一个 <code>init.d</code> 的实现（例如 upstart、sysvinit）。</p><pre tabindex=0><code>systemctl is-system-running
running
</code></pre><h4 id=16-安装-pandom>1.6 安装 pandom</h4><p>一旦你知道了你的系统使用何种 Linux 实现，那么你就可以相应地安装 pandom 了。</p><p><strong>使用基于 init.d 作为初始化程序（如： upstart、sysvinit）的系统：</strong></p><p>假如你的系统使用了一个 init.d 的实现（如： upstart、sysvinit），请运行下面的命令来安装 pandom：</p><pre tabindex=0><code>make install-init.d
</code></pre><p><strong>以 systemd 作为初始化程序的系统：</strong></p><p>假如你的系统使用 <code>systemd</code>，则请运行以下命令来安装 pandom：</p><pre tabindex=0><code>make install-systemd
</code></pre><h3 id=2-checkme-文件的分析>2 checkme 文件的分析</h3><p>在使用 pandom 进行加密之前，强烈建议分析一下先前在安装过程中生成的 <code>checkme</code> 文件。通过分析我们便可以知道用 pandom 生成的数是否真的随机。本节将解释如何使用 ncomputers.org 的 shell 脚本 <code>entropyarray</code> 来测试由 pandom 产生的输出的熵及序列相关性。</p><p><strong>注</strong>：整个分析过程也可以在另一台电脑上完成，例如在一个笔记本电脑或台式机上。举个例子：假如你正在一个资源受到限制的 VPS 上安装 pandom 程序，或许你更倾向于将 <code>checkme</code> 复制到自己的个人电脑中，然后再进行分析。</p><h4 id=21-获取-root-权限>2.1 获取 root 权限</h4><p><code>entropyarray</code> 程序也必须以 root 身份来安装，所以在必要时请运行如下命令：</p><pre tabindex=0><code>su -
</code></pre><h4 id=22-安装编译所需的依赖>2.2 安装编译所需的依赖</h4><p>为了下载并安装 <code>entropyarray</code>， 你需要 GNU g++ 编译器、GNU <code>make</code>、GNU <code>tar</code> 和 GNU <code>wget</code>。在随后你可以任意卸载这些依赖。</p><p><strong>基于 Arch 的系统：</strong></p><pre tabindex=0><code>pacman -S gcc make
</code></pre><p><strong>基于 Debian 的系统：</strong></p><pre tabindex=0><code>apt-get install g++ make
</code></pre><p><strong>基于 Red Hat 的系统：</strong></p><pre tabindex=0><code>dnf install gcc-c++ make
yum install gcc-c++ make
</code></pre><p><strong>基于 SUSE 的系统：</strong></p><pre tabindex=0><code>zypper install gcc-c++ make
</code></pre><h4 id=23-下载并析出源码>2.3 下载并析出源码</h4><p>以下命令将使用 <code>wget</code> 和 <code>tar</code> 从 ncomputers.org 下载到 entropyarray 的源码并进行解压：</p><pre tabindex=0><code>wget http://ncomputers.org/rearray.tar.gz
wget http://ncomputers.org/entropy.tar.gz
wget http://ncomputers.org/entropyarray.tar.gz

tar xf entropy.tar.gz
tar xf rearray.tar.gz
tar xf entropyarray.tar.gz
</code></pre><h4 id=24-安装-entropyarray>2.4 安装 entropyarray</h4><p><strong>注</strong>：如果在编译过程中报有关 <code>-std=c++11</code> 的错误，则说明当前系统安装的 GNU g++ 版本不支持 ISO C++ 2011 标准，那么你可能需要在另一个支持该标准的系统中编译 ncomputers.org/entropy 和 ncomputers.org/rearray （例如在一个你喜爱的较新的 Linux 发行版本中来编译）。接着使用 <code>make install</code> 来安装编译好的二进制文件，再接着你可能想继续运行 <code>entropyarray</code> 程序，或者跳过运行该程序这一步骤，然而我还是建议在使用 pandom 来达到加密目地之前先分析一下 <code>checkme</code> 文件。</p><pre tabindex=0><code>cd rearray; make install; cd ..
cd entropy; make install; cd ..
cd entropyarray; make install; cd ..
</code></pre><h4 id=25-分析-checkme-文件>2.5 分析 checkme 文件</h4><p><strong>注</strong>：64 <a href=http://ncomputers.org/ubit>ubits</a> / 64 bits 的 pandom 实现所生成的结果中熵应该高于 <code>15.977</code> 且 <code>max</code> 字段低于 <code>70</code>。假如你的结果与之相差巨大，或许你应该按照下面第 5 节介绍的那样增加你的 pandom 实现的不可预测性。假如你跳过了生成 <code>checkme</code> 文件的那一步，你也可以使用其他的工具来进行测试，例如 <a href=http://www.fourmilab.ch/random/>伪随机数序列测试</a>。</p><pre tabindex=0><code>entropyarray checkme

entropyarray in /tmp/tmp.mbCopmzqsg
15.977339
min:12
med:32
max:56
15.977368
min:11
med:32
max:58
15.977489
min:11
med:32
max:59
15.977077
min:12
med:32
max:60
15.977439
min:8
med:32
max:59
15.977374
min:13
med:32
max:60
15.977312
min:12
med:32
max:67
</code></pre><h4 id=26-卸载-entropyarray-可选>2.6 卸载 entropyarray (可选)</h4><p>假如你打算不再使用 <code>entropyarray</code>，那么你可以按照你自己的需求卸载它：</p><pre tabindex=0><code>cd entropyarray; make uninstall; cd ..
cd entropy; make uninstall; cd ..
cd rearray; make uninstall; cd ..
</code></pre><h3 id=3-使用-debian-的软件仓库来进行安装>3 使用 debian 的软件仓库来进行安装</h3><p>假如你想在你基于 debian 的系统中让 pandom 保持更新，则你可以使用 ncomputers.org 的 debian 软件仓库来安装或者重新安装它。</p><h4 id=31-获取-root-权限>3.1 获取 root 权限</h4><p>以下的 debian 软件包必须以 root 身份来安装，所以在必要时请运行下面这个命令：</p><pre tabindex=0><code>su -
</code></pre><h4 id=32-安装密钥>3.2 安装密钥</h4><p>下面的 debian 软件包中包含 ncomputers.org debian 软件仓库的公匙密钥：</p><pre tabindex=0><code>wget http://ncomputers.org/debian/keyring.deb
dpkg -i keyring.deb
rm keyring.deb
</code></pre><h4 id=33-安装软件源列表>3.3 安装软件源列表</h4><p>下面这些 debian 软件包含有 ncomputers.org debian 软件仓库的软件源列表，这些软件源列表对应最新的 debian 发行版本(截至 2017 年)。</p><p><strong>注</strong>：你也可以将下面的以 <code>#</code> 注释的行加入 <code>/etc/apt/sources.list</code> 文件中，而不是为你的 debian 发行版本安装对应的 debian 软件包。但假如这些源在将来改变了，你就需要手动更新它们。</p><p><strong>Wheezy：</strong></p><pre tabindex=0><code>#deb http://ncomputers.org/debian wheezy main
wget http://ncomputers.org/debian/wheezy.deb
dpkg -i wheezy.deb
rm wheezy.deb
</code></pre><p>Jessie：</p><pre tabindex=0><code>#deb http://ncomputers.org/debian jessie main
wget http://ncomputers.org/debian/jessie.deb
dpkg -i jessie.deb
rm jessie.deb
</code></pre><p><strong>Stretch：</strong></p><pre tabindex=0><code>#deb http://ncomputers.org/debian stretch main
wget http://ncomputers.org/debian/stretch.deb
dpkg -i stretch.deb
rm stretch.deb
</code></pre><h4 id=34-升级软件源列表>3.4 升级软件源列表</h4><p>一旦密钥和软件源列表安装完成，则可以使用下面的命令来更新：</p><pre tabindex=0><code>apt-get update
</code></pre><h4 id=35-测试-pandom>3.5 测试 pandom</h4><p>测试完毕后，你可以随意卸载下面的软件包。</p><p><strong>注</strong>：假如你已经在你的 Linux 中测试了 pandom ， 则你可以跳过这一步。</p><pre tabindex=0><code>apt-get install pandom-test
pandom-test

generating checkme file, please wait around 8 minutes ...
entropyarray in /tmp/tmp.5SkiYsYG3h
15.977366
min:12
med:32
max:57
15.977367
min:13
med:32
max:57
15.977328
min:12
med:32
max:61
15.977431
min:12
med:32
max:59
15.977437
min:11
med:32
max:57
15.977298
min:11
med:32
max:59
15.977196
min:10
med:32
max:57
</code></pre><h4 id=36-安装-pandom>3.6 安装 pandom</h4><pre tabindex=0><code>apt-get install pandom
</code></pre><h3 id=4-管理-pandom>4 管理 pandom</h3><p>在 pandom 安装完成后，你可能想对它进行管理。</p><h4 id=41-性能测试>4.1 性能测试</h4><p>pandom 提供大约 8 kB/s 的随机数生成速率，但它的性能可能根据环境而有所差异。</p><pre tabindex=0><code>dd if=/dev/random of=/dev/null bs=8 count=512

512+0 records in
512+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.451253 s, 9.1 kB/s
</code></pre><h4 id=42-熵和序列相关性检验>4.2 熵和序列相关性检验</h4><p>除了 ncomputers.org/entropyarray，还存在更多的测试，例如 <a href=https://gerhardt.ch/random.php>Ilja Gerhardt 的 NIST 测试套件</a>。</p><pre tabindex=0><code>entropyarray /dev/random 1M
</code></pre><h4 id=43-系统服务>4.3 系统服务</h4><p>pandom 还可以以系统服务的形式运行。</p><p><strong>基于 init.d 的初始化系统（如 upstart、sysvinit）：</strong></p><pre tabindex=0><code>/etc/init.d/random status
/etc/init.d/random start
/etc/init.d/random stop
/etc/init.d/random restart
</code></pre><p><strong>以 systemd 作为初始化程序的系统：</strong></p><pre tabindex=0><code>systemctl status random
systemctl start random
systemctl stop random
systemctl restart random
</code></pre><h3 id=5-增强不可预测性或者性能>5 增强不可预测性或者性能</h3><p>假如你想增加你编译的 pandom 程序的不可预测性或者性能，你可以尝试增加或删减 CPU 时间测量选项。</p><h4 id=51-编辑源文件>5.1 编辑源文件</h4><p>请按照自己的意愿，在源文件 <code>test.s</code> 和 <code>tRNG.s</code> 中增加或者移除 <code>measurement blocks</code> 字段。</p><pre tabindex=0><code>#measurement block
mov $35,%rax
syscall
rdtsc
[...]

#measurement block
mov $35,%rax
syscall
rdtsc
[...]
</code></pre><h4 id=52-测试不可预测性>5.2 测试不可预测性</h4><p>我们总是建议在使用个人定制的 pandom 实现来用于加密目地之前，先进行一些测试。</p><pre tabindex=0><code>make check
</code></pre><h4 id=53-安装定制的-pandom>5.3 安装定制的 pandom</h4><p>假如你对测试的结果很满意，你就可以使用下面的命令来安装你的 pandom 实现。</p><pre tabindex=0><code>make install
</code></pre><p>更多额外信息及更新详见 <a href=http://ncomputers.org/pandom>http://ncomputers.org/pandom</a> 。</p><p>（题图：Pixabay，CC0）</p><hr><p>via: <a href=https://www.howtoforge.com/tutorial/how-to-install-pandom-a-true-random-number-generator/>https://www.howtoforge.com/tutorial/how-to-install-pandom-a-true-random-number-generator/</a></p><p>作者：<a href=https://www.howtoforge.com/tutorial/how-to-install-pandom-a-true-random-number-generator/>Oliver</a> 译者：<a href=https://github.com/FSSlc>FSSlc</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E9%9A%8F%E6%9C%BA%E6%95%B0/ rel=tag>随机数</a></li><li class=tags__item><a class="tags__link btn" href=/tags/pandom/ rel=tag>pandom</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>