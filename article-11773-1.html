<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何借助 Django 来编写一个 Python Web API - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何借助 Django 来编写一个 Python Web API"><meta property="og:description" content="Django 是 Python API 开发中最流行的框架之一，在这个教程中，我们来学习如何使用它。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11773-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-11T14:25:00+00:00"><meta property="article:modified_time" content="2020-01-11T14:25:00+00:00"><meta itemprop=name content="如何借助 Django 来编写一个 Python Web API"><meta itemprop=description content="Django 是 Python API 开发中最流行的框架之一，在这个教程中，我们来学习如何使用它。"><meta itemprop=datePublished content="2020-01-11T14:25:00+00:00"><meta itemprop=dateModified content="2020-01-11T14:25:00+00:00"><meta itemprop=wordCount content="431"><meta itemprop=keywords content="Python,Django,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何借助 Django 来编写一个 Python Web API</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-01-11T14:25:00Z>January 11, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>Django 是 Python API 开发中最流行的框架之一，在这个教程中，我们来学习如何使用它。</p></blockquote><p><img src=/data/attachment/album/202001/11/142503aio2325mk5weiozz.jpg alt></p><p><a href=https://www.djangoproject.com/>Django</a> 所有 Web 框架中最全面的，也是最受欢迎的一个。自 2005 年以来，其流行度大幅上升。</p><p>Django 是由 Django 软件基金会维护，并且获得了社区的大力支持，在全球拥有超过 11,600 名成员。在 Stack Overflow 上，约有 191,000 个带 Django 标签的问题。Spotify、YouTube 和 Instagram 等都使用 Django 来构建应用程序和数据管理。</p><p>本文演示了一个简单的 API，通过它可以使用 HTTP 协议的 GET 方法来从服务器获取数据。</p><h3 id=构建一个项目>构建一个项目</h3><p>首先，为你的 Django 应用程序创建一个目录结构，你可以在系统的任何位置创建：</p><pre tabindex=0><code>$ mkdir myproject
$ cd myproject
</code></pre><p>然后，在项目目录中创建一个虚拟环境来隔离本地包依赖关系：</p><pre tabindex=0><code>$ python3 -m venv env
$ source env/bin/activate
</code></pre><p>在 Windows 上，使用命令 <code>env\Scripts\activate</code> 来激活虚拟环境。</p><h3 id=安装-django-和-django-rest-framework>安装 Django 和 Django REST framework</h3><p>然后，安装 Django 和 Django REST 模块：</p><pre tabindex=0><code>$ pip3 install django
$ pip3 install djangorestframework
</code></pre><h3 id=实例化一个新的-django-项目>实例化一个新的 Django 项目</h3><p>现在你的应用程序已经有了一个工作环境，你必须实例化一个新的 Django 项目。与 <a href=https://opensource.com/article/19/11/python-web-api-flask>Flask</a> 这样微框架不同的是，Django 有专门的命令来创建（注意第一条命令后的 <code>.</code> 字符）。</p><pre tabindex=0><code>$ django-admin startproject tutorial .
$ cd tutorial
$ django-admin startapp quickstart
</code></pre><p>Django 使用数据库来管理后端，所以你应该在开始开发之前同步数据库，数据库可以通过 <code>manage.py</code> 脚本管理，它是在你运行 <code>django-admin</code> 命令时创建的。因为你现在在 <code>tutorial</code> 目录，所以使用 <code>../</code> 符号来运行脚本，它位于上一层目录：</p><pre tabindex=0><code>$ python3 ../manage.py makemigrations
No changes detected
$ python3 ../manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, sessions
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying auth.0010_alter_group_name_max_length... OK
  Applying auth.0011_update_proxy_permissions... OK
  Applying sessions.0001_initial... OK
</code></pre><h3 id=在-django-中创建用户>在 Django 中创建用户</h3><p>创建一个名为 <code>admin</code>，示例密码为 <code>password123</code> 的初始用户：</p><pre tabindex=0><code>$ python3 ../manage.py createsuperuser \
  --email admin@example.com \
  --username admin
</code></pre><p>在提示时创建密码。</p><h3 id=在-django-中实现序列化和视图>在 Django 中实现序列化和视图</h3><p>为了使 Django 能够将信息传递给 HTTP GET 请求，必须将信息对象转化为有效的响应数据。Django 为此实现了“序列化类” <code>serializers</code>。</p><p>在你的项目中，创建一个名为 <code>quickstart/serializers.py</code> 的新模块，使用它来定义一些序列化器，模块将用于数据展示：</p><pre tabindex=0><code>from django.contrib.auth.models import User, Group
from rest_framework import serializers

class UserSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = User
        fields = [&#39;url&#39;, &#39;username&#39;, &#39;email&#39;, &#39;groups&#39;]

class GroupSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = Group
        fields = [&#39;url&#39;, &#39;name&#39;]
</code></pre><p>Django 中的<a href=https://docs.djangoproject.com/en/2.2/topics/http/views/>视图</a>是一个接受 Web 请求并返回 Web 响应的函数。响应可以是 HTML、HTTP 重定向、HTTP 错误、JSON 或 XML 文档、图像或 TAR 文件，或者可以是从 Internet 获得的任何其他内容。要创建视图，打开 <code>quickstart/views.py</code> 并输入以下代码。该文件已经存在，并且其中包含一些示例文本，保留这些文本并将以下代码添加到文件中：</p><pre tabindex=0><code>from django.contrib.auth.models import User, Group
from rest_framework import viewsets
from tutorial.quickstart.serializers import UserSerializer, GroupSerializer

class UserViewSet(viewsets.ModelViewSet):
    &#34;&#34;&#34;
    API 允许查看或编辑用户
    &#34;&#34;&#34;
    queryset = User.objects.all().order_by(&#39;-date_joined&#39;)
    serializer_class = UserSerializer

class GroupViewSet(viewsets.ModelViewSet):
    &#34;&#34;&#34;
    API 允许查看或编辑组
    &#34;&#34;&#34;
    queryset = Group.objects.all()
    serializer_class = GroupSerializer
</code></pre><h3 id=使用-django-生成-url>使用 Django 生成 URL</h3><p>现在，你可以生成 URL 以便人们可以访问你刚起步的 API。在文本编辑器中打开 <code>urls.py</code> 并将默认示例代码替换为以下代码：</p><pre tabindex=0><code>from django.urls import include, path
from rest_framework import routers
from tutorial.quickstart import views

router = routers.DefaultRouter()
router.register(r&#39;users&#39;, views.UserViewSet)
router.register(r&#39;groups&#39;, views.GroupViewSet)

# 使用自动路由 URL
# 还有登录 URL
urlpatterns = [
    path(&#39;&#39;, include(router.urls)),
    path(&#39;api-auth/&#39;, include(&#39;rest_framework.urls&#39;, namespace=&#39;rest_framework&#39;))
]
</code></pre><h3 id=调整你的-django-项目设置>调整你的 Django 项目设置</h3><p>这个示例项目的设置模块存储在 <code>tutorial/settings.py</code> 中，因此在文本编辑器中将其打开，然后在 <code>INSTALLED_APPS</code> 列表的末尾添加 <code>rest_framework</code>：</p><pre tabindex=0><code>INSTALLED_APPS = [
    ...
    &#39;rest_framework&#39;,
]
</code></pre><h3 id=测试-django-api>测试 Django API</h3><p>现在，你可以测试构建的 API。首先，从命令行启动内置服务器：</p><pre tabindex=0><code>$ python3 manage.py runserver
</code></pre><p>你可以通过使用 <code>curl</code> 导航至 URL <code>http://localhost:8000/users</code> 来访问 API：</p><pre tabindex=0><code>$ curl --get http://localhost:8000/users/?format=json
[{&#34;url&#34;:&#34;http://localhost:8000/users/1/?format=json&#34;,&#34;username&#34;:&#34;admin&#34;,&#34;email&#34;:&#34;admin@example.com&#34;,&#34;groups&#34;:[]}]
</code></pre><p>使用 Firefox 或你选择的<a href=https://opensource.com/article/19/7/open-source-browsers>开源浏览器</a>：</p><p><img src=/data/attachment/album/202001/11/142519dqgegzg793q3zlcz.png alt="一个简单的 Django API" title="A simple Django API"></p><p>有关使用 Django 和 Python 的 RESTful API 的更多深入知识，参考出色的 <a href=https://docs.djangoproject.com/en/2.2>Django 文档</a>。</p><h3 id=为什么要使用-djago>为什么要使用 Djago？</h3><p>Django 的主要优点：</p><ol><li>Django 社区的规模正在不断扩大，因此即使你做一个复杂项目，也会有大量的指导资源。</li><li>默认包含模板、路由、表单、身份验证和管理工具等功能，你不必寻找外部工具，也不必担心第三方工具会引入兼容性问题。</li><li>用户、循环和条件的简单结构使你可以专注于编写代码。</li><li>这是一个成熟且经过优化的框架，它非常快速且可靠。</li></ol><p>Django 的主要缺点：</p><ol><li>Django 很复杂！从开发人员视角的角度来看，它可能比简单的框架更难学。</li><li>Django 有一个很大的生态系统。一旦你熟悉它，这会很棒，但是当你深入学习时，它可能会令人感到无所适从。</li></ol><p>对你的应用程序或 API 来说，Django 是绝佳选择。下载并熟悉它，开始开发一个迷人的项目！</p><hr><p>via: <a href=https://opensource.com/article/19/11/python-web-api-django>https://opensource.com/article/19/11/python-web-api-django</a></p><p>作者：<a href=https://opensource.com/users/rachelwaston>Rachel Waston</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/python/ rel=tag>Python</a></li><li class=tags__item><a class="tags__link btn" href=/tags/django/ rel=tag>Django</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>