<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>几个用于替代 du 命令的更好选择 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="几个用于替代 du 命令的更好选择"><meta property="og:description" content="我发现了五个可以替代原有的 du 命令的更好的工具。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10239-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-11-16T23:08:16+00:00"><meta property="article:modified_time" content="2018-11-16T23:08:16+00:00"><meta itemprop=name content="几个用于替代 du 命令的更好选择"><meta itemprop=description content="我发现了五个可以替代原有的 du 命令的更好的工具。"><meta itemprop=datePublished content="2018-11-16T23:08:16+00:00"><meta itemprop=dateModified content="2018-11-16T23:08:16+00:00"><meta itemprop=wordCount content="425"><meta itemprop=keywords content="du,磁盘,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>几个用于替代 du 命令的更好选择</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-11-16T23:08:16Z>November 16, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201811/16/230819b84x77o0i49m1rim.jpg alt></p><p>大家对 <code>du</code> 命令应该都不陌生，它可以在类 Unix 系统中对文件和目录的空间使用情况进行计算和汇总。如果你也经常需要使用 <code>du</code> 命令，你会对以下内容感兴趣的。我发现了五个可以替代原有的 <code>du</code> 命令的更好的工具。当然，如果后续有更多更好的选择，我会继续列出来。如果你有其它推荐，也欢迎在评论中留言。</p><h3 id=ncdu>ncdu</h3><p><code>ncdu</code> 作为普通 <code>du</code> 的替代品，这在 Linux 社区中已经很流行了。<code>ncdu</code> 正是基于开发者们对 <code>du</code> 的性能不满意而被开发出来的。<code>ncdu</code> 是一个使用 C 语言和 ncurses 接口开发的简易快速的磁盘用量分析器，可以用来查看目录或文件在本地或远程系统上占用磁盘空间的情况。如果你有兴趣查看关于 <code>ncdu</code> 的详细介绍，可以浏览《<a href=https://www.ostechnix.com/check-disk-space-usage-linux-using-ncdu/>如何在 Linux 上使用 ncdu 查看磁盘占用量</a>》这一篇文章。</p><h3 id=tin-summer>tin-summer</h3><p>tin-summer 是使用 Rust 语言编写的自由开源工具，它可以用于查找占用磁盘空间的文件，它也是 <code>du</code> 命令的另一个替代品。由于使用了多线程，因此 tin-summer 在计算大目录的大小时会比 <code>du</code> 命令快得多。tin-summer 与 <code>du</code> 命令之间的区别是前者读取文件的大小，而后者则读取磁盘使用情况。</p><p>tin-summer 的开发者认为它可以替代 <code>du</code>，因为它具有以下优势：</p><ul><li>在大目录的操作速度上比 <code>du</code> 更快；</li><li>在显示结果上默认采用易读格式；</li><li>可以使用正则表达式排除文件或目录；</li><li>可以对输出进行排序和着色处理；</li><li>可扩展，等等。</li></ul><p><strong>安装 tin-summer</strong></p><p>要安装 tin-summer，只需要在终端中执行以下命令：</p><pre tabindex=0><code>$ curl -LSfs https://japaric.github.io/trust/install.sh | sh -s -- --git vmchale/tin-summer
</code></pre><p>你也可以使用 <code>cargo</code> 软件包管理器安装 tin-summer，但你需要在系统上先安装 Rust。在 Rust 已经安装好的情况下，执行以下命令：</p><pre tabindex=0><code>$ cargo install tin-summer
</code></pre><p>如果上面提到的这两种方法都不能成功安装 tin-summer，还可以从它的<a href=https://github.com/vmchale/tin-summer/releases>软件发布页</a>下载最新版本的二进制文件编译，进行手动安装。</p><p><strong>用法</strong></p><p>（LCTT 译注：tin-summer 的命令名为 <code>sn</code>）</p><p>如果需要查看当前工作目录的文件大小，可以执行以下命令：</p><pre tabindex=0><code>$ sn f
749 MB   ./.rustup/toolchains
749 MB   ./.rustup
147 MB   ./.cargo/bin
147 MB   ./.cargo
900 MB   .
</code></pre><p>不需要进行额外声明，它也是默认以易读的格式向用户展示数据。在使用 <code>du</code> 命令的时候，则必须加上额外的 <code>-h</code> 参数才能得到同样的效果。</p><p>只需要按以下的形式执行命令，就可以查看某个特定目录的文件大小。</p><pre tabindex=0><code>$ sn f &lt;path-to-the-directory&gt;
</code></pre><p>还可以对输出结果进行排序，例如下面的命令可以输出指定目录中最大的 5 个文件或目录：</p><pre tabindex=0><code>$ sn sort /home/sk/ -n5
749 MB /home/sk/.rustup
749 MB /home/sk/.rustup/toolchains
147 MB /home/sk/.cargo
147 MB /home/sk/.cargo/bin
2.6 MB /home/sk/mcelog
900 MB /home/sk/
</code></pre><p>顺便一提，上面结果中的最后一行是指定目录 <code>/home/sk</code> 的总大小。所以不要惊讶为什么输入的是 5 而实际输出了 6 行结果。</p><p>在当前目录下查找带有构建工程的目录，可以使用以下命令：</p><pre tabindex=0><code>$ sn ar
</code></pre><p>tin-summer 同样支持查找指定大小的带有构建工程的目录。例如执行以下命令可以查找到大小在 100 MB 以上的带有构建工程的目录：</p><pre tabindex=0><code>$ sn ar -t100M
</code></pre><p>如上文所说，tin-summer 在操作大目录的时候速度比较快，因此在操作小目录的时候，速度会相对比较慢一些。不过它的开发者已经表示，将会在以后的版本中优化这个缺陷。</p><p>要获取相关的帮助，可以执行以下命令：</p><pre tabindex=0><code>$ sn --help
</code></pre><p>如果想要更详尽的介绍，可以查看<a href=https://github.com/vmchale/tin-summer>这个项目的 GitHub 页面</a>。</p><h3 id=dust>dust</h3><p><code>dust</code> （含义是 <code>du</code> + <code>rust</code> = <code>dust</code>）使用 Rust 编写，是一个免费、开源的更直观的 <code>du</code> 工具。它可以在不需要 <code>head</code> 或<code>sort</code> 命令的情况下即时显示目录占用的磁盘空间。与 tin-summer 一样，它会默认情况以易读的格式显示每个目录的大小。</p><p><strong>安装 dust</strong></p><p>由于 <code>dust</code> 也是使用 Rust 编写，因此它也可以通过 <code>cargo</code> 软件包管理器进行安装：</p><pre tabindex=0><code>$ cargo install du-dust
</code></pre><p>也可以从它的<a href=https://github.com/bootandy/dust/releases>软件发布页</a>下载最新版本的二进制文件，并按照以下步骤安装。在写这篇文章的时候，最新的版本是 0.3.1。</p><pre tabindex=0><code>$ wget https://github.com/bootandy/dust/releases/download/v0.3.1/dust-v0.3.1-x86_64-unknown-linux-gnu.tar.gz
</code></pre><p>抽取文件：</p><pre tabindex=0><code>$ tar -xvf dust-v0.3.1-x86_64-unknown-linux-gnu.tar.gz
</code></pre><p>最后将可执行文件复制到你的 <code>$PATH</code>（例如 <code>/usr/local/bin</code>）下：</p><pre tabindex=0><code>$ sudo mv dust /usr/local/bin/
</code></pre><p><strong>用法</strong></p><p>需要查看当前目录及所有子目录下的文件大小，可以执行以下命令：</p><pre tabindex=0><code>$ dust
</code></pre><p>输出示例：</p><p><img src=/data/attachment/album/201811/16/230821p2h2w62nk0223tuk.png alt></p><p>带上 <code>-p</code> 参数可以按照从当前目录起始的完整目录显示。</p><pre tabindex=0><code>$ dust -p
</code></pre><p><img src=/data/attachment/album/201811/16/230822uzft5mik4fmt2xti.png alt="dust 2"></p><p>如果需要查看多个目录的大小，只需要同时列出这些目录，并用空格分隔开即可：</p><pre tabindex=0><code>$ dust &lt;dir1&gt; &lt;dir2&gt;
</code></pre><p>下面再多举几个例子，例如：</p><p>显示文件的长度:</p><pre tabindex=0><code>$ dust -s
</code></pre><p>只显示 10 个目录：</p><pre tabindex=0><code>$ dust -n 10
</code></pre><p>查看当前目录下最多 3 层子目录：</p><pre tabindex=0><code>$ dust -d 3
</code></pre><p>查看帮助：</p><pre tabindex=0><code>$ dust -h
</code></pre><p>如果想要更详尽的介绍，可以查看<a href=https://github.com/bootandy/dust>这个项目的 GitHub 页面</a>。</p><h3 id=diskus>diskus</h3><p><code>diskus</code> 也是使用 Rust 编写的一个小型、快速的开源工具，它可以用于替代 <code>du -sh</code> 命令。<code>diskus</code> 将会计算当前目录下所有文件的总大小，它的效果相当于 <code>du -sh</code> 或 <code>du -sh --bytes</code>，但其开发者表示 <code>diskus</code> 的运行速度是 <code>du -sh</code> 的 9 倍。</p><p><strong>安装 diskus</strong></p><p><code>diskus</code> 已经存放于 Arch Linux 社区用户软件仓库 Arch Linux User-community Repository （<a href=https://aur.archlinux.org/packages/diskus-bin/>AUR</a>）当中，可以通过任何一种 AUR 帮助工具（例如 <a href=https://www.ostechnix.com/yay-found-yet-another-reliable-aur-helper/><code>yay</code></a>）把它安装在基于 Arch 的系统上：</p><pre tabindex=0><code>$ yay -S diskus
</code></pre><p>对于 Ubuntu 及其衍生发行版，可以在 <code>diskus</code> 的<a href=https://github.com/sharkdp/diskus/releases>软件发布页</a>上下载最新版的软件包并安装：</p><pre tabindex=0><code>$ wget &#34;https://github.com/sharkdp/diskus/releases/download/v0.3.1/diskus_0.3.1_amd64.deb&#34;

$ sudo dpkg -i diskus_0.3.1_amd64.deb
</code></pre><p>还可以使用 <code>cargo</code> 软件包管理器安装 <code>diskus</code>，但必须在系统上先安装 Rust 1.29+。</p><p>安装好 Rust 之后，就可以使用以下命令安装 <code>diskus</code>：</p><pre tabindex=0><code>$ cargo install diskus
</code></pre><p><strong>用法</strong></p><p>在通常情况下，如果需要查看某个目录的大小，我会使用形如 <code>du -sh</code> 的命令。</p><pre tabindex=0><code>$ du -sh dir
</code></pre><p>这里的 <code>-s</code> 参数表示显示总大小。</p><p>如果使用 <code>diskus</code>，直接就可以显示当前目录的总大小。</p><pre tabindex=0><code>$ diskus
</code></pre><p><img src=/data/attachment/album/201811/16/230824pwdwjb1wrtt0gp8j.png alt></p><p>我使用 <code>diskus</code> 查看 Arch Linux 系统上各个目录的总大小，这个工具的速度确实比 <code>du -sh</code> 快得多。但是它目前只能显示当前目录的大小。</p><p>要获取相关的帮助，可以执行以下命令：</p><pre tabindex=0><code>$ diskus -h
</code></pre><p>如果想要更详尽的介绍，可以查看<a href=https://github.com/sharkdp/diskus>这个项目的 GitHub 页面</a>。</p><h3 id=duu>duu</h3><p><code>duu</code> 是 Directory Usage Utility 的缩写。它是使用 Python 编写的查看指定目录大小的工具。它具有跨平台的特性，因此在 Windows、Mac OS 和 Linux 系统上都能够使用。</p><p><strong>安装 duu</strong></p><p>安装这个工具之前需要先安装 Python 3。不过目前很多 Linux 发行版的默认软件仓库中都带有 Python 3，所以这个依赖并不难解决。</p><p>Python 3 安装完成后，从 <code>duu</code> 的<a href=https://github.com/jftuga/duu/releases>软件发布页</a>下载其最新版本。</p><pre tabindex=0><code>$ wget https://github.com/jftuga/duu/releases/download/2.20/duu.py
</code></pre><p><strong>用法</strong></p><p>要查看当前目录的大小，只需要执行以下命令：</p><pre tabindex=0><code>$ python3 duu.py
</code></pre><p>输出示例：</p><p><img src=/data/attachment/album/201811/16/230825ah0yhby3sf0l5kdd.png alt></p><p>从上图可以看出，<code>duu</code> 会显示当前目录下文件的数量情况，按照 Byte、KB、MB 单位显示这些文件的总大小，以及每个文件的大小。</p><p>如果需要查看某个目录的大小，只需要声明目录的绝对路径即可：</p><pre tabindex=0><code>$ python3 duu.py /home/sk/Downloads/
</code></pre><p>如果想要更详尽的介绍，可以查看<a href=https://github.com/jftuga/duu>这个项目的 GitHub 页面</a>。</p><p>以上就是 <code>du</code> 命令的五种替代方案，希望这篇文章能够帮助到你。就我自己而言，我并不会在这五种工具之间交替使用，我更喜欢使用 <code>ncdu</code>。欢迎在下面的评论区发表你对这些工具的评论。</p><hr><p>via: <a href=https://www.ostechnix.com/some-good-alternatives-to-du-command/>https://www.ostechnix.com/some-good-alternatives-to-du-command/</a></p><p>作者：<a href=https://www.ostechnix.com/author/sk/>SK</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/HankChow>HankChow</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/du/ rel=tag>du</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E7%A3%81%E7%9B%98/ rel=tag>磁盘</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>