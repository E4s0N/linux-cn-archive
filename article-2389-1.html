<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux shell中的那些小把戏 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Linux shell中的那些小把戏"><meta property="og:description" content="我日常使用Linux shell(Bash)，但是我经常忘记一些有用的命令或者shell技巧。是的，我能记住一些命令，但是肯定不会只在特定的任务上使用一次，所以我就开始在我的Dropbox账号里用文本文件写下这些Linux shell的小技 &mldr;"><meta property="og:type" content="article"><meta property="og:url" content="/article-2389-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-12-18T22:06:00+00:00"><meta property="article:modified_time" content="2013-12-18T22:06:00+00:00"><meta itemprop=name content="Linux shell中的那些小把戏"><meta itemprop=description content="我日常使用Linux shell(Bash)，但是我经常忘记一些有用的命令或者shell技巧。是的，我能记住一些命令，但是肯定不会只在特定的任务上使用一次，所以我就开始在我的Dropbox账号里用文本文件写下这些Linux shell的小技 &mldr;"><meta itemprop=datePublished content="2013-12-18T22:06:00+00:00"><meta itemprop=dateModified content="2013-12-18T22:06:00+00:00"><meta itemprop=wordCount content="464"><meta itemprop=keywords content="Linux,shell,技巧,Bash,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Linux shell中的那些小把戏</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2013-12-18T22:06:00Z>December 18, 2013</time></div></div></header><div class="content post__content clearfix"><p>我日常使用Linux shell(Bash)，但是我经常忘记一些有用的命令或者shell技巧。是的，我能记住一些命令，但是肯定不会只在特定的任务上使用一次，所以我就开始在我的Dropbox账号里用文本文件写下这些Linux shell的小技巧，现在我决定共享它给你。这个表我以后还会更新。记住，这里的一些贴士需要在你的Linux发行版上安装额外的软件。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201312/18/2151589pwl6tt9trjrc6qh.jpg alt></p><p>在bash中检查远程端口是否打开:</p><pre tabindex=0><code>echo &gt;/dev/tcp/8.8.8.8/53 &amp;&amp; echo &#34;open&#34;
</code></pre><p>将进程挂起:</p><pre tabindex=0><code>Ctrl + z 
</code></pre><p>将进程移到前台:</p><pre tabindex=0><code>fg
</code></pre><p>（译注，挂起的进程是不执行的，如果希望在后台执行，可以使用bg命令，并且指定通过jobs命令获得的任务号。）</p><p>生成随机16进制数字,n是字符的数量:</p><pre tabindex=0><code>openssl rand -hex n
</code></pre><p>在当前shell中执行一个文件中的命令（译注：这个文件不是一个bash脚本，比如.bashrc、bash_profile等）:</p><pre tabindex=0><code>source /home/user/file.name
</code></pre><p>提取字符串的前5个字符:</p><pre tabindex=0><code>${variable:0:5}
</code></pre><p>打开SSH调试模式（译注：当你遇到SSH连接问题时很有用）:</p><pre tabindex=0><code>ssh -vvv user@ip_address
</code></pre><p>使用pem key的进行SSH连接：</p><pre tabindex=0><code>ssh user@ip_address -i key.pem
</code></pre><p>用wget获取完整目录列表到本地目录:</p><pre tabindex=0><code>wget -r --no-parent --reject &#34;index.html*&#34; http://hostname/ -P /home/user/dirs
</code></pre><p>同时创建多个目录:</p><pre tabindex=0><code>mkdir -p /home/user/{test,test1,test2}
</code></pre><p>以树状列出进程及子进程:</p><pre tabindex=0><code>ps axwef
</code></pre><p>创建war文件:</p><pre tabindex=0><code>jar -cvf name.war file
</code></pre><p>测试磁盘写速度:</p><pre tabindex=0><code>dd if=/dev/zero of=/tmp/output.img bs=8k count=256k conv=fdatasync; rm -rf /tmp/output.img
</code></pre><p>测试磁盘读速度:</p><pre tabindex=0><code>hdparm -Tt /dev/sda
</code></pre><p>获取文本的md5值:</p><pre tabindex=0><code>echo -n &#34;text&#34; | md5sum
</code></pre><p>检测xml语法:</p><pre tabindex=0><code>xmllint --noout file.xml
</code></pre><p>将tar.gz文件解压到指定目录:</p><pre tabindex=0><code>tar zxvf package.tar.gz -C new_dir
</code></pre><p>用curl获取HTTP头:</p><pre tabindex=0><code>curl -I http://www.example.com
</code></pre><p>修改一些文件或目录的时间戳 (格式为：YYMMDDhhmm):</p><pre tabindex=0><code>touch -t 0712250000 file
</code></pre><p>使用wget从ftp下载:</p><pre tabindex=0><code>wget -m ftp://username:password@hostname
</code></pre><p>生成随机密码 (本例中16位字符长):</p><pre tabindex=0><code>LANG=c &lt; /dev/urandom tr -dc _A-Z-a-z-0-9 | head -c${1:-16};echo;
</code></pre><p>快速创建一个文件的备份（扩展名是.bkp）:</p><pre tabindex=0><code>cp some_file_name{,.bkp}
</code></pre><p>访问Windows共享:</p><pre tabindex=0><code>smbclient -U &#34;DOMAIN\user&#34; //dc.domain.com/share/test/dir
</code></pre><p>运行history中的命令 (这里在history中的第100个):</p><pre tabindex=0><code>!100
</code></pre><p>unzip到目录中:</p><pre tabindex=0><code>unzip package_name.zip -d dir_name
</code></pre><p>输入多行文字 (按 CTRL + d 退出):</p><pre tabindex=0><code>cat &gt; test.txt
</code></pre><p>创建空白的文件或者清空已存在的文件:</p><pre tabindex=0><code>&gt; test.txt
</code></pre><p>从Ubuntu NTP服务器上更新日期:</p><pre tabindex=0><code>ntpdate ntp.ubuntu.com
</code></pre><p>netstat 显示所有IPv4的TCP监听的端口:</p><pre tabindex=0><code>netstat -lnt4 | awk &#39;{print $4}&#39; | cut -f2 -d: | grep -o &#39;[0-9]*&#39;
</code></pre><p>将qcow2的镜像转化成raw格式:</p><pre tabindex=0><code>qemu-img convert -f qcow2 -O raw precise-server-cloudimg-amd64-disk1.img \
                                 precise-server-cloudimg-amd64-disk1.raw
</code></pre><p>重复运行命令并显示它的输出 (默认2秒重复一次):</p><pre tabindex=0><code>watch ps -ef
</code></pre><p>显示所有用户:</p><pre tabindex=0><code>getent passwd
</code></pre><p>以读写模式挂载根文件系统:</p><pre tabindex=0><code>mount -o remount,rw /
</code></pre><p>挂载目录 (适合于符号链接不能工作的情况下):</p><pre tabindex=0><code>mount --bind /source /destination
</code></pre><p>发送DNS动态更新给DNS:</p><pre tabindex=0><code>nsupdate &lt;
</code></pre><p>递归grep所有目录</p><pre tabindex=0><code>grep -r &#34;some_text&#34; /path/to/dir
</code></pre><p>列出10个最大的系统中已打开的文件:</p><pre tabindex=0><code>lsof / | awk &#39;{ if($7 &gt; 1048576) print $7/1048576 &#34;MB &#34;$9 }&#39; | sort -n -u | tail
</code></pre><p>以MB显示空余内存:</p><pre tabindex=0><code>free -m | grep cache | awk &#39;/[0-9]/{ print $4&#34; MB&#34; }&#39;
</code></pre><p>打开vim并跳转到文件最后:</p><pre tabindex=0><code>vim + some_file_name
</code></pre><p>git clone特定branch (本例是master分支):</p><pre tabindex=0><code>git clone git@github.com:name/app.git -b master
</code></pre><p>git切换到另外一个branch (本例是develop分支):</p><pre tabindex=0><code>git checkout develop
</code></pre><p>git删除一个branch(本例是myfeature):</p><pre tabindex=0><code>git branch -d myfeature
</code></pre><p>Git删除一个远程branch:</p><pre tabindex=0><code>git push origin :branchName
</code></pre><p>Git push 新的branch到远程:</p><pre tabindex=0><code>git push -u origin mynewfeature
</code></pre><p>打印history中最后的cat命令</p><pre tabindex=0><code>!cat:p
</code></pre><p>运行history中的最后的cat命令:</p><pre tabindex=0><code>!cat
</code></pre><p>找出在/home/user中的所有空子目录:</p><pre tabindex=0><code>find /home/user -maxdepth 1 -type d -empty
</code></pre><p>得到test.txt中50到60行的文本:</p><pre tabindex=0><code>&lt; test.txt sed -n &#39;50,60p&#39;
</code></pre><p>以sudo权限重新运行上一个执行的命令 (如果是: mkdir /root/test, 下面会运行: sudo mkdir /root/test)（译注：当你执行一个命令忘记sudo时，可以这样重新执行，而不必再把完整命令敲一遍）:</p><pre tabindex=0><code>sudo !!
</code></pre><p>创建临时RAM文件系统 - ramdisk (请先创建 /tmpram 目录):</p><pre tabindex=0><code>mount -t tmpfs tmpfs /tmpram -o size=512m
</code></pre><p>Grep完整的单词（译注：而不是其它单词的一部分）:</p><pre tabindex=0><code>grep -w &#34;name&#34; test.txt
</code></pre><p>提升权限后在一个文件后追加文本:</p><pre tabindex=0><code>echo &#34;some text&#34; | sudo tee -a /path/file
</code></pre><p>列出所有支持的kill信号:</p><pre tabindex=0><code>kill -l
</code></pre><p>生成随机密码 (本例中16个字符长):</p><pre tabindex=0><code>openssl rand -base64 16
</code></pre><p>在bash历史中不记录最后的会话:</p><pre tabindex=0><code>kill -9 $$
</code></pre><p>扫描网络来找出开放的端口:</p><pre tabindex=0><code>nmap -p 8081 172.20.0.0/16
</code></pre><p>设置git email:</p><pre tabindex=0><code>git config --global user.email &#34;me@example.com&#34;
</code></pre><p>如果你有未提交的commit，与master同步:</p><pre tabindex=0><code>git pull --rebase origin master
</code></pre><p>将文件名中含有txt的所有文件移动到/home/user:</p><pre tabindex=0><code>find -iname &#34;*txt*&#34; -exec mv -v {} /home/user \;
</code></pre><p>按行将两个文件中的对应行合并显示:</p><pre tabindex=0><code>paste test.txt test1.txt
</code></pre><p>shell中的进度条:</p><pre tabindex=0><code>pv data.log
</code></pre><p>用netcat发送数据给服务器:</p><pre tabindex=0><code>echo &#34;hosts.sampleHost 10 `date +%s`&#34; | nc 192.168.200.2 3000
</code></pre><p>转换tab为空格:</p><pre tabindex=0><code>expand test.txt &gt; test1.txt
</code></pre><p>跳过bash历史:</p><pre tabindex=0><code>&lt;&lt;空格&gt;&gt;cmd
</code></pre><p>回到之前的工作目录:</p><pre tabindex=0><code>cd -
</code></pre><p>切割大的tar.gz文件为几个文件 (每个100MB)，并还原:</p><pre tabindex=0><code>split –b 100m /path/to/large/archive /path/to/output/files
cat files* &gt; archive
</code></pre><p>用curl获取HTTP状态值:</p><pre tabindex=0><code>curl -sL -w &#34;%{http_code}\\n&#34; www.example.com -o /dev/null
</code></pre><p>当 Ctrl + c 没用时:</p><pre tabindex=0><code>Ctrl + \
</code></pre><p>获取文件所有者:</p><pre tabindex=0><code>stat -c %U file.txt
</code></pre><p>列出块设备:</p><pre tabindex=0><code>lsblk -f
</code></pre><p>找出文件中带有末尾空格的文件:</p><pre tabindex=0><code>find . -type f -exec egrep -l &#34; +$&#34; &#34;{}&#34; \;
</code></pre><p>找出用tab缩进的文件:</p><pre tabindex=0><code>find . -type f -exec egrep -l $&#39;\t&#39; &#34;{}&#34; \;
</code></pre><p>用"=&ldquo;打印水平行</p><pre tabindex=0><code>printf &#39;%100s\n&#39; | tr &#39; &#39; =
</code></pre><p><strong>更新: 2013年11月25日</strong></p><hr><p>via: <a href=http://www.techbar.me/linux-shell-tips/>http://www.techbar.me/linux-shell-tips/</a></p><p>译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/linux/ rel=tag>Linux</a></li><li class=tags__item><a class="tags__link btn" href=/tags/shell/ rel=tag>shell</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%8A%80%E5%B7%A7/ rel=tag>技巧</a></li><li class=tags__item><a class="tags__link btn" href=/tags/bash/ rel=tag>Bash</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>