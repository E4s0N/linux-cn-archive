<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Linux 和 Windows 电脑之间共享文件 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Linux 和 Windows 电脑之间共享文件"><meta property="og:description" content="使用 Samba 设置跨平台文件共享。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14537-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-02T23:39:00+00:00"><meta property="article:modified_time" content="2022-05-02T23:39:00+00:00"><meta itemprop=name content="如何在 Linux 和 Windows 电脑之间共享文件"><meta itemprop=description content="使用 Samba 设置跨平台文件共享。"><meta itemprop=datePublished content="2022-05-02T23:39:00+00:00"><meta itemprop=dateModified content="2022-05-02T23:39:00+00:00"><meta itemprop=wordCount content="320"><meta itemprop=keywords content="共享,Samba,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Linux 和 Windows 电脑之间共享文件</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-05-02T23:39:00Z>May 02, 2022</time></div></div></header><div class="content post__content clearfix"><blockquote><p>使用 Samba 设置跨平台文件共享。</p></blockquote><p><img src=/data/attachment/album/202205/02/233859oqqjvfr6tqz9bfqp.jpg alt title="Blue folders flying in the clouds above a city skyline"></p><p>如果你使用不同的操作系统，能够在它们之间共享文件会让你倍感方便。这篇文章介绍如何使用 <a href=https://www.samba.org/>Samba</a> 和 <a href=https://linux.die.net/man/8/mount.cifs>mount.cifs</a> 在 Linux （<a href=https://getfedora.org/en/workstation/download/>Fedora 33</a>）和 Windows 10 之间设置文件共享。</p><p>Samba 是 <a href=https://en.wikipedia.org/wiki/Server_Message_Block>SMB/CIFS</a> 协议的 Linux 实现，允许通过网络连接直接访问共享的文件夹和打印机。 mount.cifs 是 Samba 套件的一部分，可让你在 Linux 下挂载 <a href=https://en.wikipedia.org/wiki/Server_Message_Block>CIFS</a> 文件系统。</p><blockquote><p><strong>注意</strong>: 这些说明适用于在你的私有本地网络内，或在 Linux 宿主机和虚拟化的 Windows 访客机之间的虚拟主机专用网络中共享文件。不要将本文视为你公司网络的操作指南，因为本文没有实现必要的网络安全考虑。</p></blockquote><h3 id=从-windows-访问-linux>从 Windows 访问 Linux</h3><p>本节介绍从 Windows 文件资源管理器访问用户的 Linux 主目录。</p><h4 id=1安装和配置-samba>1、安装和配置 Samba</h4><p>进入你的系统安装 Samba:</p><pre tabindex=0><code>dnf install samba
</code></pre><p>Samba 是一个系统守护进程，其配置文件位于 <code>/etc/samba/smb.conf</code>。它的默认配置应该就可以工作。如果不行，下面这个最小化配置应该可以解决问题：</p><pre tabindex=0><code>[global]
        workgroup = SAMBA
        server string = %h server (Samba %v)
        invalid users = root
        security = user
[homes]
        comment = Home Directories
        browseable = no
        valid users = %S
        writable = yes
</code></pre><p>你可以在该项目网站的 <a href=https://www.samba.org/samba/docs/current/man-html/smb.conf.5.html>smb.conf</a> 部分找到参数的详细说明。</p><h4 id=2修改-linuxse>2、修改 LinuxSE</h4><p>如果你的 Linux 发行版受 <a href=https://www.redhat.com/en/topics/linux/what-is-selinux>SELinux</a> 保护（比如 Fedora），必须通过以下命令才能通过 Samba 共享主目录：</p><pre tabindex=0><code>setsebool -P samba_enable_home_dirs on
</code></pre><p>通过以下命令查看这个值：</p><pre tabindex=0><code>getsebool samba_enable_home_dirs
</code></pre><p>输出如下：</p><p><img src=/data/attachment/album/202205/02/233906mxw5xkxgupp56xk8.png alt=Sebool title="Enabling Samba to enable user directory access"></p><h4 id=3启用你的用户>3、启用你的用户</h4><p>Samba 使用一组用户/密码来管理连接权限。通过键入以下命令将你的 Linux 用户添加到该集合中：</p><pre tabindex=0><code>smbpasswd -a &lt;你的用户名&gt;
</code></pre><p>系统提示你输入密码。这是一个 <em>全新</em> 的密码；而不是你账户的当前密码。请输入你想用来登录 Samba 的密码。</p><p>键入以下命令得到有 Samba 使用权限的用户列表：</p><pre tabindex=0><code>pdbedit -L -v
</code></pre><p>键入以下命令删除一个用户：</p><pre tabindex=0><code>smbpasswd -x &lt;用户名&gt;
</code></pre><h4 id=4开启-samba>4、开启 Samba</h4><p>既然 Samba 是一个系统守护进程，你可以在 Fedora 上键入以下命令启动它：</p><pre tabindex=0><code>systemctl start smb
</code></pre><p>这将为当前会话开启 Samba 服务。如果想让它自启动，键入以下命令：</p><pre tabindex=0><code>systemctl enable smb
</code></pre><p>在某些系统上，Samba 守护进程注册为 <code>smbd</code>。</p><h4 id=4配置防火墙>4、配置防火墙</h4><p>你的防火墙会默认阻拦 Samba。通过配置防火墙允许 Samba 能永久访问网络。</p><p>你可以在命令行执行如下操作：</p><pre tabindex=0><code>firewall-cmd --add-service=samba --permanent
</code></pre><p>或者，你可以使用 <code>firewall-config</code> 工具以图形化方式进行操作：</p><p><img src=/data/attachment/album/202205/02/233907adbagpspbvrkv2az.png alt=firewall-config title="firewall-config tool"></p><h4 id=5从-windows-访问-samba>5、从 Windows 访问 Samba</h4><p>在 Windows 中，打开文件资源管理器。在地址栏中，键入两个反斜杠（<code>\\</code>），紧跟你的 Linux 机器的地址（IP 地址或主机名）：</p><p><img src=/data/attachment/album/202205/02/233907x04jd7i8v8tcuxkn.png alt="从 Windows 访问 Linux" title="Accessing Linux machine from Windows"></p><p>系统将提示你输入登录信息。输入第 3 步中的用户名和密码组合。你现在应该可以访问 Linux 机器上的主目录：</p><p><img src=/data/attachment/album/202205/02/233908sonkofsvzsqzvkeh.png alt="从 Windows 访问 Linux" title="Accessing Linux machine from Windows"></p><h3 id=从-linux-访问-windows>从 Linux 访问 Windows</h3><p>以下步骤说明了如何从 Linux 访问共享的 Windows 文件夹。要实现这一点，需要你的 Windows 用户帐户具有管理员权限。</p><h4 id=1启用文件共享>1、启用文件共享</h4><p>通过点击 “Windows 按钮” > “ 设置 Settings ” > “ 网络和 Internet Network & Internet ” ，或者右键单击任务栏右下角的小监视器图标， 打开网络和共享中心 Open Network an d Sharing Center ：</p><p><img src=/data/attachment/album/202205/02/233908jd5syp3s24od8jsp.png alt=打开网络和共享中心 title="Open network and sharing center"></p><p>在打开的窗口中，找到你要使用的连接并记下其配置文件。我使用了 <strong>以太网 3</strong>，它被标记为 公用网络 Public Network 。</p><blockquote><p><strong>注意</strong>：如果你的 PC 经常连接公用网络，请考虑将本地计算机的连接配置文件更改为 <strong>私有</strong>。</p></blockquote><p>记住你的网络配置，然后单击 更改高级共享设置 Change advanced sharing settings ：</p><p><img src=/data/attachment/album/202205/02/233909kece9tjceo9ctcs8.png alt=更改高级共享设置 title="Change advanced sharing settings"></p><p>选择与你的连接对应的配置文件并打开 网络发现 network discovery 和 文件和打印机共享 file and printer sharing ：</p><p><img src=/data/attachment/album/202205/02/233909eg8q000o5yn6io58.png alt=网络共享设置 title="Network sharing settings"></p><h4 id=2定义一个共享文件夹>2、定义一个共享文件夹</h4><p>通过右键单击你要共享的文件夹打开上下文菜单，导航到 授予访问权限 Give access to ，然后选择 特定用户&mldr; Specific people&mldr; ：</p><p><img src=/data/attachment/album/202205/02/233909nx9dldkjtktl5xzk.png alt=授予访问权限 title="Give access"></p><p>检查你当前的用户名是否在列表中。点击 共享 Share 将此文件夹标记为共享：</p><p><img src=/data/attachment/album/202205/02/233910wawhjxv727nvxvnr.png alt=标记为共享 title="Tag as shared"></p><p>你可以通过在文件资源管理器的地址栏中输入 <code>\\localhost</code> 来显示所有共享文件夹的列表：</p><p><img src=/data/attachment/album/202205/02/233910e9lzmi8pt9st9iyi.png alt=共享文件夹 title="Shared folders"></p><p><img src=/data/attachment/album/202205/02/233911isxutx5npu3nwn25.png alt=共享文件夹 title="Shared folders"></p><h4 id=3在-linux-下挂载共享文件夹>3、在 Linux 下挂载共享文件夹</h4><p>回到你的 Linux 系统，打开一个命令行，然后创建一个新文件夹，用于挂载 Windows 共享：</p><pre tabindex=0><code>mkdir ~/WindowsShare
</code></pre><p>挂载 Windows 共享是使用 <code>mount.cifs</code> 完成的，它应该被默认安装。使用如下命令临时挂载你的共享文件夹：</p><pre tabindex=0><code>sudo mount.cifs //&lt;address-of-windows-pc&gt;/MySharedFolder ~/WindowsShare/ -o user=&lt;Windows-user&gt;,uid=$UID
</code></pre><p>在这个命令里：</p><ul><li><code>&lt;address-of-windows-pc></code> 是 Windows PC 的地址信息（IP 或主机名）</li><li><code>&lt;Windows-user></code> 是允许访问共享文件夹的用户（见步骤 2）</li></ul><p>系统将提示你输入 Windows 密码。之后，你将能够使用普通 Linux 用户访问 Windows 上的共享文件夹。</p><p>要卸载共享文件夹：</p><pre tabindex=0><code>sudo umount ~/WindowsShare/
</code></pre><p>你还可以在系统启动时挂载 Windows 共享文件夹。按照 <a href=https://timlehr.com/auto-mount-samba-cifs-shares-via-fstab-on-linux/>这些步骤</a> 相应地配置你的系统。</p><h3 id=总结>总结</h3><p>在这里展示了如何建立临时的文件夹共享访问权限，每次重启后都要重新设置，因此修改成永久访问会更便利。我经常在不同的系统之间来回切换，对我而言设置直接文件访问非常实用。</p><hr><p>via: <a href=https://opensource.com/article/21/4/share-files-linux-windows>https://opensource.com/article/21/4/share-files-linux-windows</a></p><p>作者：<a href=https://opensource.com/users/hansic99>Stephan Avenwedde</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/hanszhao80>hanszhao80</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%85%B1%E4%BA%AB/ rel=tag>共享</a></li><li class=tags__item><a class="tags__link btn" href=/tags/samba/ rel=tag>Samba</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>