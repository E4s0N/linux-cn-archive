<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何交互式地创建一个Docker容器 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何交互式地创建一个Docker容器"><meta property="og:description" content="大家好，今天我们来学习如何使用一个docker镜像交互式地创建一个Docker容器。当我们从镜像中启动一个Docker进程，Docker就会获取该镜像及其父镜像，并重复这个过程，直到到达基础镜像。然后联合文件系统（UFS）会在其顶层添加一个读写层。读写层被称之为容器，它包含了一些关于父镜像信息及一些其他的信息，如唯一ID，网络配置和资源限制等。容器是有状态的，其状态可以从 运行态 切换到 退出态。一个处于 运行态的容器包含了在CPU上面运行的进程树，于其它在该主机上运行的进程相隔离，而退出态是指文件系统的状态，并保留了其退出值。你"><meta property="og:type" content="article"><meta property="og:url" content="/article-5484-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-05-21T15:57:45+00:00"><meta property="article:modified_time" content="2015-05-21T15:57:45+00:00"><meta itemprop=name content="如何交互式地创建一个Docker容器"><meta itemprop=description content="大家好，今天我们来学习如何使用一个docker镜像交互式地创建一个Docker容器。当我们从镜像中启动一个Docker进程，Docker就会获取该镜像及其父镜像，并重复这个过程，直到到达基础镜像。然后联合文件系统（UFS）会在其顶层添加一个读写层。读写层被称之为容器，它包含了一些关于父镜像信息及一些其他的信息，如唯一ID，网络配置和资源限制等。容器是有状态的，其状态可以从 运行态 切换到 退出态。一个处于 运行态的容器包含了在CPU上面运行的进程树，于其它在该主机上运行的进程相隔离，而退出态是指文件系统的状态，并保留了其退出值。你"><meta itemprop=datePublished content="2015-05-21T15:57:45+00:00"><meta itemprop=dateModified content="2015-05-21T15:57:45+00:00"><meta itemprop=wordCount content="112"><meta itemprop=keywords content="Docker,容器,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何交互式地创建一个Docker容器</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-05-21T15:57:45Z>May 21, 2015</time></div></div></header><div class="content post__content clearfix"><p>大家好，今天我们来学习如何使用一个docker镜像交互式地创建一个Docker容器。当我们从镜像中启动一个Docker进程，Docker就会获取该镜像及其父镜像，并重复这个过程，直到到达基础镜像。然后联合文件系统（UFS）会在其顶层添加一个读写层。读写层被称之为容器，它包含了一些关于父镜像信息及一些其他的信息，如唯一ID，网络配置和资源限制等。容器是有状态的，其状态可以从 <strong>运行态</strong> 切换到 <strong>退出态</strong>。一个处于 <strong>运行态</strong>的容器包含了在CPU上面运行的进程树，于其它在该主机上运行的进程相隔离，而<strong>退出态</strong>是指文件系统的状态，并保留了其退出值。你可以使用它来启动，停止和重启一个容器。</p><p>Docker技术为IT界带来了巨大的改变，它使得云服务可以用来共享应用和工作流程自动化，使得应用可以用组件快速组合，消除了开发、品质保证、产品环境间的摩擦。在这篇文章中，我们将会建立CentOS环境，然后用Apache网络服务器提供一个网站服务。</p><p><img src=/data/attachment/album/201505/21/155734nowa22j60evvab0j.jpeg alt></p><p>这是一个快速且容易的教程，讨论我们怎样使用交互的shell，以交互的方式来创建一个容器。</p><h3 id=1-运行一个docker实例>1. 运行一个Docker实例</h3><p>Docker首先会尝试从本地取得并运行所需的镜像，如果在本地主机上没有发现，它就会从<a href=https://registry.hub.docker.com/>Docker公共注册中心</a>拉取。这里，我们将会拉取镜像并在 Docker 容器中创建一个fedora实例，并连接到它的 tty 上的bash shell。</p><pre tabindex=0><code># docker run -i -t fedora bash
</code></pre><p><img src=/data/attachment/album/201505/21/155748cd6wkfknvk5xphsk.png alt="Downloading Fedora Base Image"></p><h3 id=2安装apache网络服务器>2.安装Apache网络服务器</h3><p>现在，在我们的Fedora基本镜像实例准备好后，我们将会开始交互式地安装Apache网络服务器，而不是为它创建Dockerfile。为了做到这点，我们需要在终端或者shell运行以下命令。</p><pre tabindex=0><code># yum update
</code></pre><p><img src=/data/attachment/album/201505/21/155749y41zlre1meysa7f4.png alt="Installing httpd"></p><pre tabindex=0><code># yum install httpd
</code></pre><p><img src=/data/attachment/album/201505/21/155749y41zlre1meysa7f4.png alt="Installing httpd"></p><p>退出容器的 tty。</p><pre tabindex=0><code># exit
</code></pre><h3 id=3保存镜像>3.保存镜像</h3><p>现在，我们要去保存在Fedora实例里做的修改。要做到这个，我们首先需要知道实例的容器ID。而为了得到ID，我们又需要运行以下命令（LCTT 译注：在容器外执行该命令）。</p><pre tabindex=0><code># docker ps -a
</code></pre><p><img src=/data/attachment/album/201505/21/155750t2lofzildfwuijnz.png alt="Docker Running Container"></p><p>然后，我们会保存这些改变为一个新的镜像，请运行以下命令。</p><pre tabindex=0><code># docker commit c16378f943fe fedora-httpd
</code></pre><p><img src=/data/attachment/album/201505/21/155750uu5e808zs5dudu5u.png alt="committing fedora httpd"></p><p>这里，修改已经通过使用容器ID保存起来了，镜像名字叫fedora-httpd。为了确认新的镜像是否在运行，我们将运行以下命令。</p><pre tabindex=0><code># docker images
</code></pre><p><img src=/data/attachment/album/201505/21/155750rnkz3mk83kfvkghb.png alt="view docker images"></p><h3 id=4-添加内容到新的镜像>4. 添加内容到新的镜像</h3><p>我们自己新的Fedora Apache镜像正成功的运行，现在我们想添加一些我们网站的网页内容到Apache网络服务器，使得网站能够开箱即用。为做到这点，我们需要创建一个新的Dockerfile，它会处理从复制网页内容到启用80端口的所有操作。要达到这样的目的，我们需要使用我们最喜欢的文本编辑器创建Dockerfile文件，像下面演示的一样。</p><pre tabindex=0><code># nano Dockerfile
</code></pre><p>现在，我们需要添加以下的命令行到文件中。</p><pre tabindex=0><code>FROM fedora-httpd
ADD mysite.tar /tmp/
RUN mv /tmp/mysite/* /var/www/html
EXPOSE 80
ENTRYPOINT [ &#34;/usr/sbin/httpd&#34; ]
CMD [ &#34;-D&#34;, &#34;FOREGROUND&#34; ]
</code></pre><p><img src=/data/attachment/album/201505/21/155751t8p3mx22gnmddx77.png alt="configuring Dockerfile"></p><p>这里，上述的Dockerfile中，放在mysite.tar里的网页内容会自动解压到/tmp/文件夹里。然后，整个站点会被移动到Apache的网页根目录/var/www/html/，命令expose 80会打开80端口，这样网站就能正常访问了。其次，入口点放在了/usr/sbin/https里面，保证Apache服务器能够执行。</p><h3 id=5-构建并运行一个容器>5. 构建并运行一个容器</h3><p>现在，我们要用刚刚创建的Dockerfile创建我们的容器，以便将我们的网站添加到上面。为做到这，我们需要运行以下命令。</p><pre tabindex=0><code># docker build -rm -t mysite .
</code></pre><p><img src=/data/attachment/album/201505/21/155751kr3qjrpejjkepqpz.png alt="Building mysite Image"></p><p>建立好我们的新容器后，我们需要要用下面的命令来运行容器。</p><pre tabindex=0><code># docker run -d -P mysite
</code></pre><p><img src=/data/attachment/album/201505/21/155752bcfkumrecu9zu9zc.png alt="Running mysite Container"></p><h3 id=总结>总结</h3><p>最后，我们已经成功的以交互式的方式建立了一个Docker容器。在本节方法中，我们是直接通过交互的shell命令建立我们的容器和镜像。在建立与配置镜像与容器时，这种方法十分简单且快速。如果你有任何问题，建议和反馈，请在下方的评论框里写下来，以便我们可以提升或者更新我们的文章。谢谢！祝生活快乐 :-)</p><hr><p>via: <a href=http://linoxide.com/linux-how-to/interactively-create-docker-container/>http://linoxide.com/linux-how-to/interactively-create-docker-container/</a></p><p>作者：<a href=http://linoxide.com/author/arunp/>Arun Pyasi</a> 译者：<a href=https://github.com/wi-cuckoo>wi-cuckoo</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/docker/ rel=tag>Docker</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%AE%B9%E5%99%A8/ rel=tag>容器</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>