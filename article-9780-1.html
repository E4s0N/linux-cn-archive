<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Linux 中使用 history 命令 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Linux 中使用 history 命令"><meta property="og:description" content="用强大的 history 命令使你的命令行提示符更有效率。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9780-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-06-26T08:24:46+00:00"><meta property="article:modified_time" content="2018-06-26T08:24:46+00:00"><meta itemprop=name content="如何在 Linux 中使用 history 命令"><meta itemprop=description content="用强大的 history 命令使你的命令行提示符更有效率。"><meta itemprop=datePublished content="2018-06-26T08:24:46+00:00"><meta itemprop=dateModified content="2018-06-26T08:24:46+00:00"><meta itemprop=wordCount content="152"><meta itemprop=keywords content="历史,history,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Linux 中使用 history 命令</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-06-26T08:24:46Z>June 26, 2018</time></div></div></header><div class="content post__content clearfix"><blockquote><p>用强大的 history 命令使你的命令行提示符更有效率。</p></blockquote><p><img src=/data/attachment/album/201806/26/082437dzz94xnhe95huhxh.jpg alt></p><p>随着我在终端中花费越来越多的时间，我感觉就像在不断地寻找新的命令，以使我的日常任务更加高效。GNU 的 <code>history</code> 命令是一个真正改变我日常工作的命令。</p><p>GNU <code>history</code> 命令保存了从该终端会话运行的所有其他命令的列表，然后允许你重放或者重用这些命令，而不用重新输入它们。如果你是一个老玩家，你知道 <code>history</code> 的力量，但对于我们这些半吊子或新手系统管理员来说， <code>history</code> 是一个立竿见影的生产力增益。</p><h3 id=历史-101>历史 101</h3><p>要查看命令历史，请在 Linux 中打开终端程序，然后输入：</p><pre tabindex=0><code>$ history
</code></pre><p>这是我得到的响应：</p><pre tabindex=0><code>1  clear
2  ls -al
3  sudo dnf update -y
4  history
</code></pre><p><code>history</code> 命令显示自开始会话后输入的命令列表。 <code>history</code> 有趣的地方是你可以使用以下命令重放任意一个命令：</p><pre tabindex=0><code>$ !3
</code></pre><p>提示符中的 <code>!3</code> 告诉 shell 重新运行历史列表中第 3 个命令。我还可以输入以下命令来使用：</p><pre tabindex=0><code>linuser@my_linux_box: !sudo dnf
</code></pre><p><code>history</code> 将搜索与你提供的模式相匹配的最后一个命令，并运行它。</p><h3 id=搜索历史>搜索历史</h3><p>你还可以输入 <code>!!</code> 重新运行命令历史中的最后一条命令。而且，通过与<code>grep</code> 配对，你可以搜索与文本模式相匹配的命令，或者通过与 <code>tail</code> 一起使用，你可以找到你最后几条执行的命令。例如：</p><pre tabindex=0><code>$ history | grep dnf
3  sudo dnf update -y
5  history | grep dnf
$ history | tail -n 3
4  history
5  history | grep dnf
6  history | tail -n 3
</code></pre><p>另一种实现这个功能的方法是输入 <code>Ctrl-R</code> 来调用你的命令历史记录的递归搜索。输入后，提示变为：</p><pre tabindex=0><code>(reverse-i-search)`&#39;:
</code></pre><p>现在你可以开始输入一个命令，并且会显示匹配的命令，按回车键执行。</p><h3 id=更改已执行的命令>更改已执行的命令</h3><p><code>history</code> 还允许你使用不同的语法重新运行命令。例如，如果我想改变我以前的命令 <code>history | grep dnf</code> 成 <code>history | grep ssh</code>，我可以在提示符下执行以下命令：</p><pre tabindex=0><code>$ ^dnf^ssh^
</code></pre><p><code>history</code> 将重新运行该命令，但用 <code>ssh</code> 替换 <code>dnf</code>，并执行它。</p><h3 id=删除历史>删除历史</h3><p>有时你想要删除一些或全部的历史记录。如果要删除特定命令，请输入 <code>history -d &lt;行号></code>。要清空历史记录，请执行 <code>history -c</code>。</p><p>历史文件存储在一个你可以修改的文件中。bash shell 用户可以在他们的家目录下找到 <code>.bash_history</code>。</p><h3 id=下一步>下一步</h3><p>你可以使用 <code>history</code> 做许多其他事情：</p><ul><li>将历史缓冲区设置为一定数量</li><li>记录历史中每行的日期和时间</li><li>防止某些命令被记录在历史记录中</li></ul><p>有关 <code>history</code> 命令的更多信息和其他有趣的事情，请参考 <a href=https://www.gnu.org/software/bash/manual/>GNU Bash 手册</a>。</p><hr><p>via: <a href=https://opensource.com/article/18/6/history-command>https://opensource.com/article/18/6/history-command</a></p><p>作者：<a href=https://opensource.com/users/smorris12>Steve Morris</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%8E%86%E5%8F%B2/ rel=tag>历史</a></li><li class=tags__item><a class="tags__link btn" href=/tags/history/ rel=tag>history</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>