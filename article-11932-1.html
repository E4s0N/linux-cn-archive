<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 Emacs 发送电子邮件和检查日历 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="使用 Emacs 发送电子邮件和检查日历"><meta property="og:description" content="在 2020 年用开源实现更高生产力的二十种方式的第十八篇文章中，使用 Emacs 文本编辑器管理电子邮件和查看日程安排。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11932-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-26T10:37:00+00:00"><meta property="article:modified_time" content="2020-02-26T10:37:00+00:00"><meta itemprop=name content="使用 Emacs 发送电子邮件和检查日历"><meta itemprop=description content="在 2020 年用开源实现更高生产力的二十种方式的第十八篇文章中，使用 Emacs 文本编辑器管理电子邮件和查看日程安排。"><meta itemprop=datePublished content="2020-02-26T10:37:00+00:00"><meta itemprop=dateModified content="2020-02-26T10:37:00+00:00"><meta itemprop=wordCount content="310"><meta itemprop=keywords content="Emacs,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>使用 Emacs 发送电子邮件和检查日历</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-02-26T10:37:00Z>February 26, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>在 2020 年用开源实现更高生产力的二十种方式的第十八篇文章中，使用 Emacs 文本编辑器管理电子邮件和查看日程安排。</p></blockquote><p><img src=/data/attachment/album/202002/26/103647mnee75vxhcc00z06.jpg alt></p><p>去年，我给你们带来了 2019 年的 19 天新生产力工具系列。今年，我将采取一种不同的方式：建立一个新的环境，让你使用已用或未用的工具来在新的一年里变得更有效率。</p><h3 id=使用-emacs-做几乎所有的事情第-1-部分>使用 Emacs 做（几乎）所有的事情，第 1 部分</h3><p>两天前，我曾经说过我经常使用 <a href=https://www.vim.org/>Vim</a> 和 <a href=https://www.gnu.org/software/emacs/>Emacs</a>，在本系列的 <a href=/article-11908-1.html>16</a> 和 <a href=/article-11912-1.html>17</a> 天，我讲解了如何在 Vim 中做几乎所有的事情。现在，Emacs 的时间到了！</p><p><img src=/data/attachment/album/202002/26/103814gf7quq3sm2s8fl73.png alt="Emacs 中的邮件和日历" title="Mail and calendar in Emacs"></p><p>在深入之前，我需要说明两件事。首先，我这里使用默认的 Emacs 配置，而不是我之前<a href=https://opensource.com/article/19/12/spacemacs>写过</a>的 <a href=https://www.spacemacs.org/>Spacemacs</a>。为什么呢？因为这样一来我使用的就是默认快捷键，从而使你可以参考文档，而不必将“原生的 Emacs” 转换为 Spacemacs。第二，在本系列文章中我没有对 Org 模式进行任何设置。Org 模式本身几乎可以自成一个完整的系列，它非常强大，但是设置可能非常复杂。</p><h4 id=配置-emacs>配置 Emacs</h4><p>配置 Emacs 比配置 Vim 稍微复杂一些，但以我之见，从长远来看，这样做是值得的。首先我们创建一个配置文件，并在 Emacs 中打开它：</p><pre tabindex=0><code>mkdir ~/.emacs.d
emacs ~/.emacs.d/init.el
</code></pre><p>接下来，向内置的包管理器添加一些额外的包源。在 <code>init.el</code> 中添加以下内容：</p><pre tabindex=0><code>(package-initialize)
(add-to-list &#39;package-archives &#39;(&#34;melpa&#34; . &#34;&lt;http://melpa.org/packages/&gt;&#34;))
(add-to-list &#39;package-archives &#39;(&#34;org&#34; . &#34;&lt;http://orgmode.org/elpa/&gt;&#34;) t)
(add-to-list &#39;package-archives &#39;(&#34;gnu&#34; . &#34;&lt;https://elpa.gnu.org/packages/&gt;&#34;))
(package-refresh-contents)
</code></pre><p>使用 <code>Ctrl+x Ctrl+s</code> 保存文件，然后按下 <code>Ctrl+x Ctrl+c</code> 退出，再重启 Emacs。Emacs 会在启动时下载所有的插件包列表，之后你就可以使用内置的包管理器安装插件了。输入 <code>Meta+x</code> 会弹出命令提示符（大多数键盘上 <code>Meta</code> 键就是的 <code>Alt</code> 键，而在 MacOS 上则是 <code>Option</code>）。在命令提示符下输入 <code>package-list-packages</code> 就会显示可以安装的包列表。遍历该列表并使用 <code>i</code> 键选择以下包：</p><pre tabindex=0><code>bbdb
bbdb-vcard
calfw
calfw-ical
notmuch
</code></pre><p>选好软件包后按 <code>x</code> 安装它们。根据你的网络连接情况，这可能需要一段时间。你也许会看到一些编译错误，但是可以忽略它们。安装完成后，使用组合键 <code>Ctrl+x Ctrl+f</code> 打开 <code>~/.emacs.d/init.el</code>，并在 <code>(package-refresh-packages)</code> 之后、 <code>(custom-set-variables</code> 之前添加以下行到文件中。 <code>(custom-set-variables</code> 行由 Emacs 内部维护，你永远不应该修改它之后的任何内容。以 <code>;;</code> 开头的行则是注释。</p><pre tabindex=0><code>;; Set up bbdb
(require &#39;bbdb)
(bbdb-initialize &#39;message)
(bbdb-insinuate-message)
(add-hook &#39;message-setup-hook &#39;bbdb-insinuate-mail)
;; set up calendar
(require &#39;calfw)
(require &#39;calfw-ical)
;; Set this to the URL of your calendar. Google users will use
;; the Secret Address in iCalendar Format from the calendar settings
(cfw:open-ical-calendar &#34;&lt;https://path/to/my/ics/file.ics&gt;&#34;)
;; Set up notmuch
(require &#39;notmuch)
;; set up mail sending using sendmail
(setq send-mail-function (quote sendmail-send-it))
(setq user-mail-address &#34;[myemail@mydomain.com][9]&#34;
      user-full-name &#34;My Name&#34;)
</code></pre><p>现在，你已经准备好使用自己的配置启动 Emacs 了！保存 <code>init.el</code> 文件（<code>Ctrl+x Ctrl+s</code>），退出 Emacs（<code>Ctrl+x Ctrl+c</code>），然后重启之。这次重启要多花些时间。</p><h4 id=使用-notmuch-在-emacs-中读写电子邮件>使用 Notmuch 在 Emacs 中读写电子邮件</h4><p>一旦你看到了 Emacs 启动屏幕，你就可以使用 <a href=https://notmuchmail.org/>Notmuch</a> 来阅读电子邮件了。键入 <code>Meta+x notmuch</code>，你将看到 notmuch 的 Emacs 界面。</p><p><img src=/data/attachment/album/202002/26/103829rz5jk460g9j57wlg.png alt="使用 notmuch 阅读邮件" title="Reading mail with Notmuch"></p><p>所有加粗的项目都是指向电子邮件视图的链接。你可以通过点击鼠标或者使用 <code>tab</code> 键在它们之间跳转并按回车来访问它们。你可以使用搜索栏来搜索 Notmuch 的数据库，语法与 Notmuch 命令行上的<a href=/article-11807-1.html>语法</a> 相同。如果你愿意，还可以使用 <code>[save]</code> 按钮保存搜索以便未来使用，这些搜索会被添加到屏幕顶部的列表中。如果你进入一个链接就会看到一个相关电子邮件的列表。你可以使用箭头键在列表中导航，并在要读取的消息上按回车。按 <code>r</code> 可以回复一条消息，<code>f</code> 转发该消息，<code>q</code> 退出当前屏幕。</p><p>你可以通过键入 <code>Meta+x compose-mail</code> 来编写新消息。撰写、回复和转发都将打开编写邮件的界面。写完邮件后，按 <code>Ctrl+c Ctrl+c</code> 发送。如果你决定不发送它，按 <code>Ctrl+c Ctrl+k</code> 关闭消息撰写缓冲区（窗口）。</p><h4 id=使用-bbdb-在-emacs-中自动补完电子邮件地址>使用 BBDB 在 Emacs 中自动补完电子邮件地址</h4><p><img src=/data/attachment/album/202002/26/103853c52a4iqnnnerr27a.png alt="在消息中使用 BBDB 地址" title="Composing a message with BBDB addressing"></p><p>那么通讯录怎么办？这就是 <a href=https://www.jwz.org/bbdb/>BBDB</a> 发挥作用的地方。但首先我们需要从 <a href=/article-11834-1.html>abook</a> 导入所有地址，方法是打开命令行并运行以下导出命令：</p><pre tabindex=0><code>abook --convert --outformat vcard --outfile ~/all-my-addresses.vcf --infile ~/.abook/addresses
</code></pre><p>Emacs 启动后，运行 <code>Meta+x bbdb-vcard-import-file</code>。它将提示你输入要导入的文件名，即 <code>~/all-my-address.vcf</code>。导入完成后，在编写消息时，可以开始输入名称并使用 <code>Tab</code> 搜索和自动完成 “to” 字段的内容。BBDB 还会打开一个联系人缓冲区，以便你确保它是正确的。</p><p>既然在 <a href=/article-11812-1.html>vdirsyncer</a> 中已经为每个地址都生成了对应的 .vcf 文件了，为什么我们还要这样做呢？如果你像我一样，有许多地址，一次处理一个地址是很麻烦的。这样做，你就可以把所有的东西都放在 abook 里，做成一个大文件。</p><h4 id=使用-calfw-在-emacs-中浏览日历>使用 calfw 在 Emacs 中浏览日历</h4><p><img src=/data/attachment/album/202002/26/103952x9n0pun5gg5ginn5.png alt="calfw 日历 " title="calfw calendar"></p><p>最后，你可以使用 Emacs 查看日历。在上面的配置中，你安装了 <a href=https://github.com/kiwanami/emacs-calfw>calfw</a> 包，并添加了一些行来告诉它在哪里可以找到要加载的日历。Calfw 是 “ Emacs 日历框架 Calendar Framework for Emacs ”的简称，它支持多种日历格式。我使用的是谷歌日历，这也是我放在配置中的链接。日历将在启动时自动加载，你可以通过 <code>Ctrl+x+b</code> 命令切换到 cfw-calendar 缓冲区来查看日历。</p><p>Calfw 提供日、周、双周和月视图。你可以在日历顶部选择视图，并使用箭头键导航日历。不幸的是，calfw 只能查看日历，所以你仍然需要使用 <a href=https://khal.readthedocs.io/en/v0.9.2/index.html>khal</a> 之类的工具或通过 web 界面来添加、删除和修改事件。</p><p>这就是 Emacs 中的邮件、日历和邮件地址。明天我会展示更多。</p><hr><p>via: <a href=https://opensource.com/article/20/1/emacs-mail-calendar>https://opensource.com/article/20/1/emacs-mail-calendar</a></p><p>作者：<a href=https://opensource.com/users/ksonney>Kevin Sonney</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/lujun9972>lujun9972</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/emacs/ rel=tag>Emacs</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>