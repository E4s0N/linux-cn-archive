<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>用 coredumpctl 更好地记录 bug - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="用 coredumpctl 更好地记录 bug"><meta property="og:description" content="通常开发者要求提供 “回溯（backtrace）” 形式的数据，以显示导致崩溃的指令流。开发人员可以使用它来修复 bug 以改进系统。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9089-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-11-28T23:04:18+00:00"><meta property="article:modified_time" content="2017-11-28T23:04:18+00:00"><meta itemprop=name content="用 coredumpctl 更好地记录 bug"><meta itemprop=description content="通常开发者要求提供 “回溯（backtrace）” 形式的数据，以显示导致崩溃的指令流。开发人员可以使用它来修复 bug 以改进系统。"><meta itemprop=datePublished content="2017-11-28T23:04:18+00:00"><meta itemprop=dateModified content="2017-11-28T23:04:18+00:00"><meta itemprop=wordCount content="146"><meta itemprop=keywords content="coredump,调试,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>用 coredumpctl 更好地记录 bug</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-11-28T23:04:18Z>November 28, 2017</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/201711/28/230423v9yp293hhfafy0vf.jpg alt></p><p>一个不幸的事实是，所有的软件都有 bug，一些 bug 会导致系统崩溃。当它出现的时候，它经常会在磁盘上留下一个被称为“ 核心转储 core dump ”的数据文件。该文件包含有关系统崩溃时的相关数据，可能有助于确定发生崩溃的原因。通常开发者要求提供 “ 回溯 backtrace ” 形式的数据，以显示导致崩溃的指令流。开发人员可以使用它来修复 bug 以改进系统。如果系统发生了崩溃，以下是如何轻松生成 回溯 backtrace 的方法。</p><h3 id=从使用-coredumpctl-开始>从使用 coredumpctl 开始</h3><p>大多数 Fedora 系统使用<a href=https://github.com/abrt/abrt>自动错误报告工具（ABRT）</a>来自动捕获崩溃文件并记录 bug。但是，如果你禁用了此服务或删除了该软件包，则此方法可能会有所帮助。</p><p>如果你遇到系统崩溃，请首先确保你运行的是最新的软件。更新通常包含修复程序，这些更新通常含有已经发现的会导致严重错误和崩溃的错误的修复。当你更新后，请尝试重现导致错误的情况。</p><p>如果崩溃仍然发生，或者你已经在运行最新的软件，那么可以使用有用的 <code>coredumpctl</code> 工具。此程序可帮助查找和处理崩溃。要查看系统上所有核心转储列表，请运行以下命令：</p><pre tabindex=0><code>coredumpctl list
</code></pre><p>如果你看到比预期长的列表，请不要感到惊讶。有时系统组件在后台默默地崩溃，并自行恢复。快速查找今天的转储的简单方法是使用 <code>-since</code> 选项：</p><pre tabindex=0><code>coredumpctl list --since=today
</code></pre><p>“PID” 列包含用于标识转储的进程 ID。请注意这个数字，因为你会之后再用到它。或者，如果你不想记住它，使用下面的命令将它赋值给一个变量：</p><pre tabindex=0><code>MYPID=&lt;PID&gt;
</code></pre><p>要查看关于核心转储的信息，请使用此命令（使用 <code>$MYPID</code> 变量或替换 PID 编号）：</p><pre tabindex=0><code>coredumpctl info $MYPID
</code></pre><h3 id=安装-debuginfo-包>安装 debuginfo 包</h3><p>在核心转储中的数据以及原始代码中的指令之间调试符号转义。这个符号数据可能相当大。与大多数用户运行在 Fedora 系统上的软件包不同，符号以 “debuginfo” 软件包的形式安装。要确定你必须安装哪些 debuginfo 包，请先运行以下命令：</p><pre tabindex=0><code>coredumpctl gdb $MYPID
</code></pre><p>这可能会在屏幕上显示大量信息。最后一行可能会告诉你使用 <code>dnf</code> 安装更多的 debuginfo 软件包。<a href=https://fedoramagazine.org/howto-use-sudo/>用 sudo</a> 运行该命令以安装：</p><pre tabindex=0><code>sudo dnf debuginfo-install &lt;packages...&gt;
</code></pre><p>然后再次尝试 <code>coredumpctl gdb $MYPID</code> 命令。<strong>你可能需要重复执行此操作</strong>，因为其他符号会在回溯中展开。</p><h3 id=捕获回溯>捕获回溯</h3><p>在调试器中运行以下命令以记录信息：</p><pre tabindex=0><code>set logging file mybacktrace.txt
set logging on
</code></pre><p>你可能会发现关闭分页有帮助。对于长的回溯，这可以节省时间。</p><pre tabindex=0><code>set pagination off
</code></pre><p>现在运行回溯：</p><pre tabindex=0><code>thread apply all bt full
</code></pre><p>现在你可以输入 <code>quit</code> 来退出调试器。<code>mybacktrace.txt</code> 包含可附加到 bug 或问题的追踪信息。或者，如果你正在与某人实时合作，则可以将文本上传到 pastebin。无论哪种方式，你现在可以向开发人员提供更多的帮助来解决问题。</p><hr><p>作者简介：</p><p>Paul W. Frields</p><p>Paul W. Frields 自 1997 年以来一直是 Linux 用户和爱好者，并于 2003 年在 Fedora 发布不久后加入 Fedora。他是 Fedora 项目委员会的创始成员之一，从事文档、网站发布、宣传、工具链开发和维护软件。他于 2008 年 2 月至 2010 年 7 月加入 Red Hat，担任 Fedora 项目负责人，现任红帽公司工程部经理。他目前和妻子和两个孩子住在弗吉尼亚州。</p><hr><p>via: <a href=https://fedoramagazine.org/file-better-bugs-coredumpctl/>https://fedoramagazine.org/file-better-bugs-coredumpctl/</a></p><p>作者：<a href=https://fedoramagazine.org/author/pfrields/>Paul W. Frields</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/coredump/ rel=tag>coredump</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E8%B0%83%E8%AF%95/ rel=tag>调试</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>