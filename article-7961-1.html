<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 Linux 上检测硬盘上的坏道和坏块 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 Linux 上检测硬盘上的坏道和坏块"><meta property="og:description" content="我们通过几个必要的步骤，使用特定的磁盘扫描工具让你能够判断 Linux 磁盘或闪存是否存在坏道。"><meta property="og:type" content="article"><meta property="og:url" content="/article-7961-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-11-16T16:15:00+00:00"><meta property="article:modified_time" content="2016-11-16T16:15:00+00:00"><meta itemprop=name content="在 Linux 上检测硬盘上的坏道和坏块"><meta itemprop=description content="我们通过几个必要的步骤，使用特定的磁盘扫描工具让你能够判断 Linux 磁盘或闪存是否存在坏道。"><meta itemprop=datePublished content="2016-11-16T16:15:00+00:00"><meta itemprop=dateModified content="2016-11-16T16:15:00+00:00"><meta itemprop=wordCount content="172"><meta itemprop=keywords content="磁盘,smartmontools,e2fsck,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 Linux 上检测硬盘上的坏道和坏块</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-11-16T16:15:00Z>November 16, 2016</time></div></div></header><div class="content post__content clearfix"><p>让我们从坏道和坏块的定义开始说起，它们是一块磁盘或闪存上不再能够被读写的部分，一般是由于磁盘表面特定的<a href=http://www.tecmint.com/defragment-linux-system-partitions-and-directories/>物理损坏</a>或闪存晶体管失效导致的。</p><p>随着坏道的继续积累，它们会对你的磁盘或闪存容量产生令人不快或破坏性的影响，甚至可能会导致硬件失效。</p><p>同时还需要注意的是坏块的存在警示你应该开始考虑买块新磁盘了，或者简单地将坏块标记为不可用。</p><p>因此，在这篇文章中，我们通过几个必要的步骤，使用特定的<a href=http://www.tecmint.com/ncdu-a-ncurses-based-disk-usage-analyzer-and-tracker/>磁盘扫描工具</a>让你能够判断 Linux 磁盘或闪存是否存在坏道。</p><p><img src=/data/attachment/album/201611/16/161511pz1odz8o1z1fmh8d.jpg alt></p><p>以下就是步骤：</p><h3 id=在-linux-上使用坏块工具检查坏道>在 Linux 上使用坏块工具检查坏道</h3><p>坏块工具可以让用户扫描设备检查坏道或坏块。设备可以是一个磁盘或外置磁盘，由一个如 <code>/dev/sdc</code> 这样的文件代表。</p><p>首先，通过超级用户权限执行 <a href=http://www.tecmint.com/fdisk-commands-to-manage-linux-disk-partitions/>fdisk 命令</a>来显示你的所有磁盘或闪存的信息以及它们的分区信息：</p><pre tabindex=0><code>$ sudo fdisk -l&lt;br&gt;
</code></pre><p><img src=/data/attachment/album/201611/16/161522zvofgpg5atqaz66q.png alt="列出 Linux 文件系统分区"></p><p><em>列出 Linux 文件系统分区</em></p><p>然后用如下命令检查你的 Linux 硬盘上的坏道/坏块：</p><pre tabindex=0><code>$ sudo badblocks -v /dev/sda10 &gt; badsectors.txt
</code></pre><p><img src=/data/attachment/album/201611/16/161523ae1f9efev9zmpa44.png alt="在 Linux 上扫描硬盘坏道"></p><p><em>在 Linux 上扫描硬盘坏道</em></p><p>上面的命令中，badblocks 扫描设备 <code>/dev/sda10</code>（记得指定你的实际设备），<code>-v</code> 选项让它显示操作的详情。另外，这里使用了输出重定向将操作结果重定向到了文件 <code>badsectors.txt</code>。</p><p>如果你在你的磁盘上发现任何坏道，卸载磁盘并像下面这样让系统不要将数据写入回报的扇区中。</p><p>你需要执行 <code>e2fsck</code>（针对 ext2/ext3/ext4 文件系统）或 <code>fsck</code> 命令，命令中还需要用到 <code>badsectors.txt</code> 文件和设备文件。</p><p><code>-l</code> 选项告诉命令将在指定的文件 <code>badsectors.txt</code> 中列出的扇区号码加入坏块列表。</p><pre tabindex=0><code>------------ 针对 for ext2/ext3/ext4 文件系统 ------------
$ sudo e2fsck -l badsectors.txt /dev/sda10

或

------------ 针对其它文件系统 ------------
$ sudo fsck -l badsectors.txt /dev/sda10
</code></pre><h3 id=在-linux-上使用-smartmontools-工具扫描坏道>在 Linux 上使用 Smartmontools 工具扫描坏道</h3><p>这个方法对带有 S.M.A.R.T（ 自我监控分析报告技术 （ Self-Monitoring, Analysis and Reporting Technology ） ）系统的现代磁盘（ATA/SATA 和 SCSI/SAS 硬盘以及固态硬盘）更加的可靠和高效。S.M.A.R.T 系统能够帮助检测，报告，以及可能记录它们的健康状况，这样你就可以找出任何可能出现的硬件失效。</p><p>你可以使用以下命令安装 <code>smartmontools</code>：</p><pre tabindex=0><code>------------ 在基于 Debian/Ubuntu 的系统上 ------------
$ sudo apt-get install smartmontools

------------ 在基于 RHEL/CentOS 的系统上 ------------
$ sudo yum install smartmontools
</code></pre><p>安装完成之后，使用 <code>smartctl</code> 控制磁盘集成的 S.M.A.R.T 系统。你可以这样查看它的手册或帮助：</p><pre tabindex=0><code>$ man smartctl
$ smartctl -h
</code></pre><p>然后执行 <code>smartctrl</code> 命令并在命令中指定你的设备作为参数，以下命令包含了参数 <code>-H</code> 或 <code>--health</code> 以显示 SMART 整体健康自我评估测试结果。</p><pre tabindex=0><code>$ sudo smartctl -H /dev/sda10
</code></pre><p><img src=/data/attachment/album/201611/16/161523ycc1n841ncat1zz2.png alt="检查 Linux 硬盘健康"></p><p><em>检查 Linux 硬盘健康</em></p><p>上面的结果指出你的硬盘很健康，近期内不大可能发生硬件失效。</p><p>要获取磁盘信息总览，使用 <code>-a</code> 或 <code>--all</code> 选项来显示关于磁盘所有的 SMART 信息，<code>-x</code> 或 <code>--xall</code> 来显示所有关于磁盘的 SMART 信息以及非 SMART 信息。</p><p>在这个教程中，我们涉及了有关<a href=http://www.tecmint.com/defragment-linux-system-partitions-and-directories/>磁盘健康诊断</a>的重要话题，你可以下面的反馈区来分享你的想法或提问，并且记得多回来看看。</p><hr><p>via: <a href=http://www.tecmint.com/check-linux-hard-disk-bad-sectors-bad-blocks/>http://www.tecmint.com/check-linux-hard-disk-bad-sectors-bad-blocks/</a></p><p>作者：<a href=http://www.tecmint.com/author/aaronkili/>Aaron Kili</a> 译者：<a href=https://github.com/alim0x>alim0x</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E7%A3%81%E7%9B%98/ rel=tag>磁盘</a></li><li class=tags__item><a class="tags__link btn" href=/tags/smartmontools/ rel=tag>smartmontools</a></li><li class=tags__item><a class="tags__link btn" href=/tags/e2fsck/ rel=tag>e2fsck</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>