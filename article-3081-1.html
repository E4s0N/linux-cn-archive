<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>戴文的Linux内核专题：22 配置内核 (18) - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="戴文的Linux内核专题：22 配置内核 (18)"><meta property="og:description" content="你好！准备好阅读下一篇文章了么？在本篇中，我们将会讨论辅助显示。辅助显示是一些小的LCD屏幕；大多数小于或等于128x64。接着，我们会讨论用户空间IO驱动，一些虚拟驱动，Hyper-V，开发中驱动，IOMMU，和其他一些内核特性。 第一个配置辅助显示的驱动是&#34;KS0108 LCD Controller&#34;。KS0108 LCD Controller是由三星制造的图形控制器。 下面可以设置LCD并口地址(Parallel port where the LCD is connected)。第一个并口地址是0x378，下一个是0x278，第三个是0x3BC。这些不是地址唯一的选择。大多数人不需要改变这个。shell命令&#34;cat /proc/iop"><meta property="og:type" content="article"><meta property="og:url" content="/article-3081-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-05-24T21:13:00+00:00"><meta property="article:modified_time" content="2014-05-24T21:13:00+00:00"><meta itemprop=name content="戴文的Linux内核专题：22 配置内核 (18)"><meta itemprop=description content="你好！准备好阅读下一篇文章了么？在本篇中，我们将会讨论辅助显示。辅助显示是一些小的LCD屏幕；大多数小于或等于128x64。接着，我们会讨论用户空间IO驱动，一些虚拟驱动，Hyper-V，开发中驱动，IOMMU，和其他一些内核特性。 第一个配置辅助显示的驱动是&#34;KS0108 LCD Controller&#34;。KS0108 LCD Controller是由三星制造的图形控制器。 下面可以设置LCD并口地址(Parallel port where the LCD is connected)。第一个并口地址是0x378，下一个是0x278，第三个是0x3BC。这些不是地址唯一的选择。大多数人不需要改变这个。shell命令&#34;cat /proc/iop"><meta itemprop=datePublished content="2014-05-24T21:13:00+00:00"><meta itemprop=dateModified content="2014-05-24T21:13:00+00:00"><meta itemprop=wordCount content="221"><meta itemprop=keywords content="戴文,Linux,内核,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>戴文的Linux内核专题：22 配置内核 (18)</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2014-05-24T21:13:00Z>May 24, 2014</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201405/24/212323zqp97m90x474xxcq.jpg alt></p><p>你好！准备好阅读下一篇文章了么？在本篇中，我们将会讨论辅助显示。辅助显示是一些小的LCD屏幕；大多数小于或等于128x64。接着，我们会讨论用户空间IO驱动，一些虚拟驱动，Hyper-V，开发中驱动，IOMMU，和其他一些内核特性。</p><p>第一个配置辅助显示的驱动是"KS0108 LCD Controller"。KS0108 LCD Controller是由三星制造的图形控制器。</p><p>下面可以设置LCD并口地址(Parallel port where the LCD is connected)。第一个并口地址是0x378，下一个是0x278，第三个是0x3BC。这些不是地址唯一的选择。大多数人不需要改变这个。shell命令"cat /proc/ioports"会列出可用的并口和地址。</p><p>内核可以设置KS0108 LCD 控制器的写入延时到并口(Delay between each control writing (microseconds))。默认的值大部分是正确的，因此一般不需要更改。</p><p>&ldquo;CFAG12864B LCD"屏幕是一块128x64，双色LCD屏幕。这块屏幕依赖于KS0108 LCD控制器。</p><p>可以改变这些LCD屏幕的刷新率(Refresh rate (hertz))。通常上，更高的刷新率会导致更多的CPU活动。这意味着一个缓慢的系统需要一个更低的刷新率。</p><p>设置完辅助显示后，接着设置"Userspace I/O drivers&rdquo;。用户空间系统允许用户的应用和进程访问内核中断和内存地址。启用了它，一些驱动可以放在用户空间。</p><p>&ldquo;generic Hilscher CIF Card driver"用于Profibus卡和Hilscher CIF卡。</p><p>&ldquo;Userspace I/O platform driver"在用户空间创建通用驱动系统。</p><p>下一个驱动和上面的相同，但是增加IRQ处理(Userspace I/O platform driver with generic IRQ handling)。</p><p>下面的驱动又像前面的一个，但是增加了动态内存支持(Userspace platform driver with generic irq and dynamic memory)。</p><p>下面，是一些供应商/设备特性的驱动。</p><p>接着是一些通用PCI/PCIe卡驱动(Generic driver for PCI 2.3 and PCI Express cards)。</p><p>下面的驱动用于"VFIO support for PCI devices&rdquo;。VFIO代表Virtual Function Input/Output(虚拟功能输入/输出)。VFIO允许设备直接以安全方式访问用户空间。</p><p>&ldquo;VFIO PCI support for VGA devices"允许VGA通过VFIO被PCI支持。</p><p>接下来是virtio驱动。virtio是一个IO虚拟化平台。这个虚拟软件用于操作系统虚拟化。这在Linux系统上的虚拟机上运行一个操作系统时需要。</p><p>我们第一个可以配置的virtio驱动是"PCI driver for virtio devices&rdquo;。这允许虚拟访问PCI</p><p>&ldquo;Virtio balloon driver"允许虚拟系统的内存根据需要扩展或减少。通常上，没有人希望在需要内存的时候，虚拟系统保留它可能不会使用的内存。</p><p>下面的驱动允许内存映射到virtio设备(Platform bus driver for memory mapped virtio devices)。</p><p>如果Linux内核需要运行在微软的Hyper-V系统上，那么启用这个驱动(Microsoft Hyper-V client drivers)。这允许Linux能够成为Hyper的访客/客户端系统。</p><p><img src=http://www.linux.org/attachments/kernel_18-png.617/ alt></p><p>下面，我们会配置处于开发阶段的驱动。这些驱动正在开发当中，可能会变化很快，或者还没到Linux内核的质量标准。这个分类中的驱动只有Android驱动(在内核3.9.4中)。是的，Andorid使用Linux内核，这使得Andorid变成了一个Linux系统。然而，这仍然有争议。如果内核是用于Android，那么最好启用所有的驱动。</p><p>&ldquo;Android Binder IPC Driver"提供了对于Binder的支持，它允许Andorid系统进程间相互通信。</p><p>下面可以启用ashmen驱动(Enable the Anonymous Shared Memory Subsystem)。Ashmem代表"Anonymous SHared MEMory&rdquo;(虚拟内存共享)或者"Android SHared MEMory&rdquo;(Andorid共享内存)。</p><p>&ldquo;Android log driver"提供了完整的Andorid日志系统。</p><p>&ldquo;Timed output class driver&rdquo; 和 &ldquo;Android timed gpio driver"允许Andorid系统操作GIP引脚并在超时后取消操作。</p><p>&ldquo;Android Low Memory Killer"会在需要更多内存关闭进程。这个特性会杀死不再使用或活跃的任务。</p><p>&ldquo;Android alarm driver"使内核在设定的间隔后唤醒。</p><p>在配置完开发阶段的驱动后，下面的驱动用于X86平台。这些驱动是 X86 (32-bit)的供应商/设备特定硬件。</p><p>下一个驱动是"Mailbox Hardware Support&rdquo;。这个框架控制邮箱队列和硬件邮箱系统的中断信号。</p><p>&ldquo;IOMMU Hardware Support"链接内存到能够使用DMA的设备上。IOMMU增强了DMA。IOMMU映射地址并阻止故障设备访问内存。IOMMU同样允许硬件访问比没有IOMMU更多内存。</p><p>&ldquo;AMD IOMMU support"提供了对AMD设备更好的IOMMU支持。</p><p>对于AMD IOMMU支持存在调试特性(Export AMD IOMMU statistics to debugfs)。</p><p>存在一个对于AMD硬件的更新版本的IOMMU驱动(AMD IOMMU Version 2 driver)。</p><p>Linux内核同样支持对Intel设备的IOMMU驱动支持(Support for Intel IOMMU using DMA Remapping Devices)。</p><p>一些设备可能会接受不同的电压和时钟频率。这个驱动允许操作系统控制设备的电压输出和时钟频率(Generic Dynamic Voltage and Frequency Scaling (DVFS) support)。启用了这个驱动，可以启用下面的那些对于电源/性能管理特性。</p><p>&ldquo;Simple Ondemand"就像上面的，但是只会基于设备活动改变时钟频率。通常上，更多的活动意味着设备需要更快的时钟速率来使用更多的资源需求。</p><p>&ldquo;Performance"允许系统设置最高支持的时钟速度以满足最好的性能。这会增加电源消耗。</p><p>&ldquo;Powersave"会设置时钟频率到最低以节约电源。</p><p>&ldquo;Userspace"允许用户空间设置时钟频率。</p><p>&ldquo;External Connector Class (extcon) support"使得用户空间可以监视外部连接器如USB和AC口。这允许应用了解是否插入了线缆。用户几乎都希望启用这个。如果任何人由于某个合理的理由禁用了它，请告诉我们为什么这么做。</p><p>&ldquo;GPIO extcon support"驱动就像上面的驱动，但是它只对于GPIO管脚。</p><p>接下来是不同的供货商/设备特定的内存控制器(Memory Controller drivers)。内存芯片控制器可能是独立的设备或者内置在内存芯片上。这些控制器管理这输入和输出的数据流。</p><p>&ldquo;Industrial I/O support"驱动提供了标准的传感器接口而不管总线的类型(像PCIe、spi、GPIO等等)。IIO是"Industrial I/O support&rdquo;(工业IO)的通用缩写。</p><p>Linux内核提供了大量不同的加速器、放大器模数转换器、惯性测量单元、光敏传感器、磁场传感器和其他许多传感器和转换器的支持。</p><p>&ldquo;Intel Non-Transparent Bridge support"驱动支持连接到系统的PCIe硬件桥。所有到映射内存的写入会镜像到两个系统中。</p><p>&ldquo;VME bridge support"和上面的相同除了桥使用的是VME，这是一个不同的总线标准。</p><p>&ldquo;Pulse-Width Modulation (PWM) Support"通过调节从这些设备收到的平均功率调节背光灯和风扇速度。</p><p>&ldquo;IndustryPack bus support"提供了对IndustryPack总线标准的支持。</p><p>下一篇文章，我们会继续配置固件驱动。谢谢!</p><hr><p>via: <a href=http://www.linux.org/threads/the-linux-kernel-configuring-the-kernel-part-18.4896/>http://www.linux.org/threads/the-linux-kernel-configuring-the-kernel-part-18.4896/</a></p><p>译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%88%B4%E6%96%87/ rel=tag>戴文</a></li><li class=tags__item><a class="tags__link btn" href=/tags/linux/ rel=tag>Linux</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%86%85%E6%A0%B8/ rel=tag>内核</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>