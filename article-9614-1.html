<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何使用 npm 管理 NodeJS 包 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何使用 npm 管理 NodeJS 包"><meta property="og:description" content="在本指南中，我将解释使用 npm 基础知识，例如安装包（本地和全局）、安装特定版本的包、更新、删除和管理 NodeJS 包等等。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9614-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-05-07T10:15:54+00:00"><meta property="article:modified_time" content="2018-05-07T10:15:54+00:00"><meta itemprop=name content="如何使用 npm 管理 NodeJS 包"><meta itemprop=description content="在本指南中，我将解释使用 npm 基础知识，例如安装包（本地和全局）、安装特定版本的包、更新、删除和管理 NodeJS 包等等。"><meta itemprop=datePublished content="2018-05-07T10:15:54+00:00"><meta itemprop=dateModified content="2018-05-07T10:15:54+00:00"><meta itemprop=wordCount content="661"><meta itemprop=keywords content="npm,nodejs,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何使用 npm 管理 NodeJS 包</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-05-07T10:15:54Z>May 07, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201805/07/101556gyaxm33zchx3bax7.png alt></p><p>前一段时间，我们发布了一个<a href=https://docs.npmjs.com/getting-started/>使用 pip 管理 Python 包</a>的指南。今天，我们将讨论如何使用 npm 管理 NodeJS 包。npm 是最大的软件注册中心，包含 600,000 多个包。每天，世界各地的开发人员通过 npm 共享和下载软件包。在本指南中，我将解释使用 npm 基础知识，例如安装包（本地和全局）、安装特定版本的包、更新、删除和管理 NodeJS 包等等。</p><h3 id=安装-npm>安装 npm</h3><p>用于 npm 是用 NodeJS 编写的，我们需要安装 NodeJS 才能使用 npm。要在不同的 Linux 发行版上安装 NodeJS，请参考下面的链接。</p><ul><li><a href=https://www.ostechnix.com/install-node-js-linux/>在 Linux 上安装 NodeJS</a></li></ul><p>检查 node 安装的位置：</p><pre tabindex=0><code>$ which node
/home/sk/.nvm/versions/node/v9.4.0/bin/node
</code></pre><p>检查它的版本：</p><pre tabindex=0><code>$ node -v
v9.4.0
</code></pre><p>进入 Node 交互式解释器：</p><pre tabindex=0><code>$ node
&gt; .help
.break Sometimes you get stuck, this gets you out
.clear Alias for .break
.editor Enter editor mode
.exit Exit the repl
.help Print this help message
.load Load JS from a file into the REPL session
.save Save all evaluated commands in this REPL session to a file
&gt; .exit
</code></pre><p>检查 npm 安装的位置：</p><pre tabindex=0><code>$ which npm
/home/sk/.nvm/versions/node/v9.4.0/bin/npm
</code></pre><p>还有版本：</p><pre tabindex=0><code>$ npm -v
5.6.0
</code></pre><p>棒极了！Node 和 npm 已安装好！正如你可能已经注意到，我已经在我的 <code>$HOME</code> 目录中安装了 NodeJS 和 NPM，这样是为了避免在全局模块时出现权限问题。这是 NodeJS 团队推荐的方法。</p><p>那么，让我们继续看看如何使用 npm 管理 NodeJS 模块（或包）。</p><h3 id=安装-nodejs-模块>安装 NodeJS 模块</h3><p>NodeJS 模块可以安装在本地或全局（系统范围）。现在我将演示如何在本地安装包（LCTT 译注：即将包安装到一个 NodeJS 项目当中，所以下面会先创建一个空项目做演示）。</p><h4 id=在本地安装包>在本地安装包</h4><p>为了在本地管理包，我们通常使用 <code>package.json</code> 文件来管理。</p><p>首先，让我们创建我们的项目目录。</p><pre tabindex=0><code>$ mkdir demo
$ cd demo
</code></pre><p>在项目目录中创建一个 <code>package.json</code> 文件。为此，运行：</p><pre tabindex=0><code>$ npm init
</code></pre><p>输入你的包的详细信息，例如名称、版本、作者、GitHub 页面等等，或者按下回车键接受默认值并键入 <code>yes</code> 确认。</p><pre tabindex=0><code>This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install &lt;pkg&gt;` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
package name: (demo)
version: (1.0.0)
description: demo nodejs app
entry point: (index.js)
test command:
git repository:
keywords:
author:
license: (ISC)
About to write to /home/sk/demo/package.json:

{
 &#34;name&#34;: &#34;demo&#34;,
 &#34;version&#34;: &#34;1.0.0&#34;,
 &#34;description&#34;: &#34;demo nodejs app&#34;,
 &#34;main&#34;: &#34;index.js&#34;,
 &#34;scripts&#34;: {
 &#34;test&#34;: &#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;
 },
 &#34;author&#34;: &#34;&#34;,
 &#34;license&#34;: &#34;ISC&#34;
}

Is this ok? (yes) yes
</code></pre><p>上面的命令初始化你的项目并创建了 <code>package.json</code> 文件。</p><p>你也可以使用命令以非交互式方式执行此操作：</p><pre tabindex=0><code>npm init --y
</code></pre><p>现在让我们安装名为 <a href=https://www.npmjs.com/package/commander>commander</a> 的包。</p><pre tabindex=0><code>$ npm install commander
</code></pre><p>示例输出：</p><pre tabindex=0><code>npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN demo@1.0.0 No repository field.

+ commander@2.13.0
added 1 package in 2.519s
</code></pre><p>这将在项目的根目录中创建一个名为 <code>node_modules</code> 的目录（如果它不存在的话），并在其中下载包。</p><p>让我们检查 <code>pachage.json</code> 文件。</p><pre tabindex=0><code>$ cat package.json 
{
 &#34;name&#34;: &#34;demo&#34;,
 &#34;version&#34;: &#34;1.0.0&#34;,
 &#34;description&#34;: &#34;demo nodejs app&#34;,
 &#34;main&#34;: &#34;index.js&#34;,
 &#34;scripts&#34;: {
 &#34;test&#34;: &#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;
 },
 &#34;author&#34;: &#34;&#34;,
 &#34;license&#34;: &#34;ISC&#34;,
 &#34;dependencies&#34;: {
 &#34;commander&#34;: &#34;^2.13.0&#34;
 }
}
</code></pre><p>你会看到添加了依赖文件，版本号前面的插入符号 ( <code>^</code> ) 表示在安装时，npm 将取出它可以找到的最高版本的包。</p><pre tabindex=0><code>$ ls node_modules/
commander
</code></pre><p><code>package.json</code> 文件的优点是，如果你的项目目录中有 <code>package.json</code> 文件，只需键入 <code>npm install</code>，那么 <code>npm</code> 将查看文件中列出的依赖关系并下载它们。你甚至可以与其他开发人员共享它或将其推送到你的 GitHub 仓库。因此，当他们键入 <code>npm install</code> 时，他们将获得你拥有的所有相同的包。</p><p>你也可能会注意到另一个名为 <code>package-lock.json</code> 的文件，该文件确保在项目安装的所有系统上都保持相同的依赖关系。</p><p>要在你的程序中使用已安装的包，使用实际代码在项目目录中创建一个 <code>index.js</code>（或者其他任何名称）文件，然后使用以下命令运行它：</p><pre tabindex=0><code>$ node index.js
</code></pre><h4 id=在全局安装包>在全局安装包</h4><p>如果你想使用一个包作为命令行工具，那么最好在全局安装它。这样，无论你的当前目录是哪个目录，它都能正常工作。</p><pre tabindex=0><code>$ npm install async -g
+ async@2.6.0
added 2 packages in 4.695s
</code></pre><p>或者</p><pre tabindex=0><code>$ npm install async --global
</code></pre><p>要安装特定版本的包，我们可以：</p><pre tabindex=0><code>$ npm install async@2.6.0 --global
</code></pre><h3 id=更新-nodejs-模块>更新 NodeJS 模块</h3><p>要更新本地包，转到 <code>package.json</code> 所在的项目目录并运行：</p><pre tabindex=0><code>$ npm update
</code></pre><p>然后，运行以下命令确保所有包都更新了。</p><pre tabindex=0><code>$ npm outdated
</code></pre><p>如果没有需要更新的，那么它返回空。</p><p>要找出哪一个全局包需要更新，运行：</p><pre tabindex=0><code>$ npm outdated -g --depth=0
</code></pre><p>如果没有输出，意味着所有包都已更新。</p><p>更新单个全局包，运行：</p><pre tabindex=0><code>$ npm update -g &lt;package-name&gt;
</code></pre><p>更新所有的全局包，运行：</p><pre tabindex=0><code>$ npm update -g
</code></pre><h3 id=列出-nodejs-模块>列出 NodeJS 模块</h3><p>列出本地包，转到项目目录并运行：</p><pre tabindex=0><code>$ npm list
demo@1.0.0 /home/sk/demo
└── commander@2.13.0
</code></pre><p>如你所见，我在本地安装了 <code>commander</code> 这个包。</p><p>要列出全局包，从任何位置都可以运行以下命令：</p><pre tabindex=0><code>$ npm list -g
</code></pre><p>示例输出：</p><pre tabindex=0><code>/home/sk/.nvm/versions/node/v9.4.0/lib
├─┬ async@2.6.0
│ └── lodash@4.17.4
└─┬ npm@5.6.0
 ├── abbrev@1.1.1
 ├── ansi-regex@3.0.0
 ├── ansicolors@0.3.2
 ├── ansistyles@0.1.3
 ├── aproba@1.2.0
 ├── archy@1.0.0
[...]
</code></pre><p>该命令将列出所有模块及其依赖关系。</p><p>要仅仅列出顶级模块，使用 <code>-depth=0</code> 选项：</p><pre tabindex=0><code>$ npm list -g --depth=0
/home/sk/.nvm/versions/node/v9.4.0/lib
├── async@2.6.0
└── npm@5.6.0
</code></pre><h4 id=寻找-nodejs-模块>寻找 NodeJS 模块</h4><p>要搜索一个模块，使用 <code>npm search</code> 命令：</p><pre tabindex=0><code>npm search &lt;search-string&gt;
</code></pre><p>例如：</p><pre tabindex=0><code>$ npm search request
</code></pre><p>该命令将显示包含搜索字符串 <code>request</code> 的所有模块。</p><h5 id=移除-nodejs-模块>移除 NodeJS 模块</h5><p>要删除本地包，转到项目目录并运行以下命令，这会从 <code>node_modules</code> 目录中删除包：</p><pre tabindex=0><code>$ npm uninstall &lt;package-name&gt;
</code></pre><p>要从 <code>package.json</code> 文件中的依赖关系中删除它，使用如下所示的 <code>save</code> 选项：</p><pre tabindex=0><code>$ npm uninstall --save &lt;package-name&gt;
</code></pre><p>要删除已安装的全局包，运行：</p><pre tabindex=0><code>$ npm uninstall -g &lt;package&gt;
</code></pre><h3 id=清除-npm-缓存>清除 npm 缓存</h3><p>默认情况下，npm 在安装包时，会将其副本保存在 <code>$HOME</code> 目录中名为 <code>.npm</code> 的缓存文件夹中。所以，你可以在下次安装时不必再次下载。</p><p>查看缓存模块：</p><pre tabindex=0><code>$ ls ~/.npm
</code></pre><p>随着时间的推移，缓存文件夹会充斥着大量旧的包。所以不时清理缓存会好一些。</p><p>从 npm@5 开始，npm 缓存可以从 corruption 问题中自行修复，并且保证从缓存中提取的数据有效。如果你想确保一切都一致，运行：</p><pre tabindex=0><code>$ npm cache verify
</code></pre><p>清除整个缓存，运行：</p><pre tabindex=0><code>$ npm cache clean --force
</code></pre><h3 id=查看-npm-配置>查看 npm 配置</h3><p>要查看 npm 配置，键入：</p><pre tabindex=0><code>$ npm config list
</code></pre><p>或者：</p><pre tabindex=0><code>$ npm config ls
</code></pre><p>示例输出：</p><pre tabindex=0><code>; cli configs
metrics-registry = &#34;https://registry.npmjs.org/&#34;
scope = &#34;&#34;
user-agent = &#34;npm/5.6.0 node/v9.4.0 linux x64&#34;

; node bin location = /home/sk/.nvm/versions/node/v9.4.0/bin/node
; cwd = /home/sk
; HOME = /home/sk
; &#34;npm config ls -l&#34; to show all defaults.
</code></pre><p>要显示当前的全局位置：</p><pre tabindex=0><code>$ npm config get prefix
/home/sk/.nvm/versions/node/v9.4.0
</code></pre><p>好吧，这就是全部了。我们刚才介绍的只是基础知识，npm 是一个广泛话题。有关更多详细信息，参阅 <a href=https://docs.npmjs.com/getting-started/><strong>NPM Getting Started</strong></a> 指南。</p><p>希望这对你有帮助。更多好东西即将来临，敬请关注！</p><p>干杯！</p><hr><p>via: <a href=https://www.ostechnix.com/manage-nodejs-packages-using-npm/>https://www.ostechnix.com/manage-nodejs-packages-using-npm/</a></p><p>作者：<a href=https://www.ostechnix.com/author/sk/>SK</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/npm/ rel=tag>npm</a></li><li class=tags__item><a class="tags__link btn" href=/tags/nodejs/ rel=tag>nodejs</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>