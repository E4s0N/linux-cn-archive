<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Bash 脚本实现每次登录到 Shell 时可以查看 Linux 系统信息 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Bash 脚本实现每次登录到 Shell 时可以查看 Linux 系统信息"><meta property="og:description" content="Linux 中有很多可以查看系统信息如处理器信息、生产商名字、序列号等的命令。你可能需要执行多个命令来收集这些信息。同时，记住所有的命令和他们的选项也是有难度。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11645-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-12-05T06:50:00+00:00"><meta property="article:modified_time" content="2019-12-05T06:50:00+00:00"><meta itemprop=name content="Bash 脚本实现每次登录到 Shell 时可以查看 Linux 系统信息"><meta itemprop=description content="Linux 中有很多可以查看系统信息如处理器信息、生产商名字、序列号等的命令。你可能需要执行多个命令来收集这些信息。同时，记住所有的命令和他们的选项也是有难度。"><meta itemprop=datePublished content="2019-12-05T06:50:00+00:00"><meta itemprop=dateModified content="2019-12-05T06:50:00+00:00"><meta itemprop=wordCount content="570"><meta itemprop=keywords content="Linux,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Bash 脚本实现每次登录到 Shell 时可以查看 Linux 系统信息</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-12-05T06:50:00Z>December 05, 2019</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201912/05/064953aelh05hk0hfz00fe.jpg alt></p><p>Linux 中有很多可以查看系统信息如处理器信息、生产商名字、序列号等的命令。你可能需要执行多个命令来收集这些信息。同时，记住所有的命令和他们的选项也是有难度。</p><p>你可以写一个 <a href=https://www.2daygeek.com/category/shell-script/>shell 脚本</a> 基于你的需求来自定义显示的信息。</p><p>以前我们出于不同的目的需要写很多个 <a href=https://www.2daygeek.com/category/bash-script/>bash 脚本</a>。</p><p>现在我们写一个新的 shell 脚本，在每次登录到 shell 时显示需要的系统信息。</p><p>这个脚本有 6 部分，细节如下：</p><ol><li>通用系统信息</li><li>CPU/内存当前使用情况</li><li>硬盘使用率超过 80%</li><li>列出系统 WWN 详情</li><li>Oracle DB 实例</li><li>可更新的包</li></ol><p>我们已经基于我们的需求把可能需要到的信息加到了每个部分。之后你可以基于自己的意愿修改这个脚本。</p><p>这个j脚本需要用到很多工具，其中大部分我们之前已经涉及到了。</p><p>你可以参照以前文章，了解工具详情。</p><ul><li><a href=https://www.2daygeek.com/inxi-system-hardware-information-on-linux/>inxi – 在 Linux 上检查硬件信息的绝佳工具</a></li><li><a href=https://www.2daygeek.com/dmidecode-get-print-display-check-linux-system-hardware-information/>Dmidecode – 获取 Linux 系统硬件信息的简便方法</a></li><li><a href=https://www.2daygeek.com/lshw-find-check-system-hardware-information-details-linux/>LSHW（硬件列表程序）– 在 Linux 上获取硬件信息的漂亮工具</a></li><li><a href=https://www.2daygeek.com/hwinfo-check-display-detect-system-hardware-information-linux/>hwinfo（硬件信息）– 在 Linux 上检测系统硬件信息的漂亮工具</a></li><li><a href=https://www.2daygeek.com/python-hwinfo-check-display-system-hardware-configuration-information-linux/>python-hwinfo：使用标准 Linux 实用工具显示硬件信息摘要</a></li><li><a href=https://www.2daygeek.com/check-system-hardware-devices-bus-information-lspci-lsscsi-lsusb-lsblk-linux/>如何使用 lspci、lsscsi、lsusb 和 lsblk 获取 Linux 系统设备信息</a></li><li><a href=https://www.2daygeek.com/how-to-check-system-hardware-manufacturer-model-and-serial-number-in-linux/>如何在 Linux 中检查系统硬件制造商、型号和序列号</a></li><li><a href=https://www.2daygeek.com/how-to-find-wwn-wwnn-and-wwpn-number-of-hba-card-in-linux/>如何在 Linux 中查找 HBA 卡的 WWN、WWNN 和 WWPN 号</a></li><li><a href=https://www.2daygeek.com/how-to-check-hp-ilo-firmware-version-from-linux-command-line/>如何从 Linux 命令行检查 HP iLO 固件版本</a></li><li><a href=https://www.2daygeek.com/linux-find-out-wireless-network-wifi-speed-signal-strength-quality/>如何从 Linux 命令行检查无线网卡和 WiFi 信息</a></li><li><a href=https://www.2daygeek.com/view-check-cpu-hard-disk-temperature-linux/>如何在 Linux 上检查 CPU 和硬盘温度</a></li><li><a href=https://www.2daygeek.com/hegemon-a-modular-system-and-hardware-monitoring-tool-for-linux/>Hegemon – Linux 的模块化系统和硬件监视工具</a></li><li><a href=https://www.2daygeek.com/check-linux-hardware-information-system-configuration/>如何在 Linux 上检查系统配置和硬件信息</a></li></ul><p>如果你想为这个脚本增加其他的信息，请在评论去留下你的需求，以便我们帮助你。</p><h3 id=bash-脚本实现每次登录到-shell-时可以查看-linux-系统信息>Bash 脚本实现每次登录到 Shell 时可以查看 Linux 系统信息</h3><p>这个脚本会在你每次登录 shell 时把系统信息打印到 terminal。</p><pre tabindex=0><code># vi /opt/scripts/system-info.sh
</code></pre><pre tabindex=0><code>#!/bin/bash
echo -e &#34;-------------------------------System Information----------------------------&#34;
echo -e &#34;Hostname:\t\t&#34;`hostname`
echo -e &#34;uptime:\t\t\t&#34;`uptime | awk &#39;{print $3,$4}&#39; | sed &#39;s/,//&#39;`
echo -e &#34;Manufacturer:\t\t&#34;`cat /sys/class/dmi/id/chassis_vendor`
echo -e &#34;Product Name:\t\t&#34;`cat /sys/class/dmi/id/product_name`
echo -e &#34;Version:\t\t&#34;`cat /sys/class/dmi/id/product_version`
echo -e &#34;Serial Number:\t\t&#34;`cat /sys/class/dmi/id/product_serial`
echo -e &#34;Machine Type:\t\t&#34;`vserver=$(lscpu | grep Hypervisor | wc -l); if [ $vserver -gt 0 ]; then echo &#34;VM&#34;; else echo &#34;Physical&#34;; fi`
echo -e &#34;Operating System:\t&#34;`hostnamectl | grep &#34;Operating System&#34; | cut -d &#39; &#39; -f5-`
echo -e &#34;Kernel:\t\t\t&#34;`uname -r`
echo -e &#34;Architecture:\t\t&#34;`arch`
echo -e &#34;Processor Name:\t\t&#34;`awk -F&#39;:&#39; &#39;/^model name/ {print $2}&#39; /proc/cpuinfo | uniq | sed -e &#39;s/^[ \t]*//&#39;`
echo -e &#34;Active User:\t\t&#34;`w | cut -d &#39; &#39; -f1 | grep -v USER | xargs -n1`
echo -e &#34;System Main IP:\t\t&#34;`hostname -I`
echo &#34;&#34;
echo -e &#34;-------------------------------CPU/Memory Usage------------------------------&#34;
echo -e &#34;Memory Usage:\t&#34;`free | awk &#39;/Mem/{printf(&#34;%.2f%&#34;), $3/$2*100}&#39;`
echo -e &#34;Swap Usage:\t&#34;`free | awk &#39;/Swap/{printf(&#34;%.2f%&#34;), $3/$2*100}&#39;`
echo -e &#34;CPU Usage:\t&#34;`cat /proc/stat | awk &#39;/cpu/{printf(&#34;%.2f%\n&#34;), ($2+$4)*100/($2+$4+$5)}&#39; |  awk &#39;{print $0}&#39; | head -1`
echo &#34;&#34;
echo -e &#34;-------------------------------Disk Usage &gt;80%-------------------------------&#34;
df -Ph | sed s/%//g | awk &#39;{ if($5 &gt; 80) print $0;}&#39;
echo &#34;&#34;

echo -e &#34;-------------------------------For WWN Details-------------------------------&#34;
vserver=$(lscpu | grep Hypervisor | wc -l)
if [ $vserver -gt 0 ]
then
echo &#34;$(hostname) is a VM&#34;
else
cat /sys/class/fc_host/host?/port_name
fi
echo &#34;&#34;

echo -e &#34;-------------------------------Oracle DB Instances---------------------------&#34;
if id oracle &gt;/dev/null 2&gt;&amp;1; then
/bin/ps -ef|grep pmon
then
else
echo &#34;oracle user does not exist on $(hostname)&#34;
fi
echo &#34;&#34;

if (( $(cat /etc/*-release | grep -w &#34;Oracle|Red Hat|CentOS|Fedora&#34; | wc -l) &gt; 0 ))
then
echo -e &#34;-------------------------------Package Updates-------------------------------&#34;
yum updateinfo summary | grep &#39;Security|Bugfix|Enhancement&#39;
echo -e &#34;-----------------------------------------------------------------------------&#34;
else
echo -e &#34;-------------------------------Package Updates-------------------------------&#34;
cat /var/lib/update-notifier/updates-available
echo -e &#34;-----------------------------------------------------------------------------&#34;
fi
</code></pre><p>把上面脚本内容保存到一个文件 <code>system-info.sh</code>，之后添加可执行权限：</p><pre tabindex=0><code># chmod +x ~root/system-info.sh
</code></pre><p>当脚本准备好后，把脚本文件的路径加到 <code>.bash_profile</code> 文件末尾（红帽系列的系统：CentOS、Oracle Linux 和 Fedora）：</p><pre tabindex=0><code># echo &#34;/root/system-info.sh&#34; &gt;&gt; ~root/.bash_profile
</code></pre><p>执行以下命令，来让修改的内容生效：</p><pre tabindex=0><code># source ~root/.bash_profile
</code></pre><p>对于 Debian 系统的系统，你可能需要把文件路径加到 <code>.profile</code> 文件中：</p><pre tabindex=0><code># echo &#34;/root/system-info.sh&#34; &gt;&gt; ~root/.profile
</code></pre><p>运行以下命令使修改生效：</p><pre tabindex=0><code># source ~root/.profile
</code></pre><p>你以前运行上面 <code>source</code> 命令时可能见过类似下面的输出。从下次开始，你在每次登录 shell 时会看到这些信息。当然，如果有必要你也可以随时手动执行这个脚本。</p><pre tabindex=0><code>-------------------------------System Information---------------------------
Hostname:            daygeek-Y700
uptime:              1:20 1
Manufacturer:        LENOVO
Product Name:        80NV
Version:             Lenovo ideapad Y700-15ISK
Serial Number:       AA0CMRN1
Machine Type:        Physical
Operating System:    Manjaro Linux
Kernel:              4.19.80-1-MANJARO
Architecture:        x86_64
Processor Name:      Intel(R) Core(TM) i7-6700HQ CPU @ 2.60GHz
Active User:         daygeek renu thanu
System Main IP:      192.168.1.6 192.168.122.1

-------------------------------CPU/Memory Usage------------------------------
Memory Usage:     37.28%
Swap Usage:       0.00%
CPU Usage:        15.43%

-------------------------------Disk Usage &gt;80%-------------------------------
Filesystem      Size  Used Avail Use Mounted on
/dev/nvme0n1p1  217G  202G  4.6G  98 /
/dev/loop0      109M  109M     0 100 /var/lib/snapd/snap/odrive-unofficial/2
/dev/loop1       91M   91M     0 100 /var/lib/snapd/snap/core/6405
/dev/loop2       90M   90M     0 100 /var/lib/snapd/snap/core/7713

-------------------------------For WWN Details-------------------------------
CentOS8.2daygeek.com is a VM

-------------------------------Oracle DB Instances---------------------------
oracle user does not exist on CentOS8.2daygeek.com

-------------------------------Package Updates-------------------------------
    13 Security notice(s)
         9 Important Security notice(s)
         3 Moderate Security notice(s)
         1 Low Security notice(s)
    35 Bugfix notice(s)
     1 Enhancement notice(s)
-----------------------------------------------------------------------------
</code></pre><hr><p>via: <a href=https://www.2daygeek.com/bash-shell-script-view-linux-system-information/>https://www.2daygeek.com/bash-shell-script-view-linux-system-information/</a></p><p>作者：<a href=https://www.2daygeek.com/author/magesh/>Magesh Maruthamuthu</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/lxbwolf>lxbwolf</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/linux/ rel=tag>Linux</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>