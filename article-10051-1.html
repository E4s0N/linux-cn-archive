<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 top 命令了解 Fedora 的内存使用情况 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="使用 top 命令了解 Fedora 的内存使用情况"><meta property="og:description" content="如果你使用过 top 命令来查看 Fedora 系统中的内存使用情况，你可能会惊讶，看起来消耗的数量比系统可用的内存更多。下面会详细介绍内存使用情况以及如何理解这些数据。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10051-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-09-26T10:15:01+00:00"><meta property="article:modified_time" content="2018-09-26T10:15:01+00:00"><meta itemprop=name content="使用 top 命令了解 Fedora 的内存使用情况"><meta itemprop=description content="如果你使用过 top 命令来查看 Fedora 系统中的内存使用情况，你可能会惊讶，看起来消耗的数量比系统可用的内存更多。下面会详细介绍内存使用情况以及如何理解这些数据。"><meta itemprop=datePublished content="2018-09-26T10:15:01+00:00"><meta itemprop=dateModified content="2018-09-26T10:15:01+00:00"><meta itemprop=wordCount content="105"><meta itemprop=keywords content="top,内存,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>使用 top 命令了解 Fedora 的内存使用情况</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-09-26T10:15:01Z>September 26, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201809/26/101505mz8fqz2wfv2wzfvk.jpg alt></p><p>如果你使用过 <code>top</code> 命令来查看 Fedora 系统中的内存使用情况，你可能会惊讶，看起来消耗的数量比系统可用的内存更多。下面会详细介绍内存使用情况以及如何理解这些数据。</p><h3 id=内存实际使用情况>内存实际使用情况</h3><p>操作系统对内存的使用方式并不是太通俗易懂。事实上，其背后有很多不为人知的巧妙技术在发挥着作用。通过这些方式，可以在无需用户干预的情况下，让操作系统更有效地使用内存。</p><p>大多数应用程序都不是系统自带的，但每个应用程序都依赖于安装在系统中的库中的一些函数集。在 Fedora 中，RPM 包管理系统能够确保在安装应用程序时也会安装所依赖的库。</p><p>当应用程序运行时，操作系统并不需要将它要用到的所有信息都加载到物理内存中。而是会为存放代码的存储空间构建一个映射，称为虚拟内存。操作系统只把需要的部分加载到内存中，当某一个部分不再需要后，这一部分内存就会被释放掉。</p><p>这意味着应用程序可以映射大量的虚拟内存，而使用较少的系统物理内存。特殊情况下，映射的虚拟内存甚至可以比系统实际可用的物理内存更多！而且在操作系统中这种情况也并不少见。</p><p>另外，不同的应用程序可能会对同一个库都有依赖。Fedora 中的 Linux 内核通常会在各个应用程序之间共享内存，而不需要为不同应用分别加载同一个库的多个副本。类似地，对于同一个应用程序的不同实例也是采用这种方式共享内存。</p><p>如果不首先了解这些细节，<code>top</code> 命令显示的数据可能会让人摸不着头脑。下面就举例说明如何正确查看内存使用量。</p><h3 id=使用-top-命令查看内存使用量>使用 <code>top</code> 命令查看内存使用量</h3><p>如果你还没有使用过 <code>top</code> 命令，可以打开终端直接执行查看。使用 <code>Shift + M</code> 可以按照内存使用量来进行排序。下图是在 Fedora Workstation 中执行的结果，在你的机器上显示的结果可能会略有不同：</p><p><img src=/data/attachment/album/201809/26/101505xhxpby0whgpvcvig.png alt></p><p>主要通过以下三列来查看内存使用情况：<code>VIRT</code>、<code>RES</code> 和 <code>SHR</code>。目前以 KB 为单位显示相关数值。</p><p><code>VIRT</code> 列代表该进程映射的 虚拟 virtual 内存。如上所述，虚拟内存不是实际消耗的物理内存。例如， GNOME Shell 进程 <code>gnome-shell</code> 实际上没有消耗超过 3.1 GB 的物理内存，但它对很多更低或更高级的库都有依赖，系统必须对每个库都进行映射，以确保在有需要时可以加载这些库。</p><p><code>RES</code> 列代表应用程序消耗了多少实际（ 驻留 resident ）内存。对于 GNOME Shell 大约是 180788 KB。例子中的系统拥有大约 7704 MB 的物理内存，因此内存使用率显示为 2.3％。</p><p>但根据 <code>SHR</code> 列显示，其中至少有 88212 KB 是 共享 shared 内存，这部分内存可能是其它应用程序也在使用的库函数。这意味着 GNOME Shell 本身大约有 92 MB 内存不与其他进程共享。需要注意的是，上述例子中的其它程序也共享了很多内存。在某些应用程序中，共享内存在内存使用量中会占很大的比例。</p><p>值得一提的是，有时进程之间通过内存通信，这些内存也是共享的，但 <code>top</code> 这样的工具却不一定能检测到，所以以上的说明也不一定准确。</p><h3 id=关于交换分区>关于交换分区</h3><p>系统还可以通过交换分区来存储数据（例如硬盘），但读写的速度相对较慢。当物理内存渐渐用满，操作系统就会查找内存中暂时不会使用的部分，将其写出到交换区域等待需要的时候使用。</p><p>因此，如果交换内存的使用量一直偏高，表明系统的物理内存已经供不应求了。有时候一个不正常的应用也有可能导致出现这种情况，但如果这种现象经常出现，就需要考虑提升物理内存或者限制某些程序的运行了。</p><p>感谢 <a href=https://www.flickr.com/photos/stignygaard/>Stig Nygaard</a> 在 <a href=https://www.flickr.com/photos/stignygaard/3138001676/>Flickr</a> 上提供的图片（CC BY 2.0）。</p><hr><p>via: <a href=https://fedoramagazine.org/understand-fedora-memory-usage-top/>https://fedoramagazine.org/understand-fedora-memory-usage-top/</a></p><p>作者：<a href=https://fedoramagazine.org/author/pfrields/>Paul W. Frields</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/HankChow>HankChow</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/top/ rel=tag>top</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%86%85%E5%AD%98/ rel=tag>内存</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>