<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>用 kubectl 管理 Kubernetes 的 5 种有用方法 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="用 kubectl 管理 Kubernetes 的 5 种有用方法"><meta property="og:description" content="学习 kubectl，提升你与 Kubernetes 的互动方式。"><meta property="og:type" content="article"><meta property="og:url" content="/article-13676-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-13T10:53:46+00:00"><meta property="article:modified_time" content="2021-08-13T10:53:46+00:00"><meta itemprop=name content="用 kubectl 管理 Kubernetes 的 5 种有用方法"><meta itemprop=description content="学习 kubectl，提升你与 Kubernetes 的互动方式。"><meta itemprop=datePublished content="2021-08-13T10:53:46+00:00"><meta itemprop=dateModified content="2021-08-13T10:53:46+00:00"><meta itemprop=wordCount content="185"><meta itemprop=keywords content="kubectl,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>用 kubectl 管理 Kubernetes 的 5 种有用方法</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-08-13T10:53:46Z>August 13, 2021</time></div></div></header><div class="content post__content clearfix"><blockquote><p>学习 kubectl，提升你与 Kubernetes 的互动方式。</p></blockquote><p><img src=https://img.linux.net.cn/data/attachment/album/202108/13/105348oxt824fszcyyzj2j.png alt="Ship captain sailing the Kubernetes seas" title="Ship captain sailing the Kubernetes seas"></p><p>Kubernetes 可以帮你编排运行有大量容器的软件。Kubernetes 不仅提供工具来管理（或者说 <a href=https://opensource.com/article/20/11/orchestration-vs-automation>编排</a>）运行的容器，还帮助这些容器根据需要进行扩展。有了 Kubernetes 作为你的中央 控制面板 control panel （或称 控制平面 control plane ），你需要一种方式来管理 Kubernetes，而这项工作的工具就是 kubectl。<code>kubectl</code> 命令让你控制、维护、分析和排查 Kubernetes 集群的故障。与许多使用 <code>ctl</code>（“控制”的缩写）后缀的工具一样，如 <code>systemctl</code> 和 <code>sysctl</code>，<code>kubectl</code> 拥有大量的功能和任务权限，所以如果你正在运行 Kubernetes，你肯定会经常使用它。它是一个拥有众多选项的命令，所以下面是 <code>kubectl</code> 中简单易用的五个常见任务。</p><h3 id=1列出并描述资源>1、列出并描述资源</h3><p>按照设计，容器往往会成倍增加。在某些条件下，它们可以快速增加。如果你只能通过 <code>podman ps</code>或 <code>docker ps</code> 来查看正在运行的容器，这可能会让你不知所措。通过 <code>kubectl get</code> 和 <code>kubectl describe</code>，你可以列出正在运行的 吊舱 pod 以及它们正在处理的容器信息。更重要的是，你可以通过使用 <code>--namespace</code> 或 <code>name</code> 或 <code>--selector</code>等选项，只列出所需信息。</p><p><code>get</code> 子命令不仅仅对吊舱和容器有用。它也有关于节点、命名空间、发布、服务和副本的信息。</p><h3 id=2创建资源>2、创建资源</h3><p>如果你只通过类似 OpenShift、OKD 或 Kubernetes 提供的 Web 用户界面（UI）创建过发布，但你想从 Linux 终端控制你的集群，那么可以使用 <code>kubectl create</code>。<code>kubectl create</code> 命令并不只是实例化一个新的应用发布。Kubernetes 中还有很多其他组件可以创建，比如服务、配额和 <a href=https://opensource.com/article/20/11/kubernetes-jobs-cronjobs>计划任务</a>。</p><p>Kubernetes 中的计划任务可以创建一个临时的吊舱，用来在你选择的时间表上执行一些任务。它们并不难设置。下面是一个计划任务，让一个 BusyBox 镜像每分钟打印 “hello world”。</p><pre tabindex=0><code>$ kubectl create cronjob \
    hello-world \
    --image=busybox \
    --schedule=&#34;*/1 * * * *&#34; -- echo &#34;hello world&#34;
</code></pre><h3 id=3编辑文件>3、编辑文件</h3><p>Kubernetes 中的对象都有相应的配置文件，但在文件系统中查找相应的文件较为麻烦。有了 <code>kubectl edit</code>，你可以把注意力放在对象上，而不是定义文件上。你可以通过 <code>kubectl</code> 找到并打开文件（通过 <code>KUBE_EDITOR</code> 环境变量，你可以设置成你喜欢的编辑器）。</p><pre tabindex=0><code>$ KUBE_EDITOR=emacs \
    kubectl edit cronjob/hello-world
</code></pre><h3 id=4容器之间的传输文件>4、容器之间的传输文件</h3><p>初次接触容器的人往往对无法直接访问的共享系统的概念感到困惑。他们可能会在容器引擎或 <code>kubectl</code> 中了解到 <code>exec</code> 选项，但当他们不能从容器中提取文件或将文件放入容器中时，容器仍然会显得不透明。使用 <code>kubectl cp</code> 命令，你可以把容器当做远程服务器，使主机和容器之间文件传输如 SSH 命令一样简单：</p><pre tabindex=0><code>$ kubectl cp foo my-pod:/tmp
</code></pre><h3 id=5应用变更>5、应用变更</h3><p>对 Kubernetes 对象进行修改，可以通过 <code>kubectl apply</code> 命令完成。你所要做的就是将该命令指向一个配置文件：</p><pre tabindex=0><code>$ kubectl apply -f ./mypod.json
</code></pre><p>类似于运行 Ansible 剧本或 Bash 脚本，<code>apply</code> 使得快速“导入”设置到运行中的 Kubernetes 实例很容易。例如，GitOps 工具 <a href=https://argoproj.github.io/argo-cd/>ArgoCD</a> 由于 <code>apply</code> 子命令，安装起来出奇地简单：</p><pre tabindex=0><code>$ kubectl create namespace argocd
$ kubectl apply -n argocd \
    -f https://raw.githubusercontent.com/argoproj/argo-cd/vx.y.z/manifests/install.yaml
</code></pre><h3 id=使用-kubectl>使用 kubectl</h3><p>Kubectl 是一个强大的工具，由于它是一个终端命令，它可以写成脚本，并能实现用众多 Web UI 无法实现的功能。学习 <code>kubectl</code> 是进一步了解 Kubernetes、容器、吊舱以及围绕这些重要的云计算创新技术的一个好方法。<a href=https://opensource.com/downloads/kubectl-cheat-sheet>下载我们的 kubectl 速查表</a>，以获得快速参考，其中包括命令示例，以帮助你学习，并在为你提供注意细节。</p><hr><p>via: <a href=https://opensource.com/article/21/7/kubectl>https://opensource.com/article/21/7/kubectl</a></p><p>作者：<a href=https://opensource.com/users/alansmithee>Alan Smithee</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/turbokernel>turbokernel</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/kubectl/ rel=tag>kubectl</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>