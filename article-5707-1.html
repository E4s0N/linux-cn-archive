<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Ubuntu 15.04 中安装 nginx 和 google pagespeed - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Ubuntu 15.04 中安装 nginx 和 google pagespeed"><meta property="og:description" content="Nginx （engine-x）是一个开源的高性能 HTTP 服务器、反向代理和 IMAP/POP3 代理服务器。nginx 杰出的功能有：稳定、丰富的功能集、简单的配置和低资源消耗。nginx 被用于一些高性能网站并在站长之间变得越来越流行。本教程会从源码构建一个带有 google paespeed 模块的用于 Ubuntu 15.04 的 nginx .deb 安装包。 pagespeed 是一个由 google 开发的 web 服务器模块来加速网站响应时间、优化 html 和减少页面加载时间。ngx_pagespeed 的功能如下：  图像优化：去除元数据、动态缩放、重压缩。 CSS 与 JavaScript 压缩、串联、内联、外联。"><meta property="og:type" content="article"><meta property="og:url" content="/article-5707-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-06-28T08:39:00+00:00"><meta property="article:modified_time" content="2015-06-28T08:39:00+00:00"><meta itemprop=name content="如何在 Ubuntu 15.04 中安装 nginx 和 google pagespeed"><meta itemprop=description content="Nginx （engine-x）是一个开源的高性能 HTTP 服务器、反向代理和 IMAP/POP3 代理服务器。nginx 杰出的功能有：稳定、丰富的功能集、简单的配置和低资源消耗。nginx 被用于一些高性能网站并在站长之间变得越来越流行。本教程会从源码构建一个带有 google paespeed 模块的用于 Ubuntu 15.04 的 nginx .deb 安装包。 pagespeed 是一个由 google 开发的 web 服务器模块来加速网站响应时间、优化 html 和减少页面加载时间。ngx_pagespeed 的功能如下：  图像优化：去除元数据、动态缩放、重压缩。 CSS 与 JavaScript 压缩、串联、内联、外联。"><meta itemprop=datePublished content="2015-06-28T08:39:00+00:00"><meta itemprop=dateModified content="2015-06-28T08:39:00+00:00"><meta itemprop=wordCount content="212"><meta itemprop=keywords content="nginx,pagespeed,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Ubuntu 15.04 中安装 nginx 和 google pagespeed</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-06-28T08:39:00Z>June 28, 2015</time></div></div></header><div class="content post__content clearfix"><p>Nginx （engine-x）是一个开源的高性能 HTTP 服务器、反向代理和 IMAP/POP3 代理服务器。nginx 杰出的功能有：稳定、丰富的功能集、简单的配置和低资源消耗。nginx 被用于一些高性能网站并在站长之间变得越来越流行。本教程会从源码构建一个带有 google paespeed 模块的用于 Ubuntu 15.04 的 nginx .deb 安装包。</p><p>pagespeed 是一个由 google 开发的 web 服务器模块来加速网站响应时间、优化 html 和减少页面加载时间。ngx_pagespeed 的功能如下：</p><ul><li>图像优化：去除元数据、动态缩放、重压缩。</li><li>CSS 与 JavaScript 压缩、串联、内联、外联。</li><li>小资源内联</li><li>图像与 JavaScript 延迟加载</li><li>HTML 重写</li><li>缓存生命期插件</li></ul><p>更多请见 <a href=https://developers.google.com/speed/pagespeed/module/>https://developers.google.com/speed/pagespeed/module/</a>。</p><h3 id=前置要求>前置要求</h3><ul><li>Ubuntu Server 15.04 64位</li><li>root 权限</li></ul><p>本篇我们将要：</p><ul><li>安装必备软件包</li><li>安装带 ngx_pagespeed 的 nginx</li><li>测试</li></ul><h4 id=安装必备包>安装必备包</h4><pre tabindex=0><code>sudo apt-get install dpkg-dev build-essential zlib1g-dev libpcre3 libpcre3-dev
</code></pre><h3 id=安装带-ngx_pagespeed-的-nginx>安装带 ngx_pagespeed 的 nginx</h3><h4 id=第一步---添加nginx仓库>第一步 - 添加nginx仓库</h4><pre tabindex=0><code>vim /etc/apt/sources.list.d/nginx.list
</code></pre><p>加入下面的行：</p><pre tabindex=0><code>deb http://nginx.org/packages/ubuntu/ trusty nginx
deb-src http://nginx.org/packages/ubuntu/ trusty nginx
</code></pre><p>更新仓库：</p><pre tabindex=0><code>sudo apt-get update
</code></pre><p>注意：如果你看到信息：GPG error [&mldr;] NO_PUBKEY [&mldr;] 等等</p><p>请添加key：</p><pre tabindex=0><code>sudo sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys KEYNUMBER
sudo apt-get update
</code></pre><h4 id=第二步---从仓库下载-nginx-18>第二步 - 从仓库下载 nginx 1.8</h4><pre tabindex=0><code>sudo su
cd ~
mkdir -p ~/new/nginx_source/
cd ~/new/nginx_source/
apt-get source nginx
apt-get build-dep nginx
</code></pre><h4 id=第三步---下载-pagespeed>第三步 - 下载 Pagespeed</h4><pre tabindex=0><code>cd ~
mkdir -p ~/new/ngx_pagespeed/
cd ~/new/ngx_pagespeed/
ngx_version=1.9.32.3
wget https://github.com/pagespeed/ngx_pagespeed/archive/release-${ngx_version}-beta.zip
unzip release-${ngx_version}-beta.zip

cd ngx_pagespeed-release-1.9.32.3-beta/
wget https://dl.google.com/dl/page-speed/psol/${ngx_version}.tar.gz
tar -xzf 1.9.32.3.tar.gz
</code></pre><h4 id=第四步---配置-nginx-来编译-pagespeed>第四步 - 配置 nginx 来编译 Pagespeed</h4><pre tabindex=0><code>cd ~/new/nginx_source/nginx-1.8.0/debin/
vim rules
</code></pre><p>在两处 CFLAGS <code>.configure</code> 下添加模块：</p><pre tabindex=0><code>--add-module=../../ngx_pagespeed/ngx_pagespeed-release-1.9.32.3-beta \
</code></pre><p><img src=/data/attachment/album/201506/27/214218nt7v3stq8tpfof0v.png alt="adding pagespeed to nginx"></p><p><img src=/data/attachment/album/201506/27/214220gzbz44d4cez79bdb.png alt="adding pagespeed to nginx"></p><h4 id=第五步---打包-nginx-软件包并安装>第五步 - 打包 nginx 软件包并安装</h4><pre tabindex=0><code>cd ~/new/nginx_source/nginx-1.8.0/
dpkg-buildpackage -b
</code></pre><p>dpkg-buildpackage 会编译 ~/new/ngix_source/ 为 nginx.deb。打包完成后，看一下目录：</p><pre tabindex=0><code>cd ~/new/ngix_source/
ls
</code></pre><p><img src=/data/attachment/album/201506/27/214222u3k57g8bhgeuwhbr.png alt="nginx builded with pagespeed"></p><p>接着安装 nginx。</p><pre tabindex=0><code>dpkg -i nginx_1.8.0-1~trusty_amd64.deb
</code></pre><p><img src=/data/attachment/album/201506/27/214224gr29ttctttktc4a4.png alt="Install nginx"></p><h3 id=测试>测试</h3><p>运行 nginx -V 测试 nginx 是否已经自带 ngx_pagespeed。</p><pre tabindex=0><code>nginx -V
</code></pre><p><img src=/data/attachment/album/201506/27/214226y1aovlfbqwoc7mmo.png alt="nginx -V"></p><h3 id=总结>总结</h3><p>稳定、快速、开源的 nginx 支持许多不同的优化模块。这其中之一是 google 开发的‘pagespeed’。不像 apache，nginx 模块不是动态加载的，因此你必须在编译之前就选择好需要的模块。</p><hr><p>via: <a href=https://www.howtoforge.com/tutorial/how-to-install-nginx-and-google-pagespeed-on-ubuntu-15-04/>https://www.howtoforge.com/tutorial/how-to-install-nginx-and-google-pagespeed-on-ubuntu-15-04/</a></p><p>作者：Muhammad Arul 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/nginx/ rel=tag>nginx</a></li><li class=tags__item><a class="tags__link btn" href=/tags/pagespeed/ rel=tag>pagespeed</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>