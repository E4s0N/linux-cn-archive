<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 Linux 终端中自定义 Bash 配色和提示内容 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 Linux 终端中自定义 Bash 配色和提示内容"><meta property="og:description" content="现今，大多数（如果不是全部的话）现代 Linux 发行版的默认 shell 都是 Bash。然而，你可能已经注意到这样一个现象，在各个发行版中，其终端配色和提示内容都各不相同。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8102-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-01-09T14:05:00+00:00"><meta property="article:modified_time" content="2017-01-09T14:05:00+00:00"><meta itemprop=name content="在 Linux 终端中自定义 Bash 配色和提示内容"><meta itemprop=description content="现今，大多数（如果不是全部的话）现代 Linux 发行版的默认 shell 都是 Bash。然而，你可能已经注意到这样一个现象，在各个发行版中，其终端配色和提示内容都各不相同。"><meta itemprop=datePublished content="2017-01-09T14:05:00+00:00"><meta itemprop=dateModified content="2017-01-09T14:05:00+00:00"><meta itemprop=wordCount content="189"><meta itemprop=keywords content="提示符,PS1,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 Linux 终端中自定义 Bash 配色和提示内容</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-01-09T14:05:00Z>January 09, 2017</time></div></div></header><div class="content post__content clearfix"><p>现今，大多数（如果不是全部的话）现代 Linux 发行版的默认 shell 都是 Bash。然而，你可能已经注意到这样一个现象，在各个发行版中，其终端配色和提示内容都各不相同。</p><p><img src=/data/attachment/album/201701/09/140539jkj67m8no8nqm336.jpg alt></p><p>如果你一直都在考虑，或者只是一时好奇，如何定制可以使 Bash 更好用。不管怎样，请继续读下去 —— 本文将告诉你怎么做。</p><h3 id=ps1-bash-环境变量>PS1 Bash 环境变量</h3><p>命令提示符和终端外观是通过一个叫 <code>PS1</code> 的变量来进行管理的。根据 <strong>Bash</strong> 手册页说明，<strong>PS1</strong> 代表了 shell 准备好读取命令时显示的主体的提示字符串。</p><p><strong>PS1</strong> 所允许的内容包括一些反斜杠转义的特殊字符，可以查看手册页中 <strong>PRMPTING</strong> 部分的内容来了解它们的含义。</p><p>为了演示，让我们先来显示下我们系统中 <code>PS1</code> 的当前内容吧（这或许看上去和你们的有那么点不同）：</p><pre tabindex=0><code>$ echo $PS1
[\u@\h \W]\$
</code></pre><p>现在，让我们来了解一下怎样自定义 PS1 吧，以满足我们各自的需求。</p><h4 id=自定义-ps1-格式>自定义 PS1 格式</h4><p>根据手册页 PROMPTING 章节的描述，下面对各个特殊字符的含义作如下说明：</p><ul><li><code>\u:</code> 显示当前用户的 <strong>用户名</strong>。</li><li><code>\h:</code> 完全限定域名 Fully-Qualified Domain Name （FQDN）中第一个点（<code>.</code>）之前的<strong>主机名</strong>。</li><li><code>\W:</code> 当前工作目录的<strong>基本名</strong>，如果是位于 <code>$HOME</code> （家目录）通常使用波浪符号简化表示（<code>~</code>）。</li><li><code>\$:</code> 如果当前用户是 root，显示为 <code>#</code>，否则为 <code>$</code>。</li></ul><p>例如，如果我们想要显示当前命令的历史数量，可以考虑添加 <code>\!</code>；如果我们想要显示 FQDN 全称而不是短服务器名，那么可以考虑添加 <code>\H</code>。</p><p>在下面的例子中，我们同时将这两个特殊字符引入我们当前的环境中，命令如下：</p><pre tabindex=0><code>PS1=&#34;[\u@\H \W \!]\$&#34;
</code></pre><p>当按下回车键后，你将会看到提示内容会变成下面这样。可以对比执行命令修改前和修改后的提示内容：</p><p><img src=/data/attachment/album/201701/09/140546f1h34y8obggomn1i.png alt="Customize Linux Terminal Prompt PS1"></p><p><em>自定义 Linux 终端提示符 PS1</em></p><p>现在，让我们再深入一点，修改命令提示符中的用户名和主机名 —— 同时修改文本和环境背景。</p><p>实际上，我们可以对提示符进行 3 个方面的自定义：</p><table><thead><tr><th>文本格式</th><th>前景色（文本）</th><th>背景色</th></tr></thead><tbody><tr><td>0: 常规文本</td><td>30: 黑色</td><td>40: 黑色</td></tr><tr><td>1: 加粗文本</td><td>31: 红色</td><td>41: 红色</td></tr><tr><td>4: 下划线文本</td><td>32: 绿色</td><td>42: 绿色</td></tr><tr><td></td><td>33: 黄色</td><td>43: 黄色</td></tr><tr><td></td><td>34: 蓝色</td><td>44: 蓝色</td></tr><tr><td></td><td>35: 紫色</td><td>45: 紫色</td></tr><tr><td></td><td>36: 青色</td><td>46: 青色</td></tr><tr><td></td><td>37: 白色</td><td>47: 白色</td></tr></tbody></table><p>我们将在开头使用 <code>\e</code> 特殊字符，跟着颜色序列，在结尾使用 <code>m</code> 来表示结束。</p><p>在该序列中，三个值（<strong>背景</strong>，<strong>格式</strong>和<strong>前景</strong>）由分号分隔（如果不赋值，则假定为默认值）。</p><p><strong>建议阅读：</strong> <a href=http://www.tecmint.com/category/bash-shell/>在 Linux 中学习 Bash shell 脚本</a>。</p><p>此外，由于值的范围不同，指定背景，格式，或者前景的先后顺序没有关系。</p><p>例如，下面的 <code>PS1</code> 将导致提示符为黄色带下划线文本，并且背景为红色：</p><pre tabindex=0><code>PS1=&#34;\e[41;4;33m[\u@\h \W]$ &#34;
</code></pre><p><img src=/data/attachment/album/201701/09/140548xfv4urwrtsuctnlw.png alt="Change Linux Terminal Color Prompt PS1"></p><p><em>修改 Linux 终端提示符配色 PS1</em></p><p>虽然它看起来那么漂亮，但是这个自定义将只会持续到当前用户会话结束。如果你关闭终端，或者退出本次会话，所有修改都会丢失。</p><p>为了让修改永久生效，你必须将下面这行添加到 <code>~/.bashrc</code>或者 <code>~/.bash_profile</code>，这取决于你的版本。</p><pre tabindex=0><code>PS1=&#34;\e[41;4;33m[\u@\h \W]$ &#34;
</code></pre><p>尽情去玩耍吧，你可以尝试任何色彩，直到找出最适合你的。</p><p>（LCTT 译注：原文的这种设置，不但会影响到提示符，也会影响到输入和显示的其它文字，因此应该在 PS1 设置中使用 <code>\e[0m</code> 来结束颜色设置。如：<code>PS1="\e[41;4;33m[\u@\h \W]$\e[0m "</code>）</p><h3 id=小结>小结</h3><p>在本文中，我们讲述了如何来自定义 Bash 提示符的配色和提示内容。如果你对本文还有什么问题或者建议，请在下面评论框中写下来吧。我们期待你们的声音。</p><hr><p>作者简介：</p><p><img src=/data/attachment/album/201701/09/140549m3zrdx727slkr67x.jpg alt> Aaron Kili 是一位 Linux 及 F.O.S.S 的狂热爱好者，一位未来的 Linux 系统管理员，web 开发者，而当前是 TechMint 的原创作者，他热爱计算机工作，并且信奉知识分享。</p><hr><p>via: <a href=http://www.tecmint.com/customize-bash-colors-terminal-prompt-linux/>http://www.tecmint.com/customize-bash-colors-terminal-prompt-linux/</a></p><p>作者：<a href=http://www.tecmint.com/author/aaronkili/>Aaron Kili</a> 译者：<a href=https://github.com/GOLinux>GOLinux</a> 校对：<a href=https://github.com/jasminepeng>jasminepeng</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%8F%90%E7%A4%BA%E7%AC%A6/ rel=tag>提示符</a></li><li class=tags__item><a class="tags__link btn" href=/tags/ps1/ rel=tag>PS1</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>