<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Anbox：容器中的 Android - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Anbox：容器中的 Android"><meta property="og:description" content="Anbox 以基于容器的方式，在像 Ubuntu 这样的常规的 GNU Linux 系统上启动一个完整的 Android 系统。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8431-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-04-21T11:06:00+00:00"><meta property="article:modified_time" content="2017-04-21T11:06:00+00:00"><meta itemprop=name content="Anbox：容器中的 Android"><meta itemprop=description content="Anbox 以基于容器的方式，在像 Ubuntu 这样的常规的 GNU Linux 系统上启动一个完整的 Android 系统。"><meta itemprop=datePublished content="2017-04-21T11:06:00+00:00"><meta itemprop=dateModified content="2017-04-21T11:06:00+00:00"><meta itemprop=wordCount content="301"><meta itemprop=keywords content="Android,Anbox,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Anbox：容器中的 Android</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-04-21T11:06:00Z>April 21, 2017</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/201704/21/110527cqvgk8fhz6uv7fnk.jpg alt></p><p>Anbox 以基于容器的方式，在像 Ubuntu 这样的常规的 GNU Linux 系统上启动一个完整的 Android 系统。</p><h3 id=概述>概述</h3><p>Anbox 使用 Linux 命名空间（user、pid、uts、net、mount、ipc）来在容器中运行完整的 Android 系统，并在任何基于 GNU Linux 平台上提供 Android 应用。</p><p>容器内的 Android 无法直接访问任何硬件。所有硬件访问都通过主机上的 anbox 守护进程进行。我们重用基于 QEMU 的模拟器实现的 Android 中的 GL、ES 加速渲染。容器内的 Android 系统使用不同的管道与主机系统通信，并通过它发送所有硬件访问命令。</p><p>有关更多详细信息，请参考下文档：</p><ul><li><a href=https://android.googlesource.com/platform/external/qemu/+/emu-master-dev/android/android-emugl/DESIGN>Android 硬件 OpenGL ES 仿真设计概述</a></li><li><a href=https://android.googlesource.com/platform/external/qemu/+/emu-master-dev/android/docs/ANDROID-QEMU-PIPE.TXT>Android QEMU 快速管道</a></li><li><a href=https://android.googlesource.com/platform/external/qemu/+/emu-master-dev/android/docs/ANDROID-QEMUD.TXT>Android 的 “qemud” 复用守护进程</a></li><li><a href=https://android.googlesource.com/platform/external/qemu/+/emu-master-dev/android/docs/ANDROID-QEMUD-SERVICES.TXT>Android qemud 服务</a></li></ul><p>Anbox 目前适合桌面使用，但也用在移动操作系统上，如 Ubuntu Touch、Sailfish OS 或 Lune OS。然而，由于 Android 程序的映射目前只针对桌面环境，因此还需要额外的工作来支持其他的用户界面。</p><p>Android 运行时环境带有一个基于 <a href=https://source.android.com/>Android 开源项目</a>镜像的最小自定义 Android 系统。所使用的镜像目前基于 Android 7.1.1。</p><h3 id=安装>安装</h3><p>目前，安装过程包括一些添加额外组件到系统的步骤。包括：</p><ul><li>启用用于 binder 和 ashmen 的非发行的树外内核模块。</li><li>使用 udev 规则为 /dev/binder 和 /dev/ashmem 设置正确权限。</li><li>能够启动 Anbox 会话管理器作为用户会话的一个启动任务。</li></ul><p>为了使这个过程尽可能简单，我们将必要的步骤绑定在一个 snap（见 <a href=https://snapcraft.io>https://snapcraft.io</a> ） 中，称之为 “anbox-installer”。这个安装程序会执行所有必要的步骤。你可以在所有支持 snap 的系统运行下面的命令安装它。</p><pre tabindex=0><code>$ snap install --classic anbox-installer
</code></pre><p>另外你可以通过下面的命令下载安装脚本。</p><pre tabindex=0><code>$ wget https://raw.githubusercontent.com/anbox/anbox-installer/master/installer.sh -O anbox-installer
</code></pre><p>请注意，我们还不支持除所有 Linux 发行版。请查看下面的章节了解支持的发行版。</p><p>运行下面的命令进行安装。</p><pre tabindex=0><code>$ anbox-installer
</code></pre><p>它会引导你完成安装过程。</p><p><strong>注意：</strong> Anbox 目前处于 <strong>pre-alpha 开发状态</strong>。不要指望它具有生产环境你需要的所有功能。你肯定会遇到错误和崩溃。如果你遇到了，请不要犹豫并报告它们！</p><p><strong>注意：</strong> Anbox snap 目前 <strong>完全没有约束</strong>，因此它只能从边缘渠道获取。正确的约束是我们想要在未来实现的，但由于 Anbox 的性质和复杂性，这不是一个简单的任务。</p><h3 id=已支持的-linux-发行版>已支持的 Linux 发行版</h3><p>目前我们官方支持下面的 Linux 发行版：</p><ul><li>Ubuntu 16.04 (xenial)</li></ul><p>未测试但可能支持的：</p><ul><li>Ubuntu 14.04 (trusty)</li><li>Ubuntu 16.10 (yakkety)</li><li>Ubuntu 17.04 (zesty)</li></ul><h3 id=安装并运行-android-程序>安装并运行 Android 程序</h3><h4 id=从源码构建>从源码构建</h4><p>要构建 Anbox 运行时不需要特别了解什么，我们使用 cmake 作为构建系统。你的主机系统中应已有下面这些构建依赖：</p><ul><li>libdbus</li><li>google-mock</li><li>google-test</li><li>libboost</li><li>libboost-filesystem</li><li>libboost-log</li><li>libboost-iostreams</li><li>libboost-program-options</li><li>libboost-system</li><li>libboost-test</li><li>libboost-thread</li><li>libcap</li><li>libdbus-cpp</li><li>mesa (libegl1, libgles2)</li><li>glib-2.0</li><li>libsdl2</li><li>libprotobuf</li><li>protobuf-compiler</li><li>lxc</li></ul><p>在 Ubuntu 系统中你可以用下面的命令安装所有的依赖：</p><pre tabindex=0><code>$ sudo apt install build-essential cmake cmake-data debhelper dbus \  
    google-mock libboost-dev libboost-filesystem-dev libboost-log-dev \  
    libboost-iostreams-dev libboost-program-options-dev libboost-system-dev \  
    libboost-test-dev libboost-thread-dev libcap-dev libdbus-1-dev \  
    libdbus-cpp-dev libegl1-mesa-dev libgles2-mesa-dev libglib2.0-dev \  
    libglm-dev libgtest-dev liblxc1 libproperties-cpp-dev libprotobuf-dev \  
    libsdl2-dev lxc-dev pkg-config protobuf-compiler
</code></pre><p>之后用下面的命令构建 Anbox：</p><pre tabindex=0><code>$ mkdir build
$ cd build
$ cmake ..
$ make
</code></pre><p>一个简单的命令会将必要的二进制安装到你的系统中，如下。</p><pre tabindex=0><code>$ make install
</code></pre><p>如果你想要构建 anbox snap，你可以按照下面的步骤：</p><pre tabindex=0><code>$ mkdir android-images
$ cp /path/to/android.img android-images/android.img
$ snapcraft
</code></pre><p>结果会有一个 .snap 文件，你可以在支持 snap 的系统上安装。</p><pre tabindex=0><code>$ snap install --dangerous --devmode anbox_1_amd64.snap
</code></pre><h4 id=运行-anbox>运行 Anbox</h4><p>要从本地构建运行 Anbox ，你需要了解更多一点。请参考<a href=https://github.com/anbox/anbox/blob/master/docs/runtime-setup.md>“运行时步骤”</a>文档。</p><h3 id=文档>文档</h3><p>在项目源代码的子目录下，你可以找到额外的关于 Anbox 的文档。</p><p>有兴趣可以看下：</p><ul><li><a href=https://github.com/anbox/anbox/blob/master/docs/runtime-setup.md>运行时步骤</a></li><li><a href=https://github.com/anbox/anbox/blob/master/docs/build-android.md>构建 Android 镜像</a></li></ul><h3 id=报告-bug>报告 bug</h3><p>如果你发现了一个 Anbox 问题，请<a href=https://github.com/anbox/anbox/issues/new>提交 bug</a>。</p><h3 id=取得联系>取得联系</h3><p>如果你想要与开发者联系，你可以在 <a href=https://freenode.net/>FreeNode</a> 中加入 <em>#anbox</em> 的 IRC 频道。</p><h3 id=版权与许可>版权与许可</h3><p>Anbox 重用了像 Android QEMU 模拟器这样的其他项目的代码。这些项目可在外部/带有许可声明的子目录中得到。</p><p>anbox 源码本身，如果没有在相关源码中声明其他的许可，默认是 GPLv3 许可。</p><hr><p>via: <a href=https://github.com/anbox/anbox/blob/master/README.md>https://github.com/anbox/anbox/blob/master/README.md</a></p><p>作者：<a href=http://anbox.io/>Anbox</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/jasminepeng>jasminepeng</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/android/ rel=tag>Android</a></li><li class=tags__item><a class="tags__link btn" href=/tags/anbox/ rel=tag>Anbox</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>