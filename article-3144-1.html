<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>试试Linux下的ip命令，ifconfig已经过时了 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="试试Linux下的ip命令，ifconfig已经过时了"><meta property="og:description" content="linux的ip命令和ifconfig类似，但前者功能更强大，并旨在取代后者。使用ip命令，只需一个命令，你就能很轻松地执行一些网络管理任务。ifconfig是net-tools中已被废弃使用的一个命令，许多年前就已经没有维护了。iproute2套件里提供了许多增强功能的命令，ip命令即是其中之一。  要安装ip，请点击这里下载iproute2套装工具 。不过，大多数Linux发行版已经预装了iproute2工具。 你也可以使用git命令来下载最新源代码来编译： $ git clone https://kernel.googlesource.com/pub/scm/linux/kernel/git/shemminger/iproute2.git   设置和删除Ip"><meta property="og:type" content="article"><meta property="og:url" content="/article-3144-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-06-04T09:00:00+00:00"><meta property="article:modified_time" content="2014-06-04T09:00:00+00:00"><meta itemprop=name content="试试Linux下的ip命令，ifconfig已经过时了"><meta itemprop=description content="linux的ip命令和ifconfig类似，但前者功能更强大，并旨在取代后者。使用ip命令，只需一个命令，你就能很轻松地执行一些网络管理任务。ifconfig是net-tools中已被废弃使用的一个命令，许多年前就已经没有维护了。iproute2套件里提供了许多增强功能的命令，ip命令即是其中之一。  要安装ip，请点击这里下载iproute2套装工具 。不过，大多数Linux发行版已经预装了iproute2工具。 你也可以使用git命令来下载最新源代码来编译： $ git clone https://kernel.googlesource.com/pub/scm/linux/kernel/git/shemminger/iproute2.git   设置和删除Ip"><meta itemprop=datePublished content="2014-06-04T09:00:00+00:00"><meta itemprop=dateModified content="2014-06-04T09:00:00+00:00"><meta itemprop=wordCount content="112"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>试试Linux下的ip命令，ifconfig已经过时了</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2014-06-04T09:00:00Z>June 04, 2014</time></div></div></header><div class="content post__content clearfix"><p>linux的<strong>ip</strong>命令和<strong>ifconfig</strong>类似，但前者功能更强大，并旨在取代后者。使用ip命令，只需一个命令，你就能很轻松地执行一些网络管理任务。ifconfig是net-tools中已被废弃使用的一个命令，许多年前就已经没有维护了。iproute2套件里提供了许多增强功能的命令，ip命令即是其中之一。</p><p><img src=/data/attachment/album/201406/04/003404uy9l1t5zayzllylm.png alt="Net tools vs Iproute2"></p><p>要安装ip，请<a href=http://www.linuxgrill.com/anonymous/iproute2/NEW-OSDL/>点击这里</a>下载<strong>iproute2套装工具</strong> 。不过，大多数Linux发行版已经预装了iproute2工具。</p><p>你也可以使用git命令来下载最新源代码来编译：</p><pre tabindex=0><code>$ git clone https://kernel.googlesource.com/pub/scm/linux/kernel/git/shemminger/iproute2.git
</code></pre><p><img src=/data/attachment/album/201406/04/003410tpix2804k660lwu4.png alt="iproute2 git clone"></p><h3 id=设置和删除ip地址>设置和删除Ip地址</h3><p>要给你的机器设置一个IP地址，可以使用下列ip命令：</p><pre tabindex=0><code>$ sudo ip addr add 192.168.0.193/24 dev wlan0
</code></pre><p>请注意IP地址要有一个后缀，比如/24。这种用法用于在无类域内路由选择（CIDR）中来显示所用的子网掩码。在这个例子中，子网掩码是255.255.255.0。</p><p>在你按照上述方式设置好IP地址后，需要查看是否已经生效。</p><pre tabindex=0><code>$ ip addr show wlan0
</code></pre><p><img src=/data/attachment/album/201406/04/003411qp4xsem5491ee49t.png alt="set ip address"></p><p>你也可以使用相同的方式来删除IP地址，只需用del代替add。</p><pre tabindex=0><code>$ sudo ip addr del 192.168.0.193/24 dev wlan0
</code></pre><p><img src=/data/attachment/album/201406/04/003412dottfn0jnidyykd2.png alt="delete ip address"></p><h3 id=列出路由表条目>列出路由表条目</h3><p>ip命令的路由对象的参数还可以帮助你查看网络中的路由数据，并设置你的路由表。第一个条目是默认的路由条目，你可以随意改动它。</p><p>在这个例子中，有几个路由条目。这个结果显示有几个设备通过不同的网络接口连接起来。它们包括WIFI、以太网和一个点对点连接。</p><pre tabindex=0><code>$ ip route show
</code></pre><p><img src=/data/attachment/album/201406/04/003413mnehm4uinhziu287.png alt="ip route show"></p><p>假设现在你有一个IP地址，你需要知道路由包从哪里来。可以使用下面的路由选项（译注：列出了路由所使用的接口等）：</p><pre tabindex=0><code>$ ip route get 10.42.0.47
</code></pre><p><img src=/data/attachment/album/201406/04/003414h53e34qwjfo34emm.png alt="ip route get"></p><h3 id=更改默认路由>更改默认路由</h3><p>要更改默认路由，使用下面ip命令：</p><pre tabindex=0><code>$ sudo ip route add default via 192.168.0.196
</code></pre><p><img src=/data/attachment/album/201406/04/003415i8d82ulsa4c4jcd4.png alt="default route"></p><h3 id=显示网络统计数据>显示网络统计数据</h3><p>使用ip命令还可以显示不同网络接口的统计数据。</p><p><img src=/data/attachment/album/201406/04/003417l1jc4h5537m050wy.png alt="ip statistics all interfaces"></p><p>当你需要获取一个特定网络接口的信息时，在网络接口名字后面添加选项<strong>ls</strong>即可。使用多个选项**-s**会给你这个特定接口更详细的信息。特别是在排除网络连接故障时，这会非常有用。</p><pre tabindex=0><code>$ ip -s -s link ls p2p1
</code></pre><p><img src=/data/attachment/album/201406/04/003418acoo0krhjellollu.png alt="ip link statistics"></p><h3 id=arp条目>ARP条目</h3><p>地址解析协议（ARP）用于将一个IP地址转换成它对应的物理地址，也就是通常所说的MAC地址。使用ip命令的neigh或者neighbour选项，你可以查看接入你所在的局域网的设备的MAC地址。</p><pre tabindex=0><code>$ ip neighbour
</code></pre><p><img src=/data/attachment/album/201406/04/003419uzm96tbvujb5bvqe.png alt="ip neighbour"></p><h3 id=监控netlink消息>监控netlink消息</h3><p>也可以使用ip命令查看netlink消息。monitor选项允许你查看网络设备的状态。比如，所在局域网的一台电脑根据它的状态可以被分类成REACHABLE或者STALE。使用下面的命令：</p><pre tabindex=0><code>$ ip monitor all
</code></pre><p><img src=/data/attachment/album/201406/04/003420ap2j3jjvjk3jvvoo.png alt="ip monitor all"></p><h3 id=激活和停止网络接口>激活和停止网络接口</h3><p>你可以使用ip命令的up和down选项来激某个特定的接口，就像ifconfig的用法一样。</p><p>在这个例子中，当ppp0接口被激活和在它被停止和再次激活之后，你可以看到相应的路由表条目。这个接口可能是wlan0或者eth0。将ppp0更改为你可用的任意接口即可。</p><pre tabindex=0><code>$ sudo ip link set ppp0 down

$ sudo ip link set ppp0 up
</code></pre><p><img src=/data/attachment/album/201406/04/003421mdudvkazcgkl6g8d.png alt="ip link set up and down"></p><h3 id=获取帮助>获取帮助</h3><p>当你陷入困境，不知道某一个特定的选项怎么用的时候，你可以使用help选项。man页面并不会提供许多关于如何使用ip选项的信息，因此这里就是获取帮助的地方。</p><p>比如，想知道关于route选项更多的信息：</p><pre tabindex=0><code>$ ip route help
</code></pre><p><img src=/data/attachment/album/201406/04/003422xh9xm2wihecdjhif.png alt="ip route help"></p><h3 id=小结>小结</h3><p>对于网络管理员们和所有的Linux使用者们，ip命令是必备工具。是时候抛弃ifconfig命令了，特别是当你写脚本时。</p><hr><p>via: <a href=http://linoxide.com/linux-command/use-ip-command-linux/>http://linoxide.com/linux-command/use-ip-command-linux/</a></p><h2 id=译者kayguowhuhttpsgithubcomkayguowhu-校对wxyhttpsgithubcomwxy>译者：<a href=https://github.com/KayGuoWhu>KayGuoWhu</a> 校对：<a href=https://github.com/wxy>wxy</a></h2><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>