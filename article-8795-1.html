<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>了解 7z 命令开关（一） - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="了解 7z 命令开关（一）"><meta property="og:description" content="7z 无疑是一个功能强大的强大的归档工具（声称提供最高的压缩比）。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8795-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-08-19T14:32:59+00:00"><meta property="article:modified_time" content="2017-08-19T14:32:59+00:00"><meta itemprop=name content="了解 7z 命令开关（一）"><meta itemprop=description content="7z 无疑是一个功能强大的强大的归档工具（声称提供最高的压缩比）。"><meta itemprop=datePublished content="2017-08-19T14:32:59+00:00"><meta itemprop=dateModified content="2017-08-19T14:32:59+00:00"><meta itemprop=wordCount content="315"><meta itemprop=keywords content="7z,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>了解 7z 命令开关（一）</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-08-19T14:32:59Z>August 19, 2017</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201708/19/143244kypyp9rln99qyl9v.png alt></p><p>7z 无疑是一个功能强大的强大的归档工具（声称提供最高的压缩比）。在 HowtoForge 中，我们已经<a href=https://www.howtoforge.com/tutorial/how-to-install-and-use-7zip-file-archiver-on-ubuntu-linux/>已经讨论过</a>如何安装和使用它。但讨论仅限于你可以使用该工具提供的“功能字母”来使用基本功能。</p><p>在本教程中，我们将扩展对这个工具的说明，我们会讨论一些 7z 提供的“开关”。 但在继续之前，需要说明的是，本教程中提到的所有说明和命令都已在 Ubuntu 16.04 LTS 上进行了测试。</p><p><strong>注意</strong>：我们将使用以下截图中显示的文件来执行使用 7zip 的各种操作。</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/ls.png><img src=/data/attachment/album/201708/19/143302xyqgjbbptpfwf3pu.png alt="ls from test directory"></a></p><h3 id=包含文件>包含文件</h3><p>7z 工具允许你有选择地将文件包含在归档中。可以使用 <code>-i</code> 开关来使用此功能。</p><p>语法：</p><pre tabindex=0><code>-i[r[-|0]]{@listfile|!wildcard}
</code></pre><p>比如，如果你想在归档中只包含 “.txt” 文件，你可以使用下面的命令：</p><pre tabindex=0><code>$ 7z a ‘-i!*.txt’ include.7z
</code></pre><p>这是输出：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/include.png><img src=/data/attachment/album/201708/19/143304tyy5g74w77ypm5ah.png alt="add files to 7zip"></a></p><p>现在，检查新创建的归档是否只包含 “.txt” 文件，你可以使用下面的命令：</p><pre tabindex=0><code>$ 7z l include.7z
</code></pre><p>这是输出：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/includelist.png><img src=/data/attachment/album/201708/19/143305c0gbebnwsrbb0l1k.png alt=Result></a></p><p>在上面的截图中，你可以看到 “testfile.txt” 已经包含到归档中了。</p><h3 id=排除文件>排除文件</h3><p>如果你想要，你可以排除不想要的文件。可以使用 <code>-x</code> 开关做到。</p><p>语法：</p><pre tabindex=0><code>-x[r[-|0]]]{@listfile|!wildcard}
</code></pre><p>比如，如果你想在要创建的归档中排除 “abc.7z” ，你可以使用下面的命令：</p><pre tabindex=0><code>$ 7z a ‘-x!abc.7z’ exclude.7z
</code></pre><p>这是输出：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/exclude.png><img src=/data/attachment/album/201708/19/143306hxsm44cls1vmc1md.png alt="exclude files from 7zip"></a></p><p>要检查最后的归档是否排除了 “abc.7z”, 你可以使用下面的命令：</p><pre tabindex=0><code>$ 7z l exclude.7z
</code></pre><p>这是输出：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/excludelist.png><img src=/data/attachment/album/201708/19/143309famooayyvjs0u1o0.png alt="result of file exclusion"></a></p><p>上面的截图中，你可以看到 “abc.7z” 已经从新的归档中排除了。</p><p><strong>专业提示</strong>：假设任务是排除以 “t” 开头的所有 .7z 文件，并且包含以字母 “a” 开头的所有 .7z 文件。这可以通过以下方式组合 <code>-i</code> 和 <code>-x</code> 开关来实现：</p><pre tabindex=0><code>$ 7z a &#39;-x!t*.7z&#39; &#39;-i!a*.7z&#39; combination.7z
</code></pre><h3 id=设置归档密码>设置归档密码</h3><p>7z 同样也支持用密码保护你的归档文件。这个功能可以使用 <code>-p</code> 开关来实现。</p><pre tabindex=0><code>$ 7z a [archive-filename] -p[your-password] -mhe=[on/off]
</code></pre><p><strong>注意</strong>：<code>-mhe</code> 选项用来启用或者禁用归档头加密（默认是“off”）。</p><p>例子：</p><pre tabindex=0><code>$ 7z a password.7z -pHTF -mhe=on
</code></pre><p>无需多说，当你解压密码保护的归档时，工具会向你询问密码。要解压一个密码保护的文件，使用 <code>e</code> 功能字母。下面是例子：</p><pre tabindex=0><code>$ 7z e password.7z
</code></pre><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/password.png><img src=/data/attachment/album/201708/19/143311wspxbbnnpln572pp.png alt="protect 7zip archive with a password"></a></p><h3 id=设置输出目录>设置输出目录</h3><p>工具同样支持解压文件到你选择的目录中。这可以使用 <code>-o</code> 开关。无需多说，这个开关只在含有 <code>e</code> 或者 <code>x</code> 功能字母的时候有用。</p><pre tabindex=0><code>$ 7z [e/x] [existing-archive-filename] -o[path-of-directory]
</code></pre><p>比如，假设下面命令工作在当前的工作目录中：</p><pre tabindex=0><code>$ 7z e output.7z -ohow/to/forge
</code></pre><p>如 <code>-o</code> 开关的值所指的那样，它的目标是解压文件到 ./how/to/forge 中。</p><p>这是输出：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/output.png><img src=/data/attachment/album/201708/19/143315xpy5s5mysko8p484.png alt="7zip output directory"></a></p><p>在上面的截图中，你可以看到归档文件的所有内容都已经解压了。但是在哪里？要检查文件是否被解压到 ./how/to/forge，我们可以使用 <code>ls -R</code> 命令。</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/ls_-R.png><img src=/data/attachment/album/201708/19/143318au8pirl8oz8rte8l.png alt=result></a></p><p>在上面的截图中，我们可以看到 .7z 中的内容都被解压到 ./how/to/forge 中。</p><h3 id=创建多个卷>创建多个卷</h3><p>借助 7z 工具，你可以为归档创建多个卷（较小的子档案）。当通过网络或 USB 传输大文件时，这是非常有用的。可以使用 <code>-v</code> 开关使用此功能。这个开关需要指定子档案的大小。</p><p>我们可以以字节（b）、千字节（k）、兆字节（m）和千兆字节（g）指定子档案大小。</p><pre tabindex=0><code>$ 7z a [archive-filename] [files-to-archive] -v[size-of-sub-archive1] -v[size-of-sub-archive2] ....
</code></pre><p>让我们用一个例子来理解这个。请注意，我们将使用一个新的目录来执行 <code>-v</code> 开关的操作。</p><p>这是目录内容的截图：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/volumels.png><img src=/data/attachment/album/201708/19/143319xwdwkof1ks4sk0kd.png alt="7zip volumes"></a></p><p>现在，我们运行下面的命令来为一个归档文件创建多个卷（每个大小 100b）：</p><pre tabindex=0><code>7z a volume.7z * -v100b
</code></pre><p>这是截图：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/volume.png><img src=/data/attachment/album/201708/19/143322z0cdkdg275zpdezu.png alt="compressing volumes"></a></p><p>现在，要查看创建的子归档，使用 <code>ls</code> 命令。</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/volumels2.png><img src=/data/attachment/album/201708/19/143324hz2um0i3wzbr2sbu.png alt="list of archives"></a></p><p>如下截图所示，一共创建四个卷 - volume.7z.001、volume.7z.002、volume.7z.003 和 volume.7z.004</p><p><strong>注意</strong>：你可以使用 .7z.001 归档文件来解压。但是，要这么做，其他所有的卷都应该在同一个目录内。</p><h3 id=设置归档的压缩级别>设置归档的压缩级别</h3><p>7z 允许你设置归档的压缩级别。这个功能可以使用 <code>-m</code> 开关。7z 中有不同的压缩级别，比如：<code>-mx0</code>、<code>-mx1</code>、<code>-mx3</code>、<code>-mx5</code>、<code>-mx7</code> 和 <code>-mx9</code>。</p><p>这是这些压缩级别的简要说明：</p><ul><li><code>mx0</code> = 完全不压缩 - 只是复制文件到归档中。</li><li><code>mx1</code> = 消耗最少时间，但是压缩最小。</li><li><code>mx3</code> = 比 <code>-mx1</code> 好。</li><li><code>mx5</code> = 这是默认级别 （常规压缩）。</li><li><code>mx7</code> = 最大化压缩。</li><li><code>mx9</code> = 极端压缩。</li></ul><p><strong>注意</strong>：关于这些压缩级别的更多信息，阅读<a href=http://askubuntu.com/questions/491223/7z-ultra-settings-for-zip-format>这里</a>。</p><pre tabindex=0><code>$ 7z a [archive-filename] [files-to-archive] -mx=[0,1,3,5,7,9]
</code></pre><p>例如，我们在目录中有一堆文件和文件夹，我们每次尝试使用不同的压缩级别进行压缩。作为一个例子，这是当使用压缩级别 “0” 时创建存档时使用的命令。</p><pre tabindex=0><code>$ 7z a compression(-mx0).7z * -mx=0
</code></pre><p>相似地，其他命令也这样执行。</p><p>以下是输出档案（使用 “ls” 命令生成）的列表，其名称表示其创建中使用的压缩级别，输出中的第五列显示压缩级别对其大小的影响。</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/compression.png><img src=/data/attachment/album/201708/19/143326b7l7pzmm1lxx7w0j.png alt="7zip compression level"></a></p><h3 id=显示归档的技术信息>显示归档的技术信息</h3><p>如果需要，7z 还可以在标准输出中显示归档的技术信息 - 类型、物理大小、头大小等。可以使用 <code>-slt</code> 开关使用此功能。 此开关仅适用于带有 <code>l</code> 功能字母的情况下。</p><pre tabindex=0><code>$ 7z l -slt [archive-filename]
</code></pre><p>比如：</p><pre tabindex=0><code>$ 7z l -slt abc.7z
</code></pre><p>这是输出：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/slt.png><img src=/data/attachment/album/201708/19/143328p2gkd0z2vtnok0s2.png alt></a></p><h3 id=指定创建归档的类型>指定创建归档的类型</h3><p>如果你想要创建一个非 7z 的归档文件（这是默认的创建类型），你可以使用 <code>-t</code> 开关来指定。</p><pre tabindex=0><code>$ 7z a -t[specify-type-of-archive] [archive-filename] [file-to-archive]
</code></pre><p>下面的例子展示创建了一个 .zip 文件：</p><pre tabindex=0><code>7z a -tzip howtoforge *
</code></pre><p>输出的文件是 “howtoforge.zip”。要交叉验证它的类型，使用 <code>file</code> 命令：</p><p><a href=https://www.howtoforge.com/images/understanding_7z_command_switches_part_i/big/type.png><img src=/data/attachment/album/201708/19/143329hoq7skkmo1k7o8mn.png alt></a></p><p>因此，howtoforge.zip 的确是一个 ZIP 文件。相似地，你可以创建其他 7z 支持的归档。</p><h3 id=总结>总结</h3><p>你将会认识到， 7z 的 “功能字母” 以及 “开关” 的知识可以让你充分利用这个工具。我们还没有完成开关的部分 - 其余部分将在第 2 部分中讨论。</p><hr><p>via: <a href=https://www.howtoforge.com/tutorial/understanding-7z-command-switches/>https://www.howtoforge.com/tutorial/understanding-7z-command-switches/</a></p><p>作者：<a href=https://www.howtoforge.com/tutorial/understanding-7z-command-switches/>Himanshu Arora</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/7z/ rel=tag>7z</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>