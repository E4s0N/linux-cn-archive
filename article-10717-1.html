<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 Bash 中使用[方括号] （一） - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 Bash 中使用[方括号] （一）"><meta property="og:description" content="这篇文章将要介绍方括号及其在命令行中的不同用法。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10717-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-04-13T00:08:43+00:00"><meta property="article:modified_time" content="2019-04-13T00:08:43+00:00"><meta itemprop=name content="在 Bash 中使用[方括号] （一）"><meta itemprop=description content="这篇文章将要介绍方括号及其在命令行中的不同用法。"><meta itemprop=datePublished content="2019-04-13T00:08:43+00:00"><meta itemprop=dateModified content="2019-04-13T00:08:43+00:00"><meta itemprop=wordCount content="174"><meta itemprop=keywords content="方括号,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 Bash 中使用[方括号] （一）</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-04-13T00:08:43Z>April 13, 2019</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201904/13/000852a6wvjeez4feg31ve.jpg alt="square brackets" title="square brackets"></p><blockquote><p>这篇文章将要介绍方括号及其在命令行中的不同用法。</p></blockquote><p>看完<a href=/article-10624-1.html>花括号在命令行中的用法</a>之后，现在我们继续来看方括号（<code>[]</code>）在上下文中是如何发挥作用的。</p><h3 id=通配>通配</h3><p>方括号最简单的用法就是通配。你可能在知道“ Globbing ”这个概念之前就已经通过通配来匹配内容了，列出具有相同特征的多个文件就是一个很常见的场景，例如列出所有 JPEG 文件：</p><pre tabindex=0><code>ls *.jpg
</code></pre><p>使用 通配符 wildcard 来得到符合某个模式的所有内容，这个过程就叫通配。</p><p>在上面的例子当中，星号（<code>*</code>）就代表“0 个或多个字符”。除此以外，还有代表“有且仅有一个字符”的问号（<code>?</code>）。因此</p><pre tabindex=0><code>ls d*k*
</code></pre><p>可以列出 <code>darkly</code> 和 <code>ducky</code>，而且 <code>dark</code> 和 <code>duck</code> 也是可以被列出的，因为 <code>*</code> 可以匹配 0 个字符。而</p><pre tabindex=0><code>ls d*k?
</code></pre><p>则只能列出 <code>ducky</code>，不会列出 <code>darkly</code>、<code>dark</code> 和 <code>duck</code>。</p><p>方括号也可以用于通配。为了便于演示，可以创建一个用于测试的目录，并在这个目录下创建文件：</p><pre tabindex=0><code>touch file0{0..9}{0..9}
</code></pre><p>（如果你还不清楚上面这个命令的原理，可以看一下<a href=/article-10624-1.html>另一篇介绍花括号的文章</a>）</p><p>执行上面这个命令之后，就会创建 <code>file000</code>、<code>file001</code>、……、<code>file099</code> 这 100 个文件。</p><p>如果要列出这些文件当中第二位数字是 7 或 8 的文件，可以执行：</p><pre tabindex=0><code>ls file0[78]?
</code></pre><p>如果要列出 <code>file022</code>、<code>file027</code>、<code>file028</code>、<code>file052</code>、<code>file057</code>、<code>file058</code>、<code>file092</code>、<code>file097</code>、<code>file098</code>，可以执行：</p><pre tabindex=0><code>ls file0[259][278]
</code></pre><p>当然，不仅仅是 <code>ls</code>，很多其它的命令行工具都可以使用方括号来进行通配操作。但在删除文件、移动文件、复制文件的过程中使用通配，你需要有一点横向思维。</p><p>例如将 <code>file010</code> 到 <code>file029</code> 这 30 个文件复制成 <code>archive010</code> 到 <code>archive029</code> 这 30 个副本，不可以这样执行：</p><pre tabindex=0><code>cp file0[12]? archive0[12]?
</code></pre><p>因为通配只能针对已有的文件，而 <code>archive</code> 开头的文件并不存在，不能进行通配。</p><p>而这条命令</p><pre tabindex=0><code>cp file0[12]? archive0[1..2][0..9]
</code></pre><p>也同样不行，因为 <code>cp</code> 并不允许将多个文件复制到多个文件。在复制多个文件的情况下，只能将多个文件复制到一个指定的目录下：</p><pre tabindex=0><code>mkdir archive
cp file0[12]? archive
</code></pre><p>这条命令是可以正常运行的，但它只会把这 30 个文件以同样的名称复制到 <code>archive/</code> 目录下，而这并不是我们想要的效果。</p><p>如果你阅读过我<a href=/article-10624-1.html>关于花括号的文章</a>，你大概会记得可以使用 <code>%</code> 来截掉字符串的末尾部分，而使用 <code>#</code> 则可以截掉字符串的开头部分。</p><p>例如：</p><pre tabindex=0><code>myvar=&#34;Hello World&#34;
echo Goodbye Cruel ${myvar#Hello}
</code></pre><p>就会输出 <code>Goodbye Cruel World</code>，因为 <code>#Hello</code> 将 <code>myvar</code> 变量中开头的 <code>Hello</code> 去掉了。</p><p>在通配的过程中，也可以使用这一个技巧。</p><pre tabindex=0><code>for i in file0[12]?;\
do\
cp $i archive${i#file};\
done
</code></pre><p>上面的第一行命令告诉 Bash 需要对所有 <code>file01</code> 开头或者 <code>file02</code> 开头，且后面只跟一个任意字符的文件进行操作，第二行的 <code>do</code> 和第四行的 <code>done</code> 代表需要对这些文件都执行这一块中的命令。</p><p>第三行就是实际的复制操作了，这里使用了两次 <code>$i</code> 变量：第一次在 <code>cp</code> 命令中直接作为源文件的文件名使用，第二次则是截掉文件名开头的 <code>file</code> 部分，然后在开头补上一个 <code>archive</code>，也就是这样：</p><pre tabindex=0><code>&#34;archive&#34; + &#34;file019&#34; - &#34;file&#34; = &#34;archive019&#34;
</code></pre><p>最终整个 <code>cp</code> 命令展开为：</p><pre tabindex=0><code>cp file019 archive019
</code></pre><p>最后，顺带说明一下反斜杠 <code>\</code> 的作用是将一条长命令拆分成多行，这样可以方便阅读。</p><p>在下一节，我们会了解方括号的更多用法，敬请关注。</p><hr><p>via: <a href=https://www.linux.com/blog/2019/3/using-square-brackets-bash-part-1>https://www.linux.com/blog/2019/3/using-square-brackets-bash-part-1</a></p><p>作者：<a href=https://www.linux.com/users/bro66>Paul Brown</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/HankChow>HankChow</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%96%B9%E6%8B%AC%E5%8F%B7/ rel=tag>方括号</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>