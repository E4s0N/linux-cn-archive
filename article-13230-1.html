<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 Firefox 上使用 WebAssembly 要了解的 6 件事 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 Firefox 上使用 WebAssembly 要了解的 6 件事"><meta property="og:description" content="了解在 Firefox 上运行 WebAssembly 的机会和局限性。"><meta property="og:type" content="article"><meta property="og:url" content="/article-13230-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-23T22:39:11+00:00"><meta property="article:modified_time" content="2021-03-23T22:39:11+00:00"><meta itemprop=name content="在 Firefox 上使用 WebAssembly 要了解的 6 件事"><meta itemprop=description content="了解在 Firefox 上运行 WebAssembly 的机会和局限性。"><meta itemprop=datePublished content="2021-03-23T22:39:11+00:00"><meta itemprop=dateModified content="2021-03-23T22:39:11+00:00"><meta itemprop=wordCount content="161"><meta itemprop=keywords content="WebAssembly,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 Firefox 上使用 WebAssembly 要了解的 6 件事</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-03-23T22:39:11Z>March 23, 2021</time></div></div></header><div class="content post__content clearfix"><blockquote><p>了解在 Firefox 上运行 WebAssembly 的机会和局限性。</p></blockquote><p><img src=https://img.linux.net.cn/data/attachment/album/202103/23/223901pi6tcg7ybsyxos7x.jpg alt title="Woman using laptop concentrating"></p><p>WebAssembly 是一种可移植的执行格式，由于它能够以近乎原生的速度在浏览器中执行应用而引起了人们的极大兴趣。WebAssembly 本质上有一些特殊的属性和局限性。但是，通过将其与其他技术结合，将出现全新的可能性，尤其是与浏览器中的游戏有关的可能性。</p><p>本文介绍了在 Firefox 上运行 WebAssembly 的概念、可能性和局限性。</p><h3 id=沙盒>沙盒</h3><p>WebAssembly 有 <a href=https://webassembly.org/docs/security/>严格的安全策略</a>。 WebAssembly 中的程序或功能单元称为<em>模块</em>。每个模块实例都运行在自己的隔离内存空间中。因此，即使同一个网页加载了多个模块，它们也无法访问另一个模块的虚拟地址空间。设计上，WebAssembly 还考虑了内存安全性和控制流完整性，这使得（几乎）确定性的执行成为可能。</p><h3 id=web-api>Web API</h3><p>通过 JavaScript <a href=https://developer.mozilla.org/en-US/docs/Web/API>Web API</a> 可以访问多种输入和输出设备。根据这个 <a href=https://github.com/WebAssembly/gc/blob/master/README.md>提案</a>，将来可以不用绕道到 JavaScript 来访问 Web API。C++ 程序员可以在 <a href=https://emscripten.org/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html>Emscripten.org</a> 上找到有关访问 Web API 的信息。Rust 程序员可以使用 <a href=https://rustwasm.github.io/wasm-bindgen/>rustwasm.github.io</a> 中写的 <a href=https://github.com/rustwasm/wasm-bindgen>wasm-bindgen</a> 库。</p><h3 id=文件输入输出>文件输入/输出</h3><p>因为 WebAssembly 是在沙盒环境中执行的，所以当它在浏览器中执行时，它无法访问主机的文件系统。但是，Emscripten 提供了虚拟文件系统形式的解决方案。</p><p>Emscripten 使在编译时将文件预加载到内存文件系统成为可能。然后可以像在普通文件系统上一样从 WebAssembly 应用中读取这些文件。这个 <a href=https://emscripten.org/docs/api_reference/Filesystem-API.html>教程</a> 提供了更多信息。</p><h3 id=持久化数据>持久化数据</h3><p>如果你需要在客户端存储持久化数据，那么必须通过 JavaScript Web API 来完成。请参考 Mozilla 开发者网络（MDN）关于 <a href=https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria>浏览器存储限制和过期标准</a> 的文档，了解不同方法的详细信息。</p><h3 id=内存管理>内存管理</h3><p>WebAssembly 模块作为 <a href=https://en.wikipedia.org/wiki/Stack_machine>堆栈机</a> 在线性内存上运行。这意味着堆内存分配等概念是没有的。然而，如果你在 C++ 中使用 <code>new</code> 或者在 Rust 中使用 <code>Box::new</code>，你会期望它会进行堆内存分配。将堆内存分配请求转换成 WebAssembly 的方式在很大程度上依赖于工具链。你可以在 Frank Rehberger 关于 <a href=https://frehberg.wordpress.com/webassembly-and-dynamic-memory/>WebAssembly 和动态内存</a> 的文章中找到关于不同工具链如何处理堆内存分配的详细分析。</p><h3 id=游戏>游戏！</h3><p>与 <a href=https://en.wikipedia.org/wiki/WebGL>WebGL</a> 结合使用时，WebAssembly 的执行速度很高，因此可以在浏览器中运行原生游戏。大型专有游戏引擎 <a href=https://beta.unity3d.com/jonas/AngryBots/>Unity</a> 和<a href="https://www.youtube.com/watch?v=TwuIRcpeUWE">虚幻 4</a> 展示了 WebGL 可以实现的功能。也有使用 WebAssembly 和 WebGL 接口的开源游戏引擎。这里有些例子：</p><ul><li>自 2011 年 11 月起，<a href=https://en.wikipedia.org/wiki/Id_Tech_4>id Tech 4</a> 引擎（更常称之为 Doom 3 引擎）可在 <a href=https://github.com/id-Software/DOOM-3>GitHub</a> 上以 GPL 许可的形式获得。此外，还有一个 <a href=https://wasm.continuation-labs.com/d3demo/>Doom 3 的 WebAssembly 移植版</a>。</li><li>Urho3D 引擎提供了一些 <a href=https://urho3d.github.io/samples/>令人印象深刻的例子</a>，它们可以在浏览器中运行。</li><li>如果你喜欢复古游戏，可以试试这个 <a href=https://vaporboy.net/>Game Boy 模拟器</a>。</li><li><a href=https://docs.godotengine.org/en/stable/development/compiling/compiling_for_web.html>Godot 引擎也能生成 WebAssembly</a>。我找不到演示，但 <a href=https://godotengine.org/editor/latest/godot.tools.html>Godot 编辑器</a> 已经被移植到 WebAssembly 上。</li></ul><h3 id=有关-webassembly-的更多信息>有关 WebAssembly 的更多信息</h3><p>WebAssembly 是一项很有前途的技术，我相信我们将来会越来越多地看到它。除了在浏览器中执行之外，WebAssembly 还可以用作可移植的执行格式。<a href=https://github.com/wasmerio/wasmer>Wasmer</a> 容器主机使你可以在各种平台上执行 WebAssembly 代码。</p><p>如果你需要更多的演示、示例和教程，请看一下这个 <a href=https://github.com/mbasso/awesome-wasm>WebAssembly 主题集合</a>。Mozilla 的 <a href=https://developer.mozilla.org/en-US/docs/Games/Examples>游戏和示例合集</a> 并非全是 WebAssembly，但仍然值得一看。</p><hr><p>via: <a href=https://opensource.com/article/21/3/webassembly-firefox>https://opensource.com/article/21/3/webassembly-firefox</a></p><p>作者：<a href=https://opensource.com/users/hansic99>Stephan Avenwedde</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/webassembly/ rel=tag>WebAssembly</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>