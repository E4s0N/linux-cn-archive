<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>10 个增加 UNIX/Linux Shell 脚本趣味的工具 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="10 个增加 UNIX/Linux Shell 脚本趣味的工具"><meta property="og:description" content="shell 脚本可以使用一些 GUI 组件（菜单、警告框、进度条等），你可以控制终端输出、光标位置以及各种输出效果等等。利用下面的工具，你可以构建强壮的、可交互的、对用户友好的 UNIX/Linux bash 脚本。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9510-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-03T17:48:27+00:00"><meta property="article:modified_time" content="2018-04-03T17:48:27+00:00"><meta itemprop=name content="10 个增加 UNIX/Linux Shell 脚本趣味的工具"><meta itemprop=description content="shell 脚本可以使用一些 GUI 组件（菜单、警告框、进度条等），你可以控制终端输出、光标位置以及各种输出效果等等。利用下面的工具，你可以构建强壮的、可交互的、对用户友好的 UNIX/Linux bash 脚本。"><meta itemprop=datePublished content="2018-04-03T17:48:27+00:00"><meta itemprop=dateModified content="2018-04-03T17:48:27+00:00"><meta itemprop=wordCount content="897"><meta itemprop=keywords content="GUI,脚本,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>10 个增加 UNIX/Linux Shell 脚本趣味的工具</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-04-03T17:48:27Z>April 03, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201804/03/174820hxf6fwcrzf7rpyfx.jpg alt></p><p>有些误解认为 shell 脚本仅用于 CLI 环境。实际上在 KDE 或 Gnome 桌面下，你可以有效的使用各种工具编写 GUI 或者网络（socket）脚本。shell 脚本可以使用一些 GUI 组件（菜单、警告框、进度条等），你可以控制终端输出、光标位置以及各种输出效果等等。利用下面的工具，你可以构建强壮的、可交互的、对用户友好的 UNIX/Linux bash 脚本。</p><p>制作 GUI 应用不是一项困难的任务，但需要时间和耐心。幸运的是，UNIX 和 Linux 都带有大量编写漂亮 GUI 脚本的工具。以下工具是基于 FreeBSD 和 Linux 操作系统做的测试，而且也适用于其他类 UNIX 操作系统。</p><h3 id=1notify-send-命令>1、notify-send 命令</h3><p><code>notify-send</code> 命令允许你借助通知守护进程发送桌面通知给用户。这种避免打扰用户的方式，对于通知桌面用户一个事件或显示一些信息是有用的。在 Debian 或 Ubuntu 上，你需要使用 <a href=https://www.cyberciti.biz/faq/ubuntu-lts-debian-linux-apt-command-examples/ title="See Linux/Unix apt command examples for more info">apt 命令</a> 或 <a href=https://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html title="See Linux/Unix apt-get command examples for more info">apt-get 命令</a> 安装的包：</p><pre tabindex=0><code>sudo apt-get install libnotify-bin
</code></pre><p>CentOS/RHEL 用户使用下面的 <a href=https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/ title="See Linux/Unix yum command examples for more info">yum 命令</a>：</p><pre tabindex=0><code>sudo yum install libnotify
</code></pre><p>Fedora Linux 用户使用下面的 dnf 命令：</p><pre tabindex=0><code>`$ sudo dnf install libnotify`
In this example, send simple desktop notification from the command line, enter:
### 发送一些通知 ###
notify-send &#34;rsnapshot done :)&#34;
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/03/174831ng1nmfk28ughghvf.png alt="Fig:01: notify-send in action " title="notify-send: Shell Script Get Or Send Desktop Notifications "></p><p>下面是另一个附加选项的代码：</p><pre tabindex=0><code>...
alert=18000
live=$(lynx --dump http://money.rediff.com/ | grep &#39;BSE LIVE&#39; | awk &#39;{ print $5}&#39; | sed &#39;s/,//g;s/\.[0-9]*//g&#39;)
[ $notify_counter -eq 0 ] &amp;&amp; [ $live -ge $alert ] &amp;&amp; { notify-send -t 5000 -u low -i   &#34;BSE Sensex touched 18k&#34;;  notify_counter=1; }
...
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/03/174832az4lbvex53lymes3.png alt="Fig.02: notify-send with timeouts and other options" title="Linux / UNIX: Display Notifications From Your Shell Scripts With notify-send"></p><p>这里：</p><ul><li><code>-t 5000</code>：指定超时时间（毫秒） （5000 毫秒 = 5 秒）</li><li><code>-u low</code>： 设置紧急等级 （如：低、普通、紧急）</li><li><code>-i gtk-dialog-info</code>： 设置要显示的图标名称或者指定的图标（你可以设置路径为：<code>-i /path/to/your-icon.png</code>）</li></ul><p>关于更多使用 <code>notify-send</code> 功能的信息，请参考 man 手册。在命令行下输入 <code>man notify-send</code> 即可看见：</p><pre tabindex=0><code>man notify-send
</code></pre><h3 id=2tput-命令>2、tput 命令</h3><p><code>tput</code> 命令用于设置终端特性。通过 <code>tput</code> 你可以设置：</p><ul><li>在屏幕上移动光标。</li><li>获取终端信息。</li><li>设置颜色（背景和前景）。</li><li>设置加粗模式。</li><li>设置反转模式等等。</li></ul><p>下面有一段示例代码：</p><pre tabindex=0><code>#!/bin/bash

# clear the screen
tput clear

# Move cursor to screen location X,Y (top left is 0,0)
tput cup 3 15

# Set a foreground colour using ANSI escape
tput setaf 3
echo &#34;XYX Corp LTD.&#34;
tput sgr0

tput cup 5 17
# Set reverse video mode
tput rev
echo &#34;M A I N - M E N U&#34;
tput sgr0

tput cup 7 15
echo &#34;1. User Management&#34;

tput cup 8 15
echo &#34;2. Service Management&#34;

tput cup 9 15
echo &#34;3. Process Management&#34;

tput cup 10 15
echo &#34;4. Backup&#34;

# Set bold mode
tput bold
tput cup 12 15
read -p &#34;Enter your choice [1-4] &#34; choice

tput clear
tput sgr0
tput rc
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/03/174832bz0t7fu2rthjjc22.png alt="Fig.03: tput in action" title="Linux / UNIX Script Colours and Cursor Movement With tput"></p><p>关于 <code>tput</code> 命令的详细信息，参见手册：</p><pre tabindex=0><code>man 5 terminfo
man tput
</code></pre><h3 id=3setleds-命令>3、setleds 命令</h3><p><code>setleds</code> 命令允许你设置键盘灯。下面是打开数字键灯的示例：</p><pre tabindex=0><code>setleds -D +num
</code></pre><p>关闭数字键灯，输入：</p><pre tabindex=0><code>setleds -D -num
</code></pre><ul><li><code>-caps</code>：关闭大小写锁定灯</li><li><code>+caps</code>：打开大小写锁定灯</li><li><code>-scroll</code>：关闭滚动锁定灯</li><li><code>+scroll</code>：打开滚动锁定灯</li></ul><p>查看 <code>setleds</code> 手册可看见更多信息和选项 <code>man setleds</code>。</p><h3 id=4zenity-命令>4、zenity 命令</h3><p><a href=https://bash.cyberciti.biz/guide/Zenity:_Shell_Scripting_with_Gnome>zenity 命令显示 GTK+ 对话框</a>，并且返回用户输入。它允许你使用各种 Shell 脚本向用户展示或请求信息。下面是一个 <code>whois</code> 指定域名目录服务的 GUI 客户端示例。</p><pre tabindex=0><code>#!/bin/bash
# Get domain name
_zenity=&#34;/usr/bin/zenity&#34;
_out=&#34;/tmp/whois.output.$$&#34;
domain=$(${_zenity} --title  &#34;Enter domain&#34; \
             --entry --text &#34;Enter the domain you would like to see whois info&#34; )

if [ $? -eq 0 ]
then
  # Display a progress dialog while searching whois database
  whois $domain  | tee &gt;(${_zenity} --width=200 --height=100 \
                    --title=&#34;whois&#34; --progress \
                        --pulsate --text=&#34;Searching domain info...&#34; \
                                    --auto-kill --auto-close \
                                    --percentage=10) &gt;${_out}

  # Display back output
  ${_zenity} --width=800 --height=600  \
         --title &#34;Whois info for $domain&#34; \
         --text-info --filename=&#34;${_out}&#34;
else
  ${_zenity} --error \
         --text=&#34;No input provided&#34;
fi
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/03/174832kyqetem3t9mcvqeh.png alt="Fig.04: zenity in Action" title="zenity: Linux / UNIX display Dialogs Boxes From The Shell Scripts"></p><p>参见手册获取更多 <code>zenity</code> 信息以及其他支持 GTK+ 的组件：</p><pre tabindex=0><code>zenity --help
man zenity
</code></pre><h3 id=5kdialog-命令>5、kdialog 命令</h3><p><code>kdialog</code> 命令与 <code>zenity</code> 类似，但它是为 KDE 桌面和 QT 应用设计。你可以使用 <code>kdialog</code> 展示对话框。下面示例将在屏幕上显示信息：</p><pre tabindex=0><code>kdialog --dontagain myscript:nofilemsg --msgbox &#34;File: &#39;~/.backup/config&#39; not found.&#34;
</code></pre><p>示例输出：</p><p><img src=/data/attachment/album/201804/03/174833kavn8w0ovk0a8g80.png alt="Fig.05: Suppressing the display of a dialog " title="Kdialog: Suppressing the display of a dialog "></p><p>参见 《<a href=http://techbase.kde.org/Development/Tutorials/Shell_Scripting_with_KDE_Dialogs>KDE 对话框 Shell 脚本编程</a>》 教程获取更多信息。</p><h3 id=6dialog>6、Dialog</h3><p><a href=https://bash.cyberciti.biz/guide/Bash_display_dialog_boxes>Dialog 是一个使用 Shell 脚本的应用</a>，显示用户界面组件的文本。它使用 curses 或者 ncurses 库。下面是一个示例代码：</p><pre tabindex=0><code>#!/bin/bash
dialog --title &#34;Delete file&#34; \
--backtitle &#34;Linux Shell Script Tutorial Example&#34; \
--yesno &#34;Are you sure you want to permanently delete \&#34;/tmp/foo.txt\&#34;?&#34; 7 60

# Get exit status
# 0 means user hit [yes] button.
# 1 means user hit [no] button.
# 255 means user hit [Esc] key.
response=$?
case $response in
   0) echo &#34;File deleted.&#34;;;
   1) echo &#34;File not deleted.&#34;;;
   255) echo &#34;[ESC] key pressed.&#34;;;
esac
</code></pre><p>参见 <code>dialog</code> 手册获取详细信息：<code>man dialog</code>。</p><h4 id=关于其他用户界面工具的注意事项>关于其他用户界面工具的注意事项</h4><p>UNIX、Linux 提供了大量其他工具来显示和控制命令行中的应用程序，shell 脚本可以使用一些 KDE、Gnome、X 组件集：</p><ul><li><code>gmessage</code> - 基于 GTK xmessage 的克隆</li><li><code>xmessage</code> - 在窗口中显示或询问消息（基于 X 的 /bin/echo）</li><li><code>whiptail</code> - 显示来自 shell 脚本的对话框</li><li><code>python-dialog</code> - 用于制作简单文本或控制台模式用户界面的 Python 模块</li></ul><h3 id=7logger-命令>7、logger 命令</h3><p><code>logger</code> 命令将信息写到系统日志文件，如：<code>/var/log/messages</code>。它为系统日志模块 syslog 提供了一个 shell 命令行接口：</p><pre tabindex=0><code>logger &#34;MySQL database backup failed.&#34;
tail -f /var/log/messages
logger -t mysqld -p daemon.error &#34;Database Server failed&#34;
tail -f /var/log/syslog
</code></pre><p>示例输出：</p><pre tabindex=0><code>Apr 20 00:11:45 vivek-desktop kernel: [38600.515354] CPU0: Temperature/speed normal
Apr 20 00:12:20 vivek-desktop mysqld: Database Server failed
</code></pre><p>参见 《<a href=https://www.cyberciti.biz/tips/howto-linux-unix-write-to-syslog.html>如何写消息到 syslog 或 日志文件</a>》 获得更多信息。此外，你也可以查看 logger 手册获取详细信息：<code>man logger</code></p><h3 id=8setterm-命令>8、setterm 命令</h3><p><code>setterm</code> 命令可设置不同的终端属性。下面的示例代码会强制屏幕在 15 分钟后变黑，监视器则 60 分钟后待机。</p><pre tabindex=0><code>setterm -blank 15 -powersave powerdown -powerdown 60
</code></pre><p>下面的例子将 xterm 窗口中的文本以下划线展示：</p><pre tabindex=0><code>setterm -underline on;
echo &#34;Add Your Important Message Here&#34;
setterm -underline off
</code></pre><p>另一个有用的选项是打开或关闭光标显示：</p><pre tabindex=0><code>setterm -cursor off
</code></pre><p>打开光标：</p><pre tabindex=0><code>setterm -cursor on
</code></pre><p>参见 setterm 命令手册获取详细信息：<code>man setterm</code></p><h3 id=9smbclient给-ms-windows-工作站发送消息>9、smbclient：给 MS-Windows 工作站发送消息</h3><p><code>smbclient</code> 命令可以与 SMB/CIFS 服务器通讯。它可以向 MS-Windows 系统上选定或全部用户发送消息。</p><pre tabindex=0><code>smbclient -M WinXPPro &lt;&lt;eof
Message 1
Message 2
...
..
EOF
</code></pre><p>或</p><pre tabindex=0><code>echo &#34;${Message}&#34; | smbclient -M salesguy2
</code></pre><p>参见 <code>smbclient</code> 手册或者阅读我们之前发布的文章：《<a href=https://www.cyberciti.biz/tips/freebsd-sending-a-message-to-windows-workstation.html>给 Windows 工作站发送消息</a>》：<code>man smbclient</code></p><h3 id=10bash-套接字编程>10、Bash 套接字编程</h3><p>在 bash 下，你可以打开一个套接字并通过它发送数据。你不必使用 <code>curl</code> 或者 <code>lynx</code> 命令抓取远程服务器的数据。bash 和两个特殊的设备文件可用于打开网络套接字。以下选自 bash 手册：</p><ol><li><code>/dev/tcp/host/port</code> - 如果 <code>host</code> 是一个有效的主机名或者网络地址，而且端口是一个整数或者服务名，bash 会尝试打开一个相应的 TCP 连接套接字。</li><li><code>/dev/udp/host/port</code> - 如果 <code>host</code> 是一个有效的主机名或者网络地址，而且端口是一个整数或者服务名，bash 会尝试打开一个相应的 UDP 连接套接字。</li></ol><p>你可以使用这项技术来确定本地或远程服务器端口是打开或者关闭状态，而无需使用 <code>nmap</code> 或者其它的端口扫描器。</p><pre tabindex=0><code># find out if TCP port 25 open or not
(echo &gt;/dev/tcp/localhost/25) &amp;&gt;/dev/null &amp;&amp; echo &#34;TCP port 25 open&#34; || echo &#34;TCP port 25 close&#34;
</code></pre><p>下面的代码片段，你可以利用 <a href=https://www.cyberciti.biz/faq/bash-for-loop/>bash 循环找出已打开的端口</a>：</p><pre tabindex=0><code>echo &#34;Scanning TCP ports...&#34;
for p in {1..1023}
do
  (echo &gt;/dev/tcp/localhost/$p) &gt;/dev/null 2&gt;&amp;1 &amp;&amp; echo &#34;$p open&#34;
done
</code></pre><p>示例输出：</p><pre tabindex=0><code>Scanning TCP ports...
22 open
53 open
80 open
139 open
445 open
631 open
</code></pre><p>下面的示例中，你的 bash 脚本将像 HTTP 客户端一样工作：</p><pre tabindex=0><code>#!/bin/bash
exec 3&lt;&gt; /dev/tcp/${1:-www.cyberciti.biz}/80

printf &#34;GET / HTTP/1.0\r\n&#34; &gt;&amp;3
printf &#34;Accept: text/html, text/plain\r\n&#34; &gt;&amp;3
printf &#34;Accept-Language: en\r\n&#34; &gt;&amp;3
printf &#34;User-Agent: nixCraft_BashScript v.%s\r\n&#34; &#34;${BASH_VERSION}&#34;   &gt;&amp;3
printf &#34;\r\n&#34; &gt;&amp;3

while read LINE &lt;&amp;3
do
   # do something on $LINE
   # or send $LINE to grep or awk for grabbing data
   # or simply display back data with echo command
   echo $LINE
done
</code></pre><p>参见 bash 手册获取更多信息：<code>man bash</code></p><h3 id=关于-gui-工具和-cron-任务的注意事项>关于 GUI 工具和 cron 任务的注意事项</h3><p>如果你 <a href=https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/>使用 crontab</a> 来启动你的脚本，你需要使用 <code>export DISPLAY=[用户机器]:0</code> 命令请求本地显示或输出服务。举个例子，使用 <code>zenity</code> 工具调用 <code>/home/vivek/scripts/monitor.stock.sh</code>：</p><pre tabindex=0><code>@hourly DISPLAY=:0.0 /home/vivek/scripts/monitor.stock.sh
</code></pre><p>你有喜欢的可以增加 shell 脚本趣味的 UNIX 工具么？请在下面的评论区分享它吧。</p><h3 id=关于作者>关于作者</h3><p>本文作者是 nixCraft 创始人、一个老练的系统管理员、Linux 操作系统和 UNIX shell 编程培训师。他服务来自全球的客户和不同的行业，包括 IT 、教育、防务和空间探索、还有非营利组织。你可以在 <a href=https://twitter.com/nixcraft>Twitter</a>，<a href=https://facebook.com/nixcraft>Facebook</a>，<a href=https://plus.google.com/+CybercitiBiz>Google+</a> 上面关注他。</p><hr><p>via: <a href=https://www.cyberciti.biz/tips/spice-up-your-unix-linux-shell-scripts.html>https://www.cyberciti.biz/tips/spice-up-your-unix-linux-shell-scripts.html</a></p><p>作者：<a href=https://www.cyberciti.biz>Vivek Gite</a> 译者：<a href=https://github.com/pygmalion666>pygmalion666</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/gui/ rel=tag>GUI</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E8%84%9A%E6%9C%AC/ rel=tag>脚本</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>