<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>增强 Vim 编辑器，提高编辑效率 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="增强 Vim 编辑器，提高编辑效率"><meta property="og:description" content="这 20 多个有用的命令可以增强你使用 Vim 的体验。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10039-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-09-22T14:08:00+00:00"><meta property="article:modified_time" content="2018-09-22T14:08:00+00:00"><meta itemprop=name content="增强 Vim 编辑器，提高编辑效率"><meta itemprop=description content="这 20 多个有用的命令可以增强你使用 Vim 的体验。"><meta itemprop=datePublished content="2018-09-22T14:08:00+00:00"><meta itemprop=dateModified content="2018-09-22T14:08:00+00:00"><meta itemprop=wordCount content="402"><meta itemprop=keywords content="Vim,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>增强 Vim 编辑器，提高编辑效率</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-09-22T14:08:00Z>September 22, 2018</time></div></div></header><div class="content post__content clearfix"><blockquote><p>这 20 多个有用的命令可以增强你使用 Vim 的体验。</p></blockquote><p><img src=/data/attachment/album/201809/22/140748n5hmv7hvt95ch0vh.png alt></p><p><em>编者注：标题和文章最初称呼的 <code>vi</code> 编辑器，现已更新为编辑器的正确名称：<code>Vim</code>。</em></p><p><code>Vim</code> 作为一款功能强大、选项丰富的编辑器，为许多用户所热爱。本文介绍了一些在 <code>Vim</code> 中默认未启用但实际非常有用的选项。虽然可以在每个 <code>Vim</code> 会话中单独启用，但为了创建一个开箱即用的高效编辑环境，还是建议在 <code>Vim</code> 的配置文件中配置这些命令。</p><h3 id=开始前的准备>开始前的准备</h3><p>这里所说的选项或配置均位于用户主目录中的 <code>Vim</code> 启动配置文件 <code>.vimrc</code>。 按照下面的说明在 <code>.vimrc</code> 中设置选项：</p><p>（注意：<code>vimrc</code> 文件也用于 <code>Linux</code> 中的全局配置，如 <code>/etc/vimrc</code> 或 <code>/etc/vim/vimrc</code>。本文所说的 <code>.vimrc</code> 均是指位于用户主目录中的 <code>.vimrc</code> 文件。）</p><p>Linux 系统中：</p><ul><li>用 <code>Vim</code> 打开 <code>.vimrc</code> 文件： <code>vim ~/.vimrc</code></li><li>复制本文最后的 <code>选项列表</code> 粘贴到 <code>.vimrc</code> 文件</li><li>保存并关闭 (<code>:wq</code>)</li></ul><p>（LCTT 译注：此处不建议使用 <code>Vim</code> 编辑 <code>.vimrc</code> 文件，因为很可能无法粘贴成功，可以选择 <code>gedit</code> 编辑器编辑 <code>.vimrc</code> 文件。）</p><p>Windows 系统中：</p><ul><li>首先，<a href=https://www.vim.org/download.php#pc>安装 gvim</a></li><li>打开 <code>gvim</code></li><li>单击 “编辑” -> “启动设置”，打开 <code>_vimrc</code> 文件</li><li>复制本文最后的 “选项列表” 粘贴到 <code>_vimrc</code> 文件</li><li>单击 “文件” -> “保存”</li></ul><p>（LCTT 译注：此处应注意不要使用 <code>Windows</code> 自带的记事本编辑该 <code>_vimrc</code> 文件，否则可能会因为行结束符不同而导致问题。）</p><p>下面，我们将深入研究提高 <code>Vim</code> 编辑效率的选项。主要分为以下几类：</p><ol><li>缩进 & 制表符</li><li>显示 & 格式化</li><li>搜索</li><li>浏览 & 滚动</li><li>拼写</li><li>其他选项</li></ol><h3 id=1-缩进--制表符>1. 缩进 & 制表符</h3><p>使 <code>Vim</code> 在创建新行的时候使用与上一行同样的缩进：</p><pre tabindex=0><code>set autoindent
</code></pre><p>创建新行时使用智能缩进，主要用于 <code>C</code> 语言一类的程序。通常，打开 <code>smartindent</code> 时也应该打开 <code>autoindent</code>：</p><pre tabindex=0><code>set smartindent
</code></pre><p>注意：<code>Vim</code> 具有语言感知功能，且其默认设置可以基于文件中的编程语言来改变配置以提高效率。有许多默认的配置选项，包括 <code>axs cindent</code>，<code>cinoptions</code>，<code>indentexpr</code> 等，没有在这里说明。 <code>syn</code> 是一个非常有用的命令，用于设置文件的语法以更改显示模式。</p><p>（LCTT 译注：这里的 <code>syn</code> 是指 <code>syntax</code>，可用于设置文件所用的编程语言，开启对应的语法高亮，以及执行自动事件 (<code>autocmd</code>)。）</p><p>设置文件里的制表符 <code>(TAB)</code> 的宽度（以空格的数量表示）：</p><pre tabindex=0><code>set tabstop=4
</code></pre><p>设置移位操作 <code>>></code> 或 <code>&lt;&lt;</code> 的缩进长度（以空格的数量表示）：</p><pre tabindex=0><code>set shiftwidth=4
</code></pre><p>如果你更喜欢在编辑文件时使用空格而不是制表符，设置以下选项可以使 <code>Vim</code> 在你按下 <code>Tab</code> 键时用空格代替制表符。</p><pre tabindex=0><code>set expandtab
</code></pre><p>注意：这可能会导致依赖于制表符的 <code>Python</code> 等编程语言出现问题。这时，你可以根据文件类型设置该选项（请参考 <code>autocmd</code>）。</p><h3 id=2-显示--格式化>2. 显示 & 格式化</h3><p>要在每行的前面显示行号：</p><pre tabindex=0><code>set number
</code></pre><p><img src=/data/attachment/album/201809/22/140832b37uezix6ugwujjz.png alt></p><p>要在文本行超过一定长度时自动换行：</p><pre tabindex=0><code>set textwidth=80
</code></pre><p>要根据从窗口右侧向左数的列数来自动换行：</p><pre tabindex=0><code>set wrapmargin=2
</code></pre><p>（LCTT 译注：如果 <code>textwidth</code> 选项不等于零，本选项无效。)</p><p>当光标遍历文件时经过括号时，高亮标识匹配的括号：</p><pre tabindex=0><code>set showmatch
</code></pre><p><img src=/data/attachment/album/201809/22/140851tg0a5rliy0pr4y54.jpg alt></p><h3 id=3-搜索>3. 搜索</h3><p>高亮搜索内容的所有匹配位置：</p><pre tabindex=0><code>set hlsearch
</code></pre><p><img src=/data/attachment/album/201809/22/140856ebx7mp2wxelm0lls.png alt></p><p>搜索过程中动态显示匹配内容：</p><pre tabindex=0><code>set incsearch
</code></pre><p><img src=/data/attachment/album/201809/22/140859r5mqq41gd0w1aqmg.png alt></p><p>搜索时忽略大小写：</p><pre tabindex=0><code>set ignorecase
</code></pre><p>在打开 <code>ignorecase</code> 选项的条件下，搜索内容包含部分大写字符时，要使搜索大小写敏感：</p><pre tabindex=0><code>set smartcase
</code></pre><p>例如，如果文件内容是：</p><pre tabindex=0><code>test
Test
</code></pre><p>当打开 <code>ignorecase</code> 和 <code>smartcase</code> 选项时，搜索 <code>test</code> 时的突出显示：</p><blockquote><p>test<br>Test</p></blockquote><p>搜索 <code>Test</code> 时的突出显示：</p><blockquote><p>test<br>Test</p></blockquote><h3 id=4-浏览--滚动>4. 浏览 & 滚动</h3><p>为获得更好的视觉体验，你可能希望将光标放在窗口中间而不是第一行，以下选项使光标距窗口上下保留 5 行。</p><pre tabindex=0><code>set scrolloff=5
</code></pre><p>一个例子：</p><p>第一张图中 <code>scrolloff=0</code>，第二张图中 <code>scrolloff=5</code>。</p><p><img src=/data/attachment/album/201809/22/140917nu6kufiywb935z9y.jpg alt></p><p>提示：如果你没有设置选项 <code>nowrap</code>，那么设置 <code>sidescrolloff</code> 将非常有用。</p><p>在 <code>Vim</code> 窗口底部显示一个永久状态栏，可以显示文件名、行号和列号等内容：</p><pre tabindex=0><code>set laststatus=2
</code></pre><p><img src=/data/attachment/album/201809/22/140921z5qrqtrjy0tzbq0q.png alt></p><h3 id=5-拼写>5. 拼写</h3><p><code>Vim</code> 有一个内置的拼写检查器，对于文本编辑和编码非常有用。<code>Vim</code> 可以识别文件类型并仅对代码中的注释进行拼写检查。使用下面的选项打开英语拼写检查：</p><pre tabindex=0><code>set spell spelllang=en_us
</code></pre><p>（LCTT 译注：中文、日文或其它东亚语字符通常会在打开拼写检查时被标为拼写错误，因为拼写检查不支持这些语种，可以在 <code>spelllang</code> 选项中加入 <code>cjk</code> 来忽略这些错误标注。）</p><h3 id=6-其他选项>6. 其他选项</h3><p>禁止创建备份文件：启用此选项后，<code>Vim</code> 将在覆盖文件前创建一个备份，文件成功写入后保留该备份。如果不想保留该备份文件，可以按下面的方式关闭：</p><pre tabindex=0><code>set nobackup
</code></pre><p>禁止创建交换文件：启用此选项后，<code>Vim</code> 将在编辑该文件时创建一个交换文件。 交换文件用于在崩溃或发生使用冲突时恢复文件。交换文件是以 <code>.</code> 开头并以 <code>.swp</code> 结尾的隐藏文件。</p><pre tabindex=0><code>set noswapfile
</code></pre><p>如果需要在同一个 <code>Vim</code> 窗口中编辑多个文件并进行切换。默认情况下，工作目录是打开的第一个文件的目录。而将工作目录自动切换到正在编辑的文件的目录是非常有用的。要自动切换工作目录：</p><pre tabindex=0><code>set autochdir
</code></pre><p><code>Vim</code> 自动维护编辑的历史记录，允许撤消更改。默认情况下，该历史记录仅在文件关闭之前有效。<code>Vim</code> 包含一个增强功能，使得即使在文件关闭后也可以维护撤消历史记录，这意味着即使在保存、关闭和重新打开文件后，也可以撤消之前的更改。历史记录文件是使用 <code>.un~</code> 扩展名保存的隐藏文件。</p><pre tabindex=0><code>set undofile
</code></pre><p>错误信息响铃，只对错误信息起作用：</p><pre tabindex=0><code>set errorbells
</code></pre><p>如果你愿意，还可以设置错误视觉提示：</p><pre tabindex=0><code>set visualbell
</code></pre><h3 id=惊喜>惊喜</h3><p><code>Vim</code> 提供长格式和短格式命令，两种格式都可用于设置或取消选项配置。</p><p><code>autoindent</code> 选项的长格式是：</p><pre tabindex=0><code>set autoindent
</code></pre><p><code>autoindent</code> 选项的短格式是：</p><pre tabindex=0><code>set ai
</code></pre><p>要在不更改选项当前值的情况下查看其当前设置，可以在 <code>Vim</code> 的命令行上使用在末尾加上 <code>?</code> 的命令：</p><pre tabindex=0><code>set autoindent?
</code></pre><p>在大多数选项前加上 <code>no</code> 前缀可以取消或关闭选项：</p><pre tabindex=0><code>set noautoindent
</code></pre><p>可以为单独的文件配置选项，而不必修改全局配置文件。需要的话，请打开文件并输入 <code>:</code>，然后键入 <code>set</code>命令。这样的话，配置仅对当前的文件编辑会话有效。</p><p><img src=/data/attachment/album/201809/22/140925o8xn7bhbbj9m8xgx.png alt></p><p>使用命令行获取帮助：</p><pre tabindex=0><code>:help autoindent
</code></pre><p><img src=/data/attachment/album/201809/22/140938f87i0i847v07r4cy.jpg alt></p><p>注意：此处列出的命令仅对 Linux 上的 Vim 7.4 版本和 Windows 上的 Vim 8.0 版本进行了测试。</p><p>这些有用的命令肯定会增强您的 <code>Vim</code> 使用体验。你会推荐哪些其他有用的命令?</p><h3 id=选项列表>选项列表</h3><p>复制该选项列表粘贴到 <code>.vimrc</code> 文件中：</p><pre tabindex=0><code>&#34; Indentation &amp; Tabs
set autoindent
set smartindent
set tabstop=4
set shiftwidth=4
set expandtab
set smarttab
&#34; Display &amp; format
set number
set textwidth=80
set wrapmargin=2
set showmatch
&#34; Search
set hlsearch
set incsearch
set ignorecase
set smartcase
&#34; Browse &amp; Scroll
set scrolloff=5
set laststatus=2
&#34; Spell
set spell spelllang=en_us
&#34; Miscellaneous
set nobackup
set noswapfile
set autochdir
set undofile
set visualbell
set errorbells
</code></pre><hr><p>via: <a href=https://opensource.com/article/18/9/vi-editor-productivity-powerhouse>https://opensource.com/article/18/9/vi-editor-productivity-powerhouse</a></p><p>作者：<a href=https://opensource.com/users/gammay>Girish Managoli</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/idea2act>idea2act</a> 校对：<a href=https://github.com/apemost>apemost</a>, <a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/vim/ rel=tag>Vim</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>