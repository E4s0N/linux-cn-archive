<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 Lens Desktop 监控和调试 Kubernetes - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="使用 Lens Desktop 监控和调试 Kubernetes"><meta property="og:description" content="Lens Desktop 是一个令人兴奋的 Kubernetes 工作平台。它是基于 OpenLens 资源库的一个定制化发行版本。通过本文来了解下 Lens Desktop 能做什么以及它是如何工作的。"><meta property="og:type" content="article"><meta property="og:url" content="/article-15780-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-04T19:36:00+00:00"><meta property="article:modified_time" content="2023-05-04T19:36:00+00:00"><meta itemprop=name content="使用 Lens Desktop 监控和调试 Kubernetes"><meta itemprop=description content="Lens Desktop 是一个令人兴奋的 Kubernetes 工作平台。它是基于 OpenLens 资源库的一个定制化发行版本。通过本文来了解下 Lens Desktop 能做什么以及它是如何工作的。"><meta itemprop=datePublished content="2023-05-04T19:36:00+00:00"><meta itemprop=dateModified content="2023-05-04T19:36:00+00:00"><meta itemprop=wordCount content="620"><meta itemprop=keywords content="Kubernetes,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>使用 Lens Desktop 监控和调试 Kubernetes</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-05-04T19:36:00Z>May 04, 2023</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193543uvvdi14469ngnop4.png alt></p><blockquote><p>Lens Desktop 是一个令人兴奋的 Kubernetes 工作平台。它是基于 OpenLens 资源库的一个定制化发行版本。通过本文来了解下 Lens Desktop 能做什么以及它是如何工作的。</p></blockquote><p>Lens Desktop 是免费的。你可以查看 <a href=https://app.k8slens.dev/subscribe>https://app.k8slens.dev/subscribe</a> 来了解更多内容。Lens Desktop 有如下优势：</p><ul><li>简单高效 —— 你无需学习 <code>kubectl</code> 命令</li><li>可视化已有的 Kubernetes 资源</li><li>基于开源代码构建</li><li>可观测性 —— 实时的统计数据、事件和日志流</li><li>错误和警告可以直接在 Lens 仪表盘上看到</li><li>支持 EKS、AKS、GKE、Minikube、Rancher、k0s、k3s、OpenShift</li><li>强大的社区支持 —— 有 450000 用户，在 GitHub 上共获得 17000 星</li></ul><h3 id=minikube-安装>Minikube 安装</h3><p>Minikube 是一个用于本地运行 Kubernetes 的工具。它运行一个单节点的 Kubernetes 集群，这样就可以在 Kubernetes 上进行日常软件开发的实践工作。</p><p>我们将使用 Minikube 并验证 Lens 的用法。首先让我们在基于 Windows 的系统上安装 Minikube。你也可以把它安装在其他操作系统、虚拟机或笔记本电脑上。</p><ul><li>2 核以上 CPU</li><li>2GB RAM</li><li>20GB 空闲硬盘空间</li><li>能连接网络</li><li>容器或虚拟机管理器，如 Docker、VirtualBox</li></ul><p>在终端或命令提示符处，运行 <code>minikube start</code> 命令：</p><pre tabindex=0><code>minikube start --driver=virtualbox
* minikube v1.12.3 on Microsoft Windows 10 Home Single Language 10.0.19044 Build 19044
* Using the virtualbox driver based on existing profile
* minikube 1.26.0 is available! Download it: https://github.com/kubernetes/minikube/releases/tag/v1.26.0
* To disable this notice, run: ‘minikube config set WantUpdateNotification false’
* Starting control plane node minikube in cluster minikube
* virtualbox “minikube” VM is missing, will recreate.
* Creating virtualbox VM (CPUs=2, Memory=3000MB, Disk=20000MB) ...
! This VM is having trouble accessing https://k8s.gcr.io
* To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/
* Preparing Kubernetes v1.18.3 on Docker 19.03.12 ...
* Verifying Kubernetes components...
* Enabled addons: default-storageclass, storage-provisioner
* Done! kubectl is now configured to use “minikube”
</code></pre><p>进入你的 VirtualBox，并验证刚安装的 Minikube 虚拟机功能正常（图 1）。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193612gwi7xsy37j4yd71q.jpg alt="Figure 1: Minikube virtual machine in virtual box"></p><p>使用 <code>minikube status</code> 命令，查看状态是否与下面的输出一致：</p><pre tabindex=0><code>C:\&gt;minikube status
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured
</code></pre><p>然后，使用 <code>kubectl cluster-info</code> 命令查看 KubeDNS 详情：</p><pre tabindex=0><code>kubectl cluster-info
Kubernetes master is running at https://192.168.99.103:8443
KubeDNS is running at https://192.168.99.103:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
</code></pre><p>你可以使用 <code>kubectl cluster-info dump</code> 命令来调试和诊断集群问题。</p><p>当 Minikube 安装完成后，安装 <code>kubectl</code>（<a href=https://kubernetes.io/docs/tasks/tools/>https://kubernetes.io/docs/tasks/tools/</a>）。它是一个命令行集群，用于对 Kubernetes 集群和 Minikube 执行命令。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193613l2zhy8d94qz22998.jpg alt="Figure 2: Lens"></p><p>执行 <code>kubectl get nodes</code> 命令获取所有 节点 node 的详情，在本例中是获取 Minikube 的详情：</p><pre tabindex=0><code>C:\&gt;kubectl get nodes
NAME       STATUS   ROLES    AGE     VERSION
minikube   Ready    master   7m57s   v1.18.3
</code></pre><p>使用 <code>kubectl get all</code> 命令获取默认命名空间下的所有详情：</p><pre tabindex=0><code>C:\&gt;kubectl get all
NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   7m58s
</code></pre><p>我们现在已经有一个 Minikube 集群，并准备好了 Kubectl。下一步是安装和配置 Lens，并用示例应用程序来验证。</p><h3 id=lens-的安装和配置>Lens 的安装和配置</h3><p>打开 <a href=https://k8slens.dev/>https://k8slens.dev/</a> ，下载与你的操作系统匹配的安装包。</p><p>然后，参照屏幕上的教程来安装 Lens，安装完成后打开 Lens。你会发现在目录中有一个 <code>minikube</code>（图 3）。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193613iditdh7mhyp3iidp.jpg alt="Figure 3: Lens catalogue"></p><p>点击 “minikube” 后，你就进入了 Minikube 的世界，你会爱上它的。</p><p>点击 节点 node 获取有关 <code>kubectl get nodes</code> 命令输出的 节点 node 详情。</p><p>现在，你可以使用 Lens 了。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193613r0qehq6bne5pcygn.jpg alt="Figure 4: Lens cluster"></p><p>我们现在部署 <a href=https://github.com/GoogleCloudPlatform/microservices-demo>https://github.com/GoogleCloudPlatform/microservices-demo</a>，这是一个云原生微服务演示应用程序。它有 11 层的微服务应用，是一个基于网络的电子商务应用。</p><p>下载这个应用程序，把它解压到与 Minikube 相同的目录。</p><p>进入 <code>release</code> 目录，执行以下命令。</p><pre tabindex=0><code>kubectl apply -f kubernetes-manifests.yaml

deployment.apps/emailservice created
service/emailservice created
deployment.apps/checkoutservice created
service/checkoutservice created
deployment.apps/recommendationservice created
service/recommendationservice created
deployment.apps/frontend created
service/frontend created
service/frontend-external created
deployment.apps/paymentservice created
service/paymentservice created
deployment.apps/productcatalogservice created
service/productcatalogservice created
deployment.apps/cartservice created
service/cartservice created
deployment.apps/loadgenerator created
deployment.apps/currencyservice created
service/currencyservice created
deployment.apps/shippingservice created
service/shippingservice created
deployment.apps/redis-cart created
service/redis-cart created
deployment.apps/adservice created
service/adservice created
</code></pre><p>安装过程现在应该已经开始了，不过它需要一些时间来反映出我们使用了 <code>kubectl</code> 命令。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193613xyuh3hyd0fvk7hm6.jpg alt="Figure 5: Lens nodes"></p><pre tabindex=0><code>kubectl get pods
NAME                 READY   STATUS    RESTARTS   AGE
adservice-775d8b9bf5-cp7jr   0/1     Pending   0          8h
cartservice-79749895f5-jrq4d  1/1     Running   0         8h
checkoutservice-5645bf9c65-882m4  1/1   Running  0        8h
currencyservice-545c79d477-8rhg7  1/1  Running   0         8h
emailservice-7cc5c74b4f-hk74s     1/1  Running   0        8h
frontend-9cdf787f5-klfkh    1/1     Running   1          8h
loadgenerator-7b6874cb4c-645v9   1/1  Running   0        8h
paymentservice-5f74bc7b87-l4248  1/1  Running   0        8h
productcatalogservice-6846f59899-v4q4w  1/1  Running  0  8h
recommendationservice-d9c6c8b55-m2x9k  1/1  Running   0  8h
redis-cart-57bd646894-v7kfr    0/1   Pending   0         8h
shippingservice-8685dd9855-pmgjm  1/1  Running  0        8h
</code></pre><p>表 1 列出了你可以通过 <code>kubectl</code> 来获取信息的几个命令。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193613lx59v3mau2z620ii.jpg alt="Figure 6: Lens pods"></p><table><thead><tr><th>描述</th><th>命令</th></tr></thead><tbody><tr><td>列出节点</td><td><code>kubectl get node</code></td></tr><tr><td>列出集群中的所有资源</td><td><code>kubectl get all –all-namespaces</code></td></tr><tr><td>列出部署</td><td><code>kubectl get deployment</code></td></tr><tr><td>显示部署的完整状态</td><td><code>kubectl describe deployment &lt;deployment_name></code></td></tr><tr><td>修改集群上的部署</td><td><code>kubectl edit deployment &lt;deployment_name></code></td></tr><tr><td>删除部署</td><td><code>kubectl delete deployment &lt;deployment_name></code></td></tr><tr><td>列出容器荚</td><td><code>kubectl get pod</code></td></tr><tr><td>删除容器荚</td><td><code>kubectl delete pod &lt;pod_name></code></td></tr><tr><td>显示容器荚的完整状态</td><td><code>kubectl describe pod &lt;pod_name></code></td></tr><tr><td>在 Shell 中运行一个单容器荚</td><td><code>kubectl exec -it &lt;pod_name> /bin/bash</code></td></tr><tr><td>列出机密信息</td><td><code>kubectl get secrets</code></td></tr><tr><td>列出服务</td><td><code>kubectl get services</code></td></tr><tr><td>列出服务的完整状态</td><td><code>kubectl describe services</code></td></tr><tr><td>修改集群中的服务</td><td><code>kubectl edit services / kubectl edit deployment &lt;deployment_name></code></td></tr><tr><td>列出命名空间</td><td><code>kubectl get namespace &lt;namespace_name></code></td></tr><tr><td>打印容器荚日志</td><td><code>kubectl logs &lt;pod_name></code></td></tr><tr><td>打印容器荚中特定容器的日志</td><td><code>kubectl logs -c &lt;container_name> &lt;pod_name></code></td></tr></tbody></table><p>Lens 不仅可以帮你获取表 1 中列出的所有信息，它还可以获取指定集群的信息。我们还能用 Lens 来对 Kubernetes 资源进行编辑和删除操作。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193614hxcpazc0594l4ana.jpg alt="Figure 7: Lens deployments"></p><p>我们来看下是如何操作的。在 工作负载 Workloads 部分选择 容器荚 Pod （图 6），我们能通过 Lens 来编辑、删除、查看日志、访问 容器荚 Pod 的终端，这是不是很酷？</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193614fxnd1h3ma0sksz3s.jpg alt="Figure 8: Lens Replicasets"></p><p>你可以验证 工作负载 Workloads 区域中所有 部署 deployments （图 7）， 工作负载 Workloads 区域中所有 副本 Replicasets （图 8）， 配置 Config 区域中所有 密钥 Secrets （图 9），以及 网络 Network 区域中所有 服务 Services 是否都正常（图 10），</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193614a4ca5tzgtg4n4tnu.jpg alt="Figure 9: Lens Secrets"></p><p>你可以看到，跳转到所有的资源以及在一个地方高效地查看所有资源就是如此轻松。我们可以用 Lens 修改 YAML 文件，在运行时应用它来查看变更。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202305/04/193614t8u8u8mgcs2kgw83.jpg alt="Figure 10: Lens Services"></p><p>对于配置在不同的云服务商部署的多个集群，我们仍可以用 Lens 来进行观察和故障处理。</p><p><em>（题图：MJ/069da8c5-9043-46b3-9b14-87a0ffc6bb35）</em></p><hr><p>via: <a href=https://www.opensourceforu.com/2022/09/monitoring-and-debugging-kubernetes-with-lens-desktop/>https://www.opensourceforu.com/2022/09/monitoring-and-debugging-kubernetes-with-lens-desktop/</a></p><p>作者：<a href=https://www.opensourceforu.com/author/mitesh_soni/>Mitesh Soni</a> 选题：<a href=https://github.com/lkxed>lkxed</a> 译者：<a href=https://github.com/lxbwolf>lxbwolf</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/kubernetes/ rel=tag>Kubernetes</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>