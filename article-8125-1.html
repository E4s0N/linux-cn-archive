<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux I/O 重定向基础 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Linux I/O 重定向基础"><meta property="og:description" content="Linux 管理的一个最重要并且有趣的话题是 I/O 重定向。此功能在命令行中使你能够将命令的输入输出取自或送到文件中，或者可以使用管道将多个命令连接在一起以形成所谓的“命令管道”。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8125-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-01-19T07:42:00+00:00"><meta property="article:modified_time" content="2017-01-19T07:42:00+00:00"><meta itemprop=name content="Linux I/O 重定向基础"><meta itemprop=description content="Linux 管理的一个最重要并且有趣的话题是 I/O 重定向。此功能在命令行中使你能够将命令的输入输出取自或送到文件中，或者可以使用管道将多个命令连接在一起以形成所谓的“命令管道”。"><meta itemprop=datePublished content="2017-01-19T07:42:00+00:00"><meta itemprop=dateModified content="2017-01-19T07:42:00+00:00"><meta itemprop=wordCount content="289"><meta itemprop=keywords content="重定向,I/O,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Linux I/O 重定向基础</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-01-19T07:42:00Z>January 19, 2017</time></div></div></header><div class="content post__content clearfix"><p>Linux 管理的一个最重要并且有趣的话题是 I/O 重定向。此功能在命令行中使你能够将命令的输入输出取自或送到文件中，或者可以使用管道将多个命令连接在一起以形成所谓的“<strong>命令管道</strong>”。</p><p><img src=/data/attachment/album/201701/18/215516qtsrvxmezywtxmv8.jpg alt></p><p>我们运行的所有命令基本上产生两种输出：</p><ul><li>命令结果 - 程序产生的数据，以及</li><li>程序状态和错误消息，用来通知用户程序的执行细节。</li></ul><p>在 Linux 和其他类 Unix 系统中，有三个默认文件（名称如下），这些文件也由 shell 使用文件描述符号标识：</p><ul><li>stdin 或 0 - 它连接键盘，大多数程序从此文件读取输入。</li><li>stdout 或 1 - 它连接屏幕，并且所有程序将其结果发送到此文件</li><li>stderr 或 2 - 程序将状态/错误消息发送到此文件，它也连接到屏幕上。</li></ul><p>因此，I/O 重定向允许你更改命令的输入源以及将输出和错误消息发送到其他地方。这可以通过 <code>&lt;</code> 和 <code>></code> 重定向操作符来实现。</p><h3 id=如何在-linux-中重定向标准输出到文件中>如何在 Linux 中重定向标准输出到文件中</h3><p>如下面的示例所示，你可以重定向标准输出，这里，我们要存储 <a href=/article-2290-1.html>top 命令</a>的输出以供以后检查：</p><pre tabindex=0><code>$ top -bn 5 &gt;top.log
</code></pre><p>其中标志的含义：</p><ul><li><code>-b</code> - 让 <code>top</code> 以批处理模式运行，以便你可以将其输出重定向到一个文件或另一个命令。</li><li><code>-n</code> - 指定命令终止前的迭代次数。</li></ul><p>你可以使用 <a href=/article-2137-1.html>cat 命令</a>来查看 <code>top.log</code> 文件的内容：</p><pre tabindex=0><code>$ cat top.log
</code></pre><p>要将命令输出<strong>附加</strong>在文件后面，请使用 <code>>></code> 操作符。</p><p>例如，要将 <a href=/article-2352-1.html>top 命令</a>的输出追加在上面的 <code>top.log</code> 文件中，特别是在脚本（或命令行）中，请输入下面的那行：</p><pre tabindex=0><code>$ top -bn 5 &gt;&gt;top.log
</code></pre><p><strong>注意</strong>： 也可以使用文件描述符数字，上面的重定向命令等同于：</p><pre tabindex=0><code>$ top -bn 5 1&gt;top.log
</code></pre><h3 id=如何在-linux-中重定向标准错误到文件中>如何在 Linux 中重定向标准错误到文件中</h3><p>要重定向命令的标准错误，你需要明确指定文件描述符 <code>2</code>，以便让 shell 了解你正在尝试做什么。</p><p>例如，下面的 <a href=/article-2535-1.html>ls 命令</a>将在没有 root 权限的普通系统用户执行时产生错误：</p><pre tabindex=0><code>$ ls -l /root/
</code></pre><p>你可以重定向标准错误到文件中：</p><pre tabindex=0><code>$ ls -l /root/ 2&gt;ls-error.log
$ cat ls-error.log 
</code></pre><p><img src=/data/attachment/album/201701/18/215538ax2d9axqxn4x56xx.png alt="Redirect Standard Error to File"></p><p><em>重定向标准错误到文件中</em></p><p>为了将标准错误附加在文件后，使用下面的命令：</p><pre tabindex=0><code>$ ls -l /root/ 2&gt;&gt;ls-error.log
</code></pre><h3 id=如何重定向标准输出及标准错误到一个文件中>如何重定向标准输出及标准错误到一个文件中</h3><p>还可以将命令的所有输出（包括标准输出和标准错误）捕获到单个文件中。这可以用两种可能的方式，通过指定文件描述符来完成：</p><p>1、 第一种是相对较旧的方法，其工作方式如下：</p><pre tabindex=0><code>$ ls -l /root/ &gt;ls-error.log 2&gt;&amp;1
</code></pre><p>上面的命令意思是 shell 首先将 <a href=/article-2535-1.html>ls 命令</a>的输出发送到文件 <code>ls-error.log</code>（使用 <code>>ls-error.log</code>），然后将所有写到文件描述符 <code>2</code>（标准错误）的错误消息重定向到文件 <code>ls-error.log</code>（使用<code>2>＆1</code>）中。（LCTT 译注：此处原文有误，径改。）这表示标准错误也被发送到与标准输出相同的文件中。</p><p>2、 第二种并且更直接的方法是：</p><pre tabindex=0><code>$ ls -l /root/ &amp;&gt;ls-error.log
</code></pre><p>你也可以这样将标准输出和标准错误附加到单个文件后：</p><pre tabindex=0><code>$ ls -l /root/ &amp;&gt;&gt;ls-error.log
</code></pre><h3 id=如何将标准输入重定向到文件中>如何将标准输入重定向到文件中</h3><p>大多数（如果不是全部）命令从标准输入获得其输入，并且标准输入默认连接到键盘。</p><p>要从键盘以外的文件重定向标准输入，请使用 <code>&lt;</code> 操作符，如下所示：</p><pre tabindex=0><code>$ cat &lt;domains.list 
</code></pre><p><img src=/data/attachment/album/201701/18/215541t5vnrn7vvnxancav.png alt="Redirect Standard Input to File"></p><p><em>重定向文件到标准输入中</em></p><h3 id=如何重定向标准输入输出到文件中>如何重定向标准输入/输出到文件中</h3><p>你可以如下在 <a href=/article-5372-1.html>sort 命令</a>中同时执行标准输入、标准输出的重定向：</p><pre tabindex=0><code>$ sort &lt;domains.list &gt;sort.output
</code></pre><h3 id=如何使用管道进行-io-重定向>如何使用管道进行 I/O 重定向</h3><p>要将一个命令的输出重定向为另一个命令的输入，你可以使用管道，这是用于构建复杂操作命令的有力方法。</p><p>例如，以下命令将<a href=/article-8093-1.html>列出最近修改的前五个文件</a>。</p><pre tabindex=0><code>$ ls -lt | head -n 5 
</code></pre><p>选项的意思是：</p><ul><li><code>-l</code> - 启用长列表格式</li><li><code>-t</code> - <a href=/article-8093-1.html>最新修改的文件</a>首先显示</li><li><code>-n</code> - 指定要显示的标题行数</li></ul><h3 id=构建管道的重要命令>构建管道的重要命令</h3><p>在这里，我们将简要回顾一下构建命令管道的两个重要命令，它们是：</p><p><code>xargs</code> 用于从标准输入构建和执行命令行。下面是使用 <code>xargs</code> 的管道示例，此命令用于<a href=/article-8041-1.html>将文件复制到 Linux 中的多个目录</a>：</p><pre tabindex=0><code>$ echo /home/aaronkilik/test/ /home/aaronkilik/tmp | xargs -n 1 cp -v /home/aaronkilik/bin/sys_info.sh
</code></pre><p><img src=/data/attachment/album/201701/18/215541mzeh5ebv53eghc30.png alt="Copy Files to Multiple Directories"></p><p><em>复制文件到多个目录</em></p><p>选项含义：</p><ul><li><code>-n 1</code> - 让 <code>xargs</code> 对每个命令行最多使用一个参数，并发送到 <a href=http://www.tecmint.com/progress-monitor-check-progress-of-linux-commands/>cp命令</a></li><li><code>cp</code> - 复制文件</li><li><code>-v</code> - <a href=http://www.tecmint.com/monitor-copy-backup-tar-progress-in-linux-using-pv-command/>显示 <code>cp</code> 命令的进度</a>。</li></ul><p>有关更多的使用选项和信息，请阅读 <code>xargs</code> 手册页：</p><pre tabindex=0><code>$ man xargs 
</code></pre><p><code>tee</code> 命令从标准输入读取，并写入到标准输出和文件中。我们可以演示 <code>tee</code> 如何工作：</p><pre tabindex=0><code>$ echo &#34;Testing how tee command works&#34; | tee file1 
</code></pre><p><img src=/data/attachment/album/201701/18/215542rmxllxw6vtkmf6uq.png alt="tee Command Example"></p><p><em>tee 命令示例</em></p><p>文件或文本过滤器通常与管道一起用于有效地操作 Linux 文件，来以强大的方式来处理信息，例如命令的重组输出（这对于<a href=http://www.tecmint.com/linux-performance-monitoring-and-file-system-statistics-reports/>生成有用的 Linux 报告</a>是必不可少的）、修改文件中的文本和其他的 Linux 系统管理任务。</p><p>要了解有关 Linux 过滤器和管道的更多信息，请阅读这篇文章<a href=http://www.tecmint.com/find-top-ip-address-accessing-apache-web-server/>查找前十个访问 Apache 服务器的 IP 地址</a>，这里展示了使用过滤器和管道的一个例子。</p><p>在本文中，我们解释了 Linux 中 I/O 重定向的基本原理。请通过下面的反馈栏分享你的想法。</p><hr><p>作者简介：</p><p><img src=/data/attachment/album/201701/18/215545in7o7w7qoyqw7yn5.jpg alt></p><p>Aaron Kili 是 Linux 和 F.O.S.S 爱好者，将来的 Linux SysAdmin、web 开发人员，目前是 TecMint 的内容创建者，他喜欢用电脑工作，并坚信分享知识。</p><hr><p>via: <a href=http://www.tecmint.com/linux-io-input-output-redirection-operators/>http://www.tecmint.com/linux-io-input-output-redirection-operators/</a></p><p>作者：<a href=http://www.tecmint.com/author/aaronkili/>Aaron Kili</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/jasminepeng>jasminepeng</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E9%87%8D%E5%AE%9A%E5%90%91/ rel=tag>重定向</a></li><li class=tags__item><a class="tags__link btn" href=/tags/i/o/ rel=tag>I/O</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>