<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 Sourcegraph 搜索 34000 多个 Fedora 仓库 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="使用 Sourcegraph 搜索 34000 多个 Fedora 仓库"><meta property="og:description" content="Fedora 社区现在可以在他们的开源代码世界中尽情搜索 —— 目前有超过 34,000 个存储库，而且还在不断增加。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14434-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-05T15:13:28+00:00"><meta property="article:modified_time" content="2022-04-05T15:13:28+00:00"><meta itemprop=name content="使用 Sourcegraph 搜索 34000 多个 Fedora 仓库"><meta itemprop=description content="Fedora 社区现在可以在他们的开源代码世界中尽情搜索 —— 目前有超过 34,000 个存储库，而且还在不断增加。"><meta itemprop=datePublished content="2022-04-05T15:13:28+00:00"><meta itemprop=dateModified content="2022-04-05T15:13:28+00:00"><meta itemprop=wordCount content="170"><meta itemprop=keywords content="Sourcegraph,代码搜索,软件仓库,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>使用 Sourcegraph 搜索 34000 多个 Fedora 仓库</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-04-05T15:13:28Z>April 05, 2022</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/202204/05/151255yuq9zem6euei5ui5.jpg alt></p><p>在 2021 年 10 月，一个 Fedora Linux 用户 <a href=https://lists.fedoraproject.org/archives/list/legal@lists.fedoraproject.org/thread/CBCJHOSP36YXQKCVGWVL5MXU64LZ6NZA/>问了一个关于许可的问题</a>。Fedora 项目负责人 Matthew Miller <a href=https://lists.fedoraproject.org/archives/list/legal@lists.fedoraproject.org/message/LTIQS2PX33FSCEIAPJS62UZXVPDT5JPB/>回复道</a>：“我不能快速地检查（这个问题），因为我们没有一个完整的、庞大的、可搜索的存储库来检索 Fedora 中所有软件包。”</p><p><a href=https://lists.fedoraproject.org/archives/list/legal@lists.fedoraproject.org/message/5GEPBSRGUK5E2FLW4MQBVP6DI65XP2LQ/>接着他说</a>：“……或许我们可以付钱给 Sourcegraph，让他们帮我们做这个。他们看起来乐于助人。” 他说的没错，我们（Sourcegraph）的确是乐于助人，而且我们还不想要你的钱，相反，我们想与 Fedora 社区合作。</p><p>Fedora 社区现在可以在他们的开源代码世界中尽情搜索 —— 目前有超过 34,000 个存储库，而且还在不断增加。</p><h3 id=代码搜索简介>代码搜索简介</h3><p>如果你还不熟悉 <a href=https://codesearchguide.org/>代码搜索</a> 的概念，我现在就来告诉你。代码搜索可以让团队更快地掌握一个新的代码库，在里面找到答案，帮助团队识别安全风险，以及许多其他用例。Sourcegraph 已经在 GitHub 和 GitLab 等多个代码托管服务上，索引了 200 多万个存储库。本文只关注 <a href=http://src.fedoraproject.org>src.fedoraproject.org</a> 的代码搜索。Sourcegraph 同时提供了一个 <a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/&amp;patternType=regexp">Web 应用</a> 和 <a href=https://docs.sourcegraph.com/cli/quickstart>命令行客户端</a>。</p><h3 id=使用-web-应用>使用 Web 应用</h3><p>在使用 Sourcegraph <a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/&amp;patternType=regexp">Web 应用</a> 时，你需要先输入初始字符串 <code>repo:^src.fedoraprojects.org</code>，然后再开始查询。这个 <a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/&amp;patternType=regexp">Web 应用</a> 链接中包括了上面的初始字符串，点击这个链接后，搜索界面如下图所示：</p><p><img src=/data/attachment/album/202204/05/151330xhtmqmt09bd7ymv0.png alt="Sourcegraph Web 应用界面"></p><p>下面我将提供几个使用 Web 应用程序进行搜索的例子，大家可能会对它们感兴趣。</p><h4 id=查找使用流行的经-osi-批准的许可证的存储库>查找使用流行的经 OSI 批准的许可证的存储库</h4><p>下面的查询语句将扫描所有兼容 “ 开源定义 Open Source Definition ”（OSD） 的软件存储库。</p><pre tabindex=0><code>repo:^src.fedoraproject.org/ lang:&#34;RPM Spec&#34; License: ^.*apache|bsd|gpl|lgpl|mit|mpl|cddl|epl.*$
</code></pre><p><img src=/data/attachment/album/202204/05/151331eqyncmqz88h0it3u.png alt=许可证搜索></p><blockquote><p><a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/+lang:%22RPM+Spec%22+License:+%5E.*apache%7Cbsd%7Cgpl%7Clgpl%7Cmit%7Cmpl%7Ccddl%7Cepl.*%24&amp;patternType=regexp">试一下！</a></p></blockquote><h4 id=查找带有-todo-的文件>查找带有 TODO 的文件</h4><p>下面的查询语句将在 34,000 多个仓库中找到 <code>TODO</code> 文件。对于那些希望为需要帮助的项目做出贡献的人来说，是一个非常棒的功能。</p><pre tabindex=0><code>repo:^src.fedoraproject.org/ &#34;TODO&#34;
</code></pre><p><img src=/data/attachment/album/202204/05/151332oopo65asyouyt0ds.png alt="搜索 TODO"></p><blockquote><p><a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/+%22TODO%22&amp;patternType=regexp&amp;case=yes">试一下！</a></p></blockquote><h4 id=查找-ftp-服务器上的文件>查找 FTP 服务器上的文件</h4><p>我的一个前同事告诉我 “FTP 是一个死协议”。真的是这样吗？你也可以在这个查询中加入任何其他协议，如 irc、https 等。</p><pre tabindex=0><code>repo:^src.fedoraproject.org/ (?:ftp)://[A-Za-z0-9-]{0,63}(.[A-Za-z0-9-]{0,63})+(:d{1,4})?/*(/*[A-Za-z0-9-._]+/*)*(?.*)?(#.*)?
</code></pre><p><img src=/data/attachment/album/202204/05/151333kbbs444rvsw4f9nc.png alt=搜索协议></p><blockquote><p><a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/+%28%3F:ftp%29:%5C/%5C/%5BA-Za-z0-9%5C-%5D%7B0%2C63%7D%28%5C.%5BA-Za-z0-9%5C-%5D%7B0%2C63%7D%29%2B%28:%5Cd%7B1%2C4%7D%29%3F%5C/*%28%5C/*%5BA-Za-z0-9%5C-._%5D%2B%5C/*%29*%28%5C%3F.*%29%3F%28%23.*%29%3F&amp;patternType=regexp">试一下！</a></p></blockquote><h4 id=查找使用有漏洞的-log4j-版本的文件>查找使用有漏洞的 Log4j 版本的文件</h4><p>这个查询语句将找到任何可能存在 CVE-2021-44228（也就是 Log4j）漏洞的文件（可能会有误报）。你也可以搜索其他漏洞，然后报告给项目维护者。</p><pre tabindex=0><code>repo:^src.fedoraproject.org/ org.apache.logging.log4j 2.((0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15)(.[0-9]+)) count:all
</code></pre><p><img src=/data/attachment/album/202204/05/151333w7oh2szkxzwz2uhd.png alt="搜索 log4j"></p><blockquote><p><a href="https://sourcegraph.com/search?q=context:global+repo:%5Esrc.fedoraproject.org/+org%5C.apache%5C.logging%5C.log4j+2.%28%280%7C1%7C2%7C3%7C4%7C5%7C6%7C7%7C8%7C9%7C10%7C11%7C12%7C13%7C14%7C15%29%28%5C.%5B0-9%5D%2B%29%29+count:all&amp;patternType=regexp">试一下！</a></p></blockquote><h3 id=使用命令行>使用命令行</h3><p>Sourcegraph 还有一个叫做 <a href=https://github.com/sourcegraph/src-cli#readme>src</a> 的命令行客户端，它可以让你完成我刚才提到的所有事情。此外，它还有其他一些有用的命令。比如说，它可以把结果用 JSON 格式输出，方便你在编程中使用。</p><pre tabindex=0><code>src search -json &#39;repo:^src.fedoraproject.org/ lang:&#34;RPM Spec&#34; License: ^.*apache|bsd|gpl|lgpl|mit|mpl|cddl|epl.*$&#39;
</code></pre><h4 id=输出-json>输出 JSON</h4><p><img src=/data/attachment/album/202204/05/151334m2i3ajj6e6gs8t62.png alt="输出 JSON"></p><blockquote><p><a href=https://sourcegraph.com/notebooks/Tm90ZWJvb2s6MzQ2>试一下！</a></p></blockquote><h3 id=搜索语法>搜索语法</h3><p>就入门而言，上面的例子是很好的起点，但 Sourcegraph 还支持更多的查询语句。你可以 <a href=https://docs.sourcegraph.com/code_search/reference/queries>查看所有的搜索查询语法</a>，并根据需要创建你自己的查询语句。</p><h3 id=总结>总结</h3><p>正如你所看到的，有了 Sourcegraph，Fedora Linux 社区现在可以快速搜索托管在 <a href=https://src.fedoraproject.org/>src.fedoraproject.org</a> 上的所有代码，无论是使用普通查询还是复杂的正则查询。</p><p>感谢 Fedora Linux 社区的慷慨帮助和热情欢迎。如果你有任何想补充的内容或问题，我和我的团队都会在下面的评论区回复。你也可以 <a href=https://srcgr.ph/wp-join-community-space>在 Slack 上找到我们</a>。</p><p>特别感谢 <a href=https://twitter.com/vanesacodes>Vanesa Ortiz</a> 促成了这次合作，还有 <a href=https://handbook.sourcegraph.com/team/#ben-venker>Ben Venker</a> 帮助修复了我的正则表达式（多次），以及 <a href=https://handbook.sourcegraph.com/team/#rebecca-dodd>Rebecca Dodd</a> 和 <a href=https://twitter.com/nickwritesit>Nick Moore</a> 在编辑上的帮助。</p><hr><p>via: <a href=https://fedoramagazine.org/using-sourcegraph-to-search-34000-fedora-repositories/>https://fedoramagazine.org/using-sourcegraph-to-search-34000-fedora-repositories/</a></p><p>作者：<a href=https://fedoramagazine.org/author/jdorfman/>Justin Dorfman</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/lkxed>lkxed</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/sourcegraph/ rel=tag>Sourcegraph</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E4%BB%A3%E7%A0%81%E6%90%9C%E7%B4%A2/ rel=tag>代码搜索</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93/ rel=tag>软件仓库</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>