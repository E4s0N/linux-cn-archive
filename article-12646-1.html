<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>用 Jupyter Notebook 教 Python - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="用 Jupyter Notebook 教 Python"><meta property="og:description" content="有了 Jupyter、PyHamcrest，用一点测试的代码把它们连在一起，你就可以教任何适用于单元测试的 Python 内容。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12646-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-09-24T04:57:41+00:00"><meta property="article:modified_time" content="2020-09-24T04:57:41+00:00"><meta itemprop=name content="用 Jupyter Notebook 教 Python"><meta itemprop=description content="有了 Jupyter、PyHamcrest，用一点测试的代码把它们连在一起，你就可以教任何适用于单元测试的 Python 内容。"><meta itemprop=datePublished content="2020-09-24T04:57:41+00:00"><meta itemprop=dateModified content="2020-09-24T04:57:41+00:00"><meta itemprop=wordCount content="615"><meta itemprop=keywords content="Jupyter,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>用 Jupyter Notebook 教 Python</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-09-24T04:57:41Z>September 24, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>有了 Jupyter、PyHamcrest，用一点测试的代码把它们连在一起，你就可以教任何适用于单元测试的 Python 内容。</p></blockquote><p><img src=/data/attachment/album/202009/24/045721mubdfdx1tb11fibi.jpg alt></p><p>关于 Ruby 社区的一些事情一直让我印象深刻，其中两个例子是对测试的承诺和对易于上手的强调。这两方面最好的例子是 <a href=https://github.com/edgecase/ruby_koans>Ruby Koans</a>，在这里你可以通过修复测试来学习 Ruby。</p><p>要是我们能把这些神奇的工具也用于 Python，我们应该可以做得更好。是的，使用 <a href=https://jupyter.org/>Jupyter Notebook</a>、<a href=https://github.com/hamcrest/PyHamcrest>PyHamcrest</a>，再加上一点类似于胶带的粘合代码，我们可以做出一个包括教学、可工作的代码和需要修复的代码的教程。</p><p>首先，需要一些“胶布”。通常，你会使用一些漂亮的命令行测试器来做测试，比如 <a href=https://docs.pytest.org/en/stable/>pytest</a> 或 <a href=https://github.com/Julian/Virtue>virtue</a>。通常，你甚至不会直接运行它。你使用像 <a href=https://tox.readthedocs.io/en/latest/>tox</a> 或 <a href=https://nox.thea.codes/en/stable/>nox</a> 这样的工具来运行它。然而，对于 Jupyter 来说，你需要写一小段粘合代码，可以直接在其中运行测试。</p><p>幸运的是，这个代码又短又简单：</p><pre tabindex=0><code>import unittest

def run_test(klass):
    suite = unittest.TestLoader().loadTestsFromTestCase(klass)
    unittest.TextTestRunner(verbosity=2).run(suite)
    return klass
</code></pre><p>现在，装备已经就绪，可以进行第一次练习了。</p><p>在教学中，从一个简单的练习开始，建立信心总是一个好主意。</p><p>那么，让我们来修复一个非常简单的测试：</p><pre tabindex=0><code>@run_test
class TestNumbers(unittest.TestCase):
   
    def test_equality(self):
        expected_value = 3 # 只改这一行
        self.assertEqual(1+1, expected_value)
</code></pre><pre tabindex=0><code>    test_equality (__main__.TestNumbers) ... FAIL
   
    ======================================================================
    FAIL: test_equality (__main__.TestNumbers)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
      File &#34;&lt;ipython-input-7-5ebe25bc00f3&gt;&#34;, line 6, in test_equality
        self.assertEqual(1+1, expected_value)
    AssertionError: 2 != 3
   
    ----------------------------------------------------------------------
    Ran 1 test in 0.002s
   
    FAILED (failures=1)
</code></pre><p>“只改这一行” 对学生来说是一个有用的标记。它准确地表明了需要修改的内容。否则，学生可以通过将第一行改为 <code>return</code> 来修复测试。</p><p>在这种情况下，修复很容易：</p><pre tabindex=0><code>@run_test
class TestNumbers(unittest.TestCase):
   
    def test_equality(self):
        expected_value = 2 # 修复后的代码行
        self.assertEqual(1+1, expected_value)
</code></pre><pre tabindex=0><code>    test_equality (__main__.TestNumbers) ... ok
   
    ----------------------------------------------------------------------
    Ran 1 test in 0.002s
   
    OK
</code></pre><p>然而，很快，<code>unittest</code> 库的原生断言将被证明是不够的。在 <code>pytest</code> 中，通过重写 <code>assert</code> 中的字节码来解决这个问题，使其具有神奇的属性和各种启发式方法。但这在 Jupyter notebook 中就不容易实现了。是时候挖出一个好的断言库了：PyHamcrest。</p><pre tabindex=0><code>from hamcrest import *
@run_test
class TestList(unittest.TestCase):
   
    def test_equality(self):
        things = [1,
                  5, # 只改这一行
                  3]
        assert_that(things, has_items(1, 2, 3))
</code></pre><pre tabindex=0><code>    test_equality (__main__.TestList) ... FAIL
   
    ======================================================================
    FAIL: test_equality (__main__.TestList)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
      File &#34;&lt;ipython-input-11-96c91225ee7d&gt;&#34;, line 8, in test_equality
        assert_that(things, has_items(1, 2, 3))
    AssertionError:
    Expected: (a sequence containing &lt;1&gt; and a sequence containing &lt;2&gt; and a sequence containing &lt;3&gt;)
         but: a sequence containing &lt;2&gt; was &lt;[1, 5, 3]&gt;
   
   
    ----------------------------------------------------------------------
    Ran 1 test in 0.004s
   
    FAILED (failures=1)
</code></pre><p>PyHamcrest 不仅擅长灵活的断言，它还擅长清晰的错误信息。正因为如此，问题就显而易见了。<code>[1, 5, 3]</code> 不包含 <code>2</code>，而且看起来很丑：</p><pre tabindex=0><code>@run_test
class TestList(unittest.TestCase):
   
    def test_equality(self):
        things = [1,
                  2, # 改完的行
                  3]
        assert_that(things, has_items(1, 2, 3))
</code></pre><pre tabindex=0><code>    test_equality (__main__.TestList) ... ok
   
    ----------------------------------------------------------------------
    Ran 1 test in 0.001s
   
    OK
</code></pre><p>使用 Jupyter、PyHamcrest 和一点测试的粘合代码，你可以教授任何适用于单元测试的 Python 主题。</p><p>例如，下面可以帮助展示 Python 从字符串中去掉空白的不同方法之间的差异。</p><pre tabindex=0><code>source_string = &#34;  hello world  &#34;

@run_test
class TestList(unittest.TestCase):
   
    # 这是个赠品：它可以工作！
    def test_complete_strip(self):
        result = source_string.strip()
        assert_that(result,
                   all_of(starts_with(&#34;hello&#34;), ends_with(&#34;world&#34;)))

    def test_start_strip(self):
        result = source_string # 只改这一行
        assert_that(result,
                   all_of(starts_with(&#34;hello&#34;), ends_with(&#34;world  &#34;)))

    def test_end_strip(self):
        result = source_string # 只改这一行
        assert_that(result,
                   all_of(starts_with(&#34;  hello&#34;), ends_with(&#34;world&#34;)))
</code></pre><pre tabindex=0><code>    test_complete_strip (__main__.TestList) ... ok
    test_end_strip (__main__.TestList) ... FAIL
    test_start_strip (__main__.TestList) ... FAIL
   
    ======================================================================
    FAIL: test_end_strip (__main__.TestList)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
      File &#34;&lt;ipython-input-16-3db7465bd5bf&gt;&#34;, line 19, in test_end_strip
        assert_that(result,
    AssertionError:
    Expected: (a string starting with &#39;  hello&#39; and a string ending with &#39;world&#39;)
         but: a string ending with &#39;world&#39; was &#39;  hello world  &#39;
   
   
    ======================================================================
    FAIL: test_start_strip (__main__.TestList)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
      File &#34;&lt;ipython-input-16-3db7465bd5bf&gt;&#34;, line 14, in test_start_strip
        assert_that(result,
    AssertionError:
    Expected: (a string starting with &#39;hello&#39; and a string ending with &#39;world  &#39;)
         but: a string starting with &#39;hello&#39; was &#39;  hello world  &#39;
   
   
    ----------------------------------------------------------------------
    Ran 3 tests in 0.006s
   
    FAILED (failures=2)
</code></pre><p>理想情况下，学生们会意识到 <code>.lstrip()</code> 和 <code>.rstrip()</code> 这两个方法可以满足他们的需要。但如果他们不这样做，而是试图到处使用 <code>.strip()</code> 的话：</p><pre tabindex=0><code>source_string = &#34;  hello world  &#34;

@run_test
class TestList(unittest.TestCase):
   
    # 这是个赠品：它可以工作！
    def test_complete_strip(self):
        result = source_string.strip()
        assert_that(result,
                   all_of(starts_with(&#34;hello&#34;), ends_with(&#34;world&#34;)))

    def test_start_strip(self):
        result = source_string.strip() # 改完的行
        assert_that(result,
                   all_of(starts_with(&#34;hello&#34;), ends_with(&#34;world  &#34;)))

    def test_end_strip(self):
        result = source_string.strip() # 改完的行
        assert_that(result,
                   all_of(starts_with(&#34;  hello&#34;), ends_with(&#34;world&#34;)))
</code></pre><pre tabindex=0><code>    test_complete_strip (__main__.TestList) ... ok
    test_end_strip (__main__.TestList) ... FAIL
    test_start_strip (__main__.TestList) ... FAIL
   
    ======================================================================
    FAIL: test_end_strip (__main__.TestList)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
      File &#34;&lt;ipython-input-17-6f9cfa1a997f&gt;&#34;, line 19, in test_end_strip
        assert_that(result,
    AssertionError:
    Expected: (a string starting with &#39;  hello&#39; and a string ending with &#39;world&#39;)
         but: a string starting with &#39;  hello&#39; was &#39;hello world&#39;
   
   
    ======================================================================
    FAIL: test_start_strip (__main__.TestList)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
      File &#34;&lt;ipython-input-17-6f9cfa1a997f&gt;&#34;, line 14, in test_start_strip
        assert_that(result,
    AssertionError:
    Expected: (a string starting with &#39;hello&#39; and a string ending with &#39;world  &#39;)
         but: a string ending with &#39;world  &#39; was &#39;hello world&#39;
   
   
    ----------------------------------------------------------------------
    Ran 3 tests in 0.007s
   
    FAILED (failures=2)
</code></pre><p>他们会得到一个不同的错误信息，显示去除了过多的空白：</p><pre tabindex=0><code>source_string = &#34;  hello world  &#34;

@run_test
class TestList(unittest.TestCase):
   
    # 这是个赠品：它可以工作！
    def test_complete_strip(self):
        result = source_string.strip()
        assert_that(result,
                   all_of(starts_with(&#34;hello&#34;), ends_with(&#34;world&#34;)))

    def test_start_strip(self):
        result = source_string.lstrip() # Fixed this line
        assert_that(result,
                   all_of(starts_with(&#34;hello&#34;), ends_with(&#34;world  &#34;)))

    def test_end_strip(self):
        result = source_string.rstrip() # Fixed this line
        assert_that(result,
                   all_of(starts_with(&#34;  hello&#34;), ends_with(&#34;world&#34;)))
</code></pre><pre tabindex=0><code>    test_complete_strip (__main__.TestList) ... ok
    test_end_strip (__main__.TestList) ... ok
    test_start_strip (__main__.TestList) ... ok
   
    ----------------------------------------------------------------------
    Ran 3 tests in 0.005s
   
    OK
</code></pre><p>在一个比较真实的教程中，会有更多的例子和更多的解释。这种使用 Jupyter Notebook 的技巧，有的例子可以用，有的例子需要修正，可以用于实时教学，可以用于视频课，甚至，可以用更多的其它零散用途，让学生自己完成一个教程。</p><p>现在就去分享你的知识吧!</p><hr><p>via: <a href=https://opensource.com/article/20/9/teach-python-jupyter>https://opensource.com/article/20/9/teach-python-jupyter</a></p><p>作者：<a href=https://opensource.com/users/moshez>Moshe Zadka</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/wxy>wxy</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/jupyter/ rel=tag>Jupyter</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>