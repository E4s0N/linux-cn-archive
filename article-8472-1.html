<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在树莓派中安装 VoIP 系统：Asterisk - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在树莓派中安装 VoIP 系统：Asterisk"><meta property="og:description" content="你是否在为小型企业或家庭办公室寻找电话系统？我一直对可扩展 VoIP（Voice over IP）解决方案感兴趣，后来我在树莓派上找到 Asterisk 的一个实现。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8472-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-05-03T16:26:00+00:00"><meta property="article:modified_time" content="2017-05-03T16:26:00+00:00"><meta itemprop=name content="如何在树莓派中安装 VoIP 系统：Asterisk"><meta itemprop=description content="你是否在为小型企业或家庭办公室寻找电话系统？我一直对可扩展 VoIP（Voice over IP）解决方案感兴趣，后来我在树莓派上找到 Asterisk 的一个实现。"><meta itemprop=datePublished content="2017-05-03T16:26:00+00:00"><meta itemprop=dateModified content="2017-05-03T16:26:00+00:00"><meta itemprop=wordCount content="168"><meta itemprop=keywords content="树莓派,VoIP,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在树莓派中安装 VoIP 系统：Asterisk</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-05-03T16:26:00Z>May 03, 2017</time></div></div></header><div class="content post__content clearfix"><blockquote><p>你是否在为小型企业或家庭办公室寻找电话系统？</p></blockquote><p><img src=https://img.linux.net.cn/data/attachment/album/201705/03/162529hzwmcbc7ccbf7wjc.jpg alt></p><p>你是否在为小型企业或家庭办公室寻找电话系统？我一直对可扩展 VoIP（Voice over IP）解决方案感兴趣，后来我在树莓派上找到 <a href=http://www.asterisk.org/>Asterisk</a> 的一个实现。</p><p>我的好奇心被激起了，我决心尝试一下，所以我从 <a href=http://www.raspberry-asterisk.org/downloads/>Asterisk</a> 官网<a href=http://download.raspberry-asterisk.org/raspbx-28-01-2017.zip>下载</a>了它（RasPBX），然后使用我的树莓派 3 构建服务器。</p><h3 id=准备开始>准备开始</h3><p>首先，我将下载的镜像刻录到 MicroSD 卡上。建议的最小值是 4 GB。将镜像传输到 MicroSD 卡并插到树莓派上的相应插槽中后，我将网线连接到树莓派和家庭路由器上的以太网端口中。</p><p>更多关于树莓派的内容：</p><ul><li><a href="https://opensource.com/resources/what-raspberry-pi?src=raspberry_pi_resource_menu">什么是树莓派？</a></li><li><a href="https://opensource.com/article/16/12/getting-started-raspberry-pi?src=raspberry_pi_resource_menu">开始使用树莓派</a></li><li><a href="https://opensource.com/article/17/2/raspberry-pi-submit-your-article?src=raspberry_pi_resource_menu">给我们发送你的树莓派项目和教程</a></li></ul><p>接下来，我在 Linux 上打开一个终端，并输入 <code>ssh root@192.168.1.8</code>，这是我的服务器的 IP 地址。我被提示以 <code>root</code> 用户身份登录到 RasPBX 上。默认密码是 <code>raspberry</code>。 （出于安全考虑，如果你打算再多试试，请务必更改默认密码。）</p><p>当我登录到了 RasPBX 上的 shell 后，接下来我需要准备配置了。根据网站上提供的<a href=http://www.raspberry-asterisk.org/documentation/>文档</a>，我在 shell 下输入 <code>regen-hostkeys</code> 来创建新的主机密钥。然后输入 <code>configure-timezone</code> 来配置服务器的时区。我通过在提示符下输入 <code>dpkg-reconfigure locales</code> 来配置区域设置。我也安装了 <a href=http://www.raspberry-asterisk.org/documentation/#fail2ban>Fail2Ban</a> 来保障服务器的安全性。</p><p>现在我准备测试我的配置。</p><h3 id=测试>测试</h3><p>我从 RasPBX 的 shell 中登出，然后打开浏览器并输入我的服务器的 IP 地址。将服务器 IP 地址加载到浏览器中，我看到了一个可爱的登录页面。</p><p><a href=https://www.freepbx.org/>FreePBX</a> 提供了一个非常好的基于 Web 的开源图形用户界面，我用它来控制和配置 Asterisk（可在 <a href=https://github.com/asterisk/asterisk/blob/master/LICENSE>GitHub</a> 上找到）。（FreePBX 是 GPL 许可的）。我用它来完成其余的配置。FreePBX 的默认登录账号为用户名：<code>admin</code>； 密码：<code>admin</code>。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201705/03/162614itobbhvmhoytvmv4.png alt=FreePBX_Login_Screen title=FreePBX_Login_Screen></p><p>登录之后，我进入位于显示屏左上方的 应用菜单 Application Menu 。点击菜单链接并选择了第二个选项，即 “应用” Applications ，接着选择了第四个选项， “分机” Extensions 。从那里我选择创建一个 New Chan_Sip 分机。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201705/03/162614sjwbjvuwz4uglghj.png alt></p><p>我使用密码配置了一个 sip 分机用户。密码是自动生成的，也可以选择创建自己的密码。</p><p>现在我有了一个完整的分机，我急于尝试我的新的 VoIP 服务器。我下载并安装了 <a href=http://yateclient.yate.ro/index.php/Download/Download>Yate 客户端</a>，这是在构建服务器的过程中发现的。安装 <a href=https://en.wikipedia.org/wiki/Yate_(telephony_engine)>Yate</a> 之后，我想测试与服务器的连接。我发现我可以使用 Yate 连接到服务器并输入 <code>*43</code> 进行回声测试。当我听到客户端指示时，我感到很激动。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201705/03/162615pydklpbc3z30gcy4.png alt></p><p>我决定创建另外一个 sip 分机，这样我就可以测试系统的语音信箱功能。 在完成后，我使用 Yate 客户端来呼叫这个分机，并留下了简短的语音留言。然后再次使用 Yate 呼叫该分机并输入 <code>*97</code> 来检索语音留言。然后我想看看我是否可以使用我的新服务器来呼叫外线。返回到菜单，选择 “连接” Connectivity 选项，并添加了 Google Voice 号码。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201705/03/162615f8yhyk5wtyghawat.png alt=Google_Voice_Connectivity title=Google_Voice_Connectivity></p><p>接着我返回到 “连接” 菜单，并将 Google Voice 添加到出站路由中。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201705/03/162616srvlo9ovflvlswob.png alt=Google_Voice_outbound_route title=Google_Voice_outbound_route></p><h3 id=完成一个呼叫>完成一个呼叫</h3><p>回到 Yate 客户端，我呼叫了一个外线并成功完成了这个呼叫。</p><p>我相信这个特定的 VoIP 解决方案可以轻松地为一个小型办公室工作。根据 RasPBX 网站的<a href=http://www.raspberry-asterisk.org/faq/>常见问题</a>部分，典型的树莓派系统可以在树莓派 1 上支持多达 10 个并发呼叫。</p><p>Asterisk 有很多细微差别的功能，FreePBX 则可以很容易地利用它们。</p><p><em>关于树莓派上的 Asterisk 的更多信息，请参考他们的<a href=http://www.raspberry-asterisk.org/blog/>博客</a>。你可以在他们的网站上找到有关 <a href=https://www.freepbx.org/development/source-code/>FreePBX 源代码</a>的其他信息。</em></p><p>（题图：Pixabay，CC0）</p><hr><p>作者简介：</p><p>Don Watkins - 教育家、教育技术专家、企业家、开源倡导者。教育心理学硕士、教育领导硕士、Linux 系统管理员、CCNA、使用 Virtual Box 虚拟化。关注我 @Don_Watkins。</p><hr><p>via: <a href=https://opensource.com/article/17/4/asterisk-raspberry-pi-3>https://opensource.com/article/17/4/asterisk-raspberry-pi-3</a></p><p>作者：<a href=https://opensource.com/users/don-watkins>Don Watkins</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/jasminepeng>jasminepeng</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/ rel=tag>树莓派</a></li><li class=tags__item><a class="tags__link btn" href=/tags/voip/ rel=tag>VoIP</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>