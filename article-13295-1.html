<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>什么是 Git 遴选（cherry-pick）？ - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="什么是 Git 遴选（cherry-pick）？"><meta property="og:description" content="了解 git cherry-pick 命令是什么，为什么用以及如何使用。"><meta property="og:type" content="article"><meta property="og:url" content="/article-13295-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-14T13:17:53+00:00"><meta property="article:modified_time" content="2021-04-14T13:17:53+00:00"><meta itemprop=name content="什么是 Git 遴选（cherry-pick）？"><meta itemprop=description content="了解 git cherry-pick 命令是什么，为什么用以及如何使用。"><meta itemprop=datePublished content="2021-04-14T13:17:53+00:00"><meta itemprop=dateModified content="2021-04-14T13:17:53+00:00"><meta itemprop=wordCount content="286"><meta itemprop=keywords content="git,遴选,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>什么是 Git 遴选（cherry-pick）？</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-04-14T13:17:53Z>April 14, 2021</time></div></div></header><div class="content post__content clearfix"><blockquote><p>了解 <code>git cherry-pick</code> 命令是什么，为什么用以及如何使用。</p></blockquote><p><img src=https://img.linux.net.cn/data/attachment/album/202104/14/131735o63v3ow6y2wc281o.jpg alt title="Measuring and baking a cherry pie recipe"></p><p>当你和一群程序员一起工作时，无论项目大小，处理多个 Git 分支之间的变更都会变得很困难。有时，你不想将整个 Git 分支合并到另一个分支，而是想选择并移动几个特定的提交。这个过程被称为 “ 遴选 cherry-pick ”。</p><p>本文将介绍“遴选”是什么、为何使用以及如何使用。</p><p>那么让我们开始吧。</p><h3 id=什么是遴选>什么是遴选？</h3><p>使用遴选（<code>cherry-pick</code>）命令，Git 可以让你将任何分支中的个别提交合并到你当前的 <a href=https://acompiler.com/git-head/>Git HEAD</a> 分支中。</p><p>当执行 <code>git merge</code> 或者 <code>git rebase</code> 时，一个分支的所有提交都会被合并。<code>cherry-pick</code> 命令允许你选择单个提交进行整合。</p><h3 id=遴选的好处>遴选的好处</h3><p>下面的情况可能会让你更容易理解遴选功能。</p><p>想象一下，你正在为即将到来的每周冲刺实现新功能。当你的代码准备好了，你会把它推送到远程分支，准备进行测试。</p><p>然而，客户并不是对所有修改都满意，要求你只呈现某些修改。因为客户还没有批准下次发布的所有修改，所以 <code>git rebase</code> 不会有预期的结果。为什么会这样？因为 <code>git rebase</code> 或者 <code>git merge</code> 会把上一个冲刺的每一个调整都纳入其中。</p><p>遴选就是答案！因为它只关注在提交中添加的变更，所以遴选只会带入批准的变更，而不添加其他的提交。</p><p>还有其他几个原因可以使用遴选：</p><ul><li>这对于 bug 修复是必不可少的，因为 bug 是出现在开发分支中对应的提交的。</li><li>你可以通过使用 <code>git cherry-pick</code> 来避免不必要的工作，而不用使用其他选项例如 <code>git diff</code> 来应用特定变更。</li><li>如果因为不同 Git 分支的版本不兼容而无法将整个分支联合起来，那么它是一个很有用的工具。</li></ul><h3 id=使用-cherry-pick-命令>使用 cherry-pick 命令</h3><p>在 <code>cherry-pick</code> 命令的最简单形式中，你只需使用 <a href=https://en.wikipedia.org/wiki/Secure_Hash_Algorithms>SHA</a> 标识符来表示你想整合到当前 HEAD 分支的提交。</p><p>要获得提交的哈希值，可以使用 <code>git log</code> 命令：</p><pre tabindex=0><code>$ git log --oneline
</code></pre><p>当你知道了提交的哈希值后，你就可以使用 <code>cherry-pick</code> 命令。</p><p>语法是：</p><pre tabindex=0><code>$ git cherry-pick &lt;commit sha&gt;
</code></pre><p>例如：</p><pre tabindex=0><code>$ git cherry-pick 65be1e5
</code></pre><p>这将会把指定的修改合并到当前已签出的分支上。</p><p>如果你想做进一步的修改，也可以让 Git 将提交的变更内容添加到你的工作副本中。</p><p>语法是：</p><pre tabindex=0><code>$ git cherry-pick &lt;commit sha&gt; --no-commit
</code></pre><p>例如：</p><pre tabindex=0><code>$ git cherry-pick 65be1e5 --no-commit
</code></pre><p>如果你想同时选择多个提交，请将它们的提交哈希值用空格隔开：</p><pre tabindex=0><code>$ git cherry-pick hash1 hash3
</code></pre><p>当遴选提交时，你不能使用 <code>git pull</code> 命令，因为它能获取一个仓库的提交<strong>并</strong>自动合并到另一个仓库。<code>cherry-pick</code> 是一个专门不这么做的工具；另一方面，你可以使用 <code>git fetch</code>，它可以获取提交，但不应用它们。毫无疑问，<code>git pull</code> 很方便，但它不精确。</p><h3 id=自己尝试>自己尝试</h3><p>要尝试这个过程，启动终端并生成一个示例项目：</p><pre tabindex=0><code>$ mkdir fruit.git
$ cd fruit.git
$ git init .
</code></pre><p>创建一些数据并提交：</p><pre tabindex=0><code>$ echo &#34;Kiwifruit&#34; &gt; fruit.txt
$ git add fruit.txt
$ git commit -m &#39;First commit&#39;
</code></pre><p>现在，通过创建一个项目的复刻来代表一个远程开发者：</p><pre tabindex=0><code>$ mkdir ~/fruit.fork
$ cd !$
$ echo &#34;Strawberry&#34; &gt;&gt; fruit.txt
$ git add fruit.txt
$ git commit -m &#39;Added a fruit&#34;
</code></pre><p>这是一个有效的提交。现在，创建一个不好的提交，代表你不想合并到你的项目中的东西：</p><pre tabindex=0><code>$ echo &#34;Rhubarb&#34; &gt;&gt; fruit.txt
$ git add fruit.txt
$ git commit -m &#39;Added a vegetable that tastes like a fruit&#34;
</code></pre><p>返回你的仓库，从你的假想的开发者那里获取提交的内容：</p><pre tabindex=0><code>$ cd ~/fruit.git
$ git remote add dev ~/fruit.fork
$ git fetch dev
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 6 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (6/6), done...
</code></pre><pre tabindex=0><code>$ git log –oneline dev/master
e858ab2 Added a vegetable that tastes like a fruit
0664292 Added a fruit
b56e0f8 First commit
</code></pre><p>你已经从你想象中的开发者那里获取了提交的内容，但你还没有将它们合并到你的版本库中。你想接受第二个提交，但不想接受第三个提交，所以使用 <code>cherry-pick</code>。</p><pre tabindex=0><code>$ git cherry-pick 0664292
</code></pre><p>第二次提交现在在你的仓库里了：</p><pre tabindex=0><code>$ cat fruit.txt
Kiwifruit
Strawberry
</code></pre><p>将你的更改推送到远程服务器上，这就完成了！</p><h3 id=避免使用遴选的原因>避免使用遴选的原因</h3><p>在开发者社区中，通常不鼓励所以遴选。主要原因是它会造成重复提交，而你也失去了跟踪你的提交历史的能力。</p><p>如果你不按顺序地遴选了大量的提交，这些提交会被记录在你的分支中，这可能会在 Git 分支中导致不理想的结果。</p><p>遴选是一个强大的命令，如果没有正确理解可能发生的情况，它可能会导致问题。不过，当你搞砸了，提交到错误的分支时，它可能会救你一命（至少是你当天的工作）。</p><hr><p>via: <a href=https://opensource.com/article/21/4/cherry-picking-git>https://opensource.com/article/21/4/cherry-picking-git</a></p><p>作者：<a href=https://opensource.com/users/acompiler>Rajeev Bera</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/git/ rel=tag>git</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E9%81%B4%E9%80%89/ rel=tag>遴选</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>