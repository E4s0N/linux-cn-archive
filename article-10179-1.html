<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>用 Pandoc 生成一篇调研论文 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="用 Pandoc 生成一篇调研论文"><meta property="og:description" content="学习如何用 Markdown 管理章节引用、图像、表格以及更多。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10179-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-11-01T13:04:10+00:00"><meta property="article:modified_time" content="2018-11-01T13:04:10+00:00"><meta itemprop=name content="用 Pandoc 生成一篇调研论文"><meta itemprop=description content="学习如何用 Markdown 管理章节引用、图像、表格以及更多。"><meta itemprop=datePublished content="2018-11-01T13:04:10+00:00"><meta itemprop=dateModified content="2018-11-01T13:04:10+00:00"><meta itemprop=wordCount content="759"><meta itemprop=keywords content="Markdown,LaTeX,Pandoc,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>用 Pandoc 生成一篇调研论文</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-11-01T13:04:10Z>November 01, 2018</time></div></div></header><div class="content post__content clearfix"><blockquote><p>学习如何用 Markdown 管理章节引用、图像、表格以及更多。</p></blockquote><p><img src=/data/attachment/album/201811/01/130402un9z690xd92o60ik.jpg alt></p><p>这篇文章对于使用 <a href=https://en.wikipedia.org/wiki/Markdown>Markdown</a> 语法做一篇调研论文进行了一个深度体验。覆盖了如何创建和引用章节、图像（用 Markdown 和 <a href=https://www.latex-project.org/>LaTeX</a>）和参考书目。我们也讨论了一些棘手的案例和为什么使用 LaTex 是一个正确的做法。</p><h3 id=调研>调研</h3><p>调研论文一般包括对章节、图像、表格和参考书目的引用。<a href=https://pandoc.org/>Pandoc</a> 本身并不能交叉引用这些，但是它能够利用 <a href=http://lierdakil.github.io/pandoc-crossref/>pandoc-crossref</a> 过滤器来完成自动编号和章节、图像、表格的交叉引用。</p><p>让我们从重写原本以 LaTax 撰写的 <a href="https://dl.acm.org/citation.cfm?id=3270118">一个教育调研报告的例子</a> 开始，然后用 Markdown（和一些 LaTax）、Pandoc 和 Pandoc-crossref 重写。</p><h4 id=添加并引用章节>添加并引用章节</h4><p>要想章节被自动编号，必须使用 Markdown H1 标题编写。子章节使用 H2-H4 子标题编写（通常不需要更多级别了）。例如一个章节的标题是 “Implementation”，写作 <code># Implementation {#sec: implementation}</code>，然后 Pandoc 会把它转化为 <code>3. Implementation</code>（或者转换为相应的章节编号）。<code>Implementation</code> 这个标题使用了 H1 并且声明了一个 <code>{#sec: implementation}</code> 的标签，这是作者用于引用该章节的标签。要想引用一个章节，输入 <code>@</code> 符号并跟上对应章节标签，使用方括号括起来即可： <code>[@ sec:implementation]</code></p><p><a href="https://dl.acm.org/citation.cfm?id=3270118">在这篇论文中</a>, 我们发现了下面这个例子：</p><pre tabindex=0><code>we lack experience (consistency between TAs, [@sec:implementation]).
</code></pre><p>Pandoc 转换：</p><pre tabindex=0><code>we lack experience (consistency between TAs, Section 4).
</code></pre><p>章节被自动编号（这在本文最后的 <code>Makefile</code> 当中说明）。要创建无编号的章节，输入章节的标题并在最后添加 <code>{-}</code>。例如：<code>### Designing a game for maintainability {-}</code> 就以标题 “Designing a game for maintainability”，创建了一个无标号的章节。</p><h4 id=添加并引用图像>添加并引用图像</h4><p>添加并引用一个图像，跟添加并引用一个章节和添加一个 Markdown 图片很相似：</p><pre tabindex=0><code>![Scatterplot matrix](data/scatterplots/RScatterplotMatrix2.png){#fig:scatter-matrix}
</code></pre><p>上面这一行是告诉 Pandoc，有一个标有 Scatterplot matrix 的图像以及这张图片路径是 <code>data/scatterplots/RScatterplotMatrix2.png</code>。<code>{#fig:scatter-matrix}</code> 表明了用于引用该图像的名字。</p><p>这里是从一篇论文中进行图像引用的例子：</p><pre tabindex=0><code>The boxes &#34;Enjoy&#34;, &#34;Grade&#34; and &#34;Motivation&#34; ([@fig:scatter-matrix]) ...
</code></pre><p>Pandoc 产生如下输出：</p><pre tabindex=0><code>The boxes &#34;Enjoy&#34;, &#34;Grade&#34; and &#34;Motivation&#34; (Fig. 1) ...
</code></pre><h4 id=添加及引用参考书目>添加及引用参考书目</h4><p>大多数调研报告都把引用放在一个 BibTeX 的数据库文件中。在这个例子中，该文件被命名为 <a href=https://github.com/kikofernandez/pandoc-examples/blob/master/research-paper/biblio.bib>biblio.bib</a>，它包含了论文中所有的引用。下面是这个文件的样子：</p><pre tabindex=0><code>@inproceedings{wrigstad2017mastery,
    Author =       {Wrigstad, Tobias and Castegren, Elias},
    Booktitle =    {SPLASH-E},
    Title =        {Mastery Learning-Like Teaching with Achievements},
    Year =         2017
}

@inproceedings{review-gamification-framework,
  Author =       {A. Mora and D. Riera and C. Gonzalez and J. Arnedo-Moreno},
  Publisher =    {IEEE},
  Booktitle =    {2015 7th International Conference on Games and Virtual Worlds
                  for Serious Applications (VS-Games)},
  Doi =          {10.1109/VS-GAMES.2015.7295760},
  Keywords =     {formal specification;serious games (computing);design
                  framework;formal design process;game components;game design
                  elements;gamification design frameworks;gamification-based
                  solutions;Bibliographies;Context;Design
                  methodology;Ethics;Games;Proposals},
  Month =        {Sept},
  Pages =        {1-8},
  Title =        {A Literature Review of Gamification Design Frameworks},
  Year =         2015,
  Bdsk-Url-1 =   {http://dx.doi.org/10.1109/VS-GAMES.2015.7295760}
}

...
</code></pre><p>第一行的 <code>@inproceedings{wrigstad2017mastery,</code> 表明了出版物 的类型（<code>inproceedings</code>），以及用来指向那篇论文的标签（<code>wrigstad2017mastery</code>）。</p><p>引用这篇题为 “Mastery Learning-Like Teaching with Achievements” 的论文, 输入：</p><pre tabindex=0><code>the achievement-driven learning methodology [@wrigstad2017mastery]
</code></pre><p>Pandoc 将会输出：</p><pre tabindex=0><code>the achievement- driven learning methodology [30]
</code></pre><p>这篇论文将会产生像下面这样被标号的参考书目：</p><p><img src=/data/attachment/album/201811/01/130413nn55ey4n556z565j.png alt></p><p>引用文章的集合也很容易：只要引用使用分号 <code>;</code> 分隔开被标记的参考文献就可以了。如果一个引用有两个标签 —— 例如： <code>SEABORN201514</code> 和 <code>gamification-leaderboard-benefits</code>—— 像下面这样把它们放在一起引用：</p><pre tabindex=0><code>Thus, the most important benefit is its potential to increase students&#39; motivation
and engagement [@SEABORN201514;@gamification-leaderboard-benefits].
</code></pre><p>Pandoc 将会产生：</p><pre tabindex=0><code>Thus, the most important benefit is its potential to increase students’ motivation
and engagement [26, 28]
</code></pre><h3 id=问题案例>问题案例</h3><p>一个常见的问题是所需项目与页面不匹配。不匹配的部分会自动移动到它们认为合适的地方，即便这些位置并不是读者期望看到的位置。因此在图像或者表格接近于它们被提及的地方时，我们需要调节一下那些元素放置的位置，使得它们更加易于阅读。为了达到这个效果，我建议使用 <code>figure</code> 这个 LaTeX 环境参数，它可以让用户控制图像的位置。</p><p>我们看一个上面提到的图像的例子：</p><pre tabindex=0><code>![Scatterplot matrix](data/scatterplots/RScatterplotMatrix2.png){#fig:scatter-matrix}
</code></pre><p>然后使用 LaTeX 重写：</p><pre tabindex=0><code>\begin{figure}[t]
\includegraphics{data/scatterplots/RScatterplotMatrix2.png}
\caption{\label{fig:matrix}Scatterplot matrix}
\end{figure}
</code></pre><p>在 LaTeX 中，<code>figure</code> 环境参数中的 <code>[t]</code> 选项表示这张图用该位于该页的最顶部。有关更多选项，参阅 <a href=https://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions#Figures>LaTex/Floats, Figures, and Captions</a> 这篇 Wikibooks 的文章。</p><h3 id=产生一篇论文>产生一篇论文</h3><p>到目前为止，我们讲了如何添加和引用（子）章节、图像和参考书目，现在让我们重温一下如何生成一篇 PDF 格式的论文。要生成 PDF，我们将使用 Pandoc 生成一篇可以被构建成最终 PDF 的 LaTeX 文件。我们还会讨论如何以 LaTeX，使用一套自定义的模板和元信息文件生成一篇调研论文，以及如何将 LaTeX 文档编译为最终的 PDF 格式。</p><p>很多会议都提供了一个 .cls 文件或者一套论文应有样式的模板；例如，它们是否应该使用两列的格式以及其它的设计风格。在我们的例子中，会议提供了一个名为 <code>acmart.cls</code> 的文件。</p><p>作者通常想要在他们的论文中包含他们所属的机构，然而，这个选项并没有包含在默认的 Pandoc 的 LaTeX 模板（注意，可以通过输入 <code>pandoc -D latex</code> 来查看 Pandoc 模板）当中。要包含这个内容，找一个 Pandoc 默认的 LaTeX 模板，并添加一些新的内容。将这个模板像下面这样复制进一个名为 <code>mytemplate.tex</code> 的文件中：</p><pre tabindex=0><code>pandoc -D latex &gt; mytemplate.tex
</code></pre><p>默认的模板包含以下代码：</p><pre tabindex=0><code>$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$
$if(institute)$
\providecommand{\institute}[1]{}
\institute{$for(institute)$$institute$$sep$ \and $endfor$}
$endif$
</code></pre><p>因为这个模板应该包含作者的联系方式和电子邮件地址，在其他一些选项之间，我们更新这个模板以添加以下内容（我们还做了一些其他的更改，但是因为文件的长度，就没有包含在此处）：</p><pre tabindex=0><code>latex
$for(author)$
    $if(author.name)$
        \author{$author.name$}
        $if(author.affiliation)$
            \affiliation{\institution{$author.affiliation$}}
        $endif$
        $if(author.email)$
            \email{$author.email$}
        $endif$
    $else$
        $author$
    $endif$
$endfor$
</code></pre><p>要让这些更改起作用，我们还应该有下面的文件：</p><ul><li><code>main.md</code> 包含调研论文</li><li><code>biblio.bib</code> 包含参考书目数据库</li><li><code>acmart.cls</code> 我们使用的文档的集合</li><li><code>mytemplate.tex</code> 是我们使用的模板文件（代替默认的）</li></ul><p>让我们添加论文的元信息到一个 <code>meta.yaml</code> 文件：</p><pre tabindex=0><code>---
template: &#39;mytemplate.tex&#39;
documentclass: acmart
classoption: sigconf
title: The impact of opt-in gamification on `\\`{=latex} students&#39; grades in a software design course
author:
- name: Kiko Fernandez-Reyes
  affiliation: Uppsala University
  email: kiko.fernandez@it.uu.se
- name: Dave Clarke
  affiliation: Uppsala University
  email: dave.clarke@it.uu.se
- name: Janina Hornbach
  affiliation: Uppsala University
  email: janina.hornbach@fek.uu.se
bibliography: biblio.bib
abstract: |
  An achievement-driven methodology strives to give students more control over their learning with enough flexibility to engage them in deeper learning. (more stuff continues)

include-before: |
      \` ``{=latex}
      \copyrightyear{2018}
      \acmYear{2018}
      \setcopyright{acmlicensed}
      \acmConference[MODELS &#39;18 Companion]{ACM/IEEE 21th International Conference on Model Driven Engineering Languages and Systems}{October 14--19, 2018}{Copenhagen, Denmark}
      \acmBooktitle{ACM/IEEE 21th International Conference on Model Driven Engineering Languages and Systems (MODELS &#39;18 Companion), October 14--19, 2018, Copenhagen, Denmark}
      \acmPrice{XX.XX}
      \acmDOI{10.1145/3270112.3270118}
      \acmISBN{978-1-4503-5965-8/18/10}

      \begin{CCSXML}
      &lt;ccs2012&gt;
      &lt;concept&gt;
      &lt;concept_id&gt;10010405.10010489&lt;/concept_id&gt;
      &lt;concept_desc&gt;Applied computing~Education&lt;/concept_desc&gt;
      &lt;concept_significance&gt;500&lt;/concept_significance&gt;
      &lt;/concept&gt;
      &lt;/ccs2012&gt;
      \end{CCSXML}

      \ccsdesc[500]{Applied computing~Education}

      \keywords{gamification, education, software design, UML}
      \` ``
figPrefix:
  - &#34;Fig.&#34;
  - &#34;Figs.&#34;
secPrefix:
  - &#34;Section&#34;
  - &#34;Sections&#34;
...
</code></pre><p>这个元信息文件使用 LaTeX 设置下列参数：</p><ul><li><code>template</code> 指向使用的模板（<code>mytemplate.tex</code>）</li><li><code>documentclass</code> 指向使用的 LaTeX 文档集合（<code>acmart</code>）</li><li><code>classoption</code> 是在 <code>sigconf</code> 的案例中，指向这个类的选项</li><li><code>title</code> 指定论文的标题</li><li><code>author</code> 是一个包含例如 <code>name</code>、<code>affiliation</code> 和 <code>email</code> 的地方</li><li><code>bibliography</code> 指向包含参考书目的文件（<code>biblio.bib</code>）</li><li><code>abstract</code> 包含论文的摘要</li><li><code>include-before</code> 是这篇论文的具体内容之前应该被包含的信息；在 LaTeX 中被称为 <a href=https://www.sharelatex.com/learn/latex/Creating_a_document_in_LaTeX#The_preamble_of_a_document>前言</a>。我在这里包含它去展示如何产生一篇计算机科学的论文，但是你可以选择跳过</li><li><code>figPrefix</code> 指向如何引用文档中的图像，例如：当引用图像的 <code>[@fig:scatter-matrix]</code> 时应该显示什么。例如，当前的 <code>figPrefix</code> 在这个例子 <code>The boxes "Enjoy", "Grade" and "Motivation" ([@fig:scatter-matrix])</code>中，产生了这样的输出：<code>The boxes "Enjoy", "Grade" and "Motivation" (Fig. 3)</code>。如果这里有很多图像，目前的设置表明它应该在图像号码旁边显示 <code>Figs.</code></li><li><code>secPrefix</code> 指定如何引用文档中其他地方提到的部分（类似之前的图像和概览）</li></ul><p>现在已经设置好了元信息，让我们来创建一个 <code>Makefile</code>，它会产生你想要的输出。<code>Makefile</code> 使用 Pandoc 产生 LaTeX 文件，<code>pandoc-crossref</code> 产生交叉引用，<code>pdflatex</code> 构建 LaTeX 为 PDF，<code>bibtex</code> 处理引用。</p><p><code>Makefile</code> 已经展示如下：</p><pre tabindex=0><code>all: paper

paper:
        @pandoc -s -F pandoc-crossref --natbib meta.yaml --template=mytemplate.tex -N \
         -f markdown -t latex+raw_tex+tex_math_dollars+citations -o main.tex main.md
        @pdflatex main.tex &amp;&gt; /dev/null
        @bibtex main &amp;&gt; /dev/null
        @pdflatex main.tex &amp;&gt; /dev/null
        @pdflatex main.tex &amp;&gt; /dev/null

clean:
        rm main.aux main.tex main.log main.bbl main.blg main.out

.PHONY: all clean paper
</code></pre><p>Pandoc 使用下面的标记：</p><ul><li><code>-s</code> 创建一个独立的 LaTeX 文档</li><li><code>-F pandoc-crossref</code> 利用 <code>pandoc-crossref</code> 进行过滤</li><li><code>--natbib</code> 用 <code>natbib</code> （你也可以选择 <code>--biblatex</code>）对参考书目进行渲染</li><li><code>--template</code> 设置使用的模板文件</li><li><code>-N</code> 为章节的标题编号</li><li><code>-f</code> 和 <code>-t</code> 指定从哪个格式转换到哪个格式。<code>-t</code> 通常包含格式和 Pandoc 使用的扩展。在这个例子中，我们标明的 <code>raw_tex+tex_math_dollars+citations</code> 允许在 Markdown 中使用 <code>raw_tex</code> LaTeX。 <code>tex_math_dollars</code> 让我们能够像在 LaTeX 中一样输入数学符号，<code>citations</code> 让我们可以使用 <a href=http://pandoc.org/MANUAL.html#citations>这个扩展</a>。</li></ul><p>要从 LaTeX 产生 PDF，按 <a href=http://www.bibtex.org/Using/>来自bibtex</a> 的指导处理参考书目：</p><pre tabindex=0><code>@pdflatex main.tex &amp;&gt; /dev/null
@bibtex main &amp;&gt; /dev/null
@pdflatex main.tex &amp;&gt; /dev/null
@pdflatex main.tex &amp;&gt; /dev/null
</code></pre><p>脚本用 <code>@</code> 忽略输出，并且重定向标准输出和错误到 <code>/dev/null</code> ，因此我们在使用这些命令的可执行文件时不会看到任何的输出。</p><p>最终的结果展示如下。这篇文章的库可以在 <a href=https://github.com/kikofernandez/pandoc-examples/tree/master/research-paper>GitHub</a> 找到：</p><p><img src=/data/attachment/album/201811/01/130414iw01zqqb10hmzzqi.png alt></p><h3 id=结论>结论</h3><p>在我看来，研究的重点是协作、思想的传播，以及在任何一个恰好存在的领域中改进现有的技术。许多计算机科学家和工程师使用 LaTeX 文档系统来写论文，它对数学提供了完美的支持。来自社会科学的研究人员似乎更喜欢 DOCX 文档。</p><p>当身处不同社区的研究人员一同写一篇论文时，他们首先应该讨论一下他们将要使用哪种格式。然而如果包含太多的数学符号，DOCX 对于工程师来说不会是最简便的选择，LaTeX 对于缺乏编程经验的研究人员来说也有一些问题。就像这篇文章中展示的，Markdown 是一门工程师和社会科学家都很轻易能够使用的语言。</p><hr><p>via: <a href=https://opensource.com/article/18/9/pandoc-research-paper>https://opensource.com/article/18/9/pandoc-research-paper</a></p><p>作者：<a href=https://opensource.com/users/kikofernandez>Kiko Fernandez-Reyes</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/dianbanjiu>dianbanjiu</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/markdown/ rel=tag>Markdown</a></li><li class=tags__item><a class="tags__link btn" href=/tags/latex/ rel=tag>LaTeX</a></li><li class=tags__item><a class="tags__link btn" href=/tags/pandoc/ rel=tag>Pandoc</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>