<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 Arch 用户仓库（AUR）中发现恶意软件 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 Arch 用户仓库（AUR）中发现恶意软件"><meta property="og:description" content="7 月 7 日，有一个 AUR 软件包被改入了一些恶意代码，提醒 Arch Linux 用户（以及一般的 Linux 用户）在安装之前应该尽可能检查所有由用户生成的软件包。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9865-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-07-25T08:41:00+00:00"><meta property="article:modified_time" content="2018-07-25T08:41:00+00:00"><meta itemprop=name content="在 Arch 用户仓库（AUR）中发现恶意软件"><meta itemprop=description content="7 月 7 日，有一个 AUR 软件包被改入了一些恶意代码，提醒 Arch Linux 用户（以及一般的 Linux 用户）在安装之前应该尽可能检查所有由用户生成的软件包。"><meta itemprop=datePublished content="2018-07-25T08:41:00+00:00"><meta itemprop=dateModified content="2018-07-25T08:41:00+00:00"><meta itemprop=wordCount content="104"><meta itemprop=keywords content="恶意软件,AUR,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 Arch 用户仓库（AUR）中发现恶意软件</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-07-25T08:41:00Z>July 25, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201807/25/084110p8uzg6g6f6b066bl.jpg alt></p><p>7 月 7 日，有一个 AUR 软件包被改入了一些恶意代码，提醒 <a href=https://www.archlinux.org/>Arch Linux</a> 用户（以及一般的 Linux 用户）在安装之前应该尽可能检查所有由用户生成的软件包。</p><p><a href=https://aur.archlinux.org/>AUR</a>（即 Arch（Linux）用户仓库）包含包描述，也称为 PKGBUILD，它使得从源代码编译包变得更容易。虽然这些包非常有用，但它们永远不应被视为安全的，并且用户应尽可能在使用之前检查其内容。毕竟，AUR 在网页中以粗体显示 “<strong>AUR 包是用户制作的内容。任何使用该提供的文件的风险由你自行承担。</strong>”</p><p>这次<a href=https://lists.archlinux.org/pipermail/aur-general/2018-July/034152.html>发现</a>包含恶意代码的 AUR 包证明了这一点。<a href="https://aur.archlinux.org/cgit/aur.git/commit/?h=acroread&amp;id=b3fec9f2f16703c2dae9e793f75ad6e0d98509bc">acroread</a> 于 7 月 7 日（看起来它以前是“孤儿”，意思是它没有维护者）被一位名为 “xeactor” 的用户修改，它包含了一行从 pastebin 使用 <code>curl</code> 下载脚本的命令。然后，该脚本下载了另一个脚本并安装了一个 systemd 单元以定期运行该脚本。</p><p><strong>看来有<a href=https://lists.archlinux.org/pipermail/aur-general/2018-July/034153.html>另外两个</a> AUR 包以同样的方式被修改。所有违规软件包都已删除，并暂停了用于上传它们的用户帐户（它们注册在更新软件包的同一天）。</strong></p><p>这些恶意代码没有做任何真正有害的事情 —— 它只是试图上传一些系统信息，比如机器 ID、<code>uname -a</code> 的输出（包括内核版本、架构等）、CPU 信息、pacman 信息，以及 <code>systemctl list-units</code>（列出 systemd 单元信息）的输出到 pastebin.com。我说“试图”是因为第二个脚本中存在错误而没有实际上传系统信息（上传函数为 “upload”，但脚本试图使用其他名称 “uploader” 调用它）。</p><p>此外，将这些恶意脚本添加到 AUR 的人将脚本中的个人 Pastebin API 密钥以明文形式留下，再次证明他们真的不明白他们在做什么。（LCTT 译注：意即这是一个菜鸟“黑客”，还不懂得如何有经验地隐藏自己。）</p><p>尝试将此信息上传到 Pastebin 的目的尚不清楚，特别是原本可以上传更加敏感信息的情况下，如 GPG / SSH 密钥。</p><p><strong>更新：</strong> Reddit用户 u/xanaxdroid_ <a href=https://www.reddit.com/r/archlinux/comments/8x0p5z/reminder_to_always_read_your_pkgbuilds/e21iugg/>提及</a>同一个名为 “xeactor” 的用户也发布了一些加密货币挖矿软件包，因此他推测 “xeactor” 可能正计划添加一些隐藏的加密货币挖矿软件到 AUR（<a href=https://www.linuxuprising.com/2018/05/malware-found-in-ubuntu-snap-store.html>两个月</a>前的一些 Ubuntu Snap 软件包也是如此）。这就是 “xeactor” 可能试图获取各种系统信息的原因。此 AUR 用户上传的所有包都已删除，因此我无法检查。</p><p>**另一个更新：**你究竟应该在那些用户生成的软件包检查什么（如 AUR 中发现的）？情况各有不同，我无法准确地告诉你，但你可以从寻找任何尝试使用 <code>curl</code>、<code>wget</code>和其他类似工具下载内容的东西开始，看看他们究竟想要下载什么。还要检查从中下载软件包源的服务器，并确保它是官方来源。不幸的是，这不是一个确切的“科学做法”。例如，对于 Launchpad PPA，事情变得更加复杂，因为你必须懂得 Debian 如何打包，并且这些源代码是可以直接更改的，因为它托管在 PPA 中并由用户上传的。使用 Snap 软件包会变得更加复杂，因为在安装之前你无法检查这些软件包（据我所知）。在后面这些情况下，作为通用解决方案，我觉得你应该只安装你信任的用户/打包器生成的软件包。</p><hr><p>via: <a href=https://www.linuxuprising.com/2018/07/malware-found-on-arch-user-repository.html>https://www.linuxuprising.com/2018/07/malware-found-on-arch-user-repository.html</a></p><p>作者：<a href=https://plus.google.com/118280394805678839070>Logix</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6/ rel=tag>恶意软件</a></li><li class=tags__item><a class="tags__link btn" href=/tags/aur/ rel=tag>AUR</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>