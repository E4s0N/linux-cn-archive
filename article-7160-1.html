<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>仅有 0.09% 的 HTTPS 站点使用了 HPKP 证书钉 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="仅有 0.09% 的 HTTPS 站点使用了 HPKP 证书钉"><meta property="og:description" content="HPKP 是一个 HTTP 安全扩展，最初发布于 2015 年 4 月（RFC 7469）。该标准定义了一种避免浏览器访问到伪造证书的 HTTPS 网站方法。在浏览器访问 HTTPS 网站时，网站可以锁定浏览器所应接受的该网站的公钥列表；只有浏览器接受的证书同之前通过 HPKP 头所申明的一致时才能访问该网站。"><meta property="og:type" content="article"><meta property="og:url" content="/article-7160-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-03-27T15:48:44+00:00"><meta property="article:modified_time" content="2016-03-27T15:48:44+00:00"><meta itemprop=name content="仅有 0.09% 的 HTTPS 站点使用了 HPKP 证书钉"><meta itemprop=description content="HPKP 是一个 HTTP 安全扩展，最初发布于 2015 年 4 月（RFC 7469）。该标准定义了一种避免浏览器访问到伪造证书的 HTTPS 网站方法。在浏览器访问 HTTPS 网站时，网站可以锁定浏览器所应接受的该网站的公钥列表；只有浏览器接受的证书同之前通过 HPKP 头所申明的一致时才能访问该网站。"><meta itemprop=datePublished content="2016-03-27T15:48:44+00:00"><meta itemprop=dateModified content="2016-03-27T15:48:44+00:00"><meta itemprop=wordCount content="105"><meta itemprop=keywords content="HPKP,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>仅有 0.09% 的 HTTPS 站点使用了 HPKP 证书钉</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-03-27T15:48:44Z>March 27, 2016</time></div></div></header><div class="content post__content clearfix"><p>一份最近的调查报告显示，HTTPS 站点中仅有 0.09% 的站点（大约 4100 个）使用了 HTTP 公钥钉 （ HTTP Public Key Pinning ） （HPKP）来增强其域名的 SSL/TLS 证书。</p><p>HPKP 是一个 HTTP 安全扩展，最初发布于 2015 年 4 月（RFC 7469）。该标准定义了一种避免浏览器访问到伪造证书的 HTTPS 网站方法。在浏览器访问 HTTPS 网站时，网站可以锁定浏览器所应接受的该网站的公钥列表；只有浏览器接受的证书同之前通过 HPKP 头所申明的一致时才能访问该网站。</p><p><img src=/data/attachment/album/201603/27/154847sjz7ly0q7jp0mkwl.jpg alt></p><h3 id=为防止攻击者使用一个以你的域名签发的有效证书来伪造你的网站时hpkp-很有用>为防止攻击者使用一个以你的域名签发的有效证书来伪造你的网站时，HPKP 很有用</h3><p>这种机制可以用于防护攻击者运行一个假冒网站并使用有效证书来欺骗浏览器的攻击行为。</p><p>攻击者有几种方式可以得到有效的证书。他们可以通过对 CA 的社会工程攻击、对技术薄弱点的攻击、CA 的数据泄露、利用脆弱的证书签发策略等来得到。另外，如果攻击者本身得到了浏览器可信任的 CA 的授权，也是可以做到的。</p><p>HPKP 就是用来解决这种问题的。</p><h3 id=hpkp-如何工作>HPKP 如何工作？</h3><p>当网站管理人员为他的网站设置 HPKP 头时，第一次连接到该域名的用户将接收到一个包括了公钥指纹的列表，以后对该网站的访问必定使用这些公钥之一才能进行。</p><p>这些公钥存储在用户的浏览器里面，当用户再次访问该网站时，在建立 HTTPS 连接前，浏览器和服务器会确认它们都使用了正确公钥和服务器证书。如果不是，那么支持 HPKP 的浏览器会拒绝用户访问该网站。</p><p><img src=/data/attachment/album/201603/27/154849ep1m1uwfujyc2kw2.png alt></p><p>这对于防止攻击者通过假冒网站来欺骗用户是一件好事，但是如果合法的网站配置错误的话，这会让你的用户几个月都无法访问你的网站了。</p><h3 id=错误配置的-hpkp-会让你的用户无法访问你的网站>错误配置的 HPKP 会让你的用户无法访问你的网站</h3><p>做这个调查的 netcraft 公司<a href=http://news.netcraft.com/archives/2016/03/22/secure-websites-shun-http-public-key-pinning.html>估计</a>是因为这个原因才导致在该标准发布一年之后，HPKP 的使用率仍然很低。</p><p>支持 HPKP 除了需要不断的维护工作，还需要维护人员如踩钢丝般的细心，才能避免整站的访问被完全关闭掉。</p><p>“即使是网站管理员们设置好了有效策略，还需要时时注意：日常的维护和紧急处置都有可能造成阻挡合法访客的事故，而且会持续阻挡很长时间。” netcraft 的 Paul Mutton 解释说。</p><p>这就是为什么只有 4100 个网站的管理员们决定使用 HPKP 头的原因。不幸的是， netcraft 说，实际上这个数字只有 3000 左右，因为大约有 1/4 的网站的 HPKP 头设置不正确。</p><h3 id=实现-hpkp-并不太复杂只是需要很细心>实现 HPKP 并不太复杂，只是需要很细心</h3><p>积极的一面是，当网站管理员熟悉了如何管理白名单中的证书及其客户端密钥，HPKP 可以为大多数带有敏感数据的网站提供了必要的安全措施。</p><p>一些著名的服务已经实施了 HPKP ，比如 GiHub、Mozilla 和 Pixabay 等。</p><p>尽管如此，像 Lenovo <a href=http://news.softpedia.com/news/Lenovo-Pushed-MitM-Capable-Browser-Add-On-Onto-Its-Products-473631.shtml>Superfish</a> 和 Dell <a href=http://news.softpedia.com/news/dell-ships-laptops-with-root-certificate-big-security-no-no-496616.shtml>eDellRoot</a> 这样的丑闻中，他们在其产品中包含了根证书，可以让攻击者绕开 HPKP。此外如果攻击者可以访问用户的浏览器，也能修改浏览器的可信任公钥列表来取消 HPKP 防护，或者禁止用户访问合法网站而去访问恶意伪造的网站。</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/hpkp/ rel=tag>HPKP</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>