<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux 黑话解释：什么是定时任务 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Linux 黑话解释：什么是定时任务"><meta property="og:description" content="在本期的《Linux 黑话解释》系列文章中，你将了解到 Linux 中的定时任务（cron job）功能。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14085-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-16T11:27:01+00:00"><meta property="article:modified_time" content="2021-12-16T11:27:01+00:00"><meta itemprop=name content="Linux 黑话解释：什么是定时任务"><meta itemprop=description content="在本期的《Linux 黑话解释》系列文章中，你将了解到 Linux 中的定时任务（cron job）功能。"><meta itemprop=datePublished content="2021-12-16T11:27:01+00:00"><meta itemprop=dateModified content="2021-12-16T11:27:01+00:00"><meta itemprop=wordCount content="218"><meta itemprop=keywords content="cron,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Linux 黑话解释：什么是定时任务</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-12-16T11:27:01Z>December 16, 2021</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112554pna46aemuh84ta3m.jpg alt></p><p>在本期的《Linux 黑话解释》系列文章中，你将了解到 Linux 中的 定时任务 cron job 功能。你将通过学习编辑 <code>crontab</code> 文件来创建定时任务。</p><h3 id=何为定时任务>何为定时任务</h3><p><code>cron</code> 是一个用于按计划运行短小且快速的命令的实用命令行工具。该工具是一个方便、经典的系统管理工具，通过和其他工具结合使用可以自动运行各式各样的任务。比如，有些人通过把 <code>rsync</code> 和 <code>cron</code> 结合使用，在特定的时间自动创建每日备份和每周备份。也有些人使用 <code>cron</code> 来分析服务器日志，并且结合邮件系统功能，在日志检测到错误时自动发送告警邮件。</p><p><code>cron</code> 就如同“瑞士军刀”一样，可以多场景多样化使用。尽可能发挥你的想象，去挖掘它的功能。</p><p>其实 <code>cron</code> 的使用很容易上手，只需要几秒钟。不过在我们开始上手之前，先来讨论下几个经常容易混淆的概念。</p><h3 id=cron定时任务crontab>cron、定时任务、crontab</h3><p>有三个术语比较容易混淆：<code>cron</code>、定时任务和 <code>crontab</code>，让我们来看看它们的含义：</p><table><thead><tr><th>术语</th><th>含义</th></tr></thead><tbody><tr><td><code>cron</code></td><td>这是安装在系统上的实际执行定时任务的 <a href=https://itsfoss.com/linux-daemons/>守护进程</a>。</td></tr><tr><td>定时任务</td><td>“任务”是指一段启动并运行的程序。<code>cron</code> 可以按照约定的时间计划运行各种任务，这样的任务通常叫做“定时任务”。</td></tr><tr><td><a href=https://linuxhandbook.com/crontab/>crontab</a></td><td>这是一个文件，用于定义定时任务。一个 <code>crontab</code> 文件可以通过表格形式（每一行就是一个定时任务）定义多个定时任务。</td></tr></tbody></table><p>来看一个简单例子：创建一个定时任务，每小时向 <code>crontabl_log.txt</code> 文件打印 <code>Linux is cool!</code>。</p><pre tabindex=0><code>0 * * * *  echo &#34;Linux is Cool!&#34; &gt;&gt; ~/crontab_log.txt
</code></pre><p>是不是这么个简单定时任务的例子都让你感到惊恐，这是因为你需要懂得如何去读懂一个定时任务的属性。</p><p>我将在后文中讲述这个基础理论知识。</p><h3 id=上手-cron>上手 cron</h3><p>我们通过另一个例子来看看 <code>cron</code> 如何工作。</p><p>为了创建定时任务（或者说 <code>cron</code> 将要执行的命令任务），你只需要运行：</p><pre tabindex=0><code>crontab -e
</code></pre><p>这将会打开一个文件，用于编辑定时任务：</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112701lmadjd8ayppjtr1t.png alt="Crontab default view"></p><p>其中，所有以 <code>#</code> 开头的行都是注释，用于指导你如何使用 <code>cron</code>，如果觉得没用可以删除它们。</p><p>我们将创建如下任务，作为我们的第一个定时任务：</p><pre tabindex=0><code>* * * * * touch ~/crontab_test
</code></pre><p>让我快速看看该任务将会做什么：</p><p>定时任务都是以 “分钟 小时 天 月 周 命令” 形式呈现：</p><ul><li>分钟：指该任务在哪一分钟会被执行。所以，该值为 <code>0</code> 则代表在每个小时开始时运行，<code>5</code> 则代表在每个小时的第 5 分钟会运行。</li><li>小时：指该任务在一天中的哪个小时会被执行，取值范围为 <code>0-23</code>。没有 <code>24</code> 的原因是 <code>23</code> 时的末尾是半夜 <code>11:59</code>，然后就是每天的开始 <code>0</code> 时。分钟的取值范围定义逻辑与之类似。</li><li>天：指一个月中的哪一天执行该任务，取值范围是 <code>1-31</code>（不同于前面的分钟和小时从 <code>0</code> 开始取值）。</li><li>月：指该任务在哪个月被执行，取值范围是 <code>1-12</code>。</li><li>周：指该任务在星期几被执行，从周日开始算起，取值范围是 <code>0-6</code>（分别对应周日、周一到周六）。</li><li>命令：是你想要运行的命令任务。</li></ul><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112702p1u1wj8c885wu1ye.png alt></p><p>如果想对 “分钟 小时 天 月 周” 部分有更详细的理解，可以参考 <a href=https://crontab.guru/>Crontab guru 网站</a>，该网站可以帮助你理解正在执行什么。</p><p>接着之前的例子 <code>* * * * * touch ~/crontab_test</code>，表示每分钟创建一次 <code>~/crontab_test</code> 文件。</p><p>让我们将该任务编辑进 <code>crontab</code> 然后看看执行结果：</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112702iq7qqhh2efia75iq.png alt></p><p>等到下一分钟，你就会发现你的家目录下多了文件 <code>crontab_test</code>:</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112703zwui1voo51jzseww.png alt></p><p>这便是 <code>cron</code> 的基础应用示例。</p><h3 id=一个实用的定时任务示例>一个实用的定时任务示例</h3><p>假设你想创建一个脚本，用于拷贝多个目录内容到一个路径并打包作为备份，该如何实现？</p><p>通过 <code>cron</code> 定时任务就可以很容易实现该功能。</p><p>请看如下脚本：</p><pre tabindex=0><code>#!/usr/bin/bash
echo &#34;Backing up...&#34;
mkdir -p ~/.local/tmp/
tar -Pc ~/Documents/ -f ~/.local/tmp/backup.gz
</code></pre><p>该脚本做了如下事情：</p><ol><li>确保备份路径目录 <code>~/.local/tmp/</code> 存在。</li><li>将目录 <code>~/Documents/</code> 下的所有内容打包至文件 <code>~/.local/tmp/backup.gz</code>。</li></ol><p>我们先来手动运行该脚本，看看它到底如何工作。</p><p>首先，我们在家目录（<code>~</code>）下创建该脚本，命令为 <code>backup_script</code>，如下图所示：</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112703q72e2hd2vdygs79l.png alt></p><p>然后编辑 <code>backup_script</code> 脚本，写入上面那个脚本代码。</p><p>接着，赋予 <code>backup_script</code> 可执行权限：</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112703h40zzwn7wrv0w0vy.png alt></p><p>最后运行脚本 <code>~/backup_script</code>，进行功能验证：</p><p><img src=https://img.linux.net.cn/data/attachment/album/202112/16/112703fvsgudnyzfldnca9.png alt></p><p>你可以通过运行命令 <code>tar -xf ~/.local/tmp/backup.gz -C &lt;output_dir></code> 来进行备份恢复，这里 <code>&lt;output_dir></code> 是指文件要恢复到的路径目录。</p><p>接下来，就可以用 <code>cron</code> 工具来进行定时任务运行该脚本了。</p><p>举个例子，假设需要每天的凌晨 3 点运行该备份脚本，你可以在 <code>crontab</code> 中输入如下命令：</p><pre tabindex=0><code>* 3 * * * ~/backup_script
</code></pre><p>这样你就可以每天自动进行备份操作了。</p><h3 id=后记>后记</h3><p>本文简单介绍了定时任务功能。尽管我不确定 Linux 桌面用户使用该功能多不多，但我知道定时任务功能被许多系统管理员广泛应用。如果你有什么想法，欢迎在评论区留言。</p><hr><p>via: <a href=https://itsfoss.com/cron-job/>https://itsfoss.com/cron-job/</a></p><p>作者：<a href=https://itsfoss.com/author/hunter/>Hunter Wittenborn</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/jrglinux>jrglinux</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/cron/ rel=tag>cron</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>