<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>初识 Python： global 关键字 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="初识 Python： global 关键字"><meta property="og:description" content="在 Python 中，global 关键字允许你修改当前范围之外的变量。它用于创建全局变量并在本地上下文中更改变量。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9561-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-19T21:44:00+00:00"><meta property="article:modified_time" content="2018-04-19T21:44:00+00:00"><meta itemprop=name content="初识 Python： global 关键字"><meta itemprop=description content="在 Python 中，global 关键字允许你修改当前范围之外的变量。它用于创建全局变量并在本地上下文中更改变量。"><meta itemprop=datePublished content="2018-04-19T21:44:00+00:00"><meta itemprop=dateModified content="2018-04-19T21:44:00+00:00"><meta itemprop=wordCount content="307"><meta itemprop=keywords content="Python,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>初识 Python： global 关键字</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-04-19T21:44:00Z>April 19, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201804/19/214422wfy7pvmx4c61ykvq.jpg alt></p><p>在读这篇文章之前，确保你对 <a href=https://www.programiz.com/python-programming/global-local-nonlocal-variables>Python 全局、局部和非局部变量</a> 有一定的基础。</p><h3 id=global-关键字简介>global 关键字简介</h3><p>在 Python 中，<code>global</code> 关键字允许你修改当前范围之外的变量。它用于创建全局变量并在本地上下文中更改变量。</p><h3 id=global-关键字的规则>global 关键字的规则</h3><p>在 Python 中，有关 <code>global</code> 关键字基本规则如下：</p><ul><li>当我们在一个函数中创建一个变量时，默认情况下它是本地变量。</li><li>当我们在一个函数之外定义一个变量时，默认情况下它是全局变量。你不必使用 <code>global</code> 关键字。</li><li>我们使用 <code>global</code> 关键字在一个函数中来读写全局变量。</li><li>在一个函数外使用 <code>global</code> 关键字没有效果。</li></ul><h3 id=使用-global-关键字含示例>使用 global 关键字（含示例）</h3><p>我们来举个例子。</p><h4 id=示例-1从函数内部访问全局变量>示例 1：从函数内部访问全局变量</h4><pre tabindex=0><code>c = 1 # 全局变量
def add():
    print(c)

add()
</code></pre><p>运行程序，输出为：</p><pre tabindex=0><code>1
</code></pre><p>但是我们可能有一些场景需要从函数内部修改全局变量。</p><h4 id=示例-2在函数内部修改全局变量>示例 2：在函数内部修改全局变量</h4><pre tabindex=0><code>c = 1 # 全局变量
def add():
    c = c + 2 # 将 c 增加 2
    print(c)
add()
</code></pre><p>运行程序，输出显示错误：</p><pre tabindex=0><code>UnboundLocalError: local variable &#39;c&#39; referenced before assignment
</code></pre><p>这是因为在函数中，我们只能访问全局变量但是不能修改它。</p><p>解决的办法是使用 <code>global</code> 关键字。</p><h4 id=示例-3使用-global-在函数中改变全局变量>示例 3：使用 global 在函数中改变全局变量</h4><pre tabindex=0><code>c = 0 # global variable

def add():
    global c
    c = c + 2 # 将 c 增加 2
    print(&#34;Inside add():&#34;, c)

add()
print(&#34;In main:&#34;, c)
</code></pre><p>运行程序，输出为：</p><pre tabindex=0><code>Inside add(): 2
In main: 2
</code></pre><p>在上面的程序中，我们在 <code>add()</code> 函数中定义了 <code>c</code> 将其作为全局关键字。</p><p>然后，我们给变量 <code>c</code> 增加 <code>2</code>，即 <code>c = c + 2</code>。之后，我们调用了 <code>add()</code> 函数。最后，打印全局变量 <code>c</code>。</p><p>正如我们所看到的，在函数外的全局变量也发生了变化，<code>c = 2</code>。</p><h3 id=python-模块中的全局变量>Python 模块中的全局变量</h3><p>在 Python 中，我们创建一个单独的模块 <code>config.py</code> 来保存全局变量并在同一个程序中的 Python 模块之间共享信息。</p><p>以下是如何通过 Python 模块共享全局变量。</p><h4 id=示例-4在python模块中共享全局变量>示例 4：在Python模块中共享全局变量</h4><p>创建 <code>config.py</code> 文件来存储全局变量</p><pre tabindex=0><code>a = 0
b = &#34;empty&#34;
</code></pre><p>创建 <code>update.py</code> 文件来改变全局变量</p><pre tabindex=0><code>import config

config.a = 10
config.b = &#34;alphabet&#34;
</code></pre><p>创建 <code>main.py</code> 文件来测试其值的变化</p><pre tabindex=0><code>import config
import update

print(config.a)
print(config.b)
</code></pre><p>运行 <code>main.py</code>，输出为：</p><pre tabindex=0><code>10
alphabet
</code></pre><p>在上面，我们创建了三个文件： <code>config.py</code>, <code>update.py</code> 和 <code>main.py</code>。</p><p>在 <code>config.py</code> 模块中保存了全局变量 <code>a</code> 和 <code>b</code>。在 <code>update.py</code> 文件中，我们导入了 <code>config.py</code> 模块并改变了 <code>a</code> 和 <code>b</code> 的值。同样，在 <code>main.py</code> 文件，我们导入了 <code>config.py</code> 和 <code>update.py</code> 模块。最后，我们打印并测试全局变量的值，无论它们是否被改变。</p><h3 id=在嵌套函数中的全局变量>在嵌套函数中的全局变量</h3><p>以下是如何在嵌套函数中使用全局变量。</p><h4 id=示例-5在嵌套函数中使用全局变量>示例 5：在嵌套函数中使用全局变量</h4><pre tabindex=0><code>def foo():
    x = 20
    def bar():
         global x
         x = 25

    print(&#34;Before calling bar: &#34;, x)
    print(&#34;Calling bar now&#34;)
    bar()
    print(&#34;After calling bar: &#34;, x)

foo()
print(&#34;x in main : &#34;, x)
</code></pre><p>输出为：</p><pre tabindex=0><code>Before calling bar: 20
Calling bar now
After calling bar: 20
x in main : 25
</code></pre><p>在上面的程序中，我们在一个嵌套函数 <code>bar()</code> 中声明了全局变量。在 <code>foo()</code> 函数中， 变量 <code>x</code> 没有全局关键字的作用。</p><p>调用 <code>bar()</code> 之前和之后， 变量 <code>x</code> 取本地变量的值，即 <code>x = 20</code>。在 <code>foo()</code> 函数之外，变量 <code>x</code> 会取在函数 <code>bar()</code> 中的值，即 <code>x = 25</code>。这是因为在 <code>bar()</code> 中，我们对 <code>x</code> 使用 <code>global</code> 关键字创建了一个全局变量（本地范围）。</p><p>如果我们在 <code>bar()</code> 函数内进行了任何修改，那么这些修改就会出现在本地范围之外，即 <code>foo()</code>。</p><hr><p>via: <a href=https://www.programiz.com/python-programming/global-keyword>https://www.programiz.com/python-programming/global-keyword</a></p><p>作者：<a href=https://www.programiz.com>programiz</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/python/ rel=tag>Python</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>