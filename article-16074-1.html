<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Ubuntu 上安装 GitLab - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Ubuntu 上安装 GitLab"><meta property="og:description" content="本分步指南将引导你完成 Ubuntu 22.04 或 20.04 上 GitLab 的安装过程。"><meta property="og:type" content="article"><meta property="og:url" content="/article-16074-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-08T11:31:00+00:00"><meta property="article:modified_time" content="2023-08-08T11:31:00+00:00"><meta itemprop=name content="如何在 Ubuntu 上安装 GitLab"><meta itemprop=description content="本分步指南将引导你完成 Ubuntu 22.04 或 20.04 上 GitLab 的安装过程。"><meta itemprop=datePublished content="2023-08-08T11:31:00+00:00"><meta itemprop=dateModified content="2023-08-08T11:31:00+00:00"><meta itemprop=wordCount content="333"><meta itemprop=keywords content="GitLab,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Ubuntu 上安装 GitLab</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2023-08-08T11:31:00Z>August 08, 2023</time></div></div></header><div class="content post__content clearfix"><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113049el2dx242c4mwm40k.jpg alt></p><p>GitLab 是一个开源平台，提供了强大且功能丰富的解决方案，用于管理仓库、问题、CI/CD 管道等。如果你是 Ubuntu 22.04 或 20.04 用户，并且想要设置自己的 <a href=https://about.gitlab.com/>GitLab</a> 实例来简化你的 DevOps 工作流程，那么你来对地方了。</p><p>本分步指南将引导你完成 Ubuntu 22.04 或 20.04 上 GitLab 的安装过程。GItlab 提供企业版（Gitlab EE）和社区版（Gitlab CE）。在这篇文章中，我们将介绍社区版。</p><p>先决条件：</p><ul><li>运行 Ubuntu 22.04 或 20.04 且具有 SSH 访问权限的虚拟或专用服务器。</li><li>静态主机名（<code>gitlab.linuxtechi.net</code>）</li><li>具有管理员权限的 Sudo 用户</li><li>2GB 内存或更多</li><li>2 个或更多 vCPU</li><li>互联网连接</li></ul><h3 id=1更新系统包>1、更新系统包</h3><p>让我们首先更新软件包列表并将任何现有软件包升级到最新版本。</p><pre tabindex=0><code>$ sudo apt update
$ sudo apt upgrade -y
</code></pre><p>应用更新后重新启动系统。</p><pre tabindex=0><code>$ sudo reboot
</code></pre><h3 id=2安装依赖项>2、安装依赖项</h3><p>GitLab 需要一些依赖项才能正常运行。使用以下命令安装它们：</p><pre tabindex=0><code>$ sudo apt install -y curl openssh-server ca-certificates postfix
</code></pre><p>在 postfix 安装过程中，会出现一个配置窗口。选择 “Internet Site”并输入服务器的主机名作为邮件服务器名称。这将允许 GitLab 发送电子邮件通知。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113315wpmqepeqlt9wg00e.jpg alt></p><p>选择 “Internet Site”，然后选择 “OK”。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113329pl11qt1ed17e8d9n.jpg alt></p><p>检查系统的主机名并选择 “OK”。</p><h3 id=3添加-gitlab-apt-存储库>3、添加 GitLab Apt 存储库</h3><p>现在，我们将添加 GitLab 仓库，运行以下 <code>curl</code> 命令。它将自动检测你的 Ubuntu 版本并相应地设置仓库。</p><pre tabindex=0><code>$ curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113342reg5uqxdoxd0f9d9.jpg alt></p><h3 id=4安装-gitlab>4、安装 Gitlab</h3><p>运行以下命令在你的 ubuntu 系统上自动安装和配置 gitlab-ce，将服务器的主机名替换为你的设置，</p><pre tabindex=0><code>$ sudo EXTERNAL_URL=&#34;http://gitlab.linuxtechi.net&#34; apt install gitlab-ce
</code></pre><p>上述命令成功执行后，我们将得到如下输出。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113400llqmmw55tllwy55w.jpg alt></p><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113414n5egejzo0wesjbbs.jpg alt></p><p>上面的输出确认 GitLab 已成功安装。gitlab web 界面的用户名是 root，密码存储在 <code>/etc/gitlab/initial_root_password</code>。</p><p>注意：如果你的 ubuntu 系统上启用了操作系统防火墙，那请允许 80 和 443 端口。</p><pre tabindex=0><code>$ sudo ufw allow http
$ sudo ufw allow https
</code></pre><h3 id=5访问-gitlab-web-界面>5、访问 GitLab Web 界面</h3><p>安装并配置 GitLab 后，打开 Web 浏览器并输入服务器的 IP 地址或主机名。</p><pre tabindex=0><code>http://&lt;Server-IP-Address-or-Hostname&gt;
</code></pre><ul><li>用户名：<code>root</code></li><li>密码：从 <code>/etc/gitlab/initial_root_password</code> 获取密码</li></ul><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113430dwg8gh388fp0w81p.jpg alt></p><p>点击“ 登录 Sign in ”。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113452ach16rhr866i0q1m.jpg alt></p><p>很好，上面确认我们已经成功登录 Gitlab Web 界面。</p><p>目前我们的 GitLab 服务器运行在 http（80）协议上，如果你想为你的 GitLab 启用 https，请参考以下步骤。</p><h3 id=6为-gitlab-web-界面设置-https>6、为 GitLab Web 界面设置 HTTPS</h3><p>为提高安全性，可使用自签名证书或 Let&rsquo;s Encrypt 为 GitLab 实例配置 HTTPS。Let&rsquo;s Encrypt 只适用于互联网上有 A 记录的公有域。但在本例中，我们使用的是私有域，因此将使用自签名证书来确保 GitLab 的安全。</p><p>现在，让我们创建以下文件夹并使用 <code>openssl</code> 命令生成自签名证书：</p><pre tabindex=0><code>$ sudo mkdir -p /etc/gitlab/ssl
$ sudo chmod 755 /etc/gitlab/ssl
</code></pre><p>使用以下 <code>openssl</code> 命令生成私钥：</p><pre tabindex=0><code>$ sudo openssl genrsa -des3 -out /etc/gitlab/ssl/gitlab.linuxtechi.net.key 2048
</code></pre><p>输入密码并记住它。</p><p>使用以下命令创建 CSR：</p><pre tabindex=0><code>$ sudo openssl req -new -key /etc/gitlab/ssl/gitlab.linuxtechi.net.key -out /etc/gitlab/ssl/gitlab.linuxtechi.net.csr
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113509c4ba94a4yj29fa9l.jpg alt></p><p>从密钥中删除密码串，依次执行以下命令：</p><pre tabindex=0><code>$ sudo cp -v /etc/gitlab/ssl/gitlab.linuxtechi.net.{key,original}
$ sudo openssl rsa -in /etc/gitlab/ssl/gitlab.linuxtechi.net.original -out /etc/gitlab/ssl/gitlab.linuxtechi.net.key
$ sudo rm -v /etc/gitlab/ssl/gitlab.linuxtechi.net.original
</code></pre><p>创建证书文件：</p><pre tabindex=0><code>$ sudo openssl x509 -req -days 1460 -in /etc/gitlab/ssl/gitlab.linuxtechi.net.csr -signkey /etc/gitlab/ssl/gitlab.linuxtechi.net.key -out /etc/gitlab/ssl/gitlab.linuxtechi.net.crt
</code></pre><p>使用下面的 <code>rm</code> 命令删除 CSR 文件：</p><pre tabindex=0><code>$ sudo rm -v /etc/gitlab/ssl/gitlab.linuxtechi.net.csr
</code></pre><p>设置密钥和证书文件的权限：</p><pre tabindex=0><code>$ sudo chmod 600 /etc/gitlab/ssl/gitlab.linuxtechi.net.key
$ sudo chmod 600 /etc/gitlab/ssl/gitlab.linuxtechi.net.crt
</code></pre><p>Gitlab 服务器的所有重要配置均由文件 <code>/etc/gitlab/gitlab.rb</code> 控制，因此编辑此文件，搜索 <code>external_url</code> 并添加 <code>https://gitlab.linuxtechi.net</code>。</p><pre tabindex=0><code>$ sudo vi /etc/gitlab/gitlab.rb
----------------------------------------------------------
external_url &#39;https://gitlab.linuxtechi.net&#39;
----------------------------------------------------------
</code></pre><p>保存并退出文件，使用下面的命令重新配置 gitlab，以便其 Web 界面可以使用 HTTPS。</p><pre tabindex=0><code>$ sudo gitlab-ctl reconfigure
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113523fsw47nugk7pl37nm.jpg alt></p><p>成功执行上述命令后，你的 GitLab 界面应该可以通过 HTTPS 协议访问，在我的例子中，URL 为：<code>https://gitlab.linuxtechi.net/</code></p><p>当你第一次访问它时，它会说你的连接不安全，点击“接受风险并继续”。</p><p><img src=https://img.linux.net.cn/data/attachment/album/202308/08/113538ikwkirbmxfzubmou.jpg alt></p><h3 id=结论>结论</h3><p>恭喜！ 你已在 Ubuntu 22.04 或 20.04 系统上成功安装 GitLab。随着 GitLab 的启动和运行，你现在可以创建仓库，与你的团队协作，并通过 GitLab 令人印象深刻的功能增强你的开发工作流程。享受无缝版本控制、持续集成等，一切尽在你的掌控之中！</p><p><em>（题图：MJ/c6a3e27e-fe58-4184-b133-9e9c67224316）</em></p><hr><p>via: <a href=https://www.linuxtechi.com/how-to-install-gitlab-on-ubuntu/>https://www.linuxtechi.com/how-to-install-gitlab-on-ubuntu/</a></p><p>作者：<a href=https://www.linuxtechi.com/author/pradeep/>Pradeep Kumar</a> 选题：<a href=https://github.com/lkxed/>lkxed</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/gitlab/ rel=tag>GitLab</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>