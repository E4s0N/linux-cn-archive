<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Ubuntu 14/15 上配置 Apache Solr - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Ubuntu 14/15 上配置 Apache Solr"><meta property="og:description" content="大家好，欢迎来阅读我们今天这篇 Apache Solr 的文章。简单的来说，Apache Solr 是一个最负盛名的开源搜索平台，配合运行在网站后端的 Apache Lucene，能够让你轻松创建搜索引擎来搜索网站、数据库和文件。它能够索引和搜索多个网站并根据搜索文本的相关内容返回搜索建议。  Solr 使用 HTTP 可扩展标记语言（XML），可以为 JSON、Python 和 Ruby 等提供应用程序接口(API)。根据 Apache Lucene 项目所述，Solr 提供了非常多的功能，让它很受管理员们的欢迎：  全文检索 分面导航（Faceted Navigation） 拼写建议/自动完成 自定义文档排序/"><meta property="og:type" content="article"><meta property="og:url" content="/article-6848-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-01-06T10:10:00+00:00"><meta property="article:modified_time" content="2016-01-06T10:10:00+00:00"><meta itemprop=name content="如何在 Ubuntu 14/15 上配置 Apache Solr"><meta itemprop=description content="大家好，欢迎来阅读我们今天这篇 Apache Solr 的文章。简单的来说，Apache Solr 是一个最负盛名的开源搜索平台，配合运行在网站后端的 Apache Lucene，能够让你轻松创建搜索引擎来搜索网站、数据库和文件。它能够索引和搜索多个网站并根据搜索文本的相关内容返回搜索建议。  Solr 使用 HTTP 可扩展标记语言（XML），可以为 JSON、Python 和 Ruby 等提供应用程序接口(API)。根据 Apache Lucene 项目所述，Solr 提供了非常多的功能，让它很受管理员们的欢迎：  全文检索 分面导航（Faceted Navigation） 拼写建议/自动完成 自定义文档排序/"><meta itemprop=datePublished content="2016-01-06T10:10:00+00:00"><meta itemprop=dateModified content="2016-01-06T10:10:00+00:00"><meta itemprop=wordCount content="270"><meta itemprop=keywords content="Apache Solr,搜索,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Ubuntu 14/15 上配置 Apache Solr</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-01-06T10:10:00Z>January 06, 2016</time></div></div></header><div class="content post__content clearfix"><p>大家好，欢迎来阅读我们今天这篇 Apache Solr 的文章。简单的来说，Apache Solr 是一个最负盛名的开源搜索平台，配合运行在网站后端的 Apache Lucene，能够让你轻松创建搜索引擎来搜索网站、数据库和文件。它能够索引和搜索多个网站并根据搜索文本的相关内容返回搜索建议。</p><p><img src=/data/attachment/album/201601/05/231524qt6ltd41f6izk95m.jpg alt></p><p>Solr 使用 HTTP 可扩展标记语言（XML），可以为 JSON、Python 和 Ruby 等提供应用程序接口(API)。根据 Apache Lucene 项目所述，Solr 提供了非常多的功能，让它很受管理员们的欢迎：</p><ul><li>全文检索</li><li>分面导航 （ Faceted Navigation ）</li><li>拼写建议/自动完成</li><li>自定义文档排序/排列</li></ul><h4 id=前提条件>前提条件:</h4><p>在一个使用最小化安装包的全新 Ubuntu 14/15 系统上，你仅仅需要少量的准备，就开始安装 Apache Solor.</p><h3 id=1system-update-系统更新>1)System Update 系统更新</h3><p>使用一个具有 sudo 权限的非 root 用户登录你的 Ubuntu 服务器，在接下来的所有安装和使用 Solr 的步骤中都会使用它。</p><p>登录成功后，使用下面的命令，升级你的系统到最新的更新及补丁：</p><pre tabindex=0><code>$ sudo apt-get update
</code></pre><h3 id=2-安装-jre>2) 安装 JRE</h3><p>要安装 Solr，首先需要安装 JRE (Java Runtime Environment) 作为基础环境，因为 solr 和 tomcat 都是基于Java.所以，我们需要安装最新版的 Java 并配置 Java 本地环境.</p><p>要想安装最新版的 Java 8，我们需要通过以下命令安装 Python Software Properties 工具包</p><pre tabindex=0><code>$ sudo apt-get install python-software-properties
</code></pre><p>完成后，配置最新版 Java 8的仓库</p><pre tabindex=0><code>$ sudo add-apt-repository ppa:webupd8team/java
</code></pre><p>现在你可以通过以下命令更新包源列表，使用‘apt-get’来安装最新版本的 Oracle Java 8。</p><pre tabindex=0><code>$ sudo apt-get update

$ sudo apt-get install oracle-java8-installer
</code></pre><p>在安装和配置过程中，点击&rsquo;OK&rsquo;按钮接受 Java SE Platform 和 JavaFX 的 Oracle 二进制代码许可协议 （ Oracle Binary Code License Agreement ） 。</p><p>在安装完成后，运行下面的命令，检查是否安装成功以及查看安装的版本。</p><pre tabindex=0><code>kash@solr:~$ java -version
java version &#34;1.8.0_66&#34;
Java(TM) SE Runtime Environment (build 1.8.0_66-b17)
Java HotSpot(TM) 64-Bit Server VM (build 25.66-b17, mixed mode)
</code></pre><p>执行结果表明我们已经成功安装了 Java，并达到安装 Solr 最基本的要求了，接着我们进行下一步。</p><h3 id=安装-solr>安装 Solr</h3><p>有两种不同的方式可以在 Ubuntu 上安装 Solr，在本文中我们只用最新的源码包来演示源码安装。</p><p>要使用源码安装 Solr，先要从<a href=http://lucene.apache.org/solr/>官网</a>下载最新的可用安装包。复制以下链接，然后使用 &lsquo;wget&rsquo; 命令来下载。</p><pre tabindex=0><code>$ wget http://www.us.apache.org/dist/lucene/solr/5.3.1/solr-5.3.1.tgz
</code></pre><p>运行下面的命令，将这个已归档的服务解压到 /bin 目录。</p><pre tabindex=0><code>$ tar -xzf solr-5.3.1.tgz solr-5.3.1/bin/install_solr_service.sh --strip-components=2
</code></pre><p>运行脚本来启动 Solr 服务，这将会先创建一个 solr 的用户，然后将 Solr 安装成服务。</p><pre tabindex=0><code>$ sudo bash ./install_solr_service.sh solr-5.3.1.tgz
</code></pre><p><img src=/data/attachment/album/201601/05/231540ipv4nnajfpjpzt94.png alt="Solr 安装"></p><p>使用下面的命令来检查 Solr 服务的状态。</p><pre tabindex=0><code>$ service solr status
</code></pre><p><img src=/data/attachment/album/201601/05/231540kr18ctd8spchphp1.png alt="Solr 状态"></p><h3 id=创建-solr-集合>创建 Solr 集合:</h3><p>我们现在可以使用 Solr 用户添加多个集合。就像下图所示的那样，我们只需要在命令行中指定集合名称和指定其配置集就可以创建多个集合了。</p><pre tabindex=0><code>$ sudo su - solr -c &#34;/opt/solr/bin/solr create -c myfirstcollection -n data_driven_schema_configs&#34;
</code></pre><p><img src=/data/attachment/album/201601/05/231541b3l53xl6g6ggs969.png alt=创建集合></p><p>我们已经成功的为我们的第一个集合创建了新核心实例目录，并可以将数据添加到里面。要查看库中的默认模式文件，可以在这里找到： &lsquo;/opt/solr/server/solr/configsets/data<em>driven</em>schema_configs/conf&rsquo; 。</p><h3 id=使用-solr-web>使用 Solr Web</h3><p>可以使用默认的端口8983连接 Apache Solr。打开浏览器，输入 http://your_server_ip:8983/solr 或者 <a href=http://your-domain.com:8983/solr>http://your-domain.com:8983/solr</a>. 确保你的防火墙允许8983端口.</p><pre tabindex=0><code>http://172.25.10.171:8983/solr/
</code></pre><p><img src=/data/attachment/album/201601/05/231542r604g8l4930i6i09.png alt=Web访问Solr></p><p>在 Solr 的 Web 控制台左侧菜单点击 &lsquo;Core Admin&rsquo; 按钮，你将会看见我们之前使用命令行方式创建的集合。你可以点击 &lsquo;Add Core&rsquo; 按钮来创建新的核心。</p><p><img src=/data/attachment/album/201601/05/231542n4wk6ttekfve5z6t.png alt=添加核心></p><p>就像下图中所示，你可以选择某个集合并指向文档来向里面添加内容或从文档中查询数据。如下显示的那样添加指定格式的数据。</p><pre tabindex=0><code>{
&#34;number&#34;: 1,
&#34;Name&#34;: &#34;George Washington&#34;,
&#34;birth_year&#34;: 1989,
&#34;Starting_Job&#34;: 2002,
&#34;End_Job&#34;: &#34;2009-04-30&#34;,
&#34;Qualification&#34;: &#34;Graduation&#34;,
&#34;skills&#34;: &#34;Linux and Virtualization&#34;
}
</code></pre><p>添加文件后点击 &lsquo;Submit Document&rsquo;按钮.</p><p><img src=/data/attachment/album/201601/05/231543ujq7qkzlaqztjlqt.png alt=添加文档></p><h3 id=总结>总结</h3><p>在 Ubuntu 上安装成功后，你就可以使用 Solr Web 接口插入或查询数据。如果你想通过 Solr 来管理更多的数据和文件，可以创建更多的集合。希望你能喜欢这篇文章并且希望它能够帮到你。</p><hr><p>via: <a href=http://linoxide.com/ubuntu-how-to/configure-apache-solr-ubuntu-14-15/>http://linoxide.com/ubuntu-how-to/configure-apache-solr-ubuntu-14-15/</a></p><p>作者：<a href=http://linoxide.com/author/kashifs/>Kashif</a> 译者：<a href=https://github.com/taichirain>taichirain</a> 校对：<a href=https://github.com/carolinewuyan>Caroline</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/apache-solr/ rel=tag>Apache Solr</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%90%9C%E7%B4%A2/ rel=tag>搜索</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>