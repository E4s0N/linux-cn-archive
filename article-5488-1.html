<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在Fedora / CentOS上面升级Docker 1.6 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在Fedora / CentOS上面升级Docker 1.6"><meta property="og:description" content="Docker，一个流行的将软件打包的开源容器平台，已经有了新的1.6版，增加了许多新的特性。该版本主要更新了Docker Registry、Engine、 Swarm、 Compose 和 Machine等方面。这次发布旨在提升性能、改善开发者和系统管理员的体验。让我们来快速看看有哪些新特性吧。 Docker Registry (2.0)是一项推送Docker镜像用于存储和分享的服务，因为面临加载下的体验问题而经历了架构的改变。它仍然向后兼容。Docker Registry的编写语言现在从Python改为Google的Go语言了，以提升性能。与Docker Engine 1.6结合后，拉取镜像的能力更快了。早先的镜像是"><meta property="og:type" content="article"><meta property="og:url" content="/article-5488-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-05-22T10:26:00+00:00"><meta property="article:modified_time" content="2015-05-22T10:26:00+00:00"><meta itemprop=name content="如何在Fedora / CentOS上面升级Docker 1.6"><meta itemprop=description content="Docker，一个流行的将软件打包的开源容器平台，已经有了新的1.6版，增加了许多新的特性。该版本主要更新了Docker Registry、Engine、 Swarm、 Compose 和 Machine等方面。这次发布旨在提升性能、改善开发者和系统管理员的体验。让我们来快速看看有哪些新特性吧。 Docker Registry (2.0)是一项推送Docker镜像用于存储和分享的服务，因为面临加载下的体验问题而经历了架构的改变。它仍然向后兼容。Docker Registry的编写语言现在从Python改为Google的Go语言了，以提升性能。与Docker Engine 1.6结合后，拉取镜像的能力更快了。早先的镜像是"><meta itemprop=datePublished content="2015-05-22T10:26:00+00:00"><meta itemprop=dateModified content="2015-05-22T10:26:00+00:00"><meta itemprop=wordCount content="316"><meta itemprop=keywords content="Docker,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在Fedora / CentOS上面升级Docker 1.6</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-05-22T10:26:00Z>May 22, 2015</time></div></div></header><div class="content post__content clearfix"><p>Docker，一个流行的将软件打包的开源容器平台，已经有了新的1.6版，增加了许多新的特性。该版本主要更新了Docker Registry、Engine、 Swarm、 Compose 和 Machine等方面。这次发布旨在提升性能、改善开发者和系统管理员的体验。让我们来快速看看有哪些新特性吧。</p><p>**Docker Registry (2.0)**是一项推送Docker镜像用于存储和分享的服务，因为面临加载下的体验问题而经历了架构的改变。它仍然向后兼容。Docker Registry的编写语言现在从Python改为Google的Go语言了，以提升性能。与Docker Engine 1.6结合后，拉取镜像的能力更快了。早先的镜像是队列式输送的，而现在是并行的啦。</p><p>**Docker Engine (1.6)**相比之前的版本有很大的提高。目前支持容器与镜像的标签。通过标签，你可以附加用户自定义的元数据到镜像和容器上，而镜像和容器反过来可以被其他工具使用。标签对正在运行的应用是不可见的，可以用来加速搜索容器和镜像。</p><p>Windows版本的Docker客户端可以连接到远程的运行在linux上的Docker Engine。</p><p>Docker目前支持日志驱动API，这允许我们发送容器日志给系统如Syslog，或者第三方。这将会使得系统管理员受益。</p><p>**Swarm (0.2)**是一个Docker集群工具，可以将一个Docker主机池转换为一个虚拟主机。在新特性里，容器甚至被放在了可用的节点上。通过添加更多的Docker命令，努力支持完整的Docker API。将来，使用第三方驱动来集群会成为可能。</p><p><strong>Compose (1.2)</strong> 是一个Docker里定义和运行复杂应用的工具, 也得到了升级。在新版本里，可以创建多个子文件，而不是用一个没有结构的文件描述一个多容器应用。</p><p>通过<strong>Machine (0.2)</strong>，我们可以很容易地在本地计算机、云和数据中心上搭建Docker主机。新的发布版本为开发者提供了一个相对干净地驱动界面来编写驱动。Machine集中控制供给，而不是每个独立的驱动。增加了新的命令，可以用来生成主机的TLS证书，以提高安全性。</p><p><img src=/data/attachment/album/201505/22/003038xvvzy3om3003tv8y.jpg alt></p><h3 id=在fedora--centos-上的升级指导>在Fedora / CentOS 上的升级指导</h3><p>在这一部分里，我们将会学习如何在Fedora和CentOS上升级已有的docker到最新版本。请注意，目前的Docker仅运行在64位的架构上，Fedora和CentOS都源于RedHat，命令的使用是差不多相同的，除了在Fedora20和CentOS6.5里Docker包被叫做“docker-io”。</p><p>如果你系统之前没有安装Docker，使用下面命令安装：</p><pre tabindex=0><code>&#34;yum install docker-io&#34;  –  on Fedora20 / CentOS6.5

&#34;yum install docker&#34;  - on Fedora21 / CentOS7
</code></pre><p>在升级之前，备份一下docker镜像和容器卷是个不错的主意。</p><p>参考<a href=http://docs.docker.com/reference/commandline/cli/#export>“将文件系统打成 tar 包”</a>与<a href=http://docs.docker.com/userguide/dockervolumes/#backup-restore-or-migrate-data-volumes>“卷备份、恢复或迁移”</a>，获取更多信息。</p><p>目前，测试系统安装了Docker1.5。样例输出显示是来自一个Fedora20的系统。</p><p>验证当前系统安装的Docker版本</p><pre tabindex=0><code>[root@TestNode1 ~]#sudo docker -v
Docker version 1.5.0, build a8a31ef/1.5.0
</code></pre><p>如果Docker正在运行，先停掉。</p><pre tabindex=0><code>[root@TestNode1 ~]# sudo systemctl stop docker
</code></pre><p>使用yum update升级到最新版，但是写这篇文章的时候，仓库并不是最新版本(1.6)，因此你需要使用二进制的升级方法。</p><pre tabindex=0><code>[root@TestNode1 ~]#sudo yum -y update docker-io
No packages marked for update
[root@TestNode1 ~]#sudo wget https://get.docker.com/builds/Linux/x86_64/docker-latest -O /usr/bin/docker
--2015-04-19 13:40:48-- https://get.docker.com/builds/Linux/x86_64/docker-latest
Resolving get.docker.com (get.docker.com)... 162.242.195.82
Connecting to get.docker.com (get.docker.com)|162.242.195.82|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 15443598 (15M) [binary/octet-stream]
Saving to: /usr/bin/docker
100%[======================================&gt;] 15,443,598 8.72MB/s in 1.7s
2015-04-19 13:40:50 (8.72 MB/s) - /usr/bin/docker saved
</code></pre><p>检查更新后的版本</p><pre tabindex=0><code>[root@TestNode1 ~]#sudo docker -v
Docker version 1.6.0, build 4749651
</code></pre><p>重启docker服务</p><pre tabindex=0><code>[root@TestNode1 ~]# sudo systemctl start docker
</code></pre><p>确认Docker在运行</p><pre tabindex=0><code>[root@TestNode1 ~]# docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
fedora latest 834629358fe2 3 months ago 241.3 MB
[root@TestNode1 ~]# docker run fedora /bin/echo Hello World
Hello World
</code></pre><p>CentOS安装时需要<strong>注意</strong>，在CentOS上安装完Docker后，当你试图启动Docker服务的时候，你可能会得到错误的信息，如下所示：</p><pre tabindex=0><code>docker.service - Docker Application Container Engine
Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled)
Active: failed (Result: exit-code) since Mon 2015-04-20 03:24:24 EDT; 6h ago
Docs: http://docs.docker.com
Process: 21069 ExecStart=/usr/bin/docker -d $OPTIONS $DOCKER_STORAGE_OPTIONS $DOCKER_NETWORK_OPTIONS $ADD_REGISTRY $BLOCK_REGISTRY $INSECURE_REGISTRY (code=exited, status=127)
Main PID: 21069 (code=exited, status=127)
Apr 20 03:24:24 centos7 systemd[1]: Starting Docker Application Container E.....
Apr 20 03:24:24 centos7 docker[21069]: time=&#34;2015-04-20T03:24:24-04:00&#34; lev...)&#34;
Apr 20 03:24:24 centos7 docker[21069]: time=&#34;2015-04-20T03:24:24-04:00&#34; lev...)&#34;
Apr 20 03:24:24 centos7 docker[21069]: /usr/bin/docker: relocation error: /...ce
Apr 20 03:24:24 centos7 systemd[1]: docker.service: main process exited, co.../a
Apr 20 03:24:24 centos7 systemd[1]: Failed to start Docker Application Cont...e.
Apr 20 03:24:24 centos7 systemd[1]: Unit docker.service entered failed state.
</code></pre><p>这是一个已知的bug（<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1207839">https://bugzilla.redhat.com/show_bug.cgi?id=1207839</a>），需要将设备映射升级到最新。</p><pre tabindex=0><code>[root@centos7 ~]# rpm -qa device-mapper
device-mapper-1.02.84-14.el7.x86_64
[root@centos7 ~]# yum update device-mapper
[root@centos7 ~]# rpm -qa device-mapper
device-mapper-1.02.93-3.el7.x86_64
[root@centos7 ~]# systemctl start docker
</code></pre><h3 id=总结>总结</h3><p>尽管docker技术出现时间不长，但很快就变得非常流行了。它使得开发者的生活变得轻松，运维团队可以快速独立地创建和部署应用。通过该公司的发布，Docker的快速更新，产品质量的提升，满足用户需求，未来对于Docker来说一片光明。</p><hr><p>via: <a href=http://linoxide.com/linux-how-to/docker-1-6-features-upgrade-fedora-centos/>http://linoxide.com/linux-how-to/docker-1-6-features-upgrade-fedora-centos/</a></p><p>作者：<a href=http://linoxide.com/author/bnpoornima/>B N Poornima</a> 译者：<a href=https://github.com/wi-cuckoo>wi-cuckoo</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/docker/ rel=tag>Docker</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>