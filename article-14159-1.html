<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 OBS 搭建视频流媒体服务器 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="使用 OBS 搭建视频流媒体服务器"><meta property="og:description" content="在 Linux 或 BSD 操作系统上设置基本的实时流媒体服务器。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14159-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-08T10:29:44+00:00"><meta property="article:modified_time" content="2022-01-08T10:29:44+00:00"><meta itemprop=name content="使用 OBS 搭建视频流媒体服务器"><meta itemprop=description content="在 Linux 或 BSD 操作系统上设置基本的实时流媒体服务器。"><meta itemprop=datePublished content="2022-01-08T10:29:44+00:00"><meta itemprop=dateModified content="2022-01-08T10:29:44+00:00"><meta itemprop=wordCount content="425"><meta itemprop=keywords content="流媒体,OBS,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>使用 OBS 搭建视频流媒体服务器</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-01-08T10:29:44Z>January 08, 2022</time></div></div></header><div class="content post__content clearfix"><blockquote><p>在 Linux 或 BSD 操作系统上设置基本的实时流媒体服务器。</p></blockquote><p><img src=/data/attachment/album/202201/08/102934r2qpr1rlkpjb1pwb.jpg alt></p><p>实时视频流越来越流行。亚马逊的 Twitch 和谷歌的 YouTube 等平台拥有数百万用户，这些用户消磨了无数小时的来观看直播和录制视频。这些视频服务通常可以免费使用，但需要你拥有一个帐户，并且一般会将你的视频内容隐藏在广告中。有些人不希望他们的视频提供给大众观看，或者想更多地控制自己的视频内容。幸运的是，借助强大的开源软件，任何人都可以设置直播服务器。</p><h3 id=入门>入门</h3><p>在本教程中，我将说明如何使用 Linux 或 BSD 操作系统设置基本的实时流媒体服务器。</p><p>搭建实时流媒体服务器不可避免地提到系统需求问题。这些需求多种多样，因为实时流媒体涉及许多因素，例如：</p><ul><li><strong>流媒体质量：</strong> 你想以高清流媒体播放还是标清视频就可以满足你的需求？</li><li><strong>收视率：</strong> 你的视频预计有多少观众？</li><li><strong>存储：</strong> 你是否打算保留已保存的视频流副本？</li><li><strong>访问：</strong> 你的视频流是私有的还是向全世界开放的？</li></ul><p>在硬件要求方面没有固定规则，因此我建议你进行测试，以便找到最适合你需求的配置。本项目中，我将服务器安装在配有 4GB 内存、20GB 硬盘空间和单个 Intel i7 处理器内核的虚拟机上。</p><p>本项目使用 实时消息传递协议 Real-Time Messaging Protocol （RTMP）来处理音频和视频流。当然还有其他协议可用，但我选择 RTMP 是因为它具有广泛的支持。鉴于像 WebRTC 这样的开放标准变得更加兼容，我比较推荐这条路线。</p><p>同样重要的是，要明白“实时”并不总是意味着即时。视频流必须经过编码、传输、缓冲和显示，这通常会增大延迟。延迟可以被缩短或延长，具体取决于你创建的流类型及其属性。</p><h3 id=设置-linux-服务器>设置 Linux 服务器</h3><p>你可以使用许多不同的 Linux 发行版，但我更喜欢 Ubuntu，因此我下载了 <a href=https://www.ubuntu.com/download/server>Ubuntu 服务器版</a> 作为我的操作系统。如果你希望你的服务器具有图形用户界面（GUI），请随意使用 <a href=https://www.ubuntu.com/download/desktop>Ubuntu 桌面版</a> 或其多种风味版本之一。然后，我在我的计算机或虚拟机上启动了 Ubuntu 安装程序，并选择了最适合我的环境的设置。以下是我采取的步骤。</p><p>注意：因为这是一个服务器，你可能需要设置静态网络。</p><p><img src=/data/attachment/album/202201/08/102945dtrsn8vzx89riix9.png alt></p><p>安装程序完成并重新启动系统后，你会看到一个可爱的新 Ubuntu 系统。 与任何新安装的操作系统一样，安装任何可用的更新：</p><pre tabindex=0><code>sudo apt update
sudo apt upgrade
</code></pre><p>这个流媒体服务器将使用非常强大通用的 Nginx 网络服务器，所以你需要安装它：</p><pre tabindex=0><code>sudo apt install nginx
</code></pre><p>然后你需要获取 RTMP 模块，以便 Nginx 可以处理你的媒体流：</p><pre tabindex=0><code>sudo add-apt-repository universe
sudo apt install libnginx-mod-rtmp
</code></pre><p>修改你的网页服务器配置，使其能够接受和传送你的媒体流。</p><pre tabindex=0><code>sudo nano /etc/nginx/nginx.conf
</code></pre><p>滚动到配置文件的底部并添加以下代码：</p><pre tabindex=0><code>rtmp {
   server {
    listen 1935;
    chunk_size 4096;

    application live {
      live on;
      record off;
    }
  }
}
</code></pre><p><img src=/data/attachment/album/202201/08/102945stowptr9w9puouxu.png alt></p><p>保存配置。我是使用 <a href=https://www.nano-editor.org/>Nano</a> 来编辑配置文件的异端。在 Nano 中，你可以通过快捷键 <code>Ctrl+X</code>、<code>Y</code> 并按下回车来保存你的配置。</p><p>这么一个非常小的配置就可以创建一个可工作的流服务器。稍后你将添加更多内容到此配置中，但这是一个很好的起点。</p><p>在开始第一个流之前，你需要使用新配置重新启动 Nginx：</p><pre tabindex=0><code>sudo systemctl restart nginx
</code></pre><h3 id=设置-bsd-服务器>设置 BSD 服务器</h3><p>如果是“小恶魔”（LCTT 译者注：FreeBSD 的标志是一个拿着叉子的红色小恶魔）的信徒，那么建立并运行一个流媒体服务器也非常容易。</p><p>前往 <a href=https://www.freebsd.org/>FreeBSD</a> 网站并下载最新版本。在你的计算机或虚拟机上启动 FreeBSD 安装程序，然后执行初始步骤并选择最适合你环境的设置。由于这是一个服务器，你可能需要设置静态网络。</p><p>在安装程序完成并重新启动系统后，你应该就拥有了一个闪亮的新 FreeBSD 系统。像任何其他新安装的系统一样，你可能希望更新所有内容（从这一步开始，请确保你以 root 身份登录）：</p><pre tabindex=0><code>pkg update
pkg upgrade
</code></pre><p>安装 <a href=https://www.nano-editor.org/>Nano</a> 来编辑配置文件：</p><pre tabindex=0><code>pkg install nano
</code></pre><p>这个流媒体服务器将使用非常强大通用的 Nginx 网络服务器。 你可以使用 FreeBSD 所拥有的优秀 ports 系统来构建 Nginx。</p><p>首先，更新你的 ports 树：</p><pre tabindex=0><code>portsnap fetch
portsnap extract
</code></pre><p>进入 Nginx ports 目录：</p><pre tabindex=0><code>cd /usr/ports/www/nginx
</code></pre><p>运行如下命令开始构建 Nginx：</p><pre tabindex=0><code>make install
</code></pre><p>你将看到一个屏幕，询问你的 Nginx 构建中要包含哪些模块。对于这个项目，你需要添加 RTMP 模块。向下滚动直到选中 RTMP 模块，并按下空格键。然后按回车键继续剩下的构建和安装。</p><p>Nginx 安装完成后，就该为它配置流式传输了。</p><p>首先，在 <code>/etc/rc.conf</code> 中添加一个条目以确保 Nginx 服务器在系统启动时启动：</p><pre tabindex=0><code>nano /etc/rc.conf
</code></pre><p>将此文本添加到文件中：</p><pre tabindex=0><code>nginx_enable=&#34;YES&#34;
</code></pre><p><img src=/data/attachment/album/202201/08/102946crrhghmgnnyd3qg5.png alt></p><p>接下来，创建一个网站根目录，Nginx 将从中提供其内容。我自己的目录叫 <code>stream</code>：</p><pre tabindex=0><code>cd /usr/local/www/
mkdir stream
chmod -R 755 stream/
</code></pre><p>现在你已经创建了你的流目录，通过编辑配置文件来配置 Nginx：</p><pre tabindex=0><code>nano /usr/local/etc/nginx/nginx.conf
</code></pre><p>在文件顶部加载你的流媒体模块：</p><pre tabindex=0><code>load_module /usr/local/libexec/nginx/ngx_stream_module.so;
load_module /usr/local/libexec/nginx/ngx_rtmp_module.so;
</code></pre><p><img src=/data/attachment/album/202201/08/102946q29allttdl7atwxk.png alt></p><p>在 <code>Server</code> 部分下，更改 <code>root</code> 位置以匹配你之前创建的目录位置：</p><pre tabindex=0><code>Location / {
  root /usr/local/www/stream
}
</code></pre><p><img src=/data/attachment/album/202201/08/102947fohorivi7ik17ozj.png alt></p><p>最后，添加你的 RTMP 设置，以便 Nginx 知道如何处理你的媒体流：</p><pre tabindex=0><code>rtmp {
  server {
    listen 1935;
    chunk_size 4096;
    
    application live {
      live on;
      record off;
    }
  }
}
</code></pre><p>保存配置。在 Nano 中，你可以通过快捷键 <code>Ctrl+X</code>、<code>Y</code>，然后按回车键来执行此操作。</p><p>如你所见，这么一个非常小的配置将创建一个工作的流服务器。稍后，你将添加更多内容到此配置中，但这将为你提供一个很好的起点。</p><p>但是，在开始第一个流之前，你需要使用新配置重新启动 Nginx：</p><pre tabindex=0><code>service nginx restart
</code></pre><h3 id=设置你的流媒体软件>设置你的流媒体软件</h3><h4 id=使用-obs-进行广播>使用 OBS 进行广播</h4><p>现在你的服务器已准备好接受你的视频流，是时候设置你的流媒体软件了。本教程使用功能强大的开源的 Open Broadcast Studio（OBS）。</p><p>前往 <a href=https://obsproject.com/>OBS 网站</a>，找到适用于你的操作系统的版本并安装它。OBS 启动后，你应该会看到一个首次运行向导，该向导将帮助你使用最适合你的硬件的设置来配置 OBS。</p><p><img src=/data/attachment/album/202201/08/102947q8qzoo0rb28rau23.png alt></p><p>OBS 没有捕获任何内容，因为你没有为其提供源。在本教程中，你只需为流捕获桌面。单击“ 来源 Source ”下的 “+” 按钮，选择“ 显示捕获 Screen Capture ”，然后选择要捕获的桌面。</p><p>单击“ 确定 OK ”，你应该会看到 OBS 镜像了你的桌面。</p><p>现在可以将你新配置的视频流发送到你的服务器了。在 OBS 中，单击“ 文件 > 设置 File > Settings ”。 单击“ 流 Stream ”部分，并将“ 串流类型 Stream Type ” 设置为“ 自定义流媒体服务器 Custom Streaming Server ”。</p><p>在 URL 框中，输入前缀 <code>rtmp://</code> 后跟流媒体服务器的 IP 地址，后跟 <code>/live</code>。例如，<code>rtmp://IP-ADDRESS/live</code>。</p><p>接下来，你可能需要输入“ 串流密钥 Stream key ”，这是观看你的流所需的特殊标识符。 在“ 串流密钥 Stream key ”框中输入你想要（并且可以记住）的任何关键词。</p><p><img src=/data/attachment/album/202201/08/102947x7b272iobmf7vbvw.png alt></p><p>单击“ 应用 Apply ”，然后单击“ 确定 OK ”。</p><p>现在 OBS 已配置为将你的流发送到你的服务器，你可以开始你的第一个视频流。 单击“ 开始推流 Start Streaming ”。</p><p>如果一切正常，你应该会看到按钮更改为“ 停止推流 Stop Streaming ”，并且在 OBS 的底部将出现一些带宽指标。</p><p><img src=/data/attachment/album/202201/08/102948usll78du6hmf6sbr.png alt></p><p>如果你收到错误消息，请仔细检查 OBS 中的流设置是否有拼写错误。如果一切看起来都不错，则可能是另一个问题阻止了它的工作。</p><h3 id=观看你的视频流>观看你的视频流</h3><p>如果没有人观看，就说明直播视频不是很好，所以请成为你的第一个观众！</p><p>有许多支持 RTMP 的开源媒体播放器，但最著名的可能是 <a href=https://www.videolan.org/vlc/index.html>VLC 媒体播放器</a>。</p><p>安装并启动 VLC 后，通过单击“ 媒体 > 打开网络串流 Media > Open Network Stream ” 打开你的流。输入你的流的路径，添加你在 OBS 中设置的串流密钥，然后单击“ 播放 Play ”。 例如，<code>rtmp://IP-ADDRESS/live/SECRET-KEY</code>。</p><p>你现在应该可以看到自己的实时视频流了！</p><p><img src=/data/attachment/album/202201/08/102948s44c1wx6mwxxctpt.png alt></p><h3 id=接下来要做什么>接下来要做什么？</h3><p>本项目是一个非常简单的设置，可以让你开始工作。 以下是你可能想要使用的另外两个功能。</p><ul><li><strong>限制访问：</strong> 你可能想要做的下一件事情是限制对你服务器的访问，因为默认设置允许任何人与服务器之间进行流传输。有多种设置方法，例如操作系统防火墙、<a href=https://httpd.apache.org/docs/current/howto/htaccess.html>.htaccess 文件</a>，甚至使用 <a href=https://github.com/arut/nginx-rtmp-module/wiki/Directives#access>STMP 模块中的内置访问控制</a>。</li><li><strong>录制流：</strong> 这个简单的 Nginx 配置只会流传输而不会保存你的视频，但这很容易修改。在 Nginx 配置文件中的 RTMP 部分下，设置录制选项和要保存视频的位置。确保你设置的路径存在并且 Nginx 能够写入它。</li></ul><pre tabindex=0><code>application live {
  live on;
  record all;
  record_path /var/www/html/recordings;
  record_unique on;
}
</code></pre><p>实时流媒体的世界在不断发展，如果你对更高级的用途感兴趣，可以在互联网上找到许多其他很棒的资源。祝你好运，直播快乐！</p><hr><p>via: <a href=https://opensource.com/article/19/1/basic-live-video-streaming-server>https://opensource.com/article/19/1/basic-live-video-streaming-server</a></p><p>作者：<a href=https://opensource.com/users/ricepriskytreat>Aaron J.Prisk</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/Starryi>Starryi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E6%B5%81%E5%AA%92%E4%BD%93/ rel=tag>流媒体</a></li><li class=tags__item><a class="tags__link btn" href=/tags/obs/ rel=tag>OBS</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>