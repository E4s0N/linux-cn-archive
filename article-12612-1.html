<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>利用这个 USB ID 仓库识别更多 Linux 上的设备 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="利用这个 USB ID 仓库识别更多 Linux 上的设备"><meta property="og:description" content="这是一个包含了所有已知 USB 设备 ID 的开源项目。"><meta property="og:type" content="article"><meta property="og:url" content="/article-12612-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-09-13T22:55:42+00:00"><meta property="article:modified_time" content="2020-09-13T22:55:42+00:00"><meta itemprop=name content="利用这个 USB ID 仓库识别更多 Linux 上的设备"><meta itemprop=description content="这是一个包含了所有已知 USB 设备 ID 的开源项目。"><meta itemprop=datePublished content="2020-09-13T22:55:42+00:00"><meta itemprop=dateModified content="2020-09-13T22:55:42+00:00"><meta itemprop=wordCount content="457"><meta itemprop=keywords content="USB,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>利用这个 USB ID 仓库识别更多 Linux 上的设备</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-09-13T22:55:42Z>September 13, 2020</time></div></div></header><div class="content post__content clearfix"><blockquote><p>这是一个包含了所有已知 USB 设备 ID 的开源项目。</p></blockquote><p><img src=/data/attachment/album/202009/13/225426zpfbfopxhjxomuxf.jpg alt></p><p>市场上有成千上万的 USB 设备：键盘、扫描仪、打印机、鼠标和其他无数的设备，都能在 Linux 上工作。它们的供应商详情都存储在 USB ID 仓库中。</p><h3 id=lsusb>lsusb</h3><p>Linux <code>lsusb</code> 命令列出了连接到系统的 USB 设备的信息，但有时信息不完整。例如，我最近注意到我的一个 USB 设备的品牌没有被识别。设备是可以使用的，但是在列出我所连接的 USB 设备的详情中没有提供任何识别信息。以下是我的 <code>lsusb</code> 命令的输出：</p><pre tabindex=0><code>$ lsusb
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 004: ID 046d:082c Logitech, Inc.
Bus 001 Device 003: ID 0951:16d2 Kingston Technology
Bus 001 Device 002: ID 18f8:1486  
Bus 001 Device 005: ID 051d:0002 American Power Conversion Uninterruptible Power Supply
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</code></pre><p>正如你在最后一栏中看到的，有一个设备没有制造商描述。要确定这个设备是什么，我必须对我的 USB 设备树进行更深入的检查。幸运的是，<code>lsusb</code> 命令有更多的选项。其中一个选项是 <code>-D device</code>，来获取每个设备的详细信息，正如手册页面所解释的那样：</p><blockquote><p>“不会扫描 <code>/dev/bus/usb</code> 目录，而只显示给定设备文件所属设备的信息。设备文件应该是类似 <code>/dev/bus/usb/001/001</code> 这样的文件。这个选项会像 <code>v</code> 选项一样显示详细信息，但你必须是 root 用户才行。"</p></blockquote><p>我认为如何将设备路径传递给 <code>lsusb</code> 命令并不容易，但在仔细阅读手册页和初始输出后，我能够确定如何构造它。USB 设备驻留在 UDEV 文件系统中。它们的设备路径始于 USB 设备目录 <code>/dev/bus/usb/</code>。路径的其余部分由设备的总线 ID 和设备 ID 组成。我的无描述设备是 <code>Bus 001 Device 002</code>，被翻译成了 <code>001/002</code>，完成的路径为 <code>/dev/bus/usb/001/002</code>。现在我可以把这个路径传给 <code>lsusb</code>。我还会用管道传给 <code>more</code>，因为这里往往有很多信息：</p><pre tabindex=0><code>$ lsusb -D /dev/bus/usb/001/002 |more
Device: ID 18f8:1486  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x18f8
  idProduct          0x1486
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           59
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      1 Boot Interface Subclass
      bInterfaceProtocol      2 Mouse
      iInterface              0
        HID Device Descriptor:
</code></pre><p>不幸的是，这里并没有提供我希望找到的细节。初始输出中出现的两个字段 <code>idVendor</code> 和 <code>idProduct</code> 都是空的。这有些帮助，因为往下看一下，就会发现 <code>Mouse</code> 这个词。所以，这个设备就是我的鼠标。</p><h3 id=usb-id-仓库>USB ID 仓库</h3><p>这让我不禁想知道如何才能填充这些字段，不仅是为了自己，也是为了其他 Linux 用户。原来已经有了一个开源项目：<a href=http://www.linux-usb.org/usb-ids.html>USB ID 仓库</a>。它是一个公共仓库，它包含了 USB 设备中使用的所有已知 ID。它也被用于各种程序中，包括 <a href=https://sourceforge.net/projects/linux-usb/files/>USB Utilities</a>，用于显示人类可读的设备名称。</p><p><img src=/data/attachment/album/202009/13/225559xux1x41qhuaic1iz.png alt="The USB ID Repository Site" title="The USB ID Repository Site"></p><p>你可以从网站上或通过下载数据库来浏览特定设备的仓库。也欢迎用户提交新的数据。我要为我的鼠标提交数据，因为它没有在里面。</p><h3 id=更新你的-usb-id>更新你的 USB ID</h3><p>USB ID 数据库存储在一个名为 <code>usb.ids</code> 的文件中。这个文件的位置可能会因 Linux 发行版的不同而不同。</p><p>在 Ubuntu 18.04 中，这个文件位于 <code>/var/lib/usbutils</code>。要更新数据库，使用命令 <code>update-usbids</code>，你需要用 root 权限或 <code>sudo</code> 来运行。</p><pre tabindex=0><code>$ sudo update-usbids
</code></pre><p>如果有新文件，它就会被下载。当前的文件将被备份，并被替换为新文件：</p><pre tabindex=0><code>$ ls -la
total 1148
drwxr-xr-x  2 root root   4096 Jan 15 00:34 .
drwxr-xr-x 85 root root   4096 Nov  7 08:05 ..
-rw-r--r--  1 root root 614379 Jan  9 15:34 usb.ids
-rw-r--r--  1 root root 551472 Jan 15 00:34 usb.ids.old
</code></pre><p>最新版本的 Fedora Linux 将数据库文件保存在 <code>/usr/share/hwdata</code> 中。而且，没有更新脚本。而是，数据库由一个名为 <code>hwdata</code> 的软件包维护。</p><pre tabindex=0><code># dnf info hwdata

Installed Packages
Name         : hwdata
Version      : 0.332
Release      : 1.fc31
Architecture : noarch
Size         : 7.5 M
Source       : hwdata-0.332-1.fc31.src.rpm
Repository   : @System
From repo    : updates
Summary      : Hardware identification and configuration data
URL          : https://github.com/vcrhonek/hwdata
License      : GPLv2+
Description  : hwdata contains various hardware identification and configuration data,
             : such as the pci.ids and usb.ids databases.
</code></pre><p>现在我的 USB 设备列表在这个之前未命名的设备旁边显示了一个名字。比较一下上面的输出：</p><pre tabindex=0><code>$ lsusb
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 004: ID 046d:082c Logitech, Inc. HD Webcam C615
Bus 001 Device 003: ID 0951:16d2 Kingston Technology
Bus 001 Device 014: ID 18f8:1486 [Maxxter]
Bus 001 Device 005: ID 051d:0002 American Power Conversion Uninterruptible Power Supply
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</code></pre><p>你可能会注意到，随着仓库定期更新新设备和现有设备的详细信息，其他设备的描述也会发生变化。</p><h3 id=提交新数据>提交新数据</h3><p>提交新数据有两种方式：使用网站或通过电子邮件发送特殊格式的补丁文件。在开始之前，我阅读了提交指南。首先，我必须注册一个账户，然后我需要使用项目的提交系统提供我鼠标的 ID 和名称。添加任何 USB 设备的过程都是一样的。</p><p>你使用过 USB ID 仓库么？如果有，请在评论中分享你的反馈。</p><hr><p>via: <a href=https://opensource.com/article/20/8/usb-id-repository>https://opensource.com/article/20/8/usb-id-repository</a></p><p>作者：<a href=https://opensource.com/users/alanfdoss>Alan Formy-Duval</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/usb/ rel=tag>USB</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>