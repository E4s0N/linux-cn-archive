<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>检查 Linux 磁盘使用情况 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="检查 Linux 磁盘使用情况"><meta property="og:description" content="du 和 ncdu 两个命令提供了相同信息的两种不同视图，便于我们跟踪存储在计算机上的内容。"><meta property="og:type" content="article"><meta property="og:url" content="/article-14823-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-13T11:13:00+00:00"><meta property="article:modified_time" content="2022-07-13T11:13:00+00:00"><meta itemprop=name content="检查 Linux 磁盘使用情况"><meta itemprop=description content="du 和 ncdu 两个命令提供了相同信息的两种不同视图，便于我们跟踪存储在计算机上的内容。"><meta itemprop=datePublished content="2022-07-13T11:13:00+00:00"><meta itemprop=dateModified content="2022-07-13T11:13:00+00:00"><meta itemprop=wordCount content="236"><meta itemprop=keywords content="磁盘,ncdu,du,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>检查 Linux 磁盘使用情况</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-07-13T11:13:00Z>July 13, 2022</time></div></div></header><div class="content post__content clearfix"><blockquote><p>du 和 ncdu 两个命令提供了相同信息的两种不同视图，便于我们跟踪存储在计算机上的内容。</p></blockquote><p><img src=/data/attachment/album/202207/13/111729faleyal2gmappykc.jpg alt></p><p>无论你有多少存储空间，了解文件占用了多少磁盘空间都是一个重要的考虑事项。我的笔记本有一个相对较小的 250GB NVME 驱动器，大多数时候都没什么问题，但几年前我开始探索 Linux 上的游戏，情况变得有所不同，安装 Steam 和其他游戏使存储管理更加重要。</p><h3 id=du-命令>du 命令</h3><p>检查磁盘驱动器上剩余存储空间最简单的方法是 <a href=https://opensource.com/article/21/7/check-disk-space-linux-du>du 命令</a>。它会估计文件空间使用情况，像其他所有 Linux 工具一样，<code>du</code> 非常强大，但学会如何根据你的特定需求使用它会很有帮助。我总是查阅手册页来掌握实用程序的用法。<code>du</code> 有几个选项，可以为你提供文件存储的最佳快照，以及它们在系统上消耗多少空间。</p><p><code>du</code> 命令有很多选项，以下是一些常见的：</p><ul><li><code>-a</code> - 包括文件夹和文件在内的存储信息</li><li><code>--apparent-size</code> - 打印自身大小而不是占用磁盘量</li><li><code>-h</code> - 人类可读的格式</li><li><code>-b</code> - 以字节为单位</li><li><code>-c</code> - 总计</li><li><code>-k</code> - 以块为单位</li><li><code>-m</code> - 以兆字节为单位的大小</li></ul><p>务必查看 <code>du</code> 手册页获取完整帮助列表。</p><h4 id=显示所有文件>显示所有文件</h4><p>你可以选择的第一个选项是 <code>du -a</code>，它可以显示系统上所有文件及其存储目录的大小。这个命令让我知道了我的主目录中存储了 11555168 个字节。使用 <code>du -a</code> 可以快速递归地查看我的存储系统。如果我想要一个更有意义的数字，并且我想深入到目录中查看大文件的位置，该怎么办？</p><p>我认为在 <code>Downloads</code> 目录下有一些大文件，所以我输入 <code>du -a /home/don/Downloads</code> 来查看。</p><pre tabindex=0><code>$ du -a ~/Downloads
4923    ./UNIX_Driver_5-0/UNIX Driver 50
4923    ./UNIX_Driver_5-0
20      ./epel-release-latest-9.noarch.rpm
12      ./rpmfusion-free-release-9.noarch.rpm
2256    ./PZO9297 000 Cover.pdf
8       ./pc.md
2644    ./geckodriver-v0.31.0-linux64.tar.gz
466468
</code></pre><p>最左边的数字是以字节为单位的文件大小。我想要一些对我更有帮助的东西，所以我将人类可读格式的选项添加到命令中，结果是 456M（兆字节），这对我来说是一种更有用的数字格式。</p><pre tabindex=0><code>$ du -ah ~/Downloads
4.9M    ./UNIX_Driver_5-0/UNIX Driver 50
4.9M    ./UNIX_Driver_5-0
20K    ./epel-release-latest-9.noarch.rpm
12K    ./rpmfusion-free-release-9.noarch.rpm
2.2M    ./PZO9297 000 Cover.pdf
8.0K    ./pc.md
2.6M    ./geckodriver-v0.31.0-linux64.tar.gz
456M    .
</code></pre><p>与大多数 Linux 命令一样，你可以组合选项，要以人类可读的格式查看 <code>Downloads</code> 目录，使用 <code>du -ah ~/Downloads</code> 命令。</p><h4 id=总和>总和</h4><p><code>-c</code> 选项在最后一行提供了磁盘使用总和。我可以使用 <code>du -ch /home/don</code> 来显示主目录中的每个文件和目录。这里有很多信息，我只想知道最后一行的信息，所以我将 <code>du</code> 命令通过管道传输给 <code>tail</code> 来显示最后几行。命令是 <code>du -ch /home/don | tail</code>。（LCTT 校注：可以使用 <code>tail -1</code> 来仅显示最后一行汇总行。）</p><p><img src=/data/attachment/album/202207/13/111323rfen3w3mwcyw7xfe.png alt="将 du 命令输出通过管道传输到 tail"></p><h3 id=ncdu-命令>ncdu 命令</h3><p>对存储在驱动器上内容感兴趣的 Linux 用户，另一个选择是 <a href=https://opensource.com/article/21/8/ncdu-check-free-disk-space-linux>ncdu 命令</a>，它代表 “NCurses 磁盘使用情况”。基于你的 Linux 发行版，你可能需要下载并安装它。</p><p>在 Linux Mint、Elementary、Pop_OS! 或其它基于 Debian 的发行版上：</p><pre tabindex=0><code>$ sudo apt install ncdu
</code></pre><p>在 Fedora、Mageia 或 CentOS 上：</p><pre tabindex=0><code>$ sudo dnf install ncdu
</code></pre><p>在 Arch、Manjar 或者类似发行版上：</p><pre tabindex=0><code>$ sudo pacman -S ncdu
</code></pre><p>安装后，你可以使用 <code>ncdu</code> 来分析你的文件系统。以下是在我的主目录中发出 <code>ncdu</code> 后的示例输出。<code>ncdu</code> 的手册页指出 “ncdu（NCurses Disk Usage）是众所周知的 <code>du</code> 基于 curses 的版本，它提供了一种快速查看哪些目录正在使用磁盘空间的方法。”</p><p><img src=/data/attachment/album/202207/13/111323a22uo7k0tikoyskk.png alt="du 命令输出"></p><p>我可以使用方向键上下导航，按下回车键进入目录。有趣的是，<code>du</code> 报告我的主目录中的总磁盘使用量为 12GB，而 <code>ncdu</code> 显示为 11GB。你可以在 <code>ncdu</code> 手册页中找到更多信息。</p><p>你可以将 <code>ncdu</code> 指向某个目录来探索特定目录。例如，<code>ncdu /home/don/Downloads</code>。</p><p><img src=/data/attachment/album/202207/13/111323ao1o56o6vl031nuv.png alt="ncdu 命令输出"></p><p>按 <code>?</code> 键显示帮助菜单。</p><p><img src=/data/attachment/album/202207/13/111323jt3tff2ta4mtfquq.png alt="ncdu 帮助"></p><h3 id=总结>总结</h3><p><code>du</code> 和 <code>ncdu</code> 两个命令提供了相同信息的两种不同视图，便于我们跟踪存储在计算机上的内容。</p><p>如果你不习惯使用终端，或者想寻找此类信息的另一种查看方式，可以看看 <a href=https://help.gnome.org/users/baobab/stable/>GNOME 磁盘使用分析器</a>。如果你的系统上还没有它，你可以轻松安装和使用它。检查你的发行版是否有 baobab 开发的这个软件，如果你想试试，那就去安装它吧。</p><p>（文内图片来自于 Don Watkins, CC BY-SA 4.0）</p><hr><p>via: <a href=https://opensource.com/article/22/7/check-disk-usage-linux>https://opensource.com/article/22/7/check-disk-usage-linux</a></p><p>作者：<a href=https://opensource.com/users/don-watkins>Don Watkins</a> 选题：<a href=https://github.com/lkxed>lkxed</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E7%A3%81%E7%9B%98/ rel=tag>磁盘</a></li><li class=tags__item><a class="tags__link btn" href=/tags/ncdu/ rel=tag>ncdu</a></li><li class=tags__item><a class="tags__link btn" href=/tags/du/ rel=tag>du</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>