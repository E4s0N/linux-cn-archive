<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 Linux 中如何归档文件和目录 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="在 Linux 中如何归档文件和目录"><meta property="og:description" content="在本教程中，我们将学习如何在 Linux 归档文件。归档和压缩有什么不同吗？你们中的一些人可能经常认为这些术语有相同的含义。"><meta property="og:type" content="article"><meta property="og:url" content="/article-9701-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-06-01T10:02:16+00:00"><meta property="article:modified_time" content="2018-06-01T10:02:16+00:00"><meta itemprop=name content="在 Linux 中如何归档文件和目录"><meta itemprop=description content="在本教程中，我们将学习如何在 Linux 归档文件。归档和压缩有什么不同吗？你们中的一些人可能经常认为这些术语有相同的含义。"><meta itemprop=datePublished content="2018-06-01T10:02:16+00:00"><meta itemprop=dateModified content="2018-06-01T10:02:16+00:00"><meta itemprop=wordCount content="491"><meta itemprop=keywords content="tar,归档,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>在 Linux 中如何归档文件和目录</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-06-01T10:02:16Z>June 01, 2018</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201806/01/100218qf1bmyu9bv4mlyzx.png alt></p><p>在我们之前的教程中，我们讨论了如何<a href=https://www.ostechnix.com/how-to-compress-and-decompress-files-in-linux/>使用 gzip 和 bzip2 压缩和解压缩文件</a>。在本教程中，我们将学习如何在 Linux 归档文件。归档和压缩有什么不同吗？你们中的一些人可能经常认为这些术语有相同的含义。但是，这两者完全不同。归档是将多个文件和目录（相同或不同大小）组合成一个文件的过程。另一方面，压缩是减小文件或目录大小的过程。归档通常用作系统备份的一部分，或者将数据从一个系统移至另一个系统时。希望你了解归档和压缩之间的区别。现在，让我们进入主题。</p><h3 id=归档文件和目录>归档文件和目录</h3><p>归档文件和目录最常见的程序是：</p><ol><li>tar</li><li>zip</li></ol><p>这是一个很大的话题，所以，我将分两部分发表这篇文章。在第一部分中，我们将看到如何使用 tar 命令来归档文件和目录。</p><h3 id=使用-tar-命令归档文件和目录>使用 tar 命令归档文件和目录</h3><p><strong>Tar</strong> 是一个 Unix 命令，代表 <strong>T</strong>ape <strong>A</strong>rchive（磁带归档）。它用于将多个文件（相同或不同大小）组合或存储到一个文件中。在 tar 实用程序中有 4 种主要的操作模式。</p><ol><li><code>c</code> – 从文件或目录中建立归档</li><li><code>x</code> – 提取归档</li><li><code>r</code> – 将文件追加到归档</li><li><code>t</code> – 列出归档的内容</li></ol><p>有关完整的模式列表，参阅 man 手册页。</p><h4 id=创建一个新的归档>创建一个新的归档</h4><p>为了本指南，我将使用名为 <code>ostechnix</code> 的文件夹，其中包含三种不同类型的文件。</p><pre tabindex=0><code>$ ls ostechnix/
file.odt image.png song.mp3
</code></pre><p>现在，让我们为 <code>ostechnix</code> 目录创建一个新的 tar 归档。</p><pre tabindex=0><code>$ tar cf ostechnix.tar ostechnix/
</code></pre><p>这里，<code>c</code> 标志指的是创建新的归档，<code>f</code> 是指定归档文件。</p><p>同样，对当前工作目录中的一组文件创建归档文件，使用以下命令：</p><pre tabindex=0><code>$ tar cf archive.tar file1 file2 file 3
</code></pre><h4 id=提取归档>提取归档</h4><p>要在当前目录中提取归档文件，只需执行以下操作：</p><pre tabindex=0><code>$ tar xf ostechnix.tar
</code></pre><p>我们还可以使用 <code>C</code> 标志（大写字母 C）将归档提取到不同的目录中。例如，以下命令将归档文件提取到 <code>Downloads</code> 目录中。</p><pre tabindex=0><code>$ tar xf ostechnix.tar -C Downloads/
</code></pre><p>或者，转到 <code>Downloads</code> 文件夹并像下面一样提取其中的归档。</p><pre tabindex=0><code>$ cd Downloads/
$ tar xf ../ostechnix.tar
</code></pre><p>有时，你可能想要提取特定类型的文件。例如，以下命令提取 “.png” 类型的文件。</p><pre tabindex=0><code>$ tar xf ostechnix.tar --wildcards &#34;*.png&#34;
</code></pre><h4 id=创建-gzip-和-bzip-格式的压缩归档>创建 gzip 和 bzip 格式的压缩归档</h4><p>默认情况下，tar 创建归档文件以 <code>.tar</code> 结尾。另外，<code>tar</code> 命令可以与压缩实用程序 <code>gzip</code> 和 <code>bzip</code> 结合使用。文件结尾以 <code>.tar</code> 为扩展名使用普通 tar 来归档文件，文件以 <code>tar.gz</code> 或 <code>.tgz</code> 结尾使用 <code>gzip</code> 归档并压缩文件，文件以 <code>tar.bz2</code> 或 <code>.tbz</code> 结尾使用 <code>bzip</code> 归档并压缩。</p><p>首先，让我们来创建一个 gzip 归档：</p><pre tabindex=0><code>$ tar czf ostechnix.tar.gz ostechnix/
</code></pre><p>或者：</p><pre tabindex=0><code>$ tar czf ostechnix.tgz ostechnix/
</code></pre><p>这里，我们使用 <code>z</code> 标志来使用 gzip 压缩方法压缩归档文件。</p><p>你可以使用 <code>v</code> 标志在创建归档时查看进度。</p><pre tabindex=0><code>$ tar czvf ostechnix.tar.gz ostechnix/
ostechnix/
ostechnix/file.odt
ostechnix/image.png
ostechnix/song.mp3
</code></pre><p>这里，<code>v</code> 指显示进度。</p><p>从一个文件列表创建 gzip 归档文件：</p><pre tabindex=0><code>$ tar czf archive.tgz file1 file2 file3
</code></pre><p>要提取当前目录中的 gzip 归档文件，使用：</p><pre tabindex=0><code>$ tar xzf ostechnix.tgz
</code></pre><p>要提取到其他文件夹，使用 <code>-C</code> 标志：</p><pre tabindex=0><code>$ tar xzf ostechnix.tgz -C Downloads/
</code></pre><p>现在，让我们创建 <strong>bzip 归档</strong>。为此，请使用下面的 <code>j</code> 标志。</p><p>创建一个目录的归档：</p><pre tabindex=0><code>$ tar cjf ostechnix.tar.bz2 ostechnix/
</code></pre><p>或</p><pre tabindex=0><code>$ tar cjf ostechnix.tbz ostechnix/
</code></pre><p>从一个列表文件中创建归档：</p><pre tabindex=0><code>$ tar cjf archive.tar.bz2 file1 file2 file3
</code></pre><p>或</p><pre tabindex=0><code>$ tar cjf archive.tbz file1 file2 file3
</code></pre><p>为了显示进度，使用 <code>v</code> 标志。</p><p>现在，在当前目录下，让我们提取一个 bzip 归档。这样做：</p><pre tabindex=0><code>$ tar xjf ostechnix.tar.bz2
</code></pre><p>或者，提取归档文件到其他目录：</p><pre tabindex=0><code>$ tar xjf ostechnix.tar.bz2 -C Downloads
</code></pre><h4 id=一次创建多个目录和或文件的归档>一次创建多个目录和/或文件的归档</h4><p>这是 <code>tar</code> 命令的另一个最酷的功能。要一次创建多个目录或文件的 gzip 归档文件，使用以下文件：</p><pre tabindex=0><code>$ tar czvf ostechnix.tgz Downloads/ Documents/ ostechnix/file.odt
</code></pre><p>上述命令创建 <code>Downloads</code>、 <code>Documents</code> 目录和 <code>ostechnix</code> 目录下的 <code>file.odt</code> 文件的归档，并将归档保存在当前工作目录中。</p><h4 id=在创建归档时跳过目录和或文件>在创建归档时跳过目录和/或文件</h4><p>这在备份数据时非常有用。你可以在备份中排除不重要的文件或目录，这是 <code>–exclude</code> 选项所能帮助的。例如你想要创建 <code>/home</code> 目录的归档，但不希望包括 <code>Downloads</code>、 <code>Documents</code>、 <code>Pictures</code>、 <code>Music</code> 这些目录。</p><p>这是我们的做法：</p><pre tabindex=0><code>$ tar czvf ostechnix.tgz /home/sk --exclude=/home/sk/Downloads --exclude=/home/sk/Documents --exclude=/home/sk/Pictures --exclude=/home/sk/Music
</code></pre><p>上述命令将对我的 <code>$HOME</code> 目录创建一个 gzip 归档，其中不包括 <code>Downloads</code>、<code>Documents</code>、<code>Pictures</code> 和 <code>Music</code> 目录。要创建 bzip 归档，将 <code>z</code> 替换为 <code>j</code>，并在上例中使用扩展名 <code>.bz2</code>。</p><h4 id=列出归档文件但不提取它们>列出归档文件但不提取它们</h4><p>要列出归档文件的内容，我们使用 <code>t</code> 标志。</p><pre tabindex=0><code>$ tar tf ostechnix.tar
ostechnix/
ostechnix/file.odt
ostechnix/image.png
ostechnix/song.mp3
</code></pre><p>要查看详细输出，使用 <code>v</code> 标志。</p><pre tabindex=0><code>$ tar tvf ostechnix.tar
drwxr-xr-x sk/users 0 2018-03-26 19:52 ostechnix/
-rw-r--r-- sk/users 9942 2018-03-24 13:49 ostechnix/file.odt
-rw-r--r-- sk/users 36013 2015-09-30 11:52 ostechnix/image.png
-rw-r--r-- sk/users 112383 2018-02-22 14:35 ostechnix/song.mp3
</code></pre><h4 id=追加文件到归档>追加文件到归档</h4><p>文件或目录可以使用 <code>r</code> 标志添加/更新到现有的归档。看看下面的命令：</p><pre tabindex=0><code>$ tar rf ostechnix.tar ostechnix/ sk/ example.txt
</code></pre><p>上面的命令会将名为 <code>sk</code> 的目录和名为 <code>exmple.txt</code> 添加到 <code>ostechnix.tar</code> 归档文件中。</p><p>你可以使用以下命令验证文件是否已添加：</p><pre tabindex=0><code>$ tar tvf ostechnix.tar
drwxr-xr-x sk/users 0 2018-03-26 19:52 ostechnix/
-rw-r--r-- sk/users 9942 2018-03-24 13:49 ostechnix/file.odt
-rw-r--r-- sk/users 36013 2015-09-30 11:52 ostechnix/image.png
-rw-r--r-- sk/users 112383 2018-02-22 14:35 ostechnix/song.mp3
drwxr-xr-x sk/users 0 2018-03-26 19:52 sk/
-rw-r--r-- sk/users 0 2018-03-26 19:39 sk/linux.txt
-rw-r--r-- sk/users 0 2018-03-26 19:56 example.txt
</code></pre><h3 id=tldr>TL;DR</h3><p>创建 tar 归档：</p><ul><li><strong>普通 tar 归档：</strong> <code>tar -cf archive.tar file1 file2 file3</code></li><li><strong>Gzip tar 归档：</strong> <code>tar -czf archive.tgz file1 file2 file3</code></li><li><strong>Bzip tar 归档：</strong> <code>tar -cjf archive.tbz file1 file2 file3</code></li></ul><p>提取 tar 归档：</p><ul><li><strong>普通 tar 归档：</strong> <code>tar -xf archive.tar</code></li><li><strong>Gzip tar 归档：</strong> <code>tar -xzf archive.tgz</code></li><li><strong>Bzip tar 归档：</strong> <code>tar -xjf archive.tbz</code></li></ul><p>我们只介绍了 <code>tar</code> 命令的基本用法，这些对于开始使用 <code>tar</code> 命令足够了。但是，如果你想了解更多详细信息，参阅 man 手册页。</p><pre tabindex=0><code>$ man tar
</code></pre><p>好吧，这就是全部了。在下一部分中，我们将看到如何使用 Zip 实用程序来归档文件和目录。</p><p>干杯！</p><hr><p>via: <a href=https://www.ostechnix.com/how-to-archive-files-and-directories-in-linux-part-1/>https://www.ostechnix.com/how-to-archive-files-and-directories-in-linux-part-1/</a></p><p>作者：<a href=https://www.ostechnix.com/author/sk/>SK</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/MjSeven>MjSeven</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/tar/ rel=tag>tar</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E5%BD%92%E6%A1%A3/ rel=tag>归档</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>