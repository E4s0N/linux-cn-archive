<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>给 Zsh 添加主题和插件 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="给 Zsh 添加主题和插件"><meta property="og:description" content="通过 Oh My Zsh 安装的主题和插件来扩展 Zsh 的功能。"><meta property="og:type" content="article"><meta property="og:url" content="/article-11426-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-05T12:05:32+00:00"><meta property="article:modified_time" content="2019-10-05T12:05:32+00:00"><meta itemprop=name content="给 Zsh 添加主题和插件"><meta itemprop=description content="通过 Oh My Zsh 安装的主题和插件来扩展 Zsh 的功能。"><meta itemprop=datePublished content="2019-10-05T12:05:32+00:00"><meta itemprop=dateModified content="2019-10-05T12:05:32+00:00"><meta itemprop=wordCount content="316"><meta itemprop=keywords content="Zsh,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>给 Zsh 添加主题和插件</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-10-05T12:05:32Z>October 05, 2019</time></div></div></header><div class="content post__content clearfix"><blockquote><p>通过 Oh My Zsh 安装的主题和插件来扩展 Zsh 的功能。</p></blockquote><p><img src=/data/attachment/album/201910/05/120457r49mk2l9oelv94bi.jpg alt></p><p>在我的<a href=/article-11378-1.html>前文</a>中，我向大家展示了如何安装并使用 <a href=/article-11378-1.html>Z-Shell</a> (Zsh)。对于某些用户来说，Zsh 最令人激动的是它可以安装主题。Zsh 安装主题非常容易，一方面是因为有非常活跃的社区为 Z-Shell 设计主题，另一方面是因为有 <a href=https://ohmyz.sh/>Oh My Zsh</a> 这个项目。这使得安装主题变得轻而易举。</p><p>主题的变化可能会立刻吸引你的注意力，因此如果你安装了 Zsh 并且将默认的 Shell 替换为 Zsh 时，你可能不喜欢 Shell 默认主题的样子，那么你可以立即更换 Oh My Zsh 自带的 100 多个主题。Oh My Zsh 不仅拥有大量精美的主题，同时还有数以百计的扩展 Zsh 功能的插件。</p><h3 id=安装-oh-my-zsh>安装 Oh My Zsh</h3><p>Oh My Zsh 的<a href=https://ohmyz.sh/>官网</a>建议你使用一个脚本在有网络的情况下来安装这个包。尽管 Oh My Zsh 项目几乎是可以令人信服的，但是盲目地在你的电脑上运行一个脚本这是一个糟糕的建议。如果你想运行这个脚本，你可以把它下载下来，看一下它实现了什么功能，在你确信你已经了解了它的所作所为之后，你就可以运行它了。</p><p>如果你下载了脚本并且阅读了它，你就会发现安装过程仅仅只有三步：</p><h4 id=1克隆-oh-my-zsh>1、克隆 oh-my-zsh</h4><p>第一步，克隆 oh-my-zsh 库到 <code>~/.oh-my-zsh</code> 目录：</p><pre tabindex=0><code>% git clone http://github.com/robbyrussell/oh-my-zsh ~/.oh-my-zsh
</code></pre><h4 id=2切换配置文件>2、切换配置文件</h4><p>下一步，备份你已有的 <code>.zshrc</code> 文件，然后将 oh-my-zsh 自带的配置文件移动到这个地方。这两步操作可以一步完成，只需要你的 <code>mv</code> 命令支持 <code>-b</code> 这个选项。</p><pre tabindex=0><code>% mv -b \
~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
</code></pre><h4 id=3编辑配置文件>3、编辑配置文件</h4><p>默认情况下，Oh My Zsh 自带的配置文件是非常简陋的。如果你想将你自己的 <code>~/.zshrc</code> 文件合并到 <code>.oh-my-zsh</code> 的配置文件中。你可以使用 <a href=https://opensource.com/article/19/2/getting-started-cat-command>cat</a> 命令将你的旧的配置文件添加到新文件的末尾。</p><pre tabindex=0><code>% cat ~/.zshrc~ &gt;&gt; ~/.zshrc
</code></pre><p>看一下默认的配置文件以及它提供的一些选项。用你最喜欢的编辑器打开 <code>~/.zshrc</code> 文件。这个文件有非常良好的注释。这是了解它的一个非常好的方法。</p><p>例如，你可以更改 <code>.oh-my-zsh</code> 目录的位置。在安装的时候，它默认是位于你的家目录。但是，根据 <a href=http://freedesktop.org>Free Desktop</a> 所定义的现代 Linux 规范。这个目录应当放置于 <code>~/.local/share</code> 。你可以在配置文件中进行修改。如下所示：</p><pre tabindex=0><code># Path to your oh-my-zsh installation.
export ZSH=$HOME/.local/share/oh-my-zsh
</code></pre><p>然后将 .oh-my-zsh 目录移动到你新配置的目录下：</p><pre tabindex=0><code>% mv ~/.oh-my-zsh $HOME/.local/share/oh-my-zsh
</code></pre><p>如果你使用的是 MacOS，这个目录可能会有点含糊不清，但是最合适的位置可能是在 <code>$HOME/Library/Application\ Support</code>。</p><h3 id=重新启动-zsh>重新启动 Zsh</h3><p>编辑配置文件之后，你必须重新启动你的 Shell。在这之前，你必须确定你的任何操作都已正确完成。例如，在你修改了 <code>.oh-my-zsh</code> 目录的路径之后。不要忘记将目录移动到新的位置。如果你不想重新启动你的 Shell。你可以使用 <code>source</code> 命令来使你的配置文件生效。</p><pre tabindex=0><code>% source ~/.zshrc
➜  .oh-my-zsh git:(master) ✗
</code></pre><p>你可以忽略任何丢失更新文件的警告；他们将会在重启的时候再次进行解析。</p><h3 id=更换你的主题>更换你的主题</h3><p>安装好 oh-my-zsh 之后。你可以将你的 Zsh 的主题设置为 <code>robbyrussell</code>，这是一个该项目维护者的主题。这个主题的更改是非常小的，仅仅是改变了提示符的颜色。</p><p>你可以通过列出 <code>.oh-my-zsh</code> 目录下的所有文件来查看所有安装的主题：</p><pre tabindex=0><code>➜  .oh-my-zsh git:(master) ✗ ls ~/.local/share/oh-my-zsh/themes
3den.zsh-theme
adben.zsh-theme
af-magic.zsh-theme
afowler.zsh-theme
agnoster.zsh-theme
[...]
</code></pre><p>想在切换主题之前查看一下它的样子，你可以查看 Oh My Zsh 的 <a href=https://github.com/robbyrussell/oh-my-zsh/wiki/Themes>wiki</a> 页面。要查看更多主题，可以查看 <a href=https://github.com/robbyrussell/oh-my-zsh/wiki/External-themes>外部主题</a> wiki 页面。</p><p>大部分的主题是非常易于安装和使用的，仅仅需要改变 <code>.zshrc</code> 文件中的配置选项然后重新载入配置文件。</p><pre tabindex=0><code>➜ ~ sed -i &#39;s/_THEME=\&#34;robbyrussel\&#34;/_THEME=\&#34;linuxonly\&#34;/g&#39; ~/.zshrc
➜ ~ source ~/.zshrc
seth@darkstar:pts/0-&amp;gt;/home/skenlon (0) ➜
</code></pre><p>其他的主题可能需要一些额外的配置。例如，为了使用 <code>agnoster</code> 主题，你必须先安装 Powerline 字体。这是一个开源字体，如果你使用 Linux 操作系统的话，这个字体很可能在你的软件库中存在。使用下面的命令安装这个字体：</p><pre tabindex=0><code>➜ ~ sudo dnf install powerline-fonts
</code></pre><p>在配置文件中更改你的主题：</p><pre tabindex=0><code>➜ ~ sed -i &#39;s/_THEME=\&#34;linuxonly\&#34;/_THEME=\&#34;agnoster\&#34;/g&#39; ~/.zshrc
</code></pre><p>重新启动你的 Sehll（一个简单的 <code>source</code> 命令并不会起作用）。一旦重启，你就可以看到新的主题：</p><p><img src=/data/attachment/album/201910/05/120539pnofailixuohniou.jpg alt="agnoster theme" title="agnoster theme"></p><h3 id=安装插件>安装插件</h3><p>Oh My Zsh 有超过 200 的插件，你可以在 <code>.oh-my-zsh/plugins</code> 中看到它们。每一个扩展目录下都有一个 <code>README</code> 文件解释了这个插件的作用。</p><p>一些插件相当简单。例如，<code>dnf</code>、<code>ubuntu</code>、<code>brew</code> 和 <code>macports</code> 插件仅仅是为了简化与 DNF、Apt、Homebres 和 MacPorts 的交互操作而定义的一些别名。</p><p>而其他的一些插件则较为复杂，<code>git</code> 插件默认是被激活使用的。当你的目录是一个 git 仓库的时候，这个扩展就会更新你的 Shell 提示符，以显示当前的分支和是否有未合并的更改。</p><p>为了激活这个扩展，你可以将这个扩展添加到你的配置文件 <code>~/.zshrc</code> 中。例如，你可以添加 <code>dnf</code> 和 <code>pass</code> 插件，按照如下的方式更改：</p><pre tabindex=0><code>plugins=(git dnf pass)
</code></pre><p>保存修改，重新启动你的 Shell。</p><pre tabindex=0><code>% source ~/.zshrc
</code></pre><p>这个扩展现在就可以使用了。你可以通过使用 <code>dnf</code> 提供的别名来测试一下：</p><pre tabindex=0><code>% dnfs fop
====== Name Exactly Matched: fop ======
fop.noarch : XSL-driven print formatter
</code></pre><p>不同的插件做不同的事，因此你可以一次安装一两个插件来帮你学习新的特性和功能。</p><h3 id=兼容性>兼容性</h3><p>一些 Oh My Zsh 插件具有通用性。如果你看到一个插件声称它可以与 Bash 兼容，那么它就可以在你自己的 Bash 中使用。另一些插件需要 Zsh 提供的特定功能。因此，它们并不是所有都能工作。但是你可以添加一些其他的插件，例如 <code>dnf</code>、<code>ubuntu</code>、<code>firewalld</code>，以及其他的一些插件。你可以使用 <code>source</code> 使你的选择生效。例如：</p><pre tabindex=0><code>if [ -d $HOME/.local/share/oh-my-zsh/plugins ]; then
        source $HOME/.local/share/oh-my-zsh/plugins/dnf/dnf.plugin.zsh
fi
</code></pre><h3 id=选择或者不选择-zsh>选择或者不选择 Zsh</h3><p>Z-shell 的内置功能和它由社区贡献的扩展功能都非常强大。你可以把它当成你的主 Shell 使用，你也可以在你休闲娱乐的时候尝试一下。这取决于你的爱好。</p><p>什么是你最喜爱的主题和扩展可以在下方的评论告诉我们！</p><hr><p>via: <a href=https://opensource.com/article/19/9/adding-plugins-zsh>https://opensource.com/article/19/9/adding-plugins-zsh</a></p><p>作者：<a href=https://opensource.com/users/seth>Seth Kenlon</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/amwps290>amwps290</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/zsh/ rel=tag>Zsh</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>