<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何在 Ubuntu 16.04 上安装 OTRS （开源问题单系统） - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何在 Ubuntu 16.04 上安装 OTRS （开源问题单系统）"><meta property="og:description" content="OTRS ，即开源问题单ticket申请系统，是一个用于客户服务、帮助台和 IT 服务管理的开源问题单软件。对于那些需要管理票据、投诉、支持请求或其他类型的报告的公司和组织来说，这是一个问题单解决方案。"><meta property="og:type" content="article"><meta property="og:url" content="/article-8563-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-06-02T08:23:00+00:00"><meta property="article:modified_time" content="2017-06-02T08:23:00+00:00"><meta itemprop=name content="如何在 Ubuntu 16.04 上安装 OTRS （开源问题单系统）"><meta itemprop=description content="OTRS ，即开源问题单ticket申请系统，是一个用于客户服务、帮助台和 IT 服务管理的开源问题单软件。对于那些需要管理票据、投诉、支持请求或其他类型的报告的公司和组织来说，这是一个问题单解决方案。"><meta itemprop=datePublished content="2017-06-02T08:23:00+00:00"><meta itemprop=dateModified content="2017-06-02T08:23:00+00:00"><meta itemprop=wordCount content="670"><meta itemprop=keywords content="OTRS,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何在 Ubuntu 16.04 上安装 OTRS （开源问题单系统）</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-06-02T08:23:00Z>June 02, 2017</time></div></div></header><div class="content post__content clearfix"><p><a href=https://www.otrs.com>OTRS</a> ，即开源 问题单 （ ticket ） 申请系统，是一个用于客户服务、帮助台和 IT 服务管理的开源问题单软件。该软件是用 Perl 和 javascript 编写的。对于那些需要管理票据、投诉、支持请求或其他类型的报告的公司和组织来说，这是一个问题单解决方案。OTRS 支持包括 MySQL、PostgreSQL、Oracle 和 SQL Server 在内的多个数据库系统，它是一个可以安装在 Windows 和 Linux 上的多平台软件。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/002835o3lba37az40sn7w7.png alt></p><p>在本教程中，我将介绍如何在 Ubuntu 16.04 上安装和配置 OTRS。我将使用 PostgreSQL 作为 OTRS 的数据库，将 Apache Web 服务器用作 Web 服务器。</p><p><strong>先决条件</strong></p><ul><li>Ubuntu 16.04。</li><li>最小 2GB 的内存。</li><li>root 权限</li></ul><h3 id=步骤-1---安装-apache-和-postgresql>步骤 1 - 安装 Apache 和 PostgreSQL</h3><p>在第一步中，我们将安装 Apache Web 服务器以及 PostgreSQL。我们将从 ubuntu 仓库中使用最新的版本。</p><p>使用 SSH 登录到你的 Ubuntu 服务器中：</p><pre tabindex=0><code>ssh root@192.168.33.14
</code></pre><p>更新 Ubuntu 仓库。</p><pre tabindex=0><code>sudo apt-get update
</code></pre><p>使用 apt 安装 Apache2 以及 PostgreSQL：</p><pre tabindex=0><code>sudo apt-get install -y apache2 libapache2-mod-perl2 postgresql
</code></pre><p>通过检查服务器端口确保 Apache 以及 PostgreSQL 运行了。</p><pre tabindex=0><code>netstat -plntu
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003032tkfmmhsmkczllk5q.png alt="Install Apache and PostgreSQL"></p><p>你可以看到 80 端口被 apache 使用了，5432 端口被 postgresql 数据库使用了。</p><h3 id=步骤-2---安装-perl-模块>步骤 2 - 安装 Perl 模块</h3><p>OTRS 基于 Perl，因此我们需要安装一些 OTRS 需要的 Perl 模块。</p><p>使用这个 apt 命令安装 perl 模块：</p><pre tabindex=0><code>sudo apt-get install -y libapache2-mod-perl2 libdbd-pg-perl libnet-dns-perl libnet-ldap-perl libio-socket-ssl-perl libpdf-api2-perl libsoap-lite-perl libgd-text-perl libgd-graph-perl libapache-dbi-perl libarchive-zip-perl libcrypt-eksblowfish-perl libcrypt-ssleay-perl libencode-hanextra-perl libjson-xs-perl libmail-imapclient-perl libtemplate-perl libtext-csv-xs-perl libxml-libxml-perl libxml-libxslt-perl libpdf-api2-simple-perl libyaml-libyaml-perl
</code></pre><p>安装完成后，我们需要为 apache 激活 Perl 模块，接着重启 apache 服务。</p><pre tabindex=0><code>a2enmod perl
systemctl restart apache2
</code></pre><p>接下来，使用下面的命令检查模块是否已经加载了：</p><pre tabindex=0><code>apachectl -M | sort
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003034r2xq945mpnjmok9p.png alt="Enable Apache Perl Module"></p><p>你可以在 “Loaded Modules” 部分下看到 <strong>perl_module</strong>。</p><h3 id=步骤-3---为-otrs-创建新用户>步骤 3 - 为 OTRS 创建新用户</h3><p>OTRS 是一个基于 web 的程序并且运行与 apache web 服务器下。为了安全，我们需要以普通用户运行它，而不是 root 用户。</p><p>使用 useradd 命令创建一个 <code>otrs</code> 新用户：</p><pre tabindex=0><code>useradd -r -d /opt/otrs -c &#39;OTRS User&#39; otrs
</code></pre><ul><li><code>-r</code>：将用户作为系统用户。</li><li><code>-d /opt/otrs</code>：在 <code>/opt/otrs</code> 下放置新用户的主目录。</li><li><code>-c</code>：备注。</li></ul><p>接下来，将 <code>otrs</code> 用户加入到 <code>www-data</code> 用户组，因为 apache 运行于 <code>www-data</code> 用户及用户组。</p><pre tabindex=0><code>usermod -a -G www-data otrs
</code></pre><p>在 <code>/etc/passwd</code> 文件中已经有 <code>otrs</code> 用户了。</p><pre tabindex=0><code>grep -rin otrs /etc/passwd
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003035yq4bzj8wbov88lfw.png alt="Create new user for OTRS"></p><p>OTRS 的新用户已经创建了。</p><h3 id=步骤-4---创建和配置数据库>步骤 4 - 创建和配置数据库</h3><p>在这节中，我们会为 OTRS 系统创建一个新 PostgreSQL 数据库，并对 PostgreSQL 数据库的配置做一些小的更改。</p><p>登录到 <code>postgres</code> 用户并访问 PostgreSQL shell。</p><pre tabindex=0><code>su - postgres
psql
</code></pre><p>创建一个新的角色 <code>otrs</code>，密码是 <code>myotrspw</code>，并且是非特权用户。</p><pre tabindex=0><code>create user otrs password &#39;myotrspw&#39; nosuperuser;
</code></pre><p>接着使用 <code>otrs</code> 用户权限创建一个新的 <code>otrs</code> 数据库：</p><pre tabindex=0><code>create database otrs owner otrs;
\q
</code></pre><p>接下来为 <code>otrs</code> 角色验证编辑 PostgreSQL 配置文件。</p><pre tabindex=0><code>vim /etc/postgresql/9.5/main/pg_hba.conf
</code></pre><p>在 84 行后粘贴下面的配置：</p><pre tabindex=0><code>local   otrs            otrs                                    password
host    otrs            otrs            127.0.0.1/32            password
</code></pre><p>保存文件并退出 vim</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003036wbum160m6374qe1m.png alt="Database Authentication OTRS"></p><p>使用 <code>exit</code> 回到 root 权限并重启 PostgreSQL：</p><pre tabindex=0><code>exit
systemctl restart postgresql
</code></pre><p>PostgreSQL 已经为 OTRS 的安装准备好了。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003041y8tetlu8tw94m891.png alt="Configure PostgreSQL for OTRS"></p><h3 id=步骤-5---下载和配置-otrs>步骤 5 - 下载和配置 OTRS</h3><p>在本教程中，我们会使用 OTRS 网站中最新的版本。</p><p>进入 <code>/opt</code> 目录并使用 <code>wget</code> 命令下载 OTRS 5.0：</p><pre tabindex=0><code>cd /opt/
wget http://ftp.otrs.org/pub/otrs/otrs-5.0.16.tar.gz
</code></pre><p>展开该 otrs 文件，重命名目录并更改所有 otrs 的文件和目录的所属人为 <code>otrs</code>。</p><pre tabindex=0><code>tar -xzvf otrs-5.0.16.tar.gz
mv otrs-5.0.16 otrs
chown -R otrs:otrs otrs
</code></pre><p>接下来，我们需要检查系统并确保可以安装 OTRS 了。</p><p>使用下面的 otrs 脚本命令检查 OTRS 安装需要的系统软件包：</p><pre tabindex=0><code>/opt/otrs/bin/otrs.CheckModules.pl
</code></pre><p>确保所有的结果是对的，这意味着我们的服务器可以安装 OTRS 了。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003044ozhfpofgr73c1o3k.png alt="OTRS Chek Module needed for Installation"></p><p>OTRS 已下载，并且我们的服务器可以安装 OTRS 了。</p><p>接下，进入 otrs 目录并复制配置文件。</p><pre tabindex=0><code>cd /opt/otrs/
cp Kernel/Config.pm.dist Kernel/Config.pm
</code></pre><p>使用 vim 编辑 <code>Config.pm</code> 文件：</p><pre tabindex=0><code>vim Kernel/Config.pm
</code></pre><p>更改 42 行的数据库密码：</p><pre tabindex=0><code>$Self-&gt;{DatabasePw} = &#39;myotrspw&#39;;
</code></pre><p>注释 45 行的 MySQL 数据库支持：</p><pre tabindex=0><code># $Self-&gt;{DatabaseDSN} = &#34;DBI:mysql:database=$Self-&gt;{Database};host=$Self-&gt;{DatabaseHost};&#34;;
</code></pre><p>取消注释 49 行的 PostgreSQL 数据库支持：</p><pre tabindex=0><code>$Self-&gt;{DatabaseDSN} = &#34;DBI:Pg:dbname=$Self-&gt;{Database};&#34;;
</code></pre><p>保存文件并退出 vim。</p><p>接着编辑 apache 启动文件来启用 PostgreSQL 支持。</p><pre tabindex=0><code>vim scripts/apache2-perl-startup.pl
</code></pre><p>取消注释 60 和 61 行：</p><pre tabindex=0><code># enable this if you use postgresql
use DBD::Pg ();
use Kernel::System::DB::postgresql;
</code></pre><p>保存文件并退出编辑器。</p><p>最后，检查缺失的依赖和模块。</p><pre tabindex=0><code>perl -cw /opt/otrs/bin/cgi-bin/index.pl
perl -cw /opt/otrs/bin/cgi-bin/customer.pl
perl -cw /opt/otrs/bin/otrs.Console.pl
</code></pre><p>你可以在下面的截图中看到结果是 “<strong>OK</strong>”：</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003046w5jfvx5jf21ffy44.png alt="Check all modules again"></p><h3 id=步骤-6---导入样本数据库>步骤 6 - 导入样本数据库</h3><p>在本教程中，我们会使用样本数据库，这可以在脚本目录中找到。因此我们只需要将所有的样本数据库以及表结构导入到第 4 步创建的数据库中。</p><p>登录到 <code>postgres</code> 用户并进入 otrs 目录中。</p><pre tabindex=0><code>su - postgres
cd /opt/otrs/
</code></pre><p>作为 otrs 用户使用 <code>psql</code> 命令插入数据库以及表结构。</p><pre tabindex=0><code>psql -U otrs -W -f scripts/database/otrs-schema.postgresql.sql otrs
psql -U otrs -W -f scripts/database/otrs-initial_insert.postgresql.sql otrs
psql -U otrs -W -f scripts/database/otrs-schema-post.postgresql.sql otrs
</code></pre><p>在需要的时候输入数据库密码 <code>myotrspw</code>。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003051uuiinj58sa6tial7.png alt="Import OTRS Sample Database"></p><h3 id=步骤-7---启动-otrs>步骤 7 - 启动 OTRS</h3><p>数据库以及 OTRS 已经配置了，现在我们可以启动 OTRS。</p><p>将 otrs 的文件及目录权限设置为 <code>www-data</code> 用户和用户组。</p><pre tabindex=0><code>/opt/otrs/bin/otrs.SetPermissions.pl --otrs-user=www-data --web-group=www-data
</code></pre><p>通过创建一个新的链接文件到 apache 虚拟主机目录中启用 otrs apache 配置。</p><pre tabindex=0><code>ln -s /opt/otrs/scripts/apache2-httpd.include.conf /etc/apache2/sites-available/otrs.conf
</code></pre><p>启用 otrs 虚拟主机并重启 apache。</p><pre tabindex=0><code>a2ensite otrs
systemctl restart apache2
</code></pre><p>确保 apache 启动没有错误。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003052ub7vjebbvdz7vk0x.png alt="Enable OTRS Apache Virtual Host"></p><h3 id=步骤-8---配置-otrs-计划任务>步骤 8 - 配置 OTRS 计划任务</h3><p>OTRS 已经安装并运行在 Apache Web 服务器中了，但是我们仍然需要配置 OTRS 计划任务。</p><p>登录到 <code>otrs</code> 用户，接着以 otrs 用户进入 <code>var/cron</code> 目录。</p><pre tabindex=0><code>su - otrs
cd var/cron/
pwd
</code></pre><p>使用下面的命令复制所有 <code>.dist</code> 计划任务脚本：</p><pre tabindex=0><code>for foo in *.dist; do cp $foo `basename $foo .dist`; done
</code></pre><p>使用 <code>exit</code> 回到 root 权限，并使用 otrs 用户启动计划任务脚本。</p><pre tabindex=0><code>exit
/opt/otrs/bin/Cron.sh start otrs
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003100yff5sbswfj5fllo5.png alt="Enable OTRS Cron"></p><p>接下来，手动收取电子邮件的 PostMaster 创建一个新的计划任务。我会配置为每 2 分钟收取一次邮件。</p><pre tabindex=0><code>su - otrs
crontab -e
</code></pre><p>粘贴下面的配置：</p><pre tabindex=0><code>*/2 * * * *    $HOME/bin/otrs.PostMasterMailbox.pl &gt;&gt; /dev/null
</code></pre><p>保存并退出。</p><p>现在停止 otrs 守护进程并再次启动。</p><pre tabindex=0><code>bin/otrs.Daemon.pl stop
bin/otrs.Daemon.pl start
</code></pre><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003104avxzlal61x6tyhlt.png alt="Enable OTRS Fetching Email"></p><p>OTRS 安装以及配置完成了。</p><h3 id=步骤-9---测试-otrs>步骤 9 - 测试 OTRS</h3><p>打开你的 web 浏览器并输入你的服务器 IP 地址： <a href=http://192.168.33.14/otrs/>http://192.168.33.14/otrs/</a></p><p>使用默认的用户 <code>root@localhost</code> 以及密码 <code>root</code> 登录。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003107dkdnnxzlxpg8dsz5.png alt="Installation Successfully OTRS Home Page"></p><p>使用默认的 root 账户你会看到一个警告。点击警告信息来创建一个新的 admin root 用户。</p><p>下面是用另外的 admin root 用户登录后出现的 admin 页面，这里没有出现错误信息。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003109y9cw28ccvdchn1y1.png alt="OTRS Admin Dashboard Without Error Messages"></p><p>如果你想作为客户登录，你可以使用 <code>customer.pl</code> ：<a href=http://192.168.33.14/otrs/customer.pl>http://192.168.33.14/otrs/customer.pl</a></p><p>你会看到客户登录界面，输入客户的用户名和密码。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003109pntzn1nbop286yt1.png alt="OTRS Customer Login Page"></p><p>下面是一个创建新单据的客户页面。</p><p><img src=https://img.linux.net.cn/data/attachment/album/201706/02/003112xlvltyvymltbe99z.png alt="Customer Open Ticket"></p><h3 id=步骤-10---疑难排查>步骤 10 - 疑难排查</h3><p>如果你仍旧看到 “OTRS Daemon is not running” 的错误，你可以像这样调试 OTRS 守护进程。</p><pre tabindex=0><code>su - otrs
cd /opt/otrs/
</code></pre><p>停止 OTRS 守护进程：</p><pre tabindex=0><code>bin/otrs.Daemon.pl stop
</code></pre><p>使用 <code>--debug</code> 选项启动 OTRS 守护进程。</p><pre tabindex=0><code>bin/otrs.Daemon.pl start --debug
</code></pre><h3 id=参考>参考</h3><ul><li><a href="http://wiki.otterhub.org/index.php?title=Installation_on_Debian_6_with_Postgres">http://wiki.otterhub.org/index.php?title=Installation<em>on</em>Debian<em>6</em>with_Postgres</a></li><li><a href=http://www.geoffstratton.com/otrs-installation-5011-ubuntu-1604>http://www.geoffstratton.com/otrs-installation-5011-ubuntu-1604</a></li><li><a href=https://www.linkedin.com/pulse/ticketing-system-otrs-ubuntu-1404-muhammad-faiz-khan>https://www.linkedin.com/pulse/ticketing-system-otrs-ubuntu-1404-muhammad-faiz-khan</a></li></ul><hr><p>via: <a href=https://www.howtoforge.com/tutorial/how-to-install-otrs-opensource-trouble-ticket-system-on-ubuntu-16-04/>https://www.howtoforge.com/tutorial/how-to-install-otrs-opensource-trouble-ticket-system-on-ubuntu-16-04/</a></p><p>作者：<a href=https://www.howtoforge.com/tutorial/how-to-install-otrs-opensource-trouble-ticket-system-on-ubuntu-16-04/>Muhammad Arul</a> 译者：<a href=https://github.com/geekpi>geekpi</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/otrs/ rel=tag>OTRS</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>