<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>如何查看 Linux 下 CPU、内存和交换分区的占用率？ - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="如何查看 Linux 下 CPU、内存和交换分区的占用率？"><meta property="og:description" content="在大多数情况下我们只想查看内存使用情况，并没有考虑占用的百分比究竟是多少。如果你想要了解这些信息，那你看这篇文章就对了。"><meta property="og:type" content="article"><meta property="og:url" content="/article-10595-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-06T21:04:30+00:00"><meta property="article:modified_time" content="2019-03-06T21:04:30+00:00"><meta itemprop=name content="如何查看 Linux 下 CPU、内存和交换分区的占用率？"><meta itemprop=description content="在大多数情况下我们只想查看内存使用情况，并没有考虑占用的百分比究竟是多少。如果你想要了解这些信息，那你看这篇文章就对了。"><meta itemprop=datePublished content="2019-03-06T21:04:30+00:00"><meta itemprop=dateModified content="2019-03-06T21:04:30+00:00"><meta itemprop=wordCount content="701"><meta itemprop=keywords content="内存,CPU,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>如何查看 Linux 下 CPU、内存和交换分区的占用率？</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-03-06T21:04:30Z>March 06, 2019</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201903/06/210413dczuxbzypax5h7au.jpg alt></p><p>在 Linux 下有很多可以用来查看内存占用情况的命令和选项，但是我并没有看见关于内存占用率的更多的信息。</p><p>在大多数情况下我们只想查看内存使用情况，并没有考虑占用的百分比究竟是多少。如果你想要了解这些信息，那你看这篇文章就对了。我们将会详细地在这里帮助你解决这个问题。</p><p>这篇教程将会帮助你在面对 Linux 服务器下频繁的内存高占用情况时，确定内存使用情况。</p><p>而在同时，如果你使用的是 <code>free -m</code> 或者 <code>free -g</code>，占用情况描述地也并不是十分清楚。</p><p>这些格式化命令属于 Linux 高级命令。它将会对 Linux 专家和中等水平 Linux 使用者非常有用。</p><h3 id=方法-1如何查看-linux-下内存占用率>方法-1：如何查看 Linux 下内存占用率？</h3><p>我们可以使用下面命令的组合来达到此目的。在该方法中，我们使用的是 <code>free</code> 和 <code>awk</code> 命令的组合来获取内存占用率。</p><p>如果你正在寻找其他有关于内存的文章，你可以导航到如下链接。这些文章有 <a href=https://www.2daygeek.com/free-command-to-check-memory-usage-statistics-in-linux/>free 命令</a>、<a href=https://www.2daygeek.com/smem-linux-memory-usage-statistics-reporting-tool/>smem 命令</a>、<a href=https://www.2daygeek.com/ps_mem-report-core-memory-usage-accurately-in-linux/>ps_mem 命令</a>、<a href=https://www.2daygeek.com/linux-vmstat-command-examples-tool-report-virtual-memory-statistics/>vmstat 命令</a> 及 <a href=https://www.2daygeek.com/easy-ways-to-check-size-of-physical-memory-ram-in-linux/>查看物理内存大小的多种方式</a>。</p><p>要获取不包含百分比符号的内存占用率：</p><pre tabindex=0><code>$ free -t | awk &#39;NR == 2 {print &#34;Current Memory Utilization is : &#34; $3/$2*100}&#39;
或
$ free -t | awk &#39;FNR == 2 {print &#34;Current Memory Utilization is : &#34; $3/$2*100}&#39;

Current Memory Utilization is : 20.4194
</code></pre><p>要获取不包含百分比符号的交换分区占用率：</p><pre tabindex=0><code>$ free -t | awk &#39;NR == 3 {print &#34;Current Swap Utilization is : &#34; $3/$2*100}&#39;
或
$ free -t | awk &#39;FNR == 3 {print &#34;Current Swap Utilization is : &#34; $3/$2*100}&#39;

Current Swap Utilization is : 0
</code></pre><p>要获取包含百分比符号及保留两位小数的内存占用率：</p><pre tabindex=0><code>$ free -t | awk &#39;NR == 2 {printf(&#34;Current Memory Utilization is : %.2f%&#34;), $3/$2*100}&#39;
或
$ free -t | awk &#39;FNR == 2 {printf(&#34;Current Memory Utilization is : %.2f%&#34;), $3/$2*100}&#39;

Current Memory Utilization is : 20.42%
</code></pre><p>要获取包含百分比符号及保留两位小数的交换分区占用率：</p><pre tabindex=0><code>$ free -t | awk &#39;NR == 3 {printf(&#34;Current Swap Utilization is : %.2f%&#34;), $3/$2*100}&#39;
或
$ free -t | awk &#39;FNR == 3 {printf(&#34;Current Swap Utilization is : %.2f%&#34;), $3/$2*100}&#39;

Current Swap Utilization is : 0.00%
</code></pre><p>如果你正在寻找有关于交换分区的其他文章，你可以导航至如下链接。这些链接有 <a href=https://www.2daygeek.com/how-to-create-extend-swap-partition-in-linux-using-lvm/>使用 LVM（逻辑盘卷管理）创建和扩展交换分区</a>，<a href=https://www.2daygeek.com/add-extend-increase-swap-space-memory-file-partition-linux/>创建或扩展交换分区的多种方式</a> 和 <a href=https://www.2daygeek.com/shell-script-create-add-extend-swap-space-linux/>创建/删除和挂载交换分区文件的多种方式</a>。</p><p>键入 <code>free</code> 命令会更好地作出阐释：</p><pre tabindex=0><code>$ free
              total        used        free      shared  buff/cache   available
Mem:          15867        3730        9868        1189        2269       10640
Swap:         17454           0       17454
Total:        33322        3730       27322
</code></pre><p>细节如下：</p><ul><li><code>free</code>：是一个标准命令，用于在 Linux 下查看内存使用情况。</li><li><code>awk</code>：是一个专门用来做文本数据处理的强大命令。</li><li><code>FNR == 2</code>：该命令给出了每一个输入文件的行数。其基本上用于挑选出给定的行（针对于这里，它选择的是行号为 2 的行）</li><li><code>NR == 2</code>：该命令给出了处理的行总数。其基本上用于过滤给出的行（针对于这里，它选择的是行号为 2 的行）</li><li><code>$3/$2*100</code>：该命令将列 3 除以列 2 并将结果乘以 100。</li><li><code>printf</code>：该命令用于格式化和打印数据。</li><li><code>%.2f%</code>：默认情况下，其打印小数点后保留 6 位的浮点数。使用后跟的格式来约束小数位。</li></ul><h3 id=方法-2如何查看-linux-下内存占用率>方法-2：如何查看 Linux 下内存占用率？</h3><p>我们可以使用下面命令的组合来达到此目的。在这种方法中，我们使用 <code>free</code>、<code>grep</code> 和 <code>awk</code> 命令的组合来获取内存占用率。</p><p>要获取不包含百分比符号的内存占用率：</p><pre tabindex=0><code>$ free -t | grep Mem | awk &#39;{print &#34;Current Memory Utilization is : &#34; $3/$2*100}&#39;
Current Memory Utilization is : 20.4228
</code></pre><p>要获取不包含百分比符号的交换分区占用率：</p><pre tabindex=0><code>$ free -t | grep Swap | awk &#39;{print &#34;Current Swap Utilization is : &#34; $3/$2*100}&#39;
Current Swap Utilization is : 0
</code></pre><p>要获取包含百分比符号及保留两位小数的内存占用率：</p><pre tabindex=0><code>$ free -t | grep Mem | awk &#39;{printf(&#34;Current Memory Utilization is : %.2f%&#34;), $3/$2*100}&#39;
Current Memory Utilization is : 20.43%
</code></pre><p>要获取包含百分比符号及保留两位小数的交换空间占用率：</p><pre tabindex=0><code>$ free -t | grep Swap | awk &#39;{printf(&#34;Current Swap Utilization is : %.2f%&#34;), $3/$2*100}&#39;
Current Swap Utilization is : 0.00%
</code></pre><h3 id=方法-1如何查看-linux-下-cpu-的占用率>方法-1：如何查看 Linux 下 CPU 的占用率？</h3><p>我们可以使用如下命令的组合来达到此目的。在这种方法中，我们使用 <code>top</code>、<code>print</code> 和 <code>awk</code> 命令的组合来获取 CPU 的占用率。</p><p>如果你正在寻找其他有关于 CPU（LCTT 译注：原文误为 memory）的文章，你可以导航至如下链接。这些文章有 <a href=https://www.2daygeek.com/linux-top-command-linux-system-performance-monitoring-tool/>top 命令</a>、<a href=https://www.2daygeek.com/linux-htop-command-linux-system-performance-resource-monitoring-tool/>htop 命令</a>、<a href=https://www.2daygeek.com/atop-system-process-performance-monitoring-tool/>atop 命令</a> 及 <a href=https://www.2daygeek.com/install-glances-advanced-real-time-linux-system-performance-monitoring-tool-on-centos-fedora-ubuntu-debian-opensuse-arch-linux/>Glances 命令</a>。</p><p>如果在输出中展示的是多个 CPU 的情况，那么你需要使用下面的方法。</p><pre tabindex=0><code>$ top -b -n1 | grep ^%Cpu
%Cpu0  :  5.3 us,  0.0 sy,  0.0 ni, 94.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu1  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu2  :  0.0 us,  0.0 sy,  0.0 ni, 94.7 id,  0.0 wa,  0.0 hi,  5.3 si,  0.0 st
%Cpu3  :  5.3 us,  0.0 sy,  0.0 ni, 94.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu4  : 10.5 us, 15.8 sy,  0.0 ni, 73.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu5  :  0.0 us,  5.0 sy,  0.0 ni, 95.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu6  :  5.3 us,  0.0 sy,  0.0 ni, 94.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
%Cpu7  :  5.3 us,  0.0 sy,  0.0 ni, 94.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
</code></pre><p>要获取不包含百分比符号的 CPU 占用率：</p><pre tabindex=0><code>$ top -b -n1 | grep ^%Cpu | awk &#39;{cpu+=$9}END{print &#34;Current CPU Utilization is : &#34; 100-cpu/NR}&#39;
Current CPU Utilization is : 21.05
</code></pre><p>要获取包含百分比符号及保留两位小数的 CPU 占用率：</p><pre tabindex=0><code>$ top -b -n1 | grep ^%Cpu | awk &#39;{cpu+=$9}END{printf(&#34;Current CPU Utilization is : %.2f%&#34;), 100-cpu/NR}&#39;
Current CPU Utilization is : 14.81%
</code></pre><h3 id=方法-2如何查看-linux-下-cpu-的占用率>方法-2：如何查看 Linux 下 CPU 的占用率？</h3><p>我们可以使用如下命令的组合来达到此目的。在这种方法中，我们使用的是 <code>top</code>、<code>print</code>/<code>printf</code> 和 <code>awk</code> 命令的组合来获取 CPU 的占用率。</p><p>如果在单个输出中一起展示了所有的 CPU 的情况，那么你需要使用下面的方法。</p><pre tabindex=0><code>$ top -b -n1 | grep ^%Cpu
%Cpu(s): 15.3 us, 7.2 sy, 0.8 ni, 69.0 id, 6.7 wa, 0.0 hi, 1.0 si, 0.0 st
</code></pre><p>要获取不包含百分比符号的 CPU 占用率：</p><pre tabindex=0><code>$ top -b -n1 | grep ^%Cpu | awk &#39;{print &#34;Current CPU Utilization is : &#34; 100-$8}&#39;
Current CPU Utilization is : 5.6
</code></pre><p>要获取包含百分比符号及保留两位小数的 CPU 占用率：</p><pre tabindex=0><code>$ top -b -n1 | grep ^%Cpu | awk &#39;{printf(&#34;Current CPU Utilization is : %.2f%&#34;), 100-$8}&#39;
Current CPU Utilization is : 5.40%
</code></pre><p>如下是一些细节：</p><ul><li><code>top</code>：是一种用于查看当前 Linux 系统下正在运行的进程的非常好的命令。</li><li><code>-b</code>：选项允许 <code>top</code> 命令切换至批处理的模式。当你从本地系统运行 <code>top</code> 命令至远程系统时，它将会非常有用。</li><li><code>-n1</code>：迭代次数。</li><li><code>^%Cpu</code>：过滤以 <code>%CPU</code> 开头的行。</li><li><code>awk</code>：是一种专门用来做文本数据处理的强大命令。</li><li><code>cpu+=$9</code>：对于每一行，将第 9 列添加至变量 <code>cpu</code>。</li><li><code>printf</code>：该命令用于格式化和打印数据。</li><li><code>%.2f%</code>：默认情况下，它打印小数点后保留 6 位的浮点数。使用后跟的格式来限制小数位数。</li><li><code>100-cpu/NR</code>：最终打印出 CPU 平均占用率，即用 100 减去其并除以行数。</li></ul><hr><p>via: <a href=https://www.2daygeek.com/linux-check-cpu-memory-swap-utilization-percentage/>https://www.2daygeek.com/linux-check-cpu-memory-swap-utilization-percentage/</a></p><p>作者：<a href=https://www.2daygeek.com/author/vinoth/>Vinoth Kumar</a> 选题：<a href=https://github.com/lujun9972>lujun9972</a> 译者：<a href=https://github.com/An-DJ>An-DJ</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%86%85%E5%AD%98/ rel=tag>内存</a></li><li class=tags__item><a class="tags__link btn" href=/tags/cpu/ rel=tag>CPU</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>