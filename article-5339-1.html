<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>走向 Docker - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="走向 Docker"><meta property="og:description" content="这是系列的第一篇文章，这系列讲述了我的公司如何把基础服务从PaaS迁移到Docker上。如果你愿意，你可以直接跳过介绍（这篇文章）直接看技术相关的话题（链接在页面的底部）。  上个月，我一直在折腾开发环境。这是我个人故事和经验，关于尝试用Docker简化Rails应用的部署过程。 当我在2012年创建我的公司  Touchware时，我还是一个独立开发者。很多事情很小，不复杂，他们不需要很多维护，他们也不需要部署到很多机器上。经过过去一年的发展，我们成长了很多（我们现在是是拥有10个人的团队）而且我们的服务端的程序和API无论在范围和规模"><meta property="og:type" content="article"><meta property="og:url" content="/article-5339-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-04-27T10:55:00+00:00"><meta property="article:modified_time" content="2015-04-27T10:55:00+00:00"><meta itemprop=name content="走向 Docker"><meta itemprop=description content="这是系列的第一篇文章，这系列讲述了我的公司如何把基础服务从PaaS迁移到Docker上。如果你愿意，你可以直接跳过介绍（这篇文章）直接看技术相关的话题（链接在页面的底部）。  上个月，我一直在折腾开发环境。这是我个人故事和经验，关于尝试用Docker简化Rails应用的部署过程。 当我在2012年创建我的公司  Touchware时，我还是一个独立开发者。很多事情很小，不复杂，他们不需要很多维护，他们也不需要部署到很多机器上。经过过去一年的发展，我们成长了很多（我们现在是是拥有10个人的团队）而且我们的服务端的程序和API无论在范围和规模"><meta itemprop=datePublished content="2015-04-27T10:55:00+00:00"><meta itemprop=dateModified content="2015-04-27T10:55:00+00:00"><meta itemprop=wordCount content="54"><meta itemprop=keywords content="Docker,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>走向 Docker</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-04-27T10:55:00Z>April 27, 2015</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201504/27/211511spw0shxsaaamxa80.jpg alt></p><p>[TL;DR] 这是系列的第一篇文章，这系列讲述了我的公司如何把基础服务从PaaS迁移到Docker上。如果你愿意，你可以直接跳过介绍（这篇文章）直接看技术相关的话题（链接在页面的底部）。</p><hr><p>上个月，我一直在折腾开发环境。这是我个人故事和经验，关于尝试用Docker简化Rails应用的部署过程。</p><p>当我在2012年创建我的公司 – <a href=http://www.touchwa.re/>Touchware</a>时，我还是一个独立开发者。很多事情很小，不复杂，他们不需要很多维护，他们也不需要部署到很多机器上。经过过去一年的发展，我们成长了很多（我们现在是是拥有10个人的团队）而且我们的服务端的程序和API无论在范围和规模方面都有增长。</p><h3 id=第1步---heroku>第1步 - Heroku</h3><p>我们还是个小公司，我们需要让事情运行地尽可能平稳。当我们寻找可行的解决方案时，我们打算坚持用那些可以帮助我们减轻对硬件依赖负担的工具。由于我们主要开发Rails应用，而Heroku对RoR、常用的数据库和缓存（Postgres/Mongo/Redis等）有很好的支持，最明智的选择就是用<a href=http://www.heroku.com>Heroku</a> 。我们就是这样做的。</p><p>Heroku有很好的技术支持和文档，使得部署非常轻松。唯一的问题是，当你处于起步阶段，你需要很多开销。这不是最好的选择，真的。</p><h3 id=第2步---dokku>第2步 - Dokku</h3><p>为了尝试并降低成本，我们决定试试Dokku。<a href=https://github.com/progrium/dokku>Dokku</a>,引用GitHub上的一句话</p><blockquote><p>Docker 驱动的 mini-Heroku，只用了一百来行的 bash 脚本</p></blockquote><p>我们启用的<a href=http://www.digitalocean.com>DigitalOcean</a>上的很多台机器，都预装了Dokku。Dokku非常像Heroku，但是当你有复杂的项目需要调整配置参数或者是需要特殊的依赖时，它就不能胜任了。我们有一个应用，它需要对图片进行多次转换，我们把我们Rails应用的托管到基于Dokku的Docker容器，但是无法安装一个适合版本的imagemagick到里面。尽管我们还有很多应用运行在Dokku上，但我们还是不得不把一些迁移回Heroku。</p><h3 id=第3步---docker>第3步 - Docker</h3><p>几个月前，由于开发环境和生产环境的问题重新出现，我决定试试Docker。简单来说，Docker让开发者容器化应用、简化部署。由于一个Docker容器本质上已经包含项目运行所需要的所有依赖，只要它能在你的笔记本上运行地很好，你就能确保它将也能在任何一个别的远程服务器的生产环境上运行，包括Amazon的EC2和DigitalOcean上的VPS。</p><p>就我个人的看法来说，Docker 特别有意思的原因是:</p><ul><li>它促进了模块化和关注点分离：你只需要去考虑应用的逻辑部分（负载均衡：1个容器；数据库：1个容器；web服务器：1个容器）；</li><li>在部署的配置上非常灵活：容器可以被部署在各种硬件上，也可以容易地重新部署在不同的服务器和不同的提供商；</li><li>它允许非常细粒度地优化应用的运行环境：你可以利用你的容器来创建镜像，所以你有很多选择来配置环境。</li></ul><p>它也有一些缺点：</p><ul><li>它的学习曲线非常的陡峭（这是从一个软件开发者的角度来看，而不是经验丰富的运维人员）；</li><li>搭建环境不简单，尤其是还需要自己搭建一个私有的registry/repository (后面有关于它的详细内容)。</li></ul><p>下面是一些提示。这个系列的最后一周，我将把他们和一些新的放在一起。</p><hr><p>在下面的文章中，我们将看到如何建立一个半自动化的基于Docker的部署系统。</p><ul><li><a href=/article-5379-1.html>建立私有的Docker registry</a></li><li><a href=/article-5408-1.html>自动化部署基于 Docker 的 Rails 应用</a></li></ul><hr><p>via: <a href=http://cocoahunter.com/2015/01/23/docker-1/>http://cocoahunter.com/2015/01/23/docker-1/</a></p><p>作者：<a href=http://cocoahunter.com/author/michelangelo/>Michelangelo Chasseur</a> 译者：<a href=https://github.com/mtunique>mtunique</a> 校对：<a href=https://github.com/wxy>wxy</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创翻译，<a href=http://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/docker/ rel=tag>Docker</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>