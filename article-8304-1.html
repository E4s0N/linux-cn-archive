<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>开源 ERP 软件 Odoo 提速指南 - Linux.cn Archive</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="开源 ERP 软件 Odoo 提速指南"><meta property="og:description" content="Odoo 是最流行的 ERP（企业资源计划）软件，它由 Python 编写，使用 PostgreSQL 作为后端数据库。Odoo 社区版是免费的开源软件"><meta property="og:type" content="article"><meta property="og:url" content="/article-8304-1.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-03-14T10:00:00+00:00"><meta property="article:modified_time" content="2017-03-14T10:00:00+00:00"><meta itemprop=name content="开源 ERP 软件 Odoo 提速指南"><meta itemprop=description content="Odoo 是最流行的 ERP（企业资源计划）软件，它由 Python 编写，使用 PostgreSQL 作为后端数据库。Odoo 社区版是免费的开源软件"><meta itemprop=datePublished content="2017-03-14T10:00:00+00:00"><meta itemprop=dateModified content="2017-03-14T10:00:00+00:00"><meta itemprop=wordCount content="325"><meta itemprop=keywords content="ERP,Odoo,openerp,"><link rel=preconnect href=https://fonts.bunny.net crossorigin><link rel=dns-prefetch href=//fonts.bunny.net><link rel=dns-prefetch href=//fonts.bunny.net><link rel=stylesheet href="https://fonts.bunny.net/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Linux.cn Archive" rel=home><div class="logo__item logo__text"><div class=logo__title>Linux.cn Archive</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>Home</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>Categories</span></a></li><li class=menu__item><a class=menu__link href=/tags/><span class=menu__text>Tags</span></a></li><li class=menu__item><a class=menu__link href><span class=menu__text>RSS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>开源 ERP 软件 Odoo 提速指南</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-03-14T10:00:00Z>March 14, 2017</time></div></div></header><div class="content post__content clearfix"><p><img src=/data/attachment/album/201703/14/100026rz44ja8lzpryj474.jpg alt="speed up odoo"></p><p>Odoo 是最流行的 ERP（企业资源计划）软件，它由 Python 编写，使用 PostgreSQL 作为后端数据库。Odoo 社区版是免费的开源软件，它囊括了项目管理，生产、财务、记账和销售管理，仓储管理，人力资源管理，甚至还有更多项目。里面包含了 30 个核心模块，以及超过 3000 个社区模块。Odoo 部署了大量的模块，数据库里也包含了庞大的数据等等，这些都使得这个软件比较复杂，可能会导致效率低下。Odoo 的两个主要瓶颈在于磁盘访问，以及数据库查询时间。</p><p>为了提升 Odoo 实例的性能，你可以：</p><ul><li>使用一个快速磁盘驱动器来存储（最好是 SSD）。</li><li>使用<a href=https://www.rosehosting.com/linux-vps-hosting.html>内存充足的 Linux VPS</a>。</li><li>在 Odoo 中激活 多处理器模式 multiprocessing mode 。</li><li>正确配置并优化 PostgreSQL 服务。</li></ul><h3 id=获得一台有着更多内存的-ssd-vps>获得一台有着更多内存的 SSD VPS</h3><p>正如我们先前提到的，随机磁盘访问速度是 Odoo 的主要瓶颈之一。因此，要确保 Odoo 部署在一台<a href=https://www.rosehosting.com/linux-vps-hosting.html>基于 SSD 的 VPS</a> 上。由于 Odoo 是一个对资源十分敏感的应用，因此始终要把它安装在一台有着更多 RAM 的 VPS 上，如果可能，将整个 Odoo 实例及其数据库加载到 RAM 中。固态磁盘驱动器尤其以随机存取见长，而且由于 SSD 没有任何活动部件，它们能够取得数百倍于传统机械硬盘驱动器的随机存取 IOPS（LCTT译注：即每秒读写操作的次数）。如果服务器没有采用 SSD 来驱动或提速，那么不管你对 Odoo 做多少优化和配置都无济于事，它仍然会很慢。所以，获得正确的主机来部署 Odoo 是提升其性能的最重要因素。</p><p>其它 Odoo 优化包括：</p><h3 id=在-odoo-配置中启用多处理器选项>在 Odoo 配置中启用多处理器选项</h3><p>要实现此功能，请定位到 openerp-server 二进制文件：</p><pre tabindex=0><code>#updatedb
#locate openerp-server

/usr/bin/openerp-server
</code></pre><p>执行以下命令：</p><pre tabindex=0><code>#/usr/bin/openerp-server --help
</code></pre><p>该命令的输出结果如下：</p><pre tabindex=0><code>Usage: openerp-server [options]

Options:
  --version             show program&#39;s version number and exit

  (...)

  Multiprocessing options:
    --workers=WORKERS   Specify the number of workers, 0 disable prefork mode.
    --limit-memory-soft=LIMIT_MEMORY_SOFT
                        Maximum allowed virtual memory per worker, when
                        reached the worker be reset after the current request
                        (default 671088640 aka 640MB).
    --limit-memory-hard=LIMIT_MEMORY_HARD
                        Maximum allowed virtual memory per worker, when
                        reached, any memory allocation will fail (default
                        805306368 aka 768MB).
    --limit-time-cpu=LIMIT_TIME_CPU
                        Maximum allowed CPU time per request (default 60).
    --limit-time-real=LIMIT_TIME_REAL
                        Maximum allowed Real time per request (default 120).
    --limit-request=LIMIT_REQUEST
                        Maximum number of request to be processed per worker
                        (default 8192).
</code></pre><p>工作进程的数量应该和分配到 VPS 的 CPU 核心数一样，或者，如果你想为 PostgreSQL 数据库、cron 任务、或者其它和 Odoo 实例安装在同一台 VPS 上的其它应用预留出一些 CPU 核心，那么你可以将工作进程数设置为一个比 VPS 上可用 CPU 核心更低的值，以避免资源耗尽。</p><p><code>limit-memory-soft</code> 和 <code>limit-memory-hard</code> 参数不言自明，你可以使用默认值，也可以根据 VPS 上的实际可用 RAM 来进行修改。</p><p>例如，如果你的 VPS 有 8 个 CPU 核心，以及 16 GB 内存，那么你可以将工作进程数设置为 17（CPU 核心数 x 2 + 1），<code>limit-memory-soft</code> 总值设置为 640 x 17 = 10880 MB，而 <code>limit-memory-hard</code> 总数设置为 68MB x 17 = 13056 MB，这样，Odoo 就会有总计达 12.75 GB 的 RAM。</p><p>例如，在一台拥有 16 GB RAM 和 8 个 CPU 核心的 VPS 上，编辑 Odoo 配置文件（如 <code>/etc/odoo-server.conf</code>），并添加以下行：</p><pre tabindex=0><code>vi /etc/odoo-server.conf
</code></pre><pre tabindex=0><code>workers = 17

limit_memory_hard = 805306368

limit_memory_soft = 671088640

limit_request = 8192

limit_time_cpu = 60

limit_time_real = 120

max_cron_threads = 2
</code></pre><p>别忘了重启 Odoo 让修改生效。</p><h3 id=正确配置并优化-postgresql>正确配置并优化 PostgreSQL</h3><p>对于 PostgreSQL 优化，及时将它更新到最新版本是一个不错的主意。在 PostgreSQL 配置文件（<code>pg_hba.conf</code>）中，有两个设置需要修改：<code>shared_buffers</code> 和 <code>effective_cache_size</code>。将 <code>shared_buffers</code> 设置为可用内存的 20%，<code>effective_cache_size</code> 设置为可用内存的 50%。</p><p>例如，如果 Odoo 安装到了一台 16 GB RAM 的 SSD VPS 上，那么在 <code>pg_hba.conf</code> 中使用如下设置：</p><pre tabindex=0><code>vi /var/lib/postgresql/data/pg_hba.conf
</code></pre><pre tabindex=0><code>shared_buffers = 3072MB
effective_cache_size = 8192MB
</code></pre><p>重启 PostgreSQL 服务来让修改生效。</p><p>同时，也别忘了周期性手动执行 ‘<strong><a href=https://wiki.postgresql.org/wiki/Introduction_to_VACUUM,_ANALYZE,_EXPLAIN,_and_COUNT>VACUUM</a></strong>’。此操作会将陈旧或临时数据清理干净，但请牢记，它会大量占用 CPU 和磁盘使用。</p><hr><p>via: <a href=https://www.rosehosting.com/blog/how-to-speed-up-odoo/>https://www.rosehosting.com/blog/how-to-speed-up-odoo/</a></p><p>作者：<a href=https://www.rosehosting.com/>rosehosting.com</a> 译者：<a href=https://github.com/GOLinux>GOLinux</a> 校对：<a href=https://github.com/jasminepeng>jasminepeng</a></p><p>本文由 <a href=https://github.com/LCTT/TranslateProject>LCTT</a> 原创编译，<a href=https://linux.cn/>Linux中国</a> 荣誉推出</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/erp/ rel=tag>ERP</a></li><li class=tags__item><a class="tags__link btn" href=/tags/odoo/ rel=tag>Odoo</a></li><li class=tags__item><a class="tags__link btn" href=/tags/openerp/ rel=tag>openerp</a></li></ul></div></footer></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Linux.cn Archive.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>